var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(i)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function c(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function u(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function d(t){let e;return u(t,(t=>e=t))(),e}function h(t,e,n){t.$$.on_destroy.push(u(e,n))}function f(t,e,n,i){if(t){const r=p(t,e,n,i);return t[0](r)}}function p(t,e,i,r){return t[1]&&r?n(i.ctx.slice(),t[1](r(e))):i.ctx}function g(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|r[i];return t}return e.dirty|r}return e.dirty}function m(t,e,n,i,r,o){if(r){const s=p(e,n,i,o);t.p(s,r)}}function v(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function y(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function b(t){return null==t?"":t}function _(t,e,n){return t.set(n),e}function w(e){return e&&s(e.destroy)?e.destroy:t}const x="undefined"!=typeof window;let k=x?()=>window.performance.now():()=>Date.now(),$=x?t=>requestAnimationFrame(t):t;const S=new Set;function C(t){S.forEach((e=>{e.c(t)||(S.delete(e),e.f())})),0!==S.size&&$(C)}function M(t){let e;return 0===S.size&&$(C),{promise:new Promise((n=>{S.add(e={c:t,f:n})})),abort(){S.delete(e)}}}function O(t,e){t.appendChild(e)}function D(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function T(t){const e=I("style");return function(t,e){O(t.head||t,e)}(D(t),e),e}function L(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function E(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function P(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function z(){return B(" ")}function F(){return B("")}function R(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function N(t){return function(e){return e.preventDefault(),t.call(this,e)}}function j(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function q(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function H(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:q(t,i,e[i])}function W(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:q(t,e,n)}function V(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function U(t,e){t.value=null==e?"":e}function G(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}let K;function Y(){if(void 0===K){K=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){K=!0}}return K}function J(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=I("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=Y();let r;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=R(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{r=R(n.contentWindow,"resize",e)}),O(t,n),()=>{(i||r&&n.contentWindow)&&r(),A(n)}}function X(t,e,n){t.classList[n?"add":"remove"](e)}function Z(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}class Q{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=I(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)L(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(A)}}const tt=new Set;let et,nt=0;function it(t,e,n,i,r,o,s,a=0){const l=16.666/i;let c="{\n";for(let t=0;t<=1;t+=l){const i=e+(n-e)*o(t);c+=100*t+`%{${s(i,1-i)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,h=D(t);tt.add(h);const f=h.__svelte_stylesheet||(h.__svelte_stylesheet=T(t).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${i}ms linear ${r}ms 1 both`,nt+=1,d}function rt(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-i.length;r&&(t.style.animation=i.join(", "),nt-=r,nt||$((()=>{nt||(tt.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),tt.clear())})))}function ot(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r="none"===i.transform?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,r)}}function st(t){et=t}function at(){if(!et)throw new Error("Function called outside component initialization");return et}function lt(t){at().$$.before_update.push(t)}function ct(t){at().$$.on_mount.push(t)}function ut(t){at().$$.after_update.push(t)}function dt(t){at().$$.on_destroy.push(t)}function ht(){const t=at();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=Z(e,n);i.slice().forEach((e=>{e.call(t,r)}))}}}function ft(t,e){at().$$.context.set(t,e)}function pt(t){return at().$$.context.get(t)}function gt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const mt=[],vt=[],yt=[],bt=[],_t=Promise.resolve();let wt=!1;function xt(){wt||(wt=!0,_t.then(Ot))}function kt(){return xt(),_t}function $t(t){yt.push(t)}function St(t){bt.push(t)}let Ct=!1;const Mt=new Set;function Ot(){if(!Ct){Ct=!0;do{for(let t=0;t<mt.length;t+=1){const e=mt[t];st(e),Dt(e.$$)}for(st(null),mt.length=0;vt.length;)vt.pop()();for(let t=0;t<yt.length;t+=1){const e=yt[t];Mt.has(e)||(Mt.add(e),e())}yt.length=0}while(mt.length);for(;bt.length;)bt.pop()();wt=!1,Ct=!1,Mt.clear()}}function Dt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach($t)}}let Tt;function Lt(){return Tt||(Tt=Promise.resolve(),Tt.then((()=>{Tt=null}))),Tt}function At(t,e,n){t.dispatchEvent(Z(`${e?"intro":"outro"}${n}`))}const Et=new Set;let It;function Pt(){It={r:0,c:[],p:It}}function Bt(){It.r||o(It.c),It=It.p}function zt(t,e){t&&t.i&&(Et.delete(t),t.i(e))}function Ft(t,e,n,i){if(t&&t.o){if(Et.has(t))return;Et.add(t),It.c.push((()=>{Et.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const Rt={duration:0};function Nt(n,i,r){let o,a,l=i(n,r),c=!1,u=0;function d(){o&&rt(n,o)}function h(){const{delay:i=0,duration:r=300,easing:s=e,tick:h=t,css:f}=l||Rt;f&&(o=it(n,0,1,r,i,s,f,u++)),h(0,1);const p=k()+i,g=p+r;a&&a.abort(),c=!0,$t((()=>At(n,!0,"start"))),a=M((t=>{if(c){if(t>=g)return h(1,0),At(n,!0,"end"),d(),c=!1;if(t>=p){const e=s((t-p)/r);h(e,1-e)}}return c}))}let f=!1;return{start(){f||(f=!0,rt(n),s(l)?(l=l(),Lt().then(h)):h())},invalidate(){f=!1},end(){c&&(d(),c=!1)}}}function jt(n,i,r,a){let l=i(n,r),c=a?0:1,u=null,d=null,h=null;function f(){h&&rt(n,h)}function p(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(i){const{delay:r=0,duration:s=300,easing:a=e,tick:g=t,css:m}=l||Rt,v={start:k()+r,b:i};i||(v.group=It,It.r+=1),u||d?d=v:(m&&(f(),h=it(n,c,i,s,r,a,m)),i&&g(0,1),u=p(v,s),$t((()=>At(n,i,"start"))),M((t=>{if(d&&t>d.start&&(u=p(d,s),d=null,At(n,u.b,"start"),m&&(f(),h=it(n,c,u.b,u.duration,0,a,l.css))),u)if(t>=u.end)g(c=u.b,1-c),At(n,u.b,"end"),d||(u.b?f():--u.group.r||o(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*a(e/u.duration),g(c,1-c)}return!(!u&&!d)})))}return{run(t){s(l)?Lt().then((()=>{l=l(),g(t)})):g(t)},end(){f(),u=d=null}}}function qt(t,e){const n=e.token={};function i(t,i,r,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==r&&(s=s.slice(),s[r]=o);const a=t&&(e.current=t)(s);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==i&&t&&(Pt(),Ft(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Bt())})):e.block.d(1),a.c(),zt(a,1),a.m(e.mount(),e.anchor),l=!0),e.block=a,e.blocks&&(e.blocks[i]=a),l&&Ot()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=at();if(t.then((t=>{st(n),i(e.then,1,e.value,t),st(null)}),(t=>{if(st(n),i(e.catch,2,e.error,t),st(null),!e.hasCatch)throw t})),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}var r}function Ht(t,e,n){const i=e.slice(),{resolved:r}=t;t.current===t.then&&(i[t.value]=r),t.current===t.catch&&(i[t.error]=r),t.block.p(i,n)}const Wt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Vt(t,e){Ft(t,1,1,(()=>{e.delete(t.key)}))}function Ut(t,e){t.f(),Vt(t,e)}function Gt(t,e,n,i,r,o,s,a,l,c,u,d){let h=t.length,f=o.length,p=h;const g={};for(;p--;)g[t[p].key]=p;const m=[],v=new Map,y=new Map;for(p=f;p--;){const t=d(r,o,p),a=n(t);let l=s.get(a);l?i&&l.p(t,e):(l=c(a,t),l.c()),v.set(a,m[p]=l),a in g&&y.set(a,Math.abs(p-g[a]))}const b=new Set,_=new Set;function w(t){zt(t,1),t.m(a,u),s.set(t.key,t),u=t.first,f--}for(;h&&f;){const e=m[f-1],n=t[h-1],i=e.key,r=n.key;e===n?(u=e.first,h--,f--):v.has(r)?!s.has(i)||b.has(i)?w(e):_.has(r)?h--:y.get(i)>y.get(r)?(_.add(i),w(e)):(b.add(r),h--):(l(n,s),h--)}for(;h--;){const e=t[h];v.has(e.key)||l(e,s)}for(;f;)w(m[f-1]);return m}function Kt(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const t in s)t in a||(i[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[o]=a}else for(const t in s)r[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function Yt(t){return"object"==typeof t&&null!==t?t:{}}function Jt(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Xt(t){t&&t.c()}function Zt(t,e,n,r){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=t.$$;a&&a.m(e,n),r||$t((()=>{const e=l.map(i).filter(s);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach($t)}function Qt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,n,i,s,a,l,c,u=[-1]){const d=et;st(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:n.context||[]),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(h.root);let f=!1;if(h.ctx=i?i(e,n.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),f&&function(t,e){-1===t.$$.dirty[0]&&(mt.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),f=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(A)}else h.fragment&&h.fragment.c();n.intro&&zt(e.$$.fragment),Zt(e,n.target,n.anchor,n.customElement),Ot()}st(d)}class ee{$destroy(){Qt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ne(t){if(!t)throw Error("Parameter args is required");if(!t.component==!t.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(t.component&&(t.asyncComponent=()=>Promise.resolve(t.component)),"function"!=typeof t.asyncComponent)throw Error("Parameter asyncComponent must be a function");if(t.conditions){Array.isArray(t.conditions)||(t.conditions=[t.conditions]);for(let e=0;e<t.conditions.length;e++)if(!t.conditions[e]||"function"!=typeof t.conditions[e])throw Error("Invalid parameter conditions["+e+"]")}t.loadingComponent&&(t.asyncComponent.loading=t.loadingComponent,t.asyncComponent.loadingParams=t.loadingParams||void 0);return{component:t.asyncComponent,userData:t.userData,conditions:t.conditions&&t.conditions.length?t.conditions:void 0,props:t.props&&Object.keys(t.props).length?t.props:{},_sveltesparouter:!0}}const ie=[];function re(t,e){return{subscribe:oe(t,e).subscribe}}function oe(e,n=t){let i;const r=new Set;function o(t){if(a(e,t)&&(e=t,i)){const t=!ie.length;for(const t of r)t[1](),ie.push(t,e);if(t){for(let t=0;t<ie.length;t+=2)ie[t][0](ie[t+1]);ie.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const l=[s,a];return r.add(l),1===r.size&&(i=n(o)||t),s(e),()=>{r.delete(l),0===r.size&&(i(),i=null)}}}}function se(e,n,i){const r=!Array.isArray(e),a=r?[e]:e,l=n.length<2;return re(i,(e=>{let i=!1;const c=[];let d=0,h=t;const f=()=>{if(d)return;h();const i=n(r?c[0]:c,e);l?e(i):h=s(i)?i:t},p=a.map(((t,e)=>u(t,(t=>{c[e]=t,d&=~(1<<e),i&&f()}),(()=>{d|=1<<e}))));return i=!0,f(),function(){o(p),h()}}))}function ae(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,r,o,s=[],a="",l=t.split("/");for(l[0]||l.shift();r=l.shift();)"*"===(n=r[0])?(s.push("wild"),a+="/(.*)"):":"===n?(i=r.indexOf("?",1),o=r.indexOf(".",1),s.push(r.substring(1,~i?i:~o?o:r.length)),a+=~i&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~i?"?":"")+"\\"+r.substring(o))):a+="/"+r;return{keys:s,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}function le(t){let e,i,r;const o=[t[2]];var s=t[0];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return s&&(e=new s(a()),e.$on("routeEvent",t[7])),{c(){e&&Xt(e.$$.fragment),i=F()},m(t,n){e&&Zt(e,t,n),L(t,i,n),r=!0},p(t,n){const r=4&n?Kt(o,[Yt(t[2])]):{};if(s!==(s=t[0])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(e=new s(a()),e.$on("routeEvent",t[7]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,i.parentNode,i)):e=null}else s&&e.$set(r)},i(t){r||(e&&zt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&A(i),e&&Qt(e,t)}}}function ce(t){let e,i,r;const o=[{params:t[1]},t[2]];var s=t[0];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return s&&(e=new s(a()),e.$on("routeEvent",t[6])),{c(){e&&Xt(e.$$.fragment),i=F()},m(t,n){e&&Zt(e,t,n),L(t,i,n),r=!0},p(t,n){const r=6&n?Kt(o,[2&n&&{params:t[1]},4&n&&Yt(t[2])]):{};if(s!==(s=t[0])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(e=new s(a()),e.$on("routeEvent",t[6]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,i.parentNode,i)):e=null}else s&&e.$set(r)},i(t){r||(e&&zt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&A(i),e&&Qt(e,t)}}}function ue(t){let e,n,i,r;const o=[ce,le],s=[];function a(t,e){return t[1]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),i=F()},m(t,n){s[e].m(t,n),L(t,i,n),r=!0},p(t,[r]){let l=e;e=a(t),e===l?s[e].p(t,r):(Pt(),Ft(s[l],1,1,(()=>{s[l]=null})),Bt(),n=s[e],n?n.p(t,r):(n=s[e]=o[e](t),n.c()),zt(n,1),n.m(i.parentNode,i))},i(t){r||(zt(n),r=!0)},o(t){Ft(n),r=!1},d(t){s[e].d(t),t&&A(i)}}}function de(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let i="";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const he=re(null,(function(t){t(de());const e=()=>{t(de())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}})),fe=se(he,(t=>t.location));se(he,(t=>t.querystring));const pe=oe(void 0);async function ge(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await kt();const e=("#"==t.charAt(0)?"":"#")+t;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function me(t,e){if(e=ye(e),!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');return ve(t,e),{update(e){e=ye(e),ve(t,e)}}}function ve(t,e){let n=e.href||t.getAttribute("href");if(n&&"/"==n.charAt(0))n="#"+n;else if(!n||n.length<2||"#/"!=n.slice(0,2))throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",(t=>{t.preventDefault(),e.disabled||function(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=t}(t.currentTarget.getAttribute("href"))}))}function ye(t){return t&&"string"==typeof t?{href:t}:t||{}}function be(t,e,n){let{routes:i={}}=e,{prefix:r=""}=e,{restoreScrollState:o=!1}=e;class s{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:i}=ae(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=i}match(t){if(r)if("string"==typeof r){if(!t.startsWith(r))return null;t=t.substr(r.length)||"/"}else if(r instanceof RegExp){const e=t.match(r);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let i=0;for(;i<this._keys.length;){try{n[this._keys[i]]=decodeURIComponent(e[i+1]||"")||null}catch(t){n[this._keys[i]]=null}i++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const a=[];i instanceof Map?i.forEach(((t,e)=>{a.push(new s(e,t))})):Object.keys(i).forEach((t=>{a.push(new s(t,i[t]))}));let l=null,c=null,u={};const d=ht();async function h(t,e){await kt(),d(t,e)}let f=null,p=null;o&&(p=t=>{f=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",p),ut((()=>{f?window.scrollTo(f.__svelte_spa_router_scrollX,f.__svelte_spa_router_scrollY):window.scrollTo(0,0)})));let g=null,m=null;const v=he.subscribe((async t=>{g=t;let e=0;for(;e<a.length;){const i=a[e].match(t.location);if(!i){e++;continue}const r={route:a[e].path,location:t.location,querystring:t.querystring,userData:a[e].userData,params:i&&"object"==typeof i&&Object.keys(i).length?i:null};if(!await a[e].checkConditions(r))return n(0,l=null),m=null,void h("conditionsFailed",r);h("routeLoading",Object.assign({},r));const o=a[e].component;if(m!=o){o.loading?(n(0,l=o.loading),m=o,n(1,c=o.loadingParams),n(2,u={}),h("routeLoaded",Object.assign({},r,{component:l,name:l.name,params:c}))):(n(0,l=null),m=null);const e=await o();if(t!=g)return;n(0,l=e&&e.default||e),m=o}return i&&"object"==typeof i&&Object.keys(i).length?n(1,c=i):n(1,c=null),n(2,u=a[e].props),void h("routeLoaded",Object.assign({},r,{component:l,name:l.name,params:c})).then((()=>{pe.set(c)}))}n(0,l=null),m=null,pe.set(void 0)}));return dt((()=>{v(),p&&window.removeEventListener("popstate",p)})),t.$$set=t=>{"routes"in t&&n(3,i=t.routes),"prefix"in t&&n(4,r=t.prefix),"restoreScrollState"in t&&n(5,o=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[l,c,u,i,r,o,function(e){gt.call(this,t,e)},function(e){gt.call(this,t,e)}]}class _e extends ee{constructor(t){super(),te(this,t,be,ue,a,{routes:3,prefix:4,restoreScrollState:5})}}const we=oe();async function xe(t,e){const n=we.subscribe((e=>{e&&(t.dispatchEvent(new CustomEvent("notify",{detail:e})),we.set())}));await kt();try{const t=JSON.parse(sessionStorage.getItem(e));for(const e of t)we.set(e)}catch(t){}finally{try{sessionStorage.removeItem(e)}catch(t){}}return{destroy(){n()}}}function ke(t,e,n){const i=t.slice();return i[9]=e[n],i}function $e(t){let e,n,i;function r(){return t[7](t[9])}return{c(){e=I("button"),e.textContent="✕",q(e,"class","close svelte-vlqkf6")},m(t,o){L(t,e,o),n||(i=R(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&A(e),n=!1,i()}}}function Se(n,i){let r,a,l,c,u,d,h,f,p,g,m,v=i[9].message+"",y=i[9].persist&&$e(i);function b(){return i[8](i[9])}return{key:n,first:null,c(){r=I("li"),y&&y.c(),a=z(),l=I("div"),c=B(v),u=z(),d=I("div"),h=z(),q(l,"class","content svelte-vlqkf6"),q(d,"class","progress svelte-vlqkf6"),G(d,"animation-duration",i[9].timeout+"ms"),q(r,"class","toast svelte-vlqkf6"),G(r,"background",i[9].background),this.first=r},m(t,e){L(t,r,e),y&&y.m(r,null),O(r,a),O(r,l),O(l,c),O(r,u),O(r,d),O(r,h),p=!0,g||(m=R(d,"animationend",b),g=!0)},p(t,e){(i=t)[9].persist?y?y.p(i,e):(y=$e(i),y.c(),y.m(r,a)):y&&(y.d(1),y=null),(!p||2&e)&&v!==(v=i[9].message+"")&&V(c,v),(!p||2&e)&&G(d,"animation-duration",i[9].timeout+"ms"),(!p||2&e)&&G(r,"background",i[9].background)},i(t){p||(f&&f.end(1),p=!0)},o(n){f=function(n,i,r){let a,l=i(n,r),c=!0;const u=It;function d(){const{delay:i=0,duration:r=300,easing:s=e,tick:d=t,css:h}=l||Rt;h&&(a=it(n,1,0,r,i,s,h));const f=k()+i,p=f+r;$t((()=>At(n,!1,"start"))),M((t=>{if(c){if(t>=p)return d(0,1),At(n,!1,"end"),--u.r||o(u.c),!1;if(t>=f){const e=s((t-f)/r);d(1-e,e)}}return c}))}return u.r+=1,s(l)?Lt().then((()=>{l=l(),d()})):d(),{end(t){t&&l.tick&&l.tick(1,0),c&&(a&&rt(n,a),c=!1)}}}(r,Me,{}),p=!1},d(t){t&&A(r),y&&y.d(),t&&f&&f.end(),g=!1,m()}}}function Ce(t){let e,n,i,r,a,l=[],c=new Map,u=t[1];const d=t=>t[9].id;for(let e=0;e<u.length;e+=1){let n=ke(t,u,e),i=d(n);c.set(i,l[e]=Se(i,n))}return{c(){e=I("ul");for(let t=0;t<l.length;t+=1)l[t].c();q(e,"class","toasts svelte-vlqkf6")},m(o,s){L(o,e,s);for(let t=0;t<l.length;t+=1)l[t].m(e,null);i=!0,r||(a=[w(n=xe.call(null,e,t[0])),R(e,"notify",t[2])],r=!0)},p(t,[i]){26&i&&(u=t[1],Pt(),l=Gt(l,i,d,1,t,u,c,e,Vt,Se,null,ke),Bt()),n&&s(n.update)&&1&i&&n.update.call(null,t[0])},i(t){if(!i){for(let t=0;t<u.length;t+=1)zt(l[t]);i=!0}},o(t){for(let t=0;t<l.length;t+=1)Ft(l[t]);i=!1},d(t){t&&A(e);for(let t=0;t<l.length;t+=1)l[t].d();r=!1,o(a)}}}function Me(t,{delay:e=0,duration:n=1e3}){return{delay:e,duration:n,css:t=>`opacity: ${1*(t-.7)}; transform-origin: top right;`}}function Oe(t,e,n){let{themes:i={danger:"#bb2124",success:"#22bb33",warning:"#f0ad4e",info:"#5bc0de",default:"#aaaaaa"}}=e,{timeout:r=3e3}=e,{sessionKey:o="byk-toasts"}=e,s=[];function a(t){!t.persist&&l(t.id)}function l(t){const e=e=>e.id!==t;n(1,s=s.filter(e));try{sessionStorage.setItem(o,JSON.stringify(JSON.parse(sessionStorage.getItem(o)||"[]").filter(e)))}catch(t){}}return t.$$set=t=>{"themes"in t&&n(5,i=t.themes),"timeout"in t&&n(6,r=t.timeout),"sessionKey"in t&&n(0,o=t.sessionKey)},[o,s,function({detail:t}){const{message:e,type:a,options:l={}}=t,c=i[a]||i.default,u=l.persist,d=l.persist?0:l.timeout||r,h=Math.random().toString(36).replace(/[^a-z]+/g,"");try{sessionStorage.setItem(o,JSON.stringify([...JSON.parse(sessionStorage.getItem(o)||"[]"),{...t,id:h}]))}catch(t){}n(1,s=[{id:h,message:e,background:c,persist:u,timeout:d,width:"100%"},...s])},a,l,i,r,t=>l(t.id),t=>a(t)]}class De extends ee{constructor(t){super(),te(this,t,Oe,Ce,a,{themes:5,timeout:6,sessionKey:0})}}function Te(t){return"number"==typeof t?{timeout:t}:t}function Le(t,e="default",n){we.set({type:e,message:t,options:Te(n)})}function Ae(t,e){Le(t,"danger",e)}function Ee(t,e){Le(t,"warning",e)}function Ie(t,e){Le(t,"info",e)}function Pe(t,e){Le(t,"success",e)}const Be=[];let ze;function Fe(t){const e=t.pattern.test(ze);Re(t,t.className,e),Re(t,t.inactiveClassName,!e)}function Re(t,e,n){(e||"").split(" ").forEach((e=>{e&&(t.node.classList.remove(e),n&&t.node.classList.add(e))}))}function Ne(t,e){if(!(e=e&&("string"==typeof e||"object"==typeof e&&e instanceof RegExp)?{path:e}:e||{}).path&&t.hasAttribute("href")&&(e.path=t.getAttribute("href"),e.path&&e.path.length>1&&"#"==e.path.charAt(0)&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||"string"==typeof e.path&&(e.path.length<1||"/"!=e.path.charAt(0)&&"*"!=e.path.charAt(0)))throw Error('Invalid value for "path" argument');const{pattern:n}="string"==typeof e.path?ae(e.path):{pattern:e.path},i={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return Be.push(i),Fe(i),{destroy(){Be.splice(Be.indexOf(i),1)}}}he.subscribe((t=>{ze=t.location+(t.querystring?"?"+t.querystring:""),Be.map(Fe)}));var je="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function qe(){throw new Error("setTimeout has not been defined")}function He(){throw new Error("clearTimeout has not been defined")}var We=qe,Ve=He;function Ue(t){if(We===setTimeout)return setTimeout(t,0);if((We===qe||!We)&&setTimeout)return We=setTimeout,setTimeout(t,0);try{return We(t,0)}catch(e){try{return We.call(null,t,0)}catch(e){return We.call(this,t,0)}}}"function"==typeof je.setTimeout&&(We=setTimeout),"function"==typeof je.clearTimeout&&(Ve=clearTimeout);var Ge,Ke=[],Ye=!1,Je=-1;function Xe(){Ye&&Ge&&(Ye=!1,Ge.length?Ke=Ge.concat(Ke):Je=-1,Ke.length&&Ze())}function Ze(){if(!Ye){var t=Ue(Xe);Ye=!0;for(var e=Ke.length;e;){for(Ge=Ke,Ke=[];++Je<e;)Ge&&Ge[Je].run();Je=-1,e=Ke.length}Ge=null,Ye=!1,function(t){if(Ve===clearTimeout)return clearTimeout(t);if((Ve===He||!Ve)&&clearTimeout)return Ve=clearTimeout,clearTimeout(t);try{Ve(t)}catch(e){try{return Ve.call(null,t)}catch(e){return Ve.call(this,t)}}}(t)}}function Qe(t,e){this.fun=t,this.array=e}Qe.prototype.run=function(){this.fun.apply(null,this.array)};function tn(){}var en=tn,nn=tn,rn=tn,on=tn,sn=tn,an=tn,ln=tn;var cn=je.performance||{},un=cn.now||cn.mozNow||cn.msNow||cn.oNow||cn.webkitNow||function(){return(new Date).getTime()};var dn=new Date;var hn={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ke.push(new Qe(t,e)),1!==Ke.length||Ye||Ue(Ze)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:en,addListener:nn,once:rn,off:on,removeListener:sn,removeAllListeners:an,emit:ln,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*un.call(cn),n=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(n-=t[0],(i-=t[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-dn)/1e3}},fn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gn(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}var mn=gn(Object.freeze({__proto__:null,default:{}})),vn={test:function(){return"function"==typeof fn.queueMicrotask},install:function(t){return function(){fn.queueMicrotask(t)}}},yn={},bn=fn.MutationObserver||fn.WebKitMutationObserver;yn.test=function(){return bn},yn.install=function(t){var e=0,n=new bn(t),i=fn.document.createTextNode("");return n.observe(i,{characterData:!0}),function(){i.data=e=++e%2}};var _n,wn,xn,kn={test:function(){return!fn.setImmediate&&void 0!==fn.MessageChannel},install:function(t){var e=new fn.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}},$n={test:function(){return"document"in fn&&"onreadystatechange"in fn.document.createElement("script")},install:function(t){return function(){var e=fn.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},fn.document.documentElement.appendChild(e),t}}},Sn={test:function(){return!0},install:function(t){return function(){setTimeout(t,0)}}},Cn=[mn,vn,yn,kn,$n,Sn],Mn=-1,On=[],Dn=!1;function Tn(){_n&&wn&&(_n=!1,wn.length?On=wn.concat(On):Mn=-1,On.length&&Ln())}function Ln(){if(!_n){Dn=!1,_n=!0;for(var t=On.length,e=setTimeout(Tn);t;){for(wn=On,On=[];wn&&++Mn<t;)wn[Mn].run();Mn=-1,t=On.length}wn=null,Mn=-1,_n=!1,clearTimeout(e)}}for(var An=-1,En=Cn.length;++An<En;)if(Cn[An]&&Cn[An].test&&Cn[An].test()){xn=Cn[An].install(Ln);break}function In(t,e){this.fun=t,this.array=e}In.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}};var Pn=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];On.push(new In(t,e)),Dn||_n||(Dn=!0,xn())};var Bn={},zn={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=function(){if(!Rn)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rn(Nn)};const Rn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Nn=new Uint8Array(16);var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.default=void 0;const qn=[];for(let t=0;t<256;++t)qn.push((t+256).toString(16).substr(1));var Hn=function(t,e){const n=e||0,i=qn;return(i[t[n+0]]+i[t[n+1]]+i[t[n+2]]+i[t[n+3]]+"-"+i[t[n+4]]+i[t[n+5]]+"-"+i[t[n+6]]+i[t[n+7]]+"-"+i[t[n+8]]+i[t[n+9]]+"-"+i[t[n+10]]+i[t[n+11]]+i[t[n+12]]+i[t[n+13]]+i[t[n+14]]+i[t[n+15]]).toLowerCase()};jn.default=Hn,Object.defineProperty(zn,"__esModule",{value:!0}),zn.default=void 0;var Wn=Un(Fn),Vn=Un(jn);function Un(t){return t&&t.__esModule?t:{default:t}}let Gn,Kn,Yn=0,Jn=0;var Xn=function(t,e,n){let i=e&&n||0;const r=e||[];let o=(t=t||{}).node||Gn,s=void 0!==t.clockseq?t.clockseq:Kn;if(null==o||null==s){const e=t.random||(t.rng||Wn.default)();null==o&&(o=Gn=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==s&&(s=Kn=16383&(e[6]<<8|e[7]))}let a=void 0!==t.msecs?t.msecs:Date.now(),l=void 0!==t.nsecs?t.nsecs:Jn+1;const c=a-Yn+(l-Jn)/1e4;if(c<0&&void 0===t.clockseq&&(s=s+1&16383),(c<0||a>Yn)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Yn=a,Jn=l,Kn=s,a+=122192928e5;const u=(1e4*(268435455&a)+l)%4294967296;r[i++]=u>>>24&255,r[i++]=u>>>16&255,r[i++]=u>>>8&255,r[i++]=255&u;const d=a/4294967296*1e4&268435455;r[i++]=d>>>8&255,r[i++]=255&d,r[i++]=d>>>24&15|16,r[i++]=d>>>16&255,r[i++]=s>>>8|128,r[i++]=255&s;for(let t=0;t<6;++t)r[i+t]=o[t];return e||(0,Vn.default)(r)};zn.default=Xn;var Zn={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.default=function(t,e,n){function i(t,i,r,o){const s=r&&o||0;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof i&&(i=function(t){const e=[];return t.replace(/[a-fA-F0-9]{2}/g,(function(t){e.push(parseInt(t,16))})),e}(i)),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const a=n(i.concat(t));if(a[6]=15&a[6]|e,a[8]=63&a[8]|128,r)for(let t=0;t<16;++t)r[s+t]=a[t];return r||(0,ei.default)(a)}try{i.name=t}catch(t){}return i.DNS=ni,i.URL=ii,i},Qn.URL=Qn.DNS=void 0;var ti,ei=(ti=jn)&&ti.__esModule?ti:{default:ti};const ni="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Qn.DNS=ni;const ii="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Qn.URL=ii;var ri={};function oi(t){return 14+(t+64>>>9<<4)+1}function si(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function ai(t,e,n,i,r,o){return si((s=si(si(e,t),si(i,o)))<<(a=r)|s>>>32-a,n);var s,a}function li(t,e,n,i,r,o,s){return ai(e&n|~e&i,t,e,r,o,s)}function ci(t,e,n,i,r,o,s){return ai(e&i|n&~i,t,e,r,o,s)}function ui(t,e,n,i,r,o,s){return ai(e^n^i,t,e,r,o,s)}function di(t,e,n,i,r,o,s){return ai(n^(e|~i),t,e,r,o,s)}Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=void 0;var hi=function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,i="0123456789abcdef";for(let r=0;r<n;r+=8){const n=t[r>>5]>>>r%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[oi(e)-1]=e;let n=1732584193,i=-271733879,r=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const s=n,a=i,l=r,c=o;n=li(n,i,r,o,t[e],7,-680876936),o=li(o,n,i,r,t[e+1],12,-389564586),r=li(r,o,n,i,t[e+2],17,606105819),i=li(i,r,o,n,t[e+3],22,-1044525330),n=li(n,i,r,o,t[e+4],7,-176418897),o=li(o,n,i,r,t[e+5],12,1200080426),r=li(r,o,n,i,t[e+6],17,-1473231341),i=li(i,r,o,n,t[e+7],22,-45705983),n=li(n,i,r,o,t[e+8],7,1770035416),o=li(o,n,i,r,t[e+9],12,-1958414417),r=li(r,o,n,i,t[e+10],17,-42063),i=li(i,r,o,n,t[e+11],22,-1990404162),n=li(n,i,r,o,t[e+12],7,1804603682),o=li(o,n,i,r,t[e+13],12,-40341101),r=li(r,o,n,i,t[e+14],17,-1502002290),i=li(i,r,o,n,t[e+15],22,1236535329),n=ci(n,i,r,o,t[e+1],5,-165796510),o=ci(o,n,i,r,t[e+6],9,-1069501632),r=ci(r,o,n,i,t[e+11],14,643717713),i=ci(i,r,o,n,t[e],20,-373897302),n=ci(n,i,r,o,t[e+5],5,-701558691),o=ci(o,n,i,r,t[e+10],9,38016083),r=ci(r,o,n,i,t[e+15],14,-660478335),i=ci(i,r,o,n,t[e+4],20,-405537848),n=ci(n,i,r,o,t[e+9],5,568446438),o=ci(o,n,i,r,t[e+14],9,-1019803690),r=ci(r,o,n,i,t[e+3],14,-187363961),i=ci(i,r,o,n,t[e+8],20,1163531501),n=ci(n,i,r,o,t[e+13],5,-1444681467),o=ci(o,n,i,r,t[e+2],9,-51403784),r=ci(r,o,n,i,t[e+7],14,1735328473),i=ci(i,r,o,n,t[e+12],20,-1926607734),n=ui(n,i,r,o,t[e+5],4,-378558),o=ui(o,n,i,r,t[e+8],11,-2022574463),r=ui(r,o,n,i,t[e+11],16,1839030562),i=ui(i,r,o,n,t[e+14],23,-35309556),n=ui(n,i,r,o,t[e+1],4,-1530992060),o=ui(o,n,i,r,t[e+4],11,1272893353),r=ui(r,o,n,i,t[e+7],16,-155497632),i=ui(i,r,o,n,t[e+10],23,-1094730640),n=ui(n,i,r,o,t[e+13],4,681279174),o=ui(o,n,i,r,t[e],11,-358537222),r=ui(r,o,n,i,t[e+3],16,-722521979),i=ui(i,r,o,n,t[e+6],23,76029189),n=ui(n,i,r,o,t[e+9],4,-640364487),o=ui(o,n,i,r,t[e+12],11,-421815835),r=ui(r,o,n,i,t[e+15],16,530742520),i=ui(i,r,o,n,t[e+2],23,-995338651),n=di(n,i,r,o,t[e],6,-198630844),o=di(o,n,i,r,t[e+7],10,1126891415),r=di(r,o,n,i,t[e+14],15,-1416354905),i=di(i,r,o,n,t[e+5],21,-57434055),n=di(n,i,r,o,t[e+12],6,1700485571),o=di(o,n,i,r,t[e+3],10,-1894986606),r=di(r,o,n,i,t[e+10],15,-1051523),i=di(i,r,o,n,t[e+1],21,-2054922799),n=di(n,i,r,o,t[e+8],6,1873313359),o=di(o,n,i,r,t[e+15],10,-30611744),r=di(r,o,n,i,t[e+6],15,-1560198380),i=di(i,r,o,n,t[e+13],21,1309151649),n=di(n,i,r,o,t[e+4],6,-145523070),o=di(o,n,i,r,t[e+11],10,-1120210379),r=di(r,o,n,i,t[e+2],15,718787259),i=di(i,r,o,n,t[e+9],21,-343485551),n=si(n,s),i=si(i,a),r=si(r,l),o=si(o,c)}return[n,i,r,o]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(oi(e));for(let i=0;i<e;i+=8)n[i>>5]|=(255&t[i/8])<<i%32;return n}(t),8*t.length))};ri.default=hi,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.default=void 0;var fi=gi(Qn),pi=gi(ri);function gi(t){return t&&t.__esModule?t:{default:t}}var mi=(0,fi.default)("v3",48,pi.default);Zn.default=mi;var vi={};Object.defineProperty(vi,"__esModule",{value:!0}),vi.default=void 0;var yi=_i(Fn),bi=_i(jn);function _i(t){return t&&t.__esModule?t:{default:t}}var wi=function(t,e,n){"string"==typeof t&&(e="binary"===t?new Uint8Array(16):null,t=null);const i=(t=t||{}).random||(t.rng||yi.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){const t=n||0;for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,bi.default)(i)};vi.default=wi;var xi={},ki={};function $i(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function Si(t,e){return t<<e|t>>>32-e}Object.defineProperty(ki,"__esModule",{value:!0}),ki.default=void 0;var Ci=function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}t.push(128);const i=t.length/4+2,r=Math.ceil(i/16),o=new Array(r);for(let e=0;e<r;++e){const n=new Uint32Array(16);for(let i=0;i<16;++i)n[i]=t[64*e+4*i]<<24|t[64*e+4*i+1]<<16|t[64*e+4*i+2]<<8|t[64*e+4*i+3];o[e]=n}o[r-1][14]=8*(t.length-1)/Math.pow(2,32),o[r-1][14]=Math.floor(o[r-1][14]),o[r-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<r;++t){const i=new Uint32Array(80);for(let e=0;e<16;++e)i[e]=o[t][e];for(let t=16;t<80;++t)i[t]=Si(i[t-3]^i[t-8]^i[t-14]^i[t-16],1);let r=n[0],s=n[1],a=n[2],l=n[3],c=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),o=Si(r,5)+$i(n,s,a,l)+c+e[n]+i[t]>>>0;c=l,l=a,a=Si(s,30)>>>0,s=r,r=o}n[0]=n[0]+r>>>0,n[1]=n[1]+s>>>0,n[2]=n[2]+a>>>0,n[3]=n[3]+l>>>0,n[4]=n[4]+c>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};ki.default=Ci,Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=void 0;var Mi=Di(Qn),Oi=Di(ki);function Di(t){return t&&t.__esModule?t:{default:t}}var Ti=(0,Mi.default)("v5",80,Oi.default);xi.default=Ti,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return r.default}});var e=o(zn),n=o(Zn),i=o(vi),r=o(xi);function o(t){return t&&t.__esModule?t:{default:t}}}(Bn);var Li=pn(Bn);Li.v1,Li.v3;const Ai=Li.v4;Li.v5;var Ei={exports:{}};Ei.exports=function(t){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&r)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&i)+e[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&n)+e[3]-1044525330|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&r)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&i)+e[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&n)+e[7]-45705983|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&r)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&i)+e[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&n)+e[11]-1990404162|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&r)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&i)+e[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&n)+e[15]+1236535329|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[1]-165796510|0)<<5|n>>>27)+i|0)&r|i&~r)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&i|n&~i)+e[11]+643717713|0)<<14|r>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[5]-701558691|0)<<5|n>>>27)+i|0)&r|i&~r)+e[10]+38016083|0)<<9|o>>>23)+n|0)&i|n&~i)+e[15]-660478335|0)<<14|r>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[9]+568446438|0)<<5|n>>>27)+i|0)&r|i&~r)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&i|n&~i)+e[3]-187363961|0)<<14|r>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[13]-1444681467|0)<<5|n>>>27)+i|0)&r|i&~r)+e[2]-51403784|0)<<9|o>>>23)+n|0)&i|n&~i)+e[7]+1735328473|0)<<14|r>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[5]-378558|0)<<4|n>>>28)+i|0)^i^r)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^i)+e[11]+1839030562|0)<<16|r>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[1]-1530992060|0)<<4|n>>>28)+i|0)^i^r)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^i)+e[7]-155497632|0)<<16|r>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[13]+681279174|0)<<4|n>>>28)+i|0)^i^r)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^i)+e[3]-722521979|0)<<16|r>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[9]-640364487|0)<<4|n>>>28)+i|0)^i^r)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^i)+e[15]+530742520|0)<<16|r>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|i>>>9)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[0]-198630844|0)<<6|n>>>26)+i|0)|~r))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[14]-1416354905|0)<<15|r>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[12]+1700485571|0)<<6|n>>>26)+i|0)|~r))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[10]-1051523|0)<<15|r>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[8]+1873313359|0)<<6|n>>>26)+i|0)|~r))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[6]-1560198380|0)<<15|r>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[4]-145523070|0)<<6|n>>>26)+i|0)|~r))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[2]+718787259|0)<<15|r>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var e,r,o,s,a,l,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,i(t.substring(e-64,e)));for(r=(t=t.substring(e-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(u,o),e=0;e<16;e+=1)o[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),l=parseInt(s[1],16)||0,o[14]=a,o[15]=l,n(u,o),u}function s(t){var e,i,o,s,a,l,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,r(t.subarray(e-64,e)));for(i=(t=e-64<c?t.subarray(e-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)o[e>>2]|=t[e]<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(u,o),e=0;e<16;e+=1)o[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),l=parseInt(s[1],16)||0,o[14]=a,o[15]=l,n(u,o),u}function a(t){var n,i="";for(n=0;n<4;n+=1)i+=e[t>>8*n+4&15]+e[t>>8*n&15];return i}function l(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t,e){var n,i=t.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=t.charCodeAt(n);return e?o:r}function d(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,n){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),n?i:i.buffer}function f(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}return l(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,i){var r,o,s,a,l=this.byteLength,c=e(n,l),u=l;return i!==t&&(u=e(i,l)),c>u?new ArrayBuffer(0):(r=u-c,o=new ArrayBuffer(r),s=new Uint8Array(o),a=new Uint8Array(this,c,r),s.set(a),o)}}(),p.prototype.append=function(t){return this.appendBinary(c(t)),this},p.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,r=this._buff.length;for(e=64;e<=r;e+=64)n(this._hash,i(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},p.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(o,r),n=l(this._hash),t&&(n=f(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(t,e){var i,r,o,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,t),s=0;s<16;s+=1)t[s]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),o=parseInt(i[1],16)||0,t[14]=r,t[15]=o,n(this._hash,t)},p.hash=function(t,e){return p.hashBinary(c(t),e)},p.hashBinary=function(t,e){var n=l(o(t));return e?f(n):n},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(t){var e,i=h(this._buff.buffer,t,!0),o=i.length;for(this._length+=t.byteLength,e=64;e<=o;e+=64)n(this._hash,r(i.subarray(e-64,e)));return this._buff=e-64<o?new Uint8Array(i.buffer.slice(e-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i[e]<<(e%4<<3);return this._finish(o,r),n=l(this._hash),t&&(n=f(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var t=p.prototype.getState.call(this);return t.buff=d(t.buff),t},p.ArrayBuffer.prototype.setState=function(t){return t.buff=u(t.buff,!0),p.prototype.setState.call(this,t)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(t,e){var n=l(s(new Uint8Array(t)));return e?f(n):n},p}();var Ii=Ei.exports,Pi={};function Bi(t,e,n){var i=n[n.length-1];t===i.element&&(n.pop(),i=n[n.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(t);else if(o===e.length-2){r[e.pop()]=t}else e.push(t)}Pi.stringify=function(t){var e=[];e.push({obj:t});for(var n,i,r,o,s,a,l,c,u,d,h="";n=e.pop();)if(i=n.obj,h+=n.prefix||"",r=n.val||"")h+=r;else if("object"!=typeof i)h+=void 0===i?null:JSON.stringify(i);else if(null===i)h+="null";else if(Array.isArray(i)){for(e.push({val:"]"}),o=i.length-1;o>=0;o--)s=0===o?"":",",e.push({obj:i[o],prefix:s});e.push({val:"["})}else{for(l in a=[],i)i.hasOwnProperty(l)&&a.push(l);for(e.push({val:"}"}),o=a.length-1;o>=0;o--)u=i[c=a[o]],d=o>0?",":"",d+=JSON.stringify(c)+":",e.push({obj:u,prefix:d});e.push({val:"{"})}return h},Pi.parse=function(t){for(var e,n,i,r,o,s,a,l,c,u=[],d=[],h=0;;)if("}"!==(e=t[h++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":h+=3,Bi(null,u,d);break;case"t":h+=3,Bi(!0,u,d);break;case"f":h+=4,Bi(!1,u,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",h--;;){if(i=t[h++],!/[\d\.\-e\+]/.test(i)){h--;break}n+=i}Bi(parseFloat(n),u,d);break;case'"':for(r="",o=void 0,s=0;'"'!==(a=t[h++])||"\\"===o&&s%2==1;)r+=a,"\\"===(o=a)?s++:s=0;Bi(JSON.parse('"'+r+'"'),u,d);break;case"[":l={element:[],index:u.length},u.push(l.element),d.push(l);break;case"{":c={element:{},index:u.length},u.push(c.element),d.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===u.length)return u.pop();Bi(u.pop(),u,d)}};var zi=function(t){return function(){var e=arguments.length;if(e){for(var n=[],i=-1;++i<e;)n[i]=arguments[i];return t.call(this,n)}return t.call(this,[])}};var Fi={exports:{}};"function"==typeof Object.create?Fi.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Fi.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}};var Ri,Ni,ji=Fi.exports;function qi(){}function Hi(){Hi.init.call(this)}function Wi(t){return void 0===t._maxListeners?Hi.defaultMaxListeners:t._maxListeners}function Vi(t,e,n){if(e)t.call(n);else for(var i=t.length,r=Qi(t,i),o=0;o<i;++o)r[o].call(n)}function Ui(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,o=Qi(t,r),s=0;s<r;++s)o[s].call(n,i)}function Gi(t,e,n,i,r){if(e)t.call(n,i,r);else for(var o=t.length,s=Qi(t,o),a=0;a<o;++a)s[a].call(n,i,r)}function Ki(t,e,n,i,r,o){if(e)t.call(n,i,r,o);else for(var s=t.length,a=Qi(t,s),l=0;l<s;++l)a[l].call(n,i,r,o)}function Yi(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,o=Qi(t,r),s=0;s<r;++s)o[s].apply(n,i)}function Ji(t,e,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=new qi,t._eventsCount=0),s){if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(r=Wi(t))&&r>0&&s.length>r){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[e]=n,++t._eventsCount;return t}function Xi(t,e,n){var i=!1;function r(){t.removeListener(e,r),i||(i=!0,n.apply(t,arguments))}return r.listener=n,r}function Zi(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Qi(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function tr(t){return"$"+t}function er(t){return t.substring(1)}function nr(){this._store={}}function ir(t){if(this._store=new nr,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function rr(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),i=new Uint8Array(t);return n.set(i),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}qi.prototype=Object.create(null),Hi.EventEmitter=Hi,Hi.usingDomains=!1,Hi.prototype.domain=void 0,Hi.prototype._events=void 0,Hi.prototype._maxListeners=void 0,Hi.defaultMaxListeners=10,Hi.init=function(){this.domain=null,Hi.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new qi,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Hi.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Hi.prototype.getMaxListeners=function(){return Wi(this)},Hi.prototype.emit=function(t){var e,n,i,r,o,s,a,l="error"===t;if(s=this._events)l=l&&null==s.error;else if(!l)return!1;if(a=this.domain,l){if(e=arguments[1],!a){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=s[t]))return!1;var u="function"==typeof n;switch(i=arguments.length){case 1:Vi(n,u,this);break;case 2:Ui(n,u,this,arguments[1]);break;case 3:Gi(n,u,this,arguments[1],arguments[2]);break;case 4:Ki(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];Yi(n,u,this,r)}return!0},Hi.prototype.addListener=function(t,e){return Ji(this,t,e,!1)},Hi.prototype.on=Hi.prototype.addListener,Hi.prototype.prependListener=function(t,e){return Ji(this,t,e,!0)},Hi.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Xi(this,t,e)),this},Hi.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Xi(this,t,e)),this},Hi.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new qi:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new qi,this;delete i[t]}else!function(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}(n,r);i.removeListener&&this.emit("removeListener",t,s||e)}return this},Hi.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new qi,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new qi:delete n[t]),this;if(0===arguments.length){for(var i,r=Object.keys(n),o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new qi,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Hi.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},Hi.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Zi.call(t,e)},Hi.prototype.listenerCount=Zi,Hi.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},nr.prototype.get=function(t){var e=tr(t);return this._store[e]},nr.prototype.set=function(t,e){var n=tr(t);return this._store[n]=e,!0},nr.prototype.has=function(t){return tr(t)in this._store},nr.prototype.delete=function(t){var e=tr(t),n=e in this._store;return delete this._store[e],n},nr.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,i=e.length;n<i;n++){var r=e[n];t(this._store[r],r=er(r))}},Object.defineProperty(nr.prototype,"size",{get:function(){return Object.keys(this._store).length}}),ir.prototype.add=function(t){return this._store.set(t,!0)},ir.prototype.has=function(t){return this._store.has(t)},ir.prototype.forEach=function(t){this._store.forEach((function(e,n){t(n)}))},Object.defineProperty(ir.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(Ri=ir,Ni=nr):(Ri=Set,Ni=Map);var or=Function.prototype.toString,sr=or.call(Object);function ar(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=ar(t[n]);return e}if(t instanceof Date)return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return rr(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&or.call(n)==sr}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=ar(t[n]);void 0!==r&&(e[n]=r)}return e}function lr(t){var e=!1;return zi((function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}))}function cr(t){return zi((function(e){e=ar(e);var n=this,i="function"==typeof e[e.length-1]&&e.pop(),r=new Promise((function(i,r){var o;try{var s=lr((function(t,e){t?r(t):i(e)}));e.push(s),(o=t.apply(n,e))&&"function"==typeof o.then&&i(o)}catch(t){r(t)}}));return i&&r.then((function(t){i(null,t)}),i),r}))}function ur(t,e){return cr(zi((function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var i=this;return function(t,e,n){if(t.constructor.listeners("debug").length){for(var i=["api",t.name,e],r=0;r<n.length-1;r++)i.push(n[r]);t.constructor.emit("debug",i);var o=n[n.length-1];n[n.length-1]=function(n,i){var r=["api",t.name,e];r=r.concat(n?["error",n]:["success",i]),t.constructor.emit("debug",r),o(n,i)}}}(i,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise((function(e,r){i.taskqueue.addTask((function(o){o?r(o):e(i[t].apply(i,n))}))}))})))}function dr(t,e){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];o in t&&(n[o]=t[o])}return n}var hr;function fr(t){return t}function pr(t){return[{ok:t}]}function gr(t,e,n){var i=e.docs,r=new Ni;i.forEach((function(t){r.has(t.id)?r.get(t.id).push(t):r.set(t.id,[t])}));var o=r.size,s=0,a=new Array(o);function l(){var t;++s===o&&(t=[],a.forEach((function(e){e.docs.forEach((function(n){t.push({id:e.id,docs:[n]})}))})),n(null,{results:t}))}var c=[];r.forEach((function(t,e){c.push(e)}));var u=0;function d(){if(!(u>=c.length)){var n=Math.min(u+6,c.length),i=c.slice(u,n);!function(n,i){n.forEach((function(n,o){var s=i+o,c=r.get(n),u=dr(c[0],["atts_since","attachments"]);u.open_revs=c.map((function(t){return t.rev})),u.open_revs=u.open_revs.filter(fr);var h=fr;0===u.open_revs.length&&(delete u.open_revs,h=pr),["revs","attachments","binary","ajax","latest"].forEach((function(t){t in e&&(u[t]=e[t])})),t.get(n,u,(function(t,e){var i,r,o;i=t?[{error:t}]:h(e),r=n,o=i,a[s]={id:r,docs:o},l(),d()}))}))}(i,u),u+=i.length}}d()}try{localStorage.setItem("_pouch_check_localstorage",1),hr=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){hr=!1}function mr(){return hr}function vr(){Hi.call(this),this._listeners={},function(t){mr()&&addEventListener("storage",(function(e){t.emit(e.key)}))}(this)}function yr(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function br(t){var e=0;return t||(e=2e3),function(t,e){var n=6e5;return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=3e5,e=n),~~((e-t)*Math.random()+t)}(t,e)}function _r(t,e){yr("info","The above "+t+" is totally normal. "+e)}ji(vr,Hi),vr.prototype.addListener=function(t,e,n,i){if(!this._listeners[e]){var r=this,o=!1;this._listeners[e]=s,this.on(t,s)}function s(){if(r._listeners[e])if(o)o="waiting";else{o=!0;var t=dr(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(t).on("change",(function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,i.onChange(t))})).on("complete",(function(){"waiting"===o&&Pn(s),o=!1})).on("error",(function(){o=!1}))}}},vr.prototype.removeListener=function(t,e){e in this._listeners&&(Hi.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},vr.prototype.notifyLocalWindows=function(t){mr()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},vr.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var wr="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};function xr(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}ji(xr,Error),xr.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new xr(401,"unauthorized","Name or password is incorrect.");var kr=new xr(400,"bad_request","Missing JSON list of 'docs'"),$r=new xr(404,"not_found","missing"),Sr=new xr(409,"conflict","Document update conflict"),Cr=new xr(400,"bad_request","_id field must contain a string"),Mr=new xr(412,"missing_id","_id is required for puts"),Or=new xr(400,"bad_request","Only reserved document ids may start with underscore.");new xr(412,"precondition_failed","Database not open");var Dr=new xr(500,"unknown_error","Database encountered an unknown error"),Tr=new xr(500,"badarg","Some query argument is invalid");new xr(400,"invalid_request","Request was invalid");var Lr=new xr(400,"query_parse_error","Some query parameter is invalid"),Ar=new xr(500,"doc_validation","Bad special document member"),Er=new xr(400,"bad_request","Something wrong with the request"),Ir=new xr(400,"bad_request","Document must be a JSON object");new xr(404,"not_found","Database not found");var Pr=new xr(500,"indexed_db_went_bad","unknown");new xr(500,"web_sql_went_bad","unknown"),new xr(500,"levelDB_went_went_bad","unknown"),new xr(403,"forbidden","Forbidden by design doc validate_doc_update function");var Br=new xr(400,"bad_request","Invalid rev format");new xr(412,"file_exists","The database could not be created, the file already exists.");var zr=new xr(412,"missing_stub","A pre-existing attachment stub wasn't found");function Fr(t,e){function n(e){for(var n=Object.getOwnPropertyNames(t),i=0,r=n.length;i<r;i++)"function"!=typeof t[n[i]]&&(this[n[i]]=t[n[i]]);void 0!==e&&(this.reason=e)}return n.prototype=xr.prototype,new n(e)}function Rr(t){if("object"!=typeof t){var e=t;(t=Dr).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function Nr(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(i){i.doc||(i.doc={});var r=n&&function(t,e,n){try{return!t(e,n)}catch(t){var i="Filter function threw: "+t.toString();return Fr(Er,i)}}(t.filter,i.doc,e);if("object"==typeof r)return r;if(r)return!1;if(t.include_docs){if(!t.attachments)for(var o in i.doc._attachments)i.doc._attachments.hasOwnProperty(o)&&(i.doc._attachments[o].stub=!0)}else delete i.doc;return!0}}function jr(t){for(var e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n]);return e}function qr(t){var e;if(t?"string"!=typeof t?e=Fr(Cr):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=Fr(Or)):e=Fr(Mr),e)throw e}function Hr(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(yr("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function Wr(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function Vr(t){var e=Wr(t);return e?e.join("/"):null}new xr(413,"invalid_url","Provided URL is invalid");var Ur=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Gr="queryKey",Kr=/(?:^|&)([^&=]*)=?([^&]*)/g,Yr=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Jr(t){for(var e=Yr.exec(t),n={},i=14;i--;){var r=Ur[i],o=e[i]||"",s=-1!==["user","password"].indexOf(r);n[r]=s?decodeURIComponent(o):o}return n[Gr]={},n[Ur[12]].replace(Kr,(function(t,e,i){e&&(n[Gr][e]=i)})),n}function Xr(t,e){var n=[],i=[];for(var r in e)e.hasOwnProperty(r)&&(n.push(r),i.push(e[r]));return n.push(t),Function.apply(null,n).apply(null,i)}function Zr(t,e,n){return new Promise((function(i,r){t.get(e,(function(o,s){if(o){if(404!==o.status)return r(o);s={}}var a=s._rev,l=n(s);if(!l)return i({updated:!1,rev:a});l._id=e,l._rev=a,i(function(t,e,n){return t.put(e).then((function(t){return{updated:!0,rev:t.rev}}),(function(i){if(409!==i.status)throw i;return Zr(t,e._id,n)}))}(t,l,n))}))}))}var Qr=function(t){return atob(t)},to=function(t){return btoa(t)};function eo(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}function no(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function io(t,e){return eo([no(t)],{type:e})}function ro(t,e){return io(Qr(t),e)}function oo(t,e){var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(i)return e(n);e(function(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return e}(n))},i?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function so(t,e){oo(t,(function(t){e(t)}))}function ao(t,e){so(t,(function(t){e(to(t))}))}var lo=self.setImmediate||self.setTimeout;function co(t,e,n,i,r){(n>0||i<e.size)&&(e=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,i)),function(t,e){var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}(e,(function(e){t.append(e),r()}))}function uo(t,e,n,i,r){(n>0||i<e.length)&&(e=e.substring(n,i)),t.appendBinary(e),r()}function ho(t,e){var n="string"==typeof t,i=n?t.length:t.size,r=Math.min(32768,i),o=Math.ceil(i/r),s=0,a=n?new Ii:new Ii.ArrayBuffer,l=n?uo:co;function c(){lo(d)}function u(){var t=function(t){return to(t)}(a.end(!0));e(t),a.destroy()}function d(){var e=s*r,n=e+r;s++,l(a,t,e,n,s<o?c:u)}d()}function fo(t){return Ii.hash(t)}function po(t,e){var n=ar(t);return e?(delete n._rev_tree,fo(JSON.stringify(n))):Ai().replace(/-/g,"").toLowerCase()}var go=Ai;function mo(t){for(var e,n,i,r,o=t.rev_tree.slice();r=o.pop();){var s=r.ids,a=s[2],l=r.pos;if(a.length)for(var c=0,u=a.length;c<u;c++)o.push({pos:l+1,ids:a[c]});else{var d=!!s[1].deleted,h=s[0];e&&!(i!==d?i:n!==l?n<l:e<h)||(e=h,n=l,i=d)}}return n+"-"+e}function vo(t,e){for(var n,i=t.slice();n=i.pop();)for(var r=n.pos,o=n.ids,s=o[2],a=e(0===s.length,r,o[0],n.ctx,o[1]),l=0,c=s.length;l<c;l++)i.push({pos:r+1,ids:s[l],ctx:a})}function yo(t,e){return t.pos-e.pos}function bo(t){var e=[];vo(t,(function(t,n,i,r,o){t&&e.push({rev:n+"-"+i,pos:n,opts:o})})),e.sort(yo).reverse();for(var n=0,i=e.length;n<i;n++)delete e[n].pos;return e}function _o(t){for(var e=mo(t),n=bo(t.rev_tree),i=[],r=0,o=n.length;r<o;r++){var s=n[r];s.rev===e||s.opts.deleted||i.push(s.rev)}return i}function wo(t){for(var e,n=[],i=t.slice();e=i.pop();){var r=e.pos,o=e.ids,s=o[0],a=o[1],l=o[2],c=0===l.length,u=e.history?e.history.slice():[];u.push({id:s,opts:a}),c&&n.push({pos:r+1-u.length,ids:u});for(var d=0,h=l.length;d<h;d++)i.push({pos:r+1,ids:l[d],history:u})}return n.reverse()}function xo(t,e){return t.pos-e.pos}function ko(t,e,n){var i=function(t,e,n){for(var i,r=0,o=t.length;r<o;)n(t[i=r+o>>>1],e)<0?r=i+1:o=i;return r}(t,e,n);t.splice(i,0,e)}function $o(t,e){for(var n,i,r=e,o=t.length;r<o;r++){var s=t[r],a=[s.id,s.opts,[]];i?(i[2].push(a),i=a):n=i=a}return n}function So(t,e){return t[0]<e[0]?-1:1}function Co(t,e){for(var n=[{tree1:t,tree2:e}],i=!1;n.length>0;){var r=n.pop(),o=r.tree1,s=r.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var l=!1,c=0;c<o[2].length;c++)o[2][c][0]===s[2][a][0]&&(n.push({tree1:o[2][c],tree2:s[2][a]}),l=!0);l||(i="new_branch",ko(o[2],s[2][a],So))}else i="new_leaf",o[2][0]=s[2][a]}return{conflicts:i,tree:t}}function Mo(t,e,n){var i,r=[],o=!1,s=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,l=t.length;a<l;a++){var c=t[a];if(c.pos===e.pos&&c.ids[0]===e.ids[0])i=Co(c.ids,e.ids),r.push({pos:c.pos,ids:i.tree}),o=o||i.conflicts,s=!0;else if(!0!==n){var u=c.pos<e.pos?c:e,d=c.pos<e.pos?e:c,h=d.pos-u.pos,f=[],p=[];for(p.push({ids:u.ids,diff:h,parent:null,parentIdx:null});p.length>0;){var g=p.pop();if(0!==g.diff)for(var m=g.ids[2],v=0,y=m.length;v<y;v++)p.push({ids:m[v],diff:g.diff-1,parent:g.ids,parentIdx:v});else g.ids[0]===d.ids[0]&&f.push(g)}var b=f[0];b?(i=Co(b.ids,d.ids),b.parent[2][b.parentIdx]=i.tree,r.push({pos:u.pos,ids:u.ids}),o=o||i.conflicts,s=!0):r.push(c)}else r.push(c)}return s||r.push(e),r.sort(xo),{tree:r,conflicts:o||"internal_node"}}function Oo(t,e,n){var i=Mo(t,e),r=function(t,e){for(var n,i,r=wo(t),o=0,s=r.length;o<s;o++){var a,l=r[o],c=l.ids;if(c.length>e){n||(n={});var u=c.length-e;a={pos:l.pos+u,ids:$o(c,u)};for(var d=0;d<u;d++){var h=l.pos+d+"-"+c[d].id;n[h]=!0}}else a={pos:l.pos,ids:$o(c,0)};i=i?Mo(i,a,!0).tree:[a]}return n&&vo(i,(function(t,e,i){delete n[e+"-"+i]})),{tree:i,revs:n?Object.keys(n):[]}}(i.tree,n);return{tree:r.tree,stemmedRevs:r.revs,conflicts:i.conflicts}}function Do(t){return t.ids}function To(t,e){e||(e=mo(t));for(var n,i=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(Do);n=r.pop();){if(n[0]===i)return!!n[1].deleted;r=r.concat(n[2])}}function Lo(t){return/^_local/.test(t)}function Ao(t,e,n){Hi.call(this);var i=this;this.db=t;var r=(e=e?ar(e):{}).complete=lr((function(e,n){var r,s;e?(s="error",("listenerCount"in(r=i)?r.listenerCount(s):Hi.listenerCount(r,s))>0&&i.emit("error",e)):i.emit("complete",n),i.removeAllListeners(),t.removeListener("destroyed",o)}));function o(){i.cancel()}n&&(i.on("complete",(function(t){n(null,t)})),i.on("error",n)),t.once("destroyed",o),e.onChange=function(t,e,n){i.isCancelled||function(t,e,n,i){try{t.emit("change",e,n,i)}catch(t){yr("error",'Error in .on("change", function):',t)}}(i,t,e,n)};var s=new Promise((function(t,n){e.complete=function(e,i){e?n(e):t(i)}}));i.once("cancel",(function(){t.removeListener("destroyed",o),e.complete(null,{status:"cancelled"})})),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then((function(t){r(null,t)}),r),t.taskqueue.isReady?i.validateChanges(e):t.taskqueue.addTask((function(t){t?e.complete(t):i.isCancelled?i.emit("cancel"):i.validateChanges(e)}))}function Eo(t,e,n){var i=[{rev:t._rev}];"all_docs"===n.style&&(i=bo(e.rev_tree).map((function(t){return{rev:t.rev}})));var r={id:e.id,changes:i,doc:t};return To(e,t._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=_o(e),r.doc._conflicts.length||delete r.doc._conflicts),r}function Io(t,e){return t<e?-1:t>e?1:0}function Po(t,e){return function(n,i){n||i[0]&&i[0].error?((n=n||i[0]).docId=e,t(n)):t(null,i.length?i[0]:i)}}function Bo(t,e){var n=Io(t._id,e._id);return 0!==n?n:Io(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function zo(t){var e=t._compactionQueue[0],n=e.opts,i=e.callback;t.get("_local/compaction").catch((function(){return!1})).then((function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,(function(e,n){e?i(e):i(null,n),Pn((function(){t._compactionQueue.shift(),t._compactionQueue.length&&zo(t)}))}))}))}function Fo(){for(var t in Hi.call(this),Fo.prototype)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}function Ro(){this.isReady=!1,this.failed=!1,this.queue=[]}function No(t,e){if(!(this instanceof No))return new No(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),void 0===e.deterministic_revs&&(e.deterministic_revs=!0),this.__opts=e=ar(e),n.auto_compaction=e.auto_compaction,n.prefix=No.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var i=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var i=No.adapters,r=No.preferredAdapters,o=No.prefix,s=e.adapter;if(!s)for(var a=0;a<r.length&&"idb"===(s=r[a])&&"websql"in i&&mr()&&localStorage["_pouch__websqldb_"+o+t];++a)yr("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var l=i[s];return{name:l&&"use_prefix"in l&&!l.use_prefix?t:o+t,adapter:s}}((e.prefix||"")+t,e);if(e.name=i.name,e.adapter=e.adapter||i.adapter,n.name=t,n._adapter=e.adapter,No.emit("debug",["adapter","Picked adapter: ",e.adapter]),!No.adapters[e.adapter]||!No.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);Fo.call(n),n.taskqueue=new Ro,n.adapter=e.adapter,No.adapters[e.adapter].call(n,e,(function(t){if(t)return n.taskqueue.fail(t);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(n),n.emit("created",n),No.emit("created",n.name),n.taskqueue.ready(n)}))}ji(Ao,Hi),Ao.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Ao.prototype.validateChanges=function(t){var e=t.complete,n=this;No._changesFilterPlugin?No._changesFilterPlugin.validate(t,(function(i){if(i)return e(i);n.doChanges(t)})):n.doChanges(t)},Ao.prototype.doChanges=function(t){var e=this,n=t.complete;if("live"in(t=ar(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Eo,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(No._changesFilterPlugin){if(No._changesFilterPlugin.normalize(t),No._changesFilterPlugin.shouldFilter(this,t))return No._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach((function(e){e in t&&yr("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var r=e.cancel;e.cancel=zi((function(t){i.cancel(),r.apply(this,t)}))}}else this.db.info().then((function(i){e.isCancelled?n(null,{status:"cancelled"}):(t.since=i.update_seq,e.doChanges(t))}),n)},ji(Fo,Hi),Fo.prototype.post=ur("post",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(Fr(Ir));this.bulkDocs({docs:[t]},e,Po(n,t._id))})),Fo.prototype.put=ur("put",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(Fr(Ir));if(qr(t._id),Lo(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var i,r,o,s,a=this;function l(n){"function"==typeof a._put&&!1!==e.new_edits?a._put(t,e,n):a.bulkDocs({docs:[t]},e,Po(n,t._id))}e.force&&t._rev?(i=t._rev.split("-"),r=i[1],o=parseInt(i[0],10)+1,s=po(),t._revisions={start:o,ids:[s,r]},t._rev=o+"-"+s,e.new_edits=!1,l((function(e){var i=e?null:{ok:!0,id:t._id,rev:t._rev};n(e,i)}))):l(n)})),Fo.prototype.putAttachment=ur("putAttachment",(function(t,e,n,i,r){var o=this;function s(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:r,data:i,revpos:++n},o.put(t)}return"function"==typeof r&&(r=i,i=n,n=null),void 0===r&&(r=i,i=n,n=null),r||yr("warn","Attachment",e,"on document",t,"is missing content_type"),o.get(t).then((function(t){if(t._rev!==n)throw Fr(Sr);return s(t)}),(function(e){if(e.reason===$r.message)return s({_id:t});throw e}))})),Fo.prototype.removeAttachment=ur("removeAttachment",(function(t,e,n,i){var r=this;r.get(t,(function(t,o){if(t)i(t);else if(o._rev===n){if(!o._attachments)return i();delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,r.put(o,i)}else i(Fr(Sr))}))})),Fo.prototype.remove=ur("remove",(function(t,e,n,i){var r;"string"==typeof e?(r={_id:t,_rev:e},"function"==typeof n&&(i=n,n={})):(r=t,"function"==typeof e?(i=e,n={}):(i=n,n=e)),(n=n||{}).was_delete=!0;var o={_id:r._id,_rev:r._rev||n.rev,_deleted:!0};if(Lo(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(r,i);this.bulkDocs({docs:[o]},n,Po(i,o._id))})),Fo.prototype.revsDiff=ur("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={});var i=Object.keys(t);if(!i.length)return n(null,{});var r=0,o=new Ni;function s(t,e){o.has(t)||o.set(t,{missing:[]}),o.get(t).missing.push(e)}i.map((function(e){this._getRevisionTree(e,(function(a,l){if(a&&404===a.status&&"missing"===a.message)o.set(e,{missing:t[e]});else{if(a)return n(a);!function(e,n){var i=t[e].slice(0);vo(n,(function(t,n,r,o,a){var l=n+"-"+r,c=i.indexOf(l);-1!==c&&(i.splice(c,1),"available"!==a.status&&s(e,l))})),i.forEach((function(t){s(e,t)}))}(e,l)}if(++r===i.length){var c={};return o.forEach((function(t,e){c[e]=t})),n(null,c)}}))}),this)})),Fo.prototype.bulkGet=ur("bulkGet",(function(t,e){gr(this,t,e)})),Fo.prototype.compactDocument=ur("compactDocument",(function(t,e,n){var i=this;this._getRevisionTree(t,(function(r,o){if(r)return n(r);var s=function(t){var e={},n=[];return vo(t,(function(t,i,r,o){var s=i+"-"+r;return t&&(e[s]=0),void 0!==o&&n.push({from:o,to:s}),s})),n.reverse(),n.forEach((function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])})),e}(o),a=[],l=[];Object.keys(s).forEach((function(t){s[t]>e&&a.push(t)})),vo(o,(function(t,e,n,i,r){var o=e+"-"+n;"available"===r.status&&-1!==a.indexOf(o)&&l.push(o)})),i._doCompaction(t,l,n)}))})),Fo.prototype.compact=ur("compact",(function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&zo(n)})),Fo.prototype._compact=function(t,e){var n=this,i={return_docs:!1,last_seq:t.last_seq||0},r=[];n.changes(i).on("change",(function(t){r.push(n.compactDocument(t.id,0))})).on("complete",(function(t){var i=t.last_seq;Promise.all(r).then((function(){return Zr(n,"_local/compaction",(function(t){return(!t.last_seq||t.last_seq<i)&&(t.last_seq=i,t)}))})).then((function(){e(null,{ok:!0})})).catch(e)})).on("error",e)},Fo.prototype.get=ur("get",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(Fr(Cr));if(Lo(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var i=[],r=this;function o(){var o=[],s=i.length;if(!s)return n(null,o);i.forEach((function(i){r.get(t,{rev:i,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},(function(t,e){if(t)o.push({missing:i});else{for(var r,a=0,l=o.length;a<l;a++)if(o[a].ok&&o[a].ok._rev===e._rev){r=!0;break}r||o.push({ok:e})}--s||n(null,o)}))}))}if(!e.open_revs)return this._get(t,e,(function(i,o){if(i)return i.docId=t,n(i);var s=o.doc,a=o.metadata,l=o.ctx;if(e.conflicts){var c=_o(a);c.length&&(s._conflicts=c)}if(To(a,s._rev)&&(s._deleted=!0),e.revs||e.revs_info){for(var u=s._rev.split("-"),d=parseInt(u[0],10),h=u[1],f=wo(a.rev_tree),p=null,g=0;g<f.length;g++){var m=f[g],v=m.ids.map((function(t){return t.id})).indexOf(h);(v===d-1||!p&&-1!==v)&&(p=m)}if(!p)return(i=new Error("invalid rev tree")).docId=t,n(i);var y=p.ids.map((function(t){return t.id})).indexOf(s._rev.split("-")[1])+1,b=p.ids.length-y;if(p.ids.splice(y,b),p.ids.reverse(),e.revs&&(s._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map((function(t){return t.id}))}),e.revs_info){var _=p.pos+p.ids.length;s._revs_info=p.ids.map((function(t){return{rev:--_+"-"+t.id,status:t.opts.status}}))}}if(e.attachments&&s._attachments){var w=s._attachments,x=Object.keys(w).length;if(0===x)return n(null,s);Object.keys(w).forEach((function(t){this._getAttachment(s._id,t,w[t],{rev:s._rev,binary:e.binary,ctx:l},(function(e,i){var r=s._attachments[t];r.data=i,delete r.stub,delete r.length,--x||n(null,s)}))}),r)}else{if(s._attachments)for(var k in s._attachments)s._attachments.hasOwnProperty(k)&&(s._attachments[k].stub=!0);n(null,s)}}));if("all"===e.open_revs)this._getRevisionTree(t,(function(t,e){if(t)return n(t);i=bo(e).map((function(t){return t.rev})),o()}));else{if(!Array.isArray(e.open_revs))return n(Fr(Dr,"function_clause"));i=e.open_revs;for(var s=0;s<i.length;s++){var a=i[s];if("string"!=typeof a||!/^\d+-/.test(a))return n(Fr(Br))}o()}})),Fo.prototype.getAttachment=ur("getAttachment",(function(t,e,n,i){var r=this;n instanceof Function&&(i=n,n={}),this._get(t,n,(function(o,s){return o?i(o):s.doc._attachments&&s.doc._attachments[e]?(n.ctx=s.ctx,n.binary=!0,void r._getAttachment(t,e,s.doc._attachments[e],n,i)):i(Fr($r))}))})),Fo.prototype.allDocs=ur("allDocs",(function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(e){return e in t}))[0];if(n)return void e(Fr(Lr,"Query parameter `"+n+"` is not compatible with multi-get"));if(!Hr(this)&&(function(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)})),Fo.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).return_docs="return_docs"in t?t.return_docs:!t.live,new Ao(this,t,e)},Fo.prototype.close=ur("close",(function(t){return this._closed=!0,this.emit("closed"),this._close(t)})),Fo.prototype.info=ur("info",(function(t){var e=this;this._info((function(n,i){if(n)return t(n);i.db_name=i.db_name||e.name,i.auto_compaction=!(!e.auto_compaction||Hr(e)),i.adapter=e.adapter,t(null,i)}))})),Fo.prototype.id=ur("id",(function(t){return this._id(t)})),Fo.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Fo.prototype.bulkDocs=ur("bulkDocs",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(Fr(kr));for(var i=0;i<t.docs.length;++i)if("object"!=typeof t.docs[i]||Array.isArray(t.docs[i]))return n(Fr(Ir));var r;if(t.docs.forEach((function(t){t._attachments&&Object.keys(t._attachments).forEach((function(e){r=r||function(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(e),t._attachments[e].content_type||yr("warn","Attachment",e,"on document",t._id,"is missing content_type")}))})),r)return n(Fr(Er,r));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var o=this;e.new_edits||Hr(o)||t.docs.sort(Bo),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var i=Object.keys(n._attachments),r=0;r<i.length;r++){var o=i[r];n._attachments[o]=dr(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var s=t.docs.map((function(t){return t._id}));return this._bulkDocs(t,e,(function(t,i){if(t)return n(t);if(e.new_edits||(i=i.filter((function(t){return t.error}))),!Hr(o))for(var r=0,a=i.length;r<a;r++)i[r].id=i[r].id||s[r];n(null,i)}))})),Fo.prototype.registerDependentDatabase=ur("registerDependentDatabase",(function(t,e){var n=new this.constructor(t,this.__opts);Zr(this,"_local/_pouch_dependentDbs",(function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)})).then((function(){e(null,{db:n})})).catch(e)})),Fo.prototype.destroy=ur("destroy",(function(t,e){"function"==typeof t&&(e=t,t={});var n=this,i=!("use_prefix"in n)||n.use_prefix;function r(){n._destroy(t,(function(t,i){if(t)return e(t);n._destroyed=!0,n.emit("destroyed"),e(null,i||{ok:!0})}))}if(Hr(n))return r();n.get("_local/_pouch_dependentDbs",(function(t,o){if(t)return 404!==t.status?e(t):r();var s=o.dependentDbs,a=n.constructor,l=Object.keys(s).map((function(t){var e=i?t.replace(new RegExp("^"+a.prefix),""):t;return new a(e,n.__opts).destroy()}));Promise.all(l).then(r,e)}))})),Ro.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Ro.prototype.fail=function(t){this.failed=t,this.execute()},Ro.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Ro.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},ji(No,Fo);var jo="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},qo=fetch,Ho=Headers;No.adapters={},No.preferredAdapters=[],No.prefix="_pouch_";var Wo=new Hi;!function(t){Object.keys(Hi.prototype).forEach((function(e){"function"==typeof Hi.prototype[e]&&(t[e]=Wo[e].bind(Wo))}));var e=t._destructionListeners=new Ni;t.on("ref",(function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)})),t.on("unref",(function(t){if(e.has(t.name)){var n=e.get(t.name),i=n.indexOf(t);i<0||(n.splice(i,1),n.length>1?e.set(t.name,n):e.delete(t.name))}})),t.on("destroyed",(function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach((function(t){t.emit("destroyed",!0)}))}}))}(No),No.adapter=function(t,e,n){e.valid()&&(No.adapters[t]=e,n&&No.preferredAdapters.push(t))},No.plugin=function(t){if("function"==typeof t)t(No);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach((function(e){No.prototype[e]=t[e]}))}return this.__defaults&&(No.__defaults=wr({},this.__defaults)),No},No.defaults=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);n=n||{},t&&"object"==typeof t&&(t=(n=t).name,delete n.name),n=wr({},e.__defaults,n),No.call(this,t,n)}return ji(e,No),e.preferredAdapters=No.preferredAdapters.slice(),Object.keys(No).forEach((function(t){t in e||(e[t]=No[t])})),e.__defaults=wr({},this.__defaults,t),e},No.fetch=function(t,e){return qo(t,e)};function Vo(t,e){for(var n=t,i=0,r=e.length;i<r;i++){if(!(n=n[e[i]]))break}return n}function Uo(t){for(var e=[],n="",i=0,r=t.length;i<r;i++){var o=t[i];"."===o?i>0&&"\\"===t[i-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}var Go=["$or","$nor","$not"];function Ko(t){return Go.indexOf(t)>-1}function Yo(t){return Object.keys(t)[0]}function Jo(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];if("object"!=typeof i&&(i={$eq:i}),Ko(n))e[n]=i instanceof Array?i.map((function(t){return Jo([t])})):Jo([i]);else{var r=e[n]=e[n]||{};Object.keys(i).forEach((function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e}(t,e,r):"$lt"===t||"$lte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e}(t,e,r):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,r):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,r):void(r[t]=e)}))}}))})),e}function Xo(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=Jo(t[n].$and));var i=t[e];"object"==typeof i&&Xo(i)}return t}function Zo(t,e){for(var n in t){"$and"===n&&(e=!0);var i=t[n];"object"==typeof i&&(e=Zo(i,e))}return e}function Qo(t){var e=ar(t),n=!1;Zo(e,!1)&&("$and"in(e=Xo(e))&&(e=Jo(e.$and)),n=!0),["$or","$nor"].forEach((function(t){t in e&&e[t].forEach((function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];"object"==typeof r&&null!==r||(t[i]={$eq:r})}}))})),"$not"in e&&(e.$not=Jo([e.$not]));for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],s=e[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),e[o]=s}return e}var ts=-324;function es(t,e){if(t===e)return 0;t=ns(t),e=ns(e);var n=as(t),i=as(e);if(n-i!=0)return n-i;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=es(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;o<r;o++){var s=es(n[o],i[o]);if(0!==s)return s;if(0!==(s=es(t[n[o]],e[i[o]])))return s}return n.length===i.length?0:n.length>i.length?1:-1}(t,e)}function ns(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var i=0;i<n;i++)t[i]=ns(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var r in t={},e)if(e.hasOwnProperty(r)){var o=e[r];void 0!==o&&(t[r]=ns(o))}}}return t}function is(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),i=t<0,r=i?"0":"2",o=(s=((i?-n:n)-ts).toString(),a="0",l=3,function(t,e,n){for(var i="",r=n-t.length;i.length<r;)i+=e;return i}(s,a,l)+s);var s,a,l;r+=""+o;var c=Math.abs(parseFloat(e[0]));i&&(c=10-c);var u=c.toFixed(20);return u=u.replace(/\.?0+$/,""),r+=""+u}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),i=-1,r=n.length,o="";if(e)for(;++i<r;)o+=rs(n[i]);else for(;++i<r;){var s=n[i];o+=rs(s)+rs(t[s])}return o}return""}function rs(t){return as(t=ns(t))+""+is(t)+"\0"}function os(t,e){var n,i=e;if("1"===t[e])n=0,e++;else{var r="0"===t[e];e++;var o="",s=t.substring(e,e+3),a=parseInt(s,10)+ts;for(r&&(a=-a),e+=3;;){var l=t[e];if("\0"===l)break;o+=l,e++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),r&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:e-i}}function ss(t,e){var n=t.pop();if(e.length){var i=e[e.length-1];n===i.element&&(e.pop(),i=e[e.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(n);else if(o===t.length-2){r[t.pop()]=n}else t.push(n)}}function as(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function ls(t,e,n){if(t=t.filter((function(t){return cs(t.doc,e.selector,n)})),e.sort){var i=function(t){function e(e){return t.map((function(t){var n=Uo(Yo(t));return Vo(e,n)}))}return function(t,n){var i,r,o=es(e(t.doc),e(n.doc));return 0!==o?o:(i=t.doc._id)<(r=n.doc._id)?-1:i>r?1:0}}(e.sort);t=t.sort(i),"string"!=typeof e.sort[0]&&"desc"===function(t){return t[Yo(t)]}(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0,o=("limit"in e?e.limit:t.length)+r;t=t.slice(r,o)}return t}function cs(t,e,n){return n.every((function(n){var i=e[n],r=Uo(n),o=Vo(t,r);return Ko(n)?function(t,e,n){if("$or"===t)return e.some((function(t){return cs(n,t,Object.keys(t))}));if("$not"===t)return!cs(n,e,Object.keys(e));return!e.find((function(t){return cs(n,t,Object.keys(t))}))}(n,i,t):us(i,t,r,o)}))}function us(t,e,n,i){return!t||("object"==typeof t?Object.keys(t).every((function(r){var o=t[r];return function(t,e,n,i,r){if(!ps[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ps[t](e,n,i,r)}(r,e,o,n,i)})):t===i)}function ds(t){return null!=t}function hs(t){return void 0!==t}function fs(t,e){return e.some((function(e){return t instanceof Array?t.indexOf(e)>-1:t===e}))}var ps={$elemMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.some((function(t){return cs(t,e,Object.keys(e))})):i.some((function(i){return us(e,t,n,i)}))))},$allMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.every((function(t){return cs(t,e,Object.keys(e))})):i.every((function(i){return us(e,t,n,i)}))))},$eq:function(t,e,n,i){return hs(i)&&0===es(i,e)},$gte:function(t,e,n,i){return hs(i)&&es(i,e)>=0},$gt:function(t,e,n,i){return hs(i)&&es(i,e)>0},$lte:function(t,e,n,i){return hs(i)&&es(i,e)<=0},$lt:function(t,e,n,i){return hs(i)&&es(i,e)<0},$exists:function(t,e,n,i){return e?hs(i):!hs(i)},$mod:function(t,e,n,i){return ds(i)&&function(t,e){var n=e[0],i=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(i,10)!==i)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===i}(i,e)},$ne:function(t,e,n,i){return e.every((function(t){return 0!==es(i,t)}))},$in:function(t,e,n,i){return ds(i)&&fs(i,e)},$nin:function(t,e,n,i){return ds(i)&&!fs(i,e)},$size:function(t,e,n,i){return ds(i)&&function(t,e){return t.length===e}(i,e)},$all:function(t,e,n,i){return Array.isArray(i)&&function(t,e){return e.every((function(e){return t.indexOf(e)>-1}))}(i,e)},$regex:function(t,e,n,i){return ds(i)&&function(t,e){return new RegExp(e).test(t)}(i,e)},$type:function(t,e,n,i){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(i,e)}};function gs(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function ms(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=Vr(t.view):t.filter=Vr(t.filter))}function vs(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!Hr(t.db)}function ys(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var i=Fr(Er,"`view` filter parameter not found or invalid.");return n(i)}var r=Wr(e.view);t.db.get("_design/"+r[0],(function(i,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(Rr(i));var s=o&&o.views&&o.views[r[1]]&&o.views[r[1]].map;if(!s)return n(Fr($r,o.views?"missing json key: "+r[1]:"missing json key: views"));e.filter=Xr(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+s+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),t.doChanges(e)}))}else if(e.selector)e.filter=function(t){return function(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var n=ls([{doc:t}],{selector:e=Qo(e)},Object.keys(e));return n&&1===n.length}(t,e.selector)},t.doChanges(e);else{var o=Wr(e.filter);t.db.get("_design/"+o[0],(function(i,r){if(t.isCancelled)return n(null,{status:"cancelled"});if(i)return n(Rr(i));var s=r&&r.filters&&r.filters[o[1]];if(!s)return n(Fr($r,r&&r.filters?"missing json key: "+o[1]:"missing json key: filters"));e.filter=Xr('"use strict";\nreturn '+s+";",{}),t.doChanges(e)}))}}function bs(t){return t.reduce((function(t,e){return t[e]=!0,t}),{})}No.plugin((function(t){t._changesFilterPlugin={validate:gs,normalize:ms,shouldFilter:vs,filter:ys}})),No.version="7.2.2";var _s=bs(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ws=bs(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function xs(t){if(!/^\d+-/.test(t))return Fr(Br);var e=t.indexOf("-"),n=t.substring(0,e),i=t.substring(e+1);return{prefix:parseInt(n,10),id:i}}function ks(t,e,n){var i,r,o;n||(n={deterministic_revs:!0});var s={status:"available"};if(t._deleted&&(s.deleted=!0),e)if(t._id||(t._id=go()),r=po(t,n.deterministic_revs),t._rev){if((o=xs(t._rev)).error)return o;t._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,s,[]]]]}],i=o.prefix+1}else t._rev_tree=[{pos:1,ids:[r,s,[]]}],i=1;else if(t._revisions&&(t._rev_tree=function(t,e){for(var n=t.start-t.ids.length+1,i=t.ids,r=[i[0],e,[]],o=1,s=i.length;o<s;o++)r=[i[o],{status:"missing"},[r]];return[{pos:n,ids:r}]}(t._revisions,s),i=t._revisions.start,r=t._revisions.ids[0]),!t._rev_tree){if((o=xs(t._rev)).error)return o;i=o.prefix,r=o.id,t._rev_tree=[{pos:i,ids:[r,s,[]]}]}qr(t._id),t._rev=i+"-"+r;var a={metadata:{},data:{}};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var c="_"===l[0];if(c&&!_s[l]){var u=Fr(Ar,l);throw u.message=Ar.message+": "+l,u}c&&!ws[l]?a.metadata[l.slice(1)]=t[l]:a.data[l]=t[l]}return a}function $s(t,e,n){var i=function(t){try{return Qr(t)}catch(t){return{error:Fr(Tr,"Attachment is not a valid base64 string")}}}(t.data);if(i.error)return n(i.error);t.length=i.length,t.data="blob"===e?io(i,t.content_type):"base64"===e?to(i):i,ho(i,(function(e){t.digest="md5-"+e,n()}))}function Ss(t,e,n){if(t.stub)return n();"string"==typeof t.data?$s(t,e,n):function(t,e,n){ho(t.data,(function(i){t.digest="md5-"+i,t.length=t.data.size||t.data.length||0,"binary"===e?so(t.data,(function(e){t.data=e,n()})):"base64"===e?ao(t.data,(function(e){t.data=e,n()})):n()}))}(t,e,n)}function Cs(t,e,n,i,r,o,s,a){if(function(t,e){for(var n,i=t.slice(),r=e.split("-"),o=parseInt(r[0],10),s=r[1];n=i.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var a=n.ids[2],l=0,c=a.length;l<c;l++)i.push({pos:n.pos+1,ids:a[l]})}return!1}(e.rev_tree,n.metadata.rev)&&!a)return i[r]=n,o();var l=e.winningRev||mo(e),c="deleted"in e?e.deleted:To(e,l),u="deleted"in n.metadata?n.metadata.deleted:To(n.metadata),d=/^1-/.test(n.metadata.rev);if(c&&!u&&a&&d){var h=n.data;h._rev=l,h._id=n.metadata.id,n=ks(h,a)}var f=Oo(e.rev_tree,n.metadata.rev_tree[0],t);if(a&&(c&&u&&"new_leaf"!==f.conflicts||!c&&"new_leaf"!==f.conflicts||c&&!u&&"new_branch"===f.conflicts)){var p=Fr(Sr);return i[r]=p,o()}var g=n.metadata.rev;n.metadata.rev_tree=f.tree,n.stemmedRevs=f.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var m=mo(n.metadata),v=To(n.metadata,m),y=c===v?0:c<v?-1:1;s(n,m,v,g===m?v:To(n.metadata,g),!0,y,r,o)}function Ms(t,e,n,i,r,o,s,a,l){t=t||1e3;var c=a.new_edits,u=new Ni,d=0,h=e.length;function f(){++d===h&&l&&l()}e.forEach((function(t,e){if(t._id&&Lo(t._id)){var i=t._deleted?"_removeLocal":"_putLocal";n[i](t,{ctx:r},(function(t,n){o[e]=t||n,f()}))}else{var s=t.metadata.id;u.has(s)?(h--,u.get(s).push([t,e])):u.set(s,[[t,e]])}})),u.forEach((function(e,n){var r=0;function l(){++r<e.length?u():f()}function u(){var u=e[r],d=u[0],h=u[1];if(i.has(n))Cs(t,i.get(n),d,o,h,l,s,c);else{var f=Oo([],d.metadata.rev_tree[0],t);d.metadata.rev_tree=f.tree,d.stemmedRevs=f.stemmedRevs||[],function(t,e,n){var i=mo(t.metadata),r=To(t.metadata,i);if("was_delete"in a&&r)return o[e]=Fr($r,"deleted"),n();if(c&&function(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(t)){var l=Fr(Sr);return o[e]=l,n()}s(t,i,r,r,!1,r?0:1,e,n)}(d,h,l)}}u()}))}var Os="document-store",Ds="by-sequence",Ts="attach-store",Ls="attach-seq-store",As="meta-store",Es="local-store",Is="detect-blob-support";function Ps(t){try{return JSON.stringify(t)}catch(e){return Pi.stringify(t)}}function Bs(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(Fr(Pr,n,e.type))}}function zs(t,e,n){return{data:Ps(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Fs(t){if(!t)return null;var e=function(t){try{return JSON.parse(t)}catch(e){return Pi.parse(t)}}(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function Rs(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function Ns(t,e,n,i){n?i(t?"string"!=typeof t?t:ro(t,e):eo([""],{type:e})):t?"string"!=typeof t?oo(t,(function(t){i(to(t))})):i(t):i("")}function js(t,e,n,i){var r=Object.keys(t._attachments||{});if(!r.length)return i&&i();var o=0;function s(){++o===r.length&&i&&i()}r.forEach((function(i){e.attachments&&e.include_docs?function(t,e){var i=t._attachments[e],r=i.digest;n.objectStore(Ts).get(r).onsuccess=function(t){i.body=t.target.result.body,s()}}(t,i):(t._attachments[i].stub=!0,s())}))}function qs(t,e){return Promise.all(t.map((function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return Promise.all(n.map((function(n){var i=t.doc._attachments[n];if("body"in i){var r=i.body,o=i.content_type;return new Promise((function(s){Ns(r,o,e,(function(e){t.doc._attachments[n]=wr(dr(i,["digest","content_type"]),{data:e}),s()}))}))}})))}})))}function Hs(t,e,n){var i=[],r=n.objectStore(Ds),o=n.objectStore(Ts),s=n.objectStore(Ls),a=t.length;function l(){--a||function(){if(!i.length)return;i.forEach((function(t){s.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||o.delete(t)}}))}()}t.forEach((function(t){var n=r.index("_doc_id_rev"),o=e+"::"+t;n.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return l();r.delete(e),s.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];i.push(n),s.delete(e.primaryKey),e.continue()}else l()}}}))}function Ws(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}var Vs=new vr;function Us(t,e,n,i,r,o){for(var s,a,l,c,u,d,h,f,p=e.docs,g=0,m=p.length;g<m;g++){var v=p[g];v._id&&Lo(v._id)||(v=p[g]=ks(v,n.new_edits,t)).error&&!h&&(h=v)}if(h)return o(h);var y=!1,b=0,_=new Array(p.length),w=new Ni,x=!1,k=i._meta.blobSupport?"blob":"base64";function $(){y=!0,S()}function S(){f&&y&&(f.docCount+=b,d.put(f))}function C(){x||(Vs.notify(i._meta.name),o(null,_))}function M(t,e,n,i,r,o,s,a){t.metadata.winningRev=e,t.metadata.deleted=n;var l=t.data;if(l._id=t.metadata.id,l._rev=t.metadata.rev,i&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(t,e,n,i,r,o){var s=t.data,a=0,l=Object.keys(s._attachments);function u(){a===l.length&&O(t,e,n,i,r,o)}function d(){a++,u()}l.forEach((function(n){var i=t.data._attachments[n];if(i.stub)a++,u();else{var r=i.data;delete i.data,i.revpos=parseInt(e,10),function(t,e,n){c.count(t).onsuccess=function(i){if(i.target.result)return n();var r={digest:t,body:e};c.put(r).onsuccess=n}}(i.digest,r,d)}}))}(t,e,n,r,s,a);b+=o,S(),O(t,e,n,r,s,a)}function O(t,e,n,r,o,c){var d=t.data,h=t.metadata;function f(o){var l=t.stemmedRevs||[];r&&i.auto_compaction&&(l=l.concat(function(t){var e=[];return vo(t.rev_tree,(function(t,n,i,r,o){"available"!==o.status||t||(e.push(n+"-"+i),o.status="missing")})),e}(t.metadata))),l&&l.length&&Hs(l,t.metadata.id,s),h.seq=o.target.result;var c=zs(h,e,n);a.put(c).onsuccess=p}function p(){_[o]={ok:!0,id:h.id,rev:h.rev},w.set(t.metadata.id,t.metadata),function(t,e,n){var i=0,r=Object.keys(t.data._attachments||{});if(!r.length)return n();function o(){++i===r.length&&n()}function s(n){var i=t.data._attachments[n].digest,r=u.put({seq:e,digestSeq:i+"::"+e});r.onsuccess=o,r.onerror=function(t){t.preventDefault(),t.stopPropagation(),o()}}for(var a=0;a<r.length;a++)s(r[a])}(t,h.seq,c)}d._doc_id_rev=h.id+"::"+h.rev,delete d._id,delete d._rev;var g=l.put(d);g.onsuccess=f,g.onerror=function(t){t.preventDefault(),t.stopPropagation(),l.index("_doc_id_rev").getKey(d._doc_id_rev).onsuccess=function(t){l.put(d,t.target.result).onsuccess=f}}}!function(t,e,n){if(!t.length)return n();var i,r=0;function o(){r++,t.length===r&&(i?n(i):n())}t.forEach((function(t){var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],r=0;if(!n.length)return o();function s(t){i=t,++r===n.length&&o()}for(var a in t.data._attachments)t.data._attachments.hasOwnProperty(a)&&Ss(t.data._attachments[a],e,s)}))}(p,k,(function(e){if(e)return o(e);!function(){var e=Ws(r,[Os,Ds,Ts,Es,Ls,As],"readwrite");if(e.error)return o(e.error);(s=e.txn).onabort=Bs(o),s.ontimeout=Bs(o),s.oncomplete=C,a=s.objectStore(Os),l=s.objectStore(Ds),c=s.objectStore(Ts),u=s.objectStore(Ls),(d=s.objectStore(As)).get(As).onsuccess=function(t){f=t.target.result,S()},function(t){var e=[];if(p.forEach((function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach((function(n){var i=t.data._attachments[n];i.stub&&e.push(i.digest)}))})),!e.length)return t();var n,i=0;function r(){++i===e.length&&t(n)}e.forEach((function(t){!function(t,e){c.get(t).onsuccess=function(n){if(n.target.result)e();else{var i=Fr(zr,"unknown stub attachment with digest "+t);i.status=412,e(i)}}}(t,(function(t){t&&!n&&(n=t),r()}))}))}((function(e){if(e)return x=!0,o(e);!function(){if(!p.length)return;var e=0;function r(){++e===p.length&&Ms(t.revs_limit,p,i,w,s,_,M,n,$)}function o(t){var e=Fs(t.target.result);e&&w.set(e.id,e),r()}for(var l=0,c=p.length;l<c;l++){var u=p[l];if(u._id&&Lo(u._id))r();else a.get(u.metadata.id).onsuccess=o}}()}))}()}))}function Gs(t,e,n,i,r){var o,s,a;function l(t){s=t.target.result,o&&r(o,s,a)}function c(t){o=t.target.result,s&&r(o,s,a)}function u(t){var e=t.target.result;if(!e)return r();r([e.key],[e.value],e)}-1===i&&(i=1e3),"function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&i>1&&!n?(a={continue:function(){if(!o.length)return r();var n,a=o[o.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(a,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return r()}else n=IDBKeyRange.lowerBound(a,!0);e=n,o=null,s=null,t.getAll(e,i).onsuccess=l,t.getAllKeys(e,i).onsuccess=c}},t.getAll(e,i).onsuccess=l,t.getAllKeys(e,i).onsuccess=c):n?t.openCursor(e,"prev").onsuccess=u:t.openCursor(e).onsuccess=u}function Ks(t,e,n){var i,r,o="startkey"in t&&t.startkey,s="endkey"in t&&t.endkey,a="key"in t&&t.key,l="keys"in t&&t.keys,c=t.skip||0,u="number"==typeof t.limit?t.limit:-1,d=!1!==t.inclusive_end;if(!l&&(r=(i=function(t,e,n,i,r){try{if(t&&e)return r?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return r?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return r?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(i)return IDBKeyRange.only(i)}catch(t){return{error:t}}return null}(o,s,d,a,t.descending))&&i.error)&&("DataError"!==r.name||0!==r.code))return n(Fr(Pr,r.name,r.message));var h=[Os,Ds,As];t.attachments&&h.push(Ts);var f=Ws(e,h,"readonly");if(f.error)return n(f.error);var p=f.txn;p.oncomplete=function(){t.attachments?qs(w,t.binary).then(S):S()},p.onabort=Bs(n);var g,m,v=p.objectStore(Os),y=p.objectStore(Ds),b=p.objectStore(As),_=y.index("_doc_id_rev"),w=[];function x(e,n){var i={id:n.id,key:n.id,value:{rev:e}};n.deleted?l&&(w.push(i),i.value.deleted=!0,i.doc=null):c--<=0&&(w.push(i),t.include_docs&&function(e,n,i){var r=e.id+"::"+i;_.get(r).onsuccess=function(i){if(n.doc=Rs(i.target.result)||{},t.conflicts){var r=_o(e);r.length&&(n.doc._conflicts=r)}js(n.doc,t,p)}}(n,i,e))}function k(t){for(var e=0,n=t.length;e<n&&w.length!==u;e++){var i=t[e];if(i.error&&l)w.push(i);else{var r=Fs(i);x(r.winningRev,r)}}}function $(t,e,n){n&&(k(e),w.length<u&&n.continue())}function S(){var e={total_rows:g,offset:t.skip,rows:w};t.update_seq&&void 0!==m&&(e.update_seq=m),n(null,e)}return b.get(As).onsuccess=function(t){g=t.target.result.docCount},t.update_seq&&function(t,e){function n(t){var n=t.target.result,i=void 0;return n&&n.key&&(i=n.key),e({target:{result:[i]}})}t.openCursor(null,"prev").onsuccess=n}(y,(function(t){t.target.result&&t.target.result.length>0&&(m=t.target.result[0])})),r||0===u?void 0:l?function(t,e,n){var i=new Array(t.length),r=0;t.forEach((function(o,s){e.get(o).onsuccess=function(e){e.target.result?i[s]=e.target.result:i[s]={key:o,error:"not_found"},++r===t.length&&n(t,i,{})}}))}(t.keys,v,$):-1===u?function(t,e,n){if("function"!=typeof t.getAll){var i=[];t.openCursor(e).onsuccess=function(t){var e=t.target.result;e?(i.push(e.value),e.continue()):n({target:{result:i}})}}else t.getAll(e).onsuccess=n}(v,i,(function(e){var n=e.target.result;t.descending&&(n=n.reverse()),k(n)})):void Gs(v,i,t.descending,u+c,$)}var Ys=!1,Js=[];function Xs(){!Ys&&Js.length&&(Ys=!0,Js.shift()())}function Zs(t,e,n,i){if((t=ar(t)).continuous){var r=n+":"+go();return Vs.addListener(n,r,e,t),Vs.notify(n),{cancel:function(){Vs.removeListener(n,r)}}}var o=t.doc_ids&&new Ri(t.doc_ids);t.since=t.since||0;var s=t.since,a="limit"in t?t.limit:-1;0===a&&(a=1);var l,c,u,d,h=[],f=0,p=Nr(t),g=new Ni;function m(t,e,n,i){if(n.seq!==e)return i();if(n.winningRev===t._rev)return i(n,t);var r=t._id+"::"+n.winningRev;d.get(r).onsuccess=function(t){i(n,Rs(t.target.result))}}function v(){t.complete(null,{results:h,last_seq:s})}var y=[Os,Ds];t.attachments&&y.push(Ts);var b=Ws(i,y,"readonly");if(b.error)return t.complete(b.error);(l=b.txn).onabort=Bs(t.complete),l.oncomplete=function(){!t.continuous&&t.attachments?qs(h).then(v):v()},c=l.objectStore(Ds),u=l.objectStore(Os),d=c.index("_doc_id_rev"),Gs(c,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,a,(function(e,n,i){if(i&&e.length){var r=new Array(e.length),c=new Array(e.length),d=0;n.forEach((function(n,s){!function(t,e,n){if(o&&!o.has(t._id))return n();var i=g.get(t._id);if(i)return m(t,e,i,n);u.get(t._id).onsuccess=function(r){i=Fs(r.target.result),g.set(t._id,i),m(t,e,i,n)}}(Rs(n),e[s],(function(n,o){c[s]=n,r[s]=o,++d===e.length&&function(){for(var e=[],n=0,o=r.length;n<o&&f!==a;n++){var s=r[n];if(s){var l=c[n];e.push(v(l,s))}}Promise.all(e).then((function(e){for(var n=0,i=e.length;n<i;n++)e[n]&&t.onChange(e[n])})).catch(t.complete),f!==a&&i.continue()}()}))}))}function v(e,n){var i=t.processChange(n,e,t);s=i.seq=e.seq;var r=p(i);return"object"==typeof r?Promise.reject(r):r?(f++,t.return_docs&&h.push(i),t.attachments&&t.include_docs?new Promise((function(e){js(n,t,l,(function(){qs([i],t.binary).then((function(){e(i)}))}))})):Promise.resolve(i)):Promise.resolve()}}))}var Qs,ta=new Ni,ea=new Ni;function na(t,e){var n=this;!function(t,e,n){Js.push((function(){t((function(t,i){!function(t,e,n,i){try{t(e,n)}catch(e){i.emit("error",e)}}(e,t,i,n),Ys=!1,Pn((function(){Xs()}))}))})),Xs()}((function(e){!function(t,e,n){var i=e.name,r=null;function o(t){var e=t.createObjectStore(Os,{keyPath:"id"});t.createObjectStore(Ds,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Ts,{keyPath:"digest"}),t.createObjectStore(As,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(Is),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Es,{keyPath:"_id"});var n=t.createObjectStore(Ls,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function s(t,e){var n=t.objectStore(Os);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var r=i.value,o=To(r);r.deletedOrLocal=o?"1":"0",n.put(r),i.continue()}else e()}}function a(t){t.createObjectStore(Es,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function l(t,e){var n=t.objectStore(Es),i=t.objectStore(Os),r=t.objectStore(Ds);i.openCursor().onsuccess=function(t){var o=t.target.result;if(o){var s=o.value,a=s.id,l=Lo(a),c=mo(s);if(l){var u=a+"::"+c,d=a+"::",h=a+"::~",f=r.index("_doc_id_rev"),p=IDBKeyRange.bound(d,h,!1,!1),g=f.openCursor(p);g.onsuccess=function(t){if(g=t.target.result){var e=g.value;e._doc_id_rev===u&&n.put(e),r.delete(g.primaryKey),g.continue()}else i.delete(o.primaryKey),o.continue()}}else o.continue()}else e&&e()}}function c(t){var e=t.createObjectStore(Ls,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function u(t,e){var n=t.objectStore(Ds),i=t.objectStore(Ts),r=t.objectStore(Ls);i.count().onsuccess=function(t){if(!t.target.result)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var i=n.value,o=n.primaryKey,s=Object.keys(i._attachments||{}),a={},l=0;l<s.length;l++){a[i._attachments[s[l]].digest]=!0}var c=Object.keys(a);for(l=0;l<c.length;l++){var u=c[l];r.put({seq:o,digestSeq:u+"::"+o})}n.continue()}}}function d(t){function e(t){return t.data?Fs(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(Ds),i=t.objectStore(Os);i.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var o=e(r.value);if(o.winningRev=o.winningRev||mo(o),o.seq)return a();s()}function s(){var t=o.id+"::",e=o.id+"::￿",i=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),r=0;i.onsuccess=function(t){var e=t.target.result;if(!e)return o.seq=r,a();var n=e.primaryKey;n>r&&(r=n),e.continue()}}function a(){var t=zs(o,o.winningRev,o.deleted);i.put(t).onsuccess=function(){r.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=cr((function(e){e(null,t._meta.instanceId)})),t._bulkDocs=function(n,i,o){Us(e,n,i,t,r,o)},t._get=function(t,e,n){var i,o,s,a=e.ctx;if(!a){var l=Ws(r,[Os,Ds,Ts],"readonly");if(l.error)return n(l.error);a=l.txn}function c(){n(s,{doc:i,metadata:o,ctx:a})}a.objectStore(Os).get(t).onsuccess=function(t){if(!(o=Fs(t.target.result)))return s=Fr($r,"missing"),c();var n;if(e.rev)n=e.latest?function(t,e){for(var n,i=e.rev_tree.slice();n=i.pop();){var r=n.pos,o=n.ids,s=o[0],a=o[1],l=o[2],c=0===l.length,u=n.history?n.history.slice():[];if(u.push({id:s,pos:r,opts:a}),c)for(var d=0,h=u.length;d<h;d++){var f=u[d];if(f.pos+"-"+f.id===t)return r+"-"+s}for(var p=0,g=l.length;p<g;p++)i.push({pos:r+1,ids:l[p],history:u})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}(e.rev,o):e.rev;else if(n=o.winningRev,To(o))return s=Fr($r,"deleted"),c();var r=a.objectStore(Ds),l=o.id+"::"+n;r.index("_doc_id_rev").get(l).onsuccess=function(t){if((i=t.target.result)&&(i=Rs(i)),!i)return s=Fr($r,"missing"),c();c()}}},t._getAttachment=function(t,e,n,i,o){var s;if(i.ctx)s=i.ctx;else{var a=Ws(r,[Os,Ds,Ts],"readonly");if(a.error)return o(a.error);s=a.txn}var l=n.digest,c=n.content_type;s.objectStore(Ts).get(l).onsuccess=function(t){Ns(t.target.result.body,c,i.binary,(function(t){o(null,t)}))}},t._info=function(e){var n,i,o=Ws(r,[As,Ds],"readonly");if(o.error)return e(o.error);var s=o.txn;s.objectStore(As).get(As).onsuccess=function(t){i=t.target.result.docCount},s.objectStore(Ds).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},s.oncomplete=function(){e(null,{doc_count:i,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){Ks(t,r,e)},t._changes=function(e){return Zs(e,t,i,r)},t._close=function(t){r.close(),ta.delete(i),t()},t._getRevisionTree=function(t,e){var n=Ws(r,[Os],"readonly");if(n.error)return e(n.error);n.txn.objectStore(Os).get(t).onsuccess=function(t){var n=Fs(t.target.result);n?e(null,n.rev_tree):e(Fr($r))}},t._doCompaction=function(t,e,n){var i=Ws(r,[Os,Ds,Ts,Ls],"readwrite");if(i.error)return n(i.error);var o=i.txn;o.objectStore(Os).get(t).onsuccess=function(n){var i=Fs(n.target.result);vo(i.rev_tree,(function(t,n,i,r,o){var s=n+"-"+i;-1!==e.indexOf(s)&&(o.status="missing")})),Hs(e,t,o);var r=i.winningRev,s=i.deleted;o.objectStore(Os).put(zs(i,r,s))},o.onabort=Bs(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=Ws(r,[Es],"readonly");if(n.error)return e(n.error);var i=n.txn.objectStore(Es).get(t);i.onerror=Bs(e),i.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(Fr($r))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var i=t._rev,o=t._id;t._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var s,a=e.ctx;if(!a){var l=Ws(r,[Es],"readwrite");if(l.error)return n(l.error);(a=l.txn).onerror=Bs(n),a.oncomplete=function(){s&&n(null,s)}}var c,u=a.objectStore(Es);i?(c=u.get(o)).onsuccess=function(r){var o=r.target.result;o&&o._rev===i?u.put(t).onsuccess=function(){s={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,s)}:n(Fr(Sr))}:((c=u.add(t)).onerror=function(t){n(Fr(Sr)),t.preventDefault(),t.stopPropagation()},c.onsuccess=function(){s={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,s)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var i,o=e.ctx;if(!o){var s=Ws(r,[Es],"readwrite");if(s.error)return n(s.error);(o=s.txn).oncomplete=function(){i&&n(null,i)}}var a=t._id,l=o.objectStore(Es),c=l.get(a);c.onerror=Bs(n),c.onsuccess=function(r){var o=r.target.result;o&&o._rev===t._rev?(l.delete(a),i={ok:!0,id:a,rev:"0-0"},e.ctx&&n(null,i)):n(Fr($r))}},t._destroy=function(t,e){Vs.removeAllListeners(i);var n=ea.get(i);n&&n.result&&(n.result.close(),ta.delete(i));var r=indexedDB.deleteDatabase(i);r.onsuccess=function(){ea.delete(i),mr()&&i in localStorage&&delete localStorage[i],e(null,{ok:!0})},r.onerror=Bs(e)};var h=ta.get(i);if(h)return r=h.idb,t._meta=h.global,Pn((function(){n(null,t)}));var f=indexedDB.open(i,5);ea.set(i,f),f.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return o(e);var n=t.currentTarget.transaction;t.oldVersion<3&&a(e),t.oldVersion<4&&c(e);var i=[s,l,u,d],r=t.oldVersion;function h(){var t=i[r-1];r++,t&&t(n,h)}h()},f.onsuccess=function(e){(r=e.target.result).onversionchange=function(){r.close(),ta.delete(i)},r.onabort=function(t){yr("error","Database has a global failure",t.target.error),r.close(),ta.delete(i)};var o,s,a,l,c=r.transaction([As,Is,Os],"readwrite"),u=!1;function d(){void 0!==a&&u&&(t._meta={name:i,instanceId:l,blobSupport:a},ta.set(i,{idb:r,global:t._meta}),n(null,t))}function h(){if(void 0!==s&&void 0!==o){var t=i+"_id";t in o?l=o[t]:o[t]=l=go(),o.docCount=s,c.objectStore(As).put(o)}}c.objectStore(As).get(As).onsuccess=function(t){o=t.target.result||{id:As},h()},function(t,e){t.objectStore(Os).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}(c,(function(t){s=t,h()})),Qs||(Qs=function(t){return new Promise((function(e){var n=eo([""]),i=t.objectStore(Is).put(n,"key");i.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},i.onerror=t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}})).catch((function(){return!1}))}(c)),Qs.then((function(t){a=t,d()})),c.oncomplete=function(){u=!0,d()},c.onabort=Bs(n)},f.onerror=function(t){var e=t.target.error&&t.target.error.message;e?-1!==e.indexOf("stored database is a higher version")&&(e=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):e="Failed to open indexedDB, are you in private browsing mode?",yr("error",e),n(Fr(Pr,e))}}(n,t,e)}),e,n.constructor)}na.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}};var ia=5e3,ra={};function oa(t){var e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach((function(t){var e=n[t];e.data=ro(e.data,e.content_type)}))}function sa(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function aa(t){return t._attachments&&Object.keys(t._attachments)?Promise.all(Object.keys(t._attachments).map((function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new Promise((function(t){ao(n.data,t)})).then((function(t){n.data=t}))}))):Promise.resolve()}function la(t,e){if(function(t){if(!t.prefix)return!1;var e=Jr(t.prefix).protocol;return"http"===e||"https"===e}(e)){var n=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}var i=Jr(t);(i.user||i.password)&&(i.auth={username:i.user,password:i.password});var r=i.path.replace(/(^\/|\/$)/g,"").split("/");return i.db=r.pop(),-1===i.db.indexOf("%")&&(i.db=encodeURIComponent(i.db)),i.path=r.join("/"),i}function ca(t,e){return ua(t,t.db+"/"+e)}function ua(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function da(t){return"?"+Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&")}function ha(t,e){var n=this,i=la(t.name,t),r=ca(i,"");t=ar(t);var o,s=function(e,n){if((n=n||{}).headers=n.headers||new Ho,n.credentials="include",t.auth||i.auth){var r=t.auth||i.auth,o=r.username+":"+r.password,s=to(unescape(encodeURIComponent(o)));n.headers.set("Authorization","Basic "+s)}var a=t.headers||{};return Object.keys(a).forEach((function(t){n.headers.append(t,a[t])})),function(t){var e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==e.indexOf("msie"),i=-1!==e.indexOf("trident"),r=-1!==e.indexOf("edge"),o=!("method"in t)||"GET"===t.method;return(n||i||r)&&o}(n)&&(e+=(-1===e.indexOf("?")?"?":"&")+"_nonce="+Date.now()),(t.fetch||qo)(e,n)};function a(t,e){return ur(t,zi((function(t){c().then((function(){return e.apply(this,t)})).catch((function(e){t.pop()(e)}))}))).bind(n)}function l(t,e,n){var i={};return(e=e||{}).headers=e.headers||new Ho,e.headers.get("Content-Type")||e.headers.set("Content-Type","application/json"),e.headers.get("Accept")||e.headers.set("Accept","application/json"),s(t,e).then((function(t){return i.ok=t.ok,i.status=t.status,t.json()})).then((function(t){if(i.data=t,!i.ok){i.data.status=i.status;var e=Rr(i.data);if(n)return n(e);throw e}if(Array.isArray(i.data)&&(i.data=i.data.map((function(t){return t.error||t.missing?Rr(t):t}))),!n)return i;n(null,i.data)}))}function c(){return t.skip_setup?Promise.resolve():o||((o=l(r).catch((function(t){return t&&t.status&&404===t.status?(_r(404,"PouchDB is just detecting if the remote exists."),l(r,{method:"PUT"})):Promise.reject(t)})).catch((function(t){return!(!t||!t.status||412!==t.status)||Promise.reject(t)}))).catch((function(){o=null})),o)}function u(t){return t.split("/").map(encodeURIComponent).join("/")}Pn((function(){e(null,n)})),n._remote=!0,n.type=function(){return"http"},n.id=a("id",(function(t){s(ua(i,"")).then((function(t){return t.json()})).catch((function(){return{}})).then((function(e){var n=e&&e.uuid?e.uuid+i.db:ca(i,"");t(null,n)}))})),n.compact=a("compact",(function(t,e){"function"==typeof t&&(e=t,t={}),t=ar(t),l(ca(i,"_compact"),{method:"POST"}).then((function(){!function i(){n.info((function(n,r){r&&!r.compact_running?e(null,{ok:!0}):setTimeout(i,t.interval||200)}))}()}))})),n.bulkGet=ur("bulkGet",(function(t,e){var n=this;function r(e){var n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0),l(ca(i,"_bulk_get"+da(n)),{method:"POST",body:JSON.stringify({docs:t.docs})}).then((function(n){t.attachments&&t.binary&&n.data.results.forEach((function(t){t.docs.forEach(oa)})),e(null,n.data)})).catch(e)}function o(){var i=Math.ceil(t.docs.length/50),r=0,o=new Array(i);function s(t){return function(n,s){o[t]=s.results,++r===i&&e(null,{results:jr(o)})}}for(var a=0;a<i;a++){var l=dr(t,["revs","attachments","binary","latest"]);l.docs=t.docs.slice(50*a,Math.min(t.docs.length,50*(a+1))),gr(n,l,s(a))}}var s=ua(i,""),a=ra[s];"boolean"!=typeof a?r((function(t,n){t?(ra[s]=!1,_r(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(ra[s]=!0,e(null,n))})):a?r(e):o()})),n._info=function(t){c().then((function(){return s(ca(i,""))})).then((function(t){return t.json()})).then((function(e){e.host=ca(i,""),t(null,e)})).catch(t)},n.fetch=function(t,e){return c().then((function(){var n="/"===t.substring(0,1)?ua(i,t.substring(1)):ca(i,t);return s(n,e)}))},n.get=a("get",(function(t,e,n){"function"==typeof e&&(n=e,e={});var r={};function o(t){var n=t._attachments,r=n&&Object.keys(n);if(n&&r.length)return function(t,e){return new Promise((function(n,i){var r,o=0,s=0,a=0,l=t.length;function c(){++a===l?r?i(r):n():h()}function u(){o--,c()}function d(t){o--,r=r||t,c()}function h(){for(;o<e&&s<l;)o++,t[s++]().then(u,d)}h()}))}(r.map((function(r){return function(){return function(r){var o=n[r],a=sa(t._id)+"/"+u(r)+"?rev="+t._rev;return s(ca(i,a)).then((function(t){return"buffer"in t?t.buffer():t.blob()})).then((function(t){if(e.binary){var n=Object.getOwnPropertyDescriptor(t.__proto__,"type");return n&&!n.set||(t.type=o.content_type),t}return new Promise((function(e){ao(t,e)}))})).then((function(t){delete o.stub,delete o.length,o.data=t}))}(r)}})),5)}(e=ar(e)).revs&&(r.revs=!0),e.revs_info&&(r.revs_info=!0),e.latest&&(r.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),r.open_revs=e.open_revs),e.rev&&(r.rev=e.rev),e.conflicts&&(r.conflicts=e.conflicts),e.update_seq&&(r.update_seq=e.update_seq),t=sa(t),l(ca(i,t+da(r))).then((function(t){return Promise.resolve().then((function(){if(e.attachments)return n=t.data,Array.isArray(n)?Promise.all(n.map((function(t){if(t.ok)return o(t.ok)}))):o(n);var n})).then((function(){n(null,t.data)}))})).catch((function(e){e.docId=t,n(e)}))})),n.remove=a("remove",(function(t,e,n,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(o=t,"function"==typeof e?(r=e,n={}):(r=n,n=e));var s=o._rev||n.rev;l(ca(i,sa(o._id))+"?rev="+s,{method:"DELETE"},r).catch(r)})),n.getAttachment=a("getAttachment",(function(t,e,n,r){"function"==typeof n&&(r=n,n={});var o,a=n.rev?"?rev="+n.rev:"",l=ca(i,sa(t))+"/"+u(e)+a;s(l,{method:"GET"}).then((function(t){if(o=t.headers.get("content-type"),t.ok)return void 0===hn||hn.browser||"function"!=typeof t.buffer?t.blob():t.buffer();throw t})).then((function(t){void 0===hn||hn.browser||(t.type=o),r(null,t)})).catch((function(t){r(t)}))})),n.removeAttachment=a("removeAttachment",(function(t,e,n,r){l(ca(i,sa(t)+"/"+u(e))+"?rev="+n,{method:"DELETE"},r).catch(r)})),n.putAttachment=a("putAttachment",(function(t,e,n,r,o,s){"function"==typeof o&&(s=o,o=r,r=n,n=null);var a=sa(t)+"/"+u(e),c=ca(i,a);if(n&&(c+="?rev="+n),"string"==typeof r){var d;try{d=Qr(r)}catch(t){return s(Fr(Tr,"Attachment is not a valid base64 string"))}r=d?io(d,o):""}l(c,{headers:new Ho({"Content-Type":o}),method:"PUT",body:r},s).catch(s)})),n._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,c().then((function(){return Promise.all(t.docs.map(aa))})).then((function(){return l(ca(i,"_bulk_docs"),{method:"POST",body:JSON.stringify(t)},n)})).catch(n)},n._put=function(t,e,n){c().then((function(){return aa(t)})).then((function(){return l(ca(i,sa(t._id)),{method:"PUT",body:JSON.stringify(t)})})).then((function(t){n(null,t.data)})).catch((function(e){e.docId=t&&t._id,n(e)}))},n.allDocs=a("allDocs",(function(t,e){"function"==typeof t&&(e=t,t={});var n,r={},o="GET";(t=ar(t)).conflicts&&(r.conflicts=!0),t.update_seq&&(r.update_seq=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(r.limit=t.limit),void 0!==t.skip&&(r.skip=t.skip);var s=da(r);void 0!==t.keys&&(o="POST",n={keys:t.keys}),l(ca(i,"_all_docs"+s),{method:o,body:JSON.stringify(n)}).then((function(n){t.include_docs&&t.attachments&&t.binary&&n.data.rows.forEach(oa),e(null,n.data)})).catch(e)})),n._changes=function(t){var e="batch_size"in t?t.batch_size:25;(t=ar(t)).continuous&&!("heartbeat"in t)&&(t.heartbeat=1e4);var n="timeout"in t?t.timeout:3e4;"timeout"in t&&t.timeout&&n-t.timeout<ia&&(n=t.timeout+ia),"heartbeat"in t&&t.heartbeat&&n-t.heartbeat<ia&&(n=t.heartbeat+ia);var r={};"timeout"in t&&t.timeout&&(r.timeout=t.timeout);var o=void 0!==t.limit&&t.limit,s=o;if(t.style&&(r.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.continuous&&(r.feed="longpoll"),t.seq_interval&&(r.seq_interval=t.seq_interval),t.conflicts&&(r.conflicts=!0),t.descending&&(r.descending=!0),t.update_seq&&(r.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(r.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(r.filter=t.filter),t.view&&"string"==typeof t.view&&(r.filter="_view",r.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var a in t.query_params)t.query_params.hasOwnProperty(a)&&(r[a]=t.query_params[a]);var u,d="GET";t.doc_ids?(r.filter="_doc_ids",d="POST",u={doc_ids:t.doc_ids}):t.selector&&(r.filter="_selector",d="POST",u={selector:t.selector});var h,f=new jo,p=function(n,a){if(!t.aborted){r.since=n,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),t.descending?o&&(r.limit=s):r.limit=!o||s>e?e:s;var p=ca(i,"_changes"+da(r)),g={signal:f.signal,method:d,body:JSON.stringify(u)};h=n,t.aborted||c().then((function(){return l(p,g,a)})).catch(a)}},g={results:[]},m=function(n,i){if(!t.aborted){var r=0;if(i&&i.results){r=i.results.length,g.last_seq=i.last_seq;var a=null,l=null;"number"==typeof i.pending&&(a=i.pending),"string"!=typeof g.last_seq&&"number"!=typeof g.last_seq||(l=g.last_seq);t.query_params,i.results=i.results.filter((function(e){s--;var n=Nr(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&oa(e),t.return_docs&&g.results.push(e),t.onChange(e,a,l)),n}))}else if(n)return t.aborted=!0,void t.complete(n);i&&i.last_seq&&(h=i.last_seq);var c=o&&s<=0||i&&r<e||t.descending;(!t.continuous||o&&s<=0)&&c?t.complete(null,g):Pn((function(){p(h,m)}))}};return p(t.since||0,m),{cancel:function(){t.aborted=!0,f.abort()}}},n.revsDiff=a("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={}),l(ca(i,"_revs_diff"),{method:"POST",body:JSON.stringify(t)},n).catch(n)})),n._close=function(t){t()},n._destroy=function(t,e){l(ca(i,""),{method:"DELETE"}).then((function(t){e(null,t)})).catch((function(t){404===t.status?e(null,{ok:!0}):e(t)}))}}function fa(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,fa)}catch(t){}}function pa(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,pa)}catch(t){}}function ga(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,ga)}catch(t){}}function ma(t,e){return e&&t.then((function(t){Pn((function(){e(null,t)}))}),(function(t){Pn((function(){e(t)}))})),t}function va(t,e){return function(){var n=arguments,i=this;return t.add((function(){return e.apply(i,n)}))}}function ya(t){var e=new Ri(t),n=new Array(e.size),i=-1;return e.forEach((function(t){n[++i]=t})),n}function ba(t){var e=new Array(t.size),n=-1;return t.forEach((function(t,i){e[++n]=i})),e}function _a(t){return new ga("builtin "+t+" function requires map values to be numbers or number arrays")}function wa(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];if("number"!=typeof r){if(!Array.isArray(r))throw _a("_sum");e="number"==typeof e?[e]:e;for(var o=0,s=r.length;o<s;o++){var a=r[o];if("number"!=typeof a)throw _a("_sum");void 0===e[o]?e.push(a):e[o]+=a}}else"number"==typeof e?e+=r:e[0]+=r}return e}ha.valid=function(){return!0},ji(fa,Error),ji(pa,Error),ji(ga,Error);var xa=yr.bind(null,"log"),ka=Array.isArray,$a=JSON.parse;function Sa(t,e){return Xr("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:wa,log:xa,isArray:ka,toJSON:$a})}function Ca(){this.promise=new Promise((function(t){t()}))}function Ma(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Oa(t,e,n,i,r,o){var s,a=function(t,e){return Ma(t)+Ma(e)+"undefined"}(n,i);if(!r&&(s=t._cachedViews=t._cachedViews||{})[a])return s[a];var l=t.info().then((function(l){var c=l.db_name+"-mrview-"+(r?"temp":fo(a));return Zr(t,"_local/"+o,(function(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var i=t.views[n]=t.views[n]||{};if(!i[c])return i[c]=!0,t})).then((function(){return t.registerDependentDatabase(c).then((function(e){var r=e.db;r.auto_compaction=!0;var o={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:i};return o.db.get("_local/lastSeq").catch((function(t){if(404!==t.status)throw t})).then((function(t){return o.seq=t?t.seq:0,s&&o.db.once("destroyed",(function(){delete s[a]})),o}))}))}))}));return s&&(s[a]=l),l}Ca.prototype.add=function(t){return this.promise=this.promise.catch((function(){})).then((function(){return t()})),this.promise},Ca.prototype.finish=function(){return this.promise};var Da={},Ta=new Ca;function La(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Aa(t,e){try{t.emit("error",e)}catch(t){yr("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),yr("error",e)}}var Ea=function(t,e){return wa(e)},Ia=function(t,e){return e.length},Pa=function(t,e){return{sum:wa(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];e+=r*r}return e}(e)}};var Ba=function(t,e,n,i){function r(t,e,n){try{e(n)}catch(e){Aa(t,e)}}function o(t,e,n,i,r){try{return{output:e(n,i,r)}}catch(e){return Aa(t,e),{error:e}}}function s(t,e){var n=es(t.key,e.key);return 0!==n?n:es(t.value,e.value)}function a(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function l(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function c(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach((function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach((function(t){var n=e[t];e[t].data=ro(n.data,n.content_type)}))}))}(e),e}}function u(t,e,n,i){var r=e[t];void 0!==r&&(i&&(r=encodeURIComponent(JSON.stringify(r))),n.push(t+"="+r))}function d(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function h(t,e){var n=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[i]&&es(t[n],t[i])>0)throw new fa("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new fa("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new fa("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(e){var n=function(t){if(t){if("number"!=typeof t)return new fa('Invalid value for integer: "'+t+'"');if(t<0)return new fa('Invalid value for positive integer: "'+t+'"')}}(t[e]);if(n)throw n}))}function f(t){return function(e){if(404===e.status)return t;throw e}}function p(t,e,n){var i="_local/doc_"+t,r={_id:i,keys:[]},o=n.get(t),s=o[0];return(function(t){return 1===t.length&&/^1-/.test(t[0].rev)}(o[1])?Promise.resolve(r):e.db.get(i).catch(f(r))).then((function(t){return function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):Promise.resolve({rows:[]})}(t).then((function(e){return function(t,e){for(var n=[],i=new Ri,r=0,o=e.rows.length;r<o;r++){var a=e.rows[r].doc;if(a&&(n.push(a),i.add(a._id),a._deleted=!s.has(a._id),!a._deleted)){var l=s.get(a._id);"value"in l&&(a.value=l.value)}}var c=ba(s);return c.forEach((function(t){if(!i.has(t)){var e={_id:t},r=s.get(t);"value"in r&&(e.value=r.value),n.push(e)}})),t.keys=ya(c.concat(t.keys)),n.push(t),n}(t,e)}))}))}function g(t){var e="string"==typeof t?t:t.name,n=Da[e];return n||(n=Da[e]=new Ca),n}function m(t){return va(g(t),(function(){return function(t){var n,i;function o(t,e){var r={id:i._id,key:ns(t)};null!=e&&(r.value=ns(e)),n.push(r)}var a=e(t.mapFun,o),l=t.seq||0;function c(e,n){return function(){return function(t,e,n){var i="_local/lastSeq";return t.db.get(i).catch(f({_id:i,seq:0})).then((function(i){var r=ba(e);return Promise.all(r.map((function(n){return p(n,t,e)}))).then((function(e){var r=jr(e);return i.seq=n,r.push(i),t.db.bulkDocs({docs:r})}))}))}(t,e,n)}}var u=new Ca;function d(){return t.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:l,limit:50}).then(h)}function h(t){var e=t.results;if(e.length){var n=g(e);if(u.add(c(n,l)),!(e.length<50))return d()}}function g(e){for(var o=new Ni,c=0,u=e.length;c<u;c++){var d=e[c];if("_"!==d.doc._id[0]){n=[],(i=d.doc)._deleted||r(t.sourceDB,a,i),n.sort(s);var h=m(n);o.set(d.doc._id,[h,d.changes])}l=d.seq}return o}function m(t){for(var e,n=new Ni,i=0,r=t.length;i<r;i++){var o=t[i],s=[o.key,o.id];i>0&&0===es(o.key,e)&&s.push(i),n.set(rs(s),o),e=o.key}return n}return d().then((function(){return u.finish()})).then((function(){t.seq=l}))}(t)}))()}function v(t,e){return va(g(t),(function(){return function(t,e){var i,r=t.reduceFun&&!1!==e.reduce,s=e.skip||0;void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys);function c(e){return e.include_docs=!0,t.db.allDocs(e).then((function(t){return i=t.total_rows,t.rows.map((function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var i=function(t){for(var e=[],n=[],i=0;;){var r=t[i++];if("\0"!==r)switch(r){case"1":e.push(null);break;case"2":e.push("1"===t[i]),i++;break;case"3":var o=os(t,i);e.push(o.num),i+=o.length;break;case"4":for(var s="";;){var a=t[i];if("\0"===a)break;s+=a,i++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(s);break;case"5":var l={element:[],index:e.length};e.push(l.element),n.push(l);break;case"6":var c={element:{},index:e.length};e.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+r)}else{if(1===e.length)return e.pop();ss(e,n)}}}(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}}))}))}function u(c){var u;if(u=r?function(t,e,i){0===i.group_level&&delete i.group_level;var r=i.group||i.group_level,s=n(t.reduceFun),l=[],c=isNaN(i.group_level)?Number.POSITIVE_INFINITY:i.group_level;e.forEach((function(t){var e=l[l.length-1],n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,c)),e&&0===es(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);l.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})})),e=[];for(var u=0,d=l.length;u<d;u++){var h=l[u],f=o(t.sourceDB,s,h.keys,h.values,!1);if(f.error&&f.error instanceof ga)throw f.error;e.push({value:f.error?null:f.output,key:h.groupKey})}return{rows:a(e,i.limit,i.skip)}}(t,c,e):{total_rows:i,offset:s,rows:c},e.update_seq&&(u.update_seq=t.seq),e.include_docs){var d=ya(c.map(l));return t.sourceDB.allDocs({keys:d,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then((function(t){var e=new Ni;return t.rows.forEach((function(t){e.set(t.id,t.doc)})),c.forEach((function(t){var n=l(t),i=e.get(n);i&&(t.doc=i)})),u}))}return u}if(void 0!==e.keys){var d=e.keys.map((function(t){var n={startkey:rs([t]),endkey:rs([t,{}])};return e.update_seq&&(n.update_seq=!0),c(n)}));return Promise.all(d).then(jr).then(u)}var h,f,p={descending:e.descending};if(e.update_seq&&(p.update_seq=!0),"start_key"in e&&(h=e.start_key),"startkey"in e&&(h=e.startkey),"end_key"in e&&(f=e.end_key),"endkey"in e&&(f=e.endkey),void 0!==h&&(p.startkey=e.descending?rs([h,{}]):rs([h])),void 0!==f){var g=!1!==e.inclusive_end;e.descending&&(g=!g),p.endkey=rs(g?[f,{}]:[f])}if(void 0!==e.key){var m=rs([e.key]),v=rs([e.key,{}]);p.descending?(p.endkey=m,p.startkey=v):(p.startkey=m,p.endkey=v)}return r||("number"==typeof e.limit&&(p.limit=e.limit),p.skip=s),c(p).then(u)}(t,e)}))()}function y(e,n,r){if("function"==typeof e._query)return function(t,e,n){return new Promise((function(i,r){t._query(e,n,(function(t,e){if(t)return r(t);i(e)}))}))}(e,n,r);if(Hr(e))return function(t,e,n){var i,r,o,s=[],a="GET";if(u("reduce",n,s),u("include_docs",n,s),u("attachments",n,s),u("limit",n,s),u("descending",n,s),u("group",n,s),u("group_level",n,s),u("skip",n,s),u("stale",n,s),u("conflicts",n,s),u("startkey",n,s,!0),u("start_key",n,s,!0),u("endkey",n,s,!0),u("end_key",n,s,!0),u("inclusive_end",n,s),u("key",n,s,!0),u("update_seq",n,s),s=""===(s=s.join("&"))?"":"?"+s,void 0!==n.keys){var l="keys="+encodeURIComponent(JSON.stringify(n.keys));l.length+s.length+1<=2e3?s+=("?"===s[0]?"&":"?")+l:(a="POST","string"==typeof e?i={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var d=La(e);return t.fetch("_design/"+d[0]+"/_view/"+d[1]+s,{headers:new Ho({"Content-Type":"application/json"}),method:a,body:JSON.stringify(i)}).then((function(t){return r=t.ok,o=t.status,t.json()})).then((function(t){if(!r)throw t.status=o,Rr(t);return t.rows.forEach((function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)})),t})).then(c(n))}return i=i||{},Object.keys(e).forEach((function(t){Array.isArray(e[t])?i[t]=e[t]:i[t]=e[t].toString()})),t.fetch("_temp_view"+s,{headers:new Ho({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(i)}).then((function(t){return r=t.ok,o=t.status,t.json()})).then((function(t){if(!r)throw t.status=o,Rr(t);return t})).then(c(n))}(e,n,r);if("string"!=typeof n)return h(r,n),Ta.add((function(){return Oa(e,"temp_view/temp_view",n.map,n.reduce,!0,t).then((function(t){return function(t,e){return t.then((function(t){return e().then((function(){return t}))}),(function(t){return e().then((function(){throw t}))}))}(m(t).then((function(){return v(t,r)})),(function(){return t.db.destroy()}))}))})),Ta.finish();var o=n,s=La(o),a=s[0],l=s[1];return e.get("_design/"+a).then((function(n){var s=n.views&&n.views[l];if(!s)throw new pa("ddoc "+n._id+" has no view named "+l);return i(n,l),h(r,s),Oa(e,o,s.map,s.reduce,!1,t).then((function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&Pn((function(){m(t)})),v(t,r)):m(t).then((function(){return v(t,r)}))}))}))}var b;return{query:function(t,e,n){var i=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=d(t.group_level),t.limit=d(t.limit),t.skip=d(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});var r=Promise.resolve().then((function(){return y(i,t,e)}));return ma(r,n),r},viewCleanup:(b=function(){var e=this;return"function"==typeof e._viewCleanup?function(t){return new Promise((function(e,n){t._viewCleanup((function(t,i){if(t)return n(t);e(i)}))}))}(e):Hr(e)?function(t){return t.fetch("_view_cleanup",{headers:new Ho({"Content-Type":"application/json"}),method:"POST"}).then((function(t){return t.json()}))}(e):function(e){return e.get("_local/"+t).then((function(t){var n=new Ni;Object.keys(t.views).forEach((function(t){var e=La(t),i="_design/"+e[0],r=e[1],o=n.get(i);o||(o=new Ri,n.set(i,o)),o.add(r)}));var i={keys:ba(n),include_docs:!0};return e.allDocs(i).then((function(i){var r={};i.rows.forEach((function(e){var i=e.key.substring(8);n.get(e.key).forEach((function(n){var o=i+"/"+n;t.views[o]||(o=n);var s=Object.keys(t.views[o]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach((function(t){r[t]=r[t]||a}))}))}));var o=Object.keys(r).filter((function(t){return!r[t]})).map((function(t){return va(g(t),(function(){return new e.constructor(t,e.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),f({ok:!0}))}(e)},zi((function(t){var e=t.pop(),n=b.apply(this,t);return"function"==typeof e&&ma(n,e),n})))}}("mrviews",(function(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return Sa(t.toString(),e)}),(function(t){var e=t.toString(),n=function(t){if(/^_sum/.test(t))return Ea;if(/^_count/.test(t))return Ia;if(/^_stats/.test(t))return Pa;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e);return n||Sa(e)}),(function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new pa("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}));var za={query:function(t,e,n){return Ba.query.call(this,t,e,n)},viewCleanup:function(t){return Ba.viewCleanup.call(this,t)}};function Fa(t){return/^1-/.test(t)}function Ra(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map((function(n){return t.getAttachment(e._id,n,{rev:e._rev})})))}function Na(t,e,n,i){n=ar(n);var r=[],o=!0;function s(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then((function(t){if(i.cancelled)throw new Error("cancelled");t.rows.forEach((function(t){var e;t.deleted||!t.doc||!Fa(t.value.rev)||(e=t.doc,e._attachments&&Object.keys(e._attachments).length>0)||function(t){return t._conflicts&&t._conflicts.length>0}(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,r.push(t.doc),delete n[t.id])}))}))}return Promise.resolve().then((function(){var t=Object.keys(n).filter((function(t){var e=n[t].missing;return 1===e.length&&Fa(e[0])}));if(t.length>0)return s(t)})).then((function(){var s=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].missing.forEach((function(t){e.push({id:n,rev:t})}))})),{docs:e,revs:!0,latest:!0}}(n);if(s.docs.length)return t.bulkGet(s).then((function(n){if(i.cancelled)throw new Error("cancelled");return Promise.all(n.results.map((function(n){return Promise.all(n.docs.map((function(n){var i=n.ok;return n.error&&(o=!1),i&&i._attachments?function(t,e,n){var i=Hr(e)&&!Hr(t),r=Object.keys(n._attachments);return i?t.get(n._id).then((function(i){return Promise.all(r.map((function(r){return function(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(i,n,r)?e.getAttachment(n._id,r):t.getAttachment(i._id,r)})))})).catch((function(t){if(404!==t.status)throw t;return Ra(e,n)})):Ra(e,n)}(e,t,i).then((function(t){var e=Object.keys(i._attachments);return t.forEach((function(t,n){var r=i._attachments[e[n]];delete r.stub,delete r.length,r.data=t})),i})):i})))}))).then((function(t){r=r.concat(jr(t).filter(Boolean))}))}))})).then((function(){return{ok:o,docs:r}}))}var ja="pouchdb";function qa(t,e,n,i,r){return t.get(e).catch((function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||_r(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:e,history:[],replicator:ja,version:1};throw n})).then((function(o){if(!r.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter((function(t){return t.session_id!==i})),o.history.unshift({last_seq:n,session_id:i}),o.history=o.history.slice(0,5),o.version=1,o.replicator=ja,o.session_id=i,o.last_seq=n,t.put(o).catch((function(o){if(409===o.status)return qa(t,e,n,i,r);throw o}))}))}function Ha(t,e,n,i,r){this.src=t,this.target=e,this.id=n,this.returnValue=i,this.opts=r||{}}Ha.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then((function(){return n.updateSource(t,e)}))},Ha.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?qa(this.target,this.id,t,e,this.returnValue):Promise.resolve(!0)},Ha.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return qa(this.src,this.id,t,e,this.returnValue).catch((function(t){if(Ga(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t}))}return Promise.resolve(!0)};var Wa={undefined:function(t,e){return 0===es(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return function(t,e){if(t.session_id===e.session_id)return{last_seq:t.last_seq,history:t.history};return Va(t.history,e.history)}(e,t).last_seq}};function Va(t,e){var n=t[0],i=t.slice(1),r=e[0],o=e.slice(1);return n&&0!==e.length?Ua(n.session_id,e)?{last_seq:n.last_seq,history:t}:Ua(r.session_id,i)?{last_seq:r.last_seq,history:o}:Va(i,o):{last_seq:0,history:[]}}function Ua(t,e){var n=e[0],i=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Ua(t,i))}function Ga(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}Ha.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then((function(t){return t.last_seq||0})).catch((function(t){if(404!==t.status)throw t;return 0})):t.target.get(t.id).then((function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||0:t.src.get(t.id).then((function(t){return e.version!==t.version?0:(n=e.version?e.version.toString():"undefined")in Wa?Wa[n](e,t):0;var n}),(function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:0}).then((function(){return 0}),(function(n){return Ga(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):0}));throw n}))})).catch((function(t){if(404!==t.status)throw t;return 0}))};function Ka(t,e,n){var i=n.doc_ids?n.doc_ids.sort(es):"",r=n.filter?n.filter.toString():"",o="",s="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(t){return Object.keys(t).sort(es).reduce((function(e,n){return e[n]=t[n],e}),{})}(n.query_params))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),Promise.all([t.id(),e.id()]).then((function(t){var e=t[0]+t[1]+r+s+o+i+a;return new Promise((function(t){ho(e,t)}))})).then((function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))}))}function Ya(t,e,n,i,r){var o,s,a,l=[],c={seq:0,changes:[],docs:[]},u=!1,d=!1,h=!1,f=0,p=n.continuous||n.live||!1,g=n.batch_size||100,m=n.batches_limit||10,v=!1,y=n.doc_ids,b=n.selector,_=[],w=go();r=r||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var x={};function k(){return a?Promise.resolve():Ka(t,e,n).then((function(r){s=r;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},a=new Ha(t,e,s,i,o)}))}function $(){if(_=[],0!==o.docs.length){var t=o.docs,s={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},s).then((function(e){if(i.cancelled)throw T(),new Error("cancelled");var n=Object.create(null);e.forEach((function(t){t.error&&(n[t.id]=t)}));var o=Object.keys(n).length;r.doc_write_failures+=o,r.docs_written+=t.length-o,t.forEach((function(t){var e=n[t._id];if(e){r.errors.push(e);var o=(e.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw e;i.emit("denied",ar(e))}else _.push(t)}))}),(function(e){throw r.doc_write_failures+=t.length,e}))}}function S(){if(o.error)throw new Error("There was a problem getting docs.");r.last_seq=f=o.seq;var t=ar(r);return _.length&&(t.docs=_,"number"==typeof o.pending&&(t.pending=o.pending,delete o.pending),i.emit("change",t)),u=!0,a.writeCheckpoint(o.seq,w).then((function(){if(u=!1,i.cancelled)throw T(),new Error("cancelled");o=void 0,I()})).catch((function(t){throw B(t),t}))}function C(){return Na(t,e,o.diffs,i).then((function(t){o.error=!t.ok,t.docs.forEach((function(t){delete o.diffs[t._id],r.docs_read++,o.docs.push(t)}))}))}function M(){var t;i.cancelled||o||(0!==l.length?(o=l.shift(),(t={},o.changes.forEach((function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map((function(t){return t.rev})))})),e.revsDiff(t).then((function(t){if(i.cancelled)throw T(),new Error("cancelled");o.diffs=t}))).then(C).then($).then(S).then(M).catch((function(t){D("batch processing terminated with error",t)}))):O(!0))}function O(t){0!==c.changes.length?(t||d||c.changes.length>=g)&&(l.push(c),c={seq:0,changes:[],docs:[]},"pending"!==i.state&&"stopped"!==i.state||(i.state="active",i.emit("active")),M()):0!==l.length||o||((p&&x.live||d)&&(i.state="pending",i.emit("paused")),d&&T())}function D(t,e){h||(e.message||(e.message=t),r.ok=!1,r.status="aborting",l=[],c={seq:0,changes:[],docs:[]},T(e))}function T(o){if(!(h||i.cancelled&&(r.status="cancelled",u)))if(r.status=r.status||"complete",r.end_time=(new Date).toISOString(),r.last_seq=f,h=!0,o){(o=Fr(o)).result=r;var s=(o.name||"").toLowerCase();"unauthorized"===s||"forbidden"===s?(i.emit("error",o),i.removeAllListeners()):function(t,e,n,i){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=br),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var r=function(){t.current_back_off=0};e.once("paused",(function(){e.removeListener("active",r)})),e.once("active",r)}t.current_back_off=t.current_back_off||0,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(i,t.current_back_off)}(n,i,o,(function(){Ya(t,e,n,i)}))}else i.emit("complete",r),i.removeAllListeners()}function L(t,e,r){if(i.cancelled)return T();"number"==typeof e&&(c.pending=e),Nr(n)(t)&&(c.seq=t.seq||r,c.changes.push(t),Pn((function(){O(0===l.length&&x.live)})))}function A(t){if(v=!1,i.cancelled)return T();if(t.results.length>0)x.since=t.results[t.results.length-1].seq,I(),O(!0);else{var e=function(){p?(x.live=!0,I()):d=!0,O(!0)};o||0!==t.results.length?e():(u=!0,a.writeCheckpoint(t.last_seq,w).then((function(){u=!1,r.last_seq=f=t.last_seq,e()})).catch(B))}}function E(t){if(v=!1,i.cancelled)return T();D("changes rejected",t)}function I(){if(!v&&!d&&l.length<m){v=!0,i._changes&&(i.removeListener("cancel",i._abortChanges),i._changes.cancel()),i.once("cancel",r);var e=t.changes(x).on("change",L);e.then(o,o),e.then(A).catch(E),n.retry&&(i._changes=e,i._abortChanges=r)}function r(){e.cancel()}function o(){i.removeListener("cancel",r)}}function P(){k().then((function(){if(!i.cancelled)return a.getCheckpoint().then((function(t){x={since:f=t,limit:g,batch_size:g,style:"all_docs",doc_ids:y,selector:b,return_docs:!0},n.filter&&("string"!=typeof n.filter?x.include_docs=!0:x.filter=n.filter),"heartbeat"in n&&(x.heartbeat=n.heartbeat),"timeout"in n&&(x.timeout=n.timeout),n.query_params&&(x.query_params=n.query_params),n.view&&(x.view=n.view),I()}));T()})).catch((function(t){D("getCheckpoint rejected with ",t)}))}function B(t){u=!1,D("writeCheckpoint completed with error",t)}i.ready(t,e),i.cancelled?T():(i._addedListeners||(i.once("cancel",T),"function"==typeof n.complete&&(i.once("error",n.complete),i.once("complete",(function(t){n.complete(null,t)}))),i._addedListeners=!0),void 0===n.since?P():k().then((function(){return u=!0,a.writeCheckpoint(n.since,w)})).then((function(){u=!1,i.cancelled?T():(f=n.since,P())})).catch(B))}function Ja(){Hi.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new Promise((function(e,n){t.once("complete",e),t.once("error",n)}));t.then=function(t,n){return e.then(t,n)},t.catch=function(t){return e.catch(t)},t.catch((function(){}))}function Xa(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function Za(t,e,n,i){if("function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw Fr(Er,"`doc_ids` filter parameter is not a list.");n.complete=i,(n=ar(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var r=new Ja(n);return Ya(Xa(t,n),Xa(e,n),n,r),r}function Qa(t,e,n,i){return"function"==typeof n&&(i=n,n={}),void 0===n&&(n={}),(n=ar(n)).PouchConstructor=n.PouchConstructor||this,new tl(t=Xa(t,n),e=Xa(e,n),n,i)}function tl(t,e,n,i){var r=this;this.canceled=!1;var o=n.push?wr({},n,n.push):n,s=n.pull?wr({},n,n.pull):n;function a(t){r.emit("change",{direction:"pull",change:t})}function l(t){r.emit("change",{direction:"push",change:t})}function c(t){r.emit("denied",{direction:"push",doc:t})}function u(t){r.emit("denied",{direction:"pull",doc:t})}function d(){r.pushPaused=!0,r.pullPaused&&r.emit("paused")}function h(){r.pullPaused=!0,r.pushPaused&&r.emit("paused")}function f(){r.pushPaused=!1,r.pullPaused&&r.emit("active",{direction:"push"})}function p(){r.pullPaused=!1,r.pushPaused&&r.emit("active",{direction:"pull"})}this.push=Za(t,e,o),this.pull=Za(e,t,s),this.pushPaused=!0,this.pullPaused=!0;var g={};function m(t){return function(e,n){("change"===e&&(n===a||n===l)||"denied"===e&&(n===u||n===c)||"paused"===e&&(n===h||n===d)||"active"===e&&(n===p||n===f))&&(e in g||(g[e]={}),g[e][t]=!0,2===Object.keys(g[e]).length&&r.removeAllListeners(e))}}function v(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",r.pull.cancel.bind(r.pull)),this.pull.on("complete",r.push.cancel.bind(r.push))),this.on("newListener",(function(t){"change"===t?(v(r.pull,"change",a),v(r.push,"change",l)):"denied"===t?(v(r.pull,"denied",u),v(r.push,"denied",c)):"active"===t?(v(r.pull,"active",p),v(r.push,"active",f)):"paused"===t&&(v(r.pull,"paused",h),v(r.push,"paused",d))})),this.on("removeListener",(function(t){"change"===t?(r.pull.removeListener("change",a),r.push.removeListener("change",l)):"denied"===t?(r.pull.removeListener("denied",u),r.push.removeListener("denied",c)):"active"===t?(r.pull.removeListener("active",p),r.push.removeListener("active",f)):"paused"===t&&(r.pull.removeListener("paused",h),r.push.removeListener("paused",d))})),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));var y=Promise.all([this.push,this.pull]).then((function(t){var e={push:t[0],pull:t[1]};return r.emit("complete",e),i&&i(null,e),r.removeAllListeners(),e}),(function(t){if(r.cancel(),i?i(t):r.emit("error",t),r.removeAllListeners(),i)throw t}));this.then=function(t,e){return y.then(t,e)},this.catch=function(t){return y.catch(t)}}function el(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}ji(Ja,Hi),Ja.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Ja.prototype.ready=function(t,e){var n=this;function i(){n.cancel()}n._readyCalled||(n._readyCalled=!0,t.once("destroyed",i),e.once("destroyed",i),n.once("complete",(function(){t.removeListener("destroyed",i),e.removeListener("destroyed",i)})))},ji(tl,Hi),tl.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},No.plugin((function(t){t.adapter("idb",na,!0)})).plugin((function(t){t.adapter("http",ha,!1),t.adapter("https",ha,!1)})).plugin(za).plugin((function(t){t.replicate=Za,t.sync=Qa,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,n,i){return t.constructor.replicate(e,t,n,i)},to:function(e,n,i){return t.constructor.replicate(t,e,n,i)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}})),ji(el,Error),el.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new el(401,"unauthorized","Name or password is incorrect."),new el(400,"bad_request","Missing JSON list of 'docs'"),new el(404,"not_found","missing"),new el(409,"conflict","Document update conflict"),new el(400,"bad_request","_id field must contain a string"),new el(412,"missing_id","_id is required for puts"),new el(400,"bad_request","Only reserved document ids may start with underscore."),new el(412,"precondition_failed","Database not open");var nl=new el(500,"unknown_error","Database encountered an unknown error");function il(t){if("object"!=typeof t){var e=t;(t=nl).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}new el(500,"badarg","Some query argument is invalid"),new el(400,"invalid_request","Request was invalid"),new el(400,"query_parse_error","Some query parameter is invalid"),new el(500,"doc_validation","Bad special document member"),new el(400,"bad_request","Something wrong with the request"),new el(400,"bad_request","Document must be a JSON object"),new el(404,"not_found","Database not found"),new el(500,"indexed_db_went_bad","unknown"),new el(500,"web_sql_went_bad","unknown"),new el(500,"levelDB_went_went_bad","unknown"),new el(403,"forbidden","Forbidden by design doc validate_doc_update function"),new el(400,"bad_request","Invalid rev format"),new el(412,"file_exists","The database could not be created, the file already exists."),new el(412,"missing_stub","A pre-existing attachment stub wasn't found"),new el(413,"invalid_url","Provided URL is invalid");var rl,ol,sl=Headers;function al(t){return"$"+t}function ll(t){return t.substring(1)}function cl(){this._store={}}function ul(t){if(this._store=new cl,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}cl.prototype.get=function(t){var e=al(t);return this._store[e]},cl.prototype.set=function(t,e){var n=al(t);return this._store[n]=e,!0},cl.prototype.has=function(t){return al(t)in this._store},cl.prototype.delete=function(t){var e=al(t),n=e in this._store;return delete this._store[e],n},cl.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,i=e.length;n<i;n++){var r=e[n];t(this._store[r],r=ll(r))}},Object.defineProperty(cl.prototype,"size",{get:function(){return Object.keys(this._store).length}}),ul.prototype.add=function(t){return this._store.set(t,!0)},ul.prototype.has=function(t){return this._store.has(t)},ul.prototype.forEach=function(t){this._store.forEach((function(e,n){t(n)}))},Object.defineProperty(ul.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(rl=ul,ol=cl):(rl=Set,ol=Map);function dl(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function hl(t,e){return function(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}([dl(t)],{type:e})}function fl(t,e){return hl(atob(t),e)}var pl=-324;function gl(t,e){if(t===e)return 0;t=ml(t),e=ml(e);var n=wl(t),i=wl(e);if(n-i!=0)return n-i;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=gl(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;o<r;o++){var s=gl(n[o],i[o]);if(0!==s)return s;if(0!==(s=gl(t[n[o]],e[i[o]])))return s}return n.length===i.length?0:n.length>i.length?1:-1}(t,e)}function ml(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var i=0;i<n;i++)t[i]=ml(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var r in t={},e)if(e.hasOwnProperty(r)){var o=e[r];void 0!==o&&(t[r]=ml(o))}}}return t}function vl(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),i=t<0,r=i?"0":"2",o=(s=((i?-n:n)-pl).toString(),a="0",l=3,function(t,e,n){for(var i="",r=n-t.length;i.length<r;)i+=e;return i}(s,a,l)+s);var s,a,l;r+=""+o;var c=Math.abs(parseFloat(e[0]));i&&(c=10-c);var u=c.toFixed(20);return u=u.replace(/\.?0+$/,""),r+=""+u}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),i=-1,r=n.length,o="";if(e)for(;++i<r;)o+=yl(n[i]);else for(;++i<r;){var s=n[i];o+=yl(s)+yl(t[s])}return o}return""}function yl(t){return wl(t=ml(t))+""+vl(t)+"\0"}function bl(t,e){var n,i=e;if("1"===t[e])n=0,e++;else{var r="0"===t[e];e++;var o="",s=t.substring(e,e+3),a=parseInt(s,10)+pl;for(r&&(a=-a),e+=3;;){var l=t[e];if("\0"===l)break;o+=l,e++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),r&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:e-i}}function _l(t,e){var n=t.pop();if(e.length){var i=e[e.length-1];n===i.element&&(e.pop(),i=e[e.length-1]);var r=i.element,o=i.index;if(Array.isArray(r))r.push(n);else if(o===t.length-2){r[t.pop()]=n}else t.push(n)}}function wl(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}var xl={},kl={},$l={};Object.defineProperty($l,"__esModule",{value:!0}),$l.default=function(){if(!Sl)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sl(Cl)};const Sl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Cl=new Uint8Array(16);var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.default=void 0;const Ol=[];for(let t=0;t<256;++t)Ol.push((t+256).toString(16).substr(1));var Dl=function(t,e){const n=e||0,i=Ol;return(i[t[n+0]]+i[t[n+1]]+i[t[n+2]]+i[t[n+3]]+"-"+i[t[n+4]]+i[t[n+5]]+"-"+i[t[n+6]]+i[t[n+7]]+"-"+i[t[n+8]]+i[t[n+9]]+"-"+i[t[n+10]]+i[t[n+11]]+i[t[n+12]]+i[t[n+13]]+i[t[n+14]]+i[t[n+15]]).toLowerCase()};Ml.default=Dl,Object.defineProperty(kl,"__esModule",{value:!0}),kl.default=void 0;var Tl=Al($l),Ll=Al(Ml);function Al(t){return t&&t.__esModule?t:{default:t}}let El,Il,Pl=0,Bl=0;var zl=function(t,e,n){let i=e&&n||0;const r=e||[];let o=(t=t||{}).node||El,s=void 0!==t.clockseq?t.clockseq:Il;if(null==o||null==s){const e=t.random||(t.rng||Tl.default)();null==o&&(o=El=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==s&&(s=Il=16383&(e[6]<<8|e[7]))}let a=void 0!==t.msecs?t.msecs:Date.now(),l=void 0!==t.nsecs?t.nsecs:Bl+1;const c=a-Pl+(l-Bl)/1e4;if(c<0&&void 0===t.clockseq&&(s=s+1&16383),(c<0||a>Pl)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Pl=a,Bl=l,Il=s,a+=122192928e5;const u=(1e4*(268435455&a)+l)%4294967296;r[i++]=u>>>24&255,r[i++]=u>>>16&255,r[i++]=u>>>8&255,r[i++]=255&u;const d=a/4294967296*1e4&268435455;r[i++]=d>>>8&255,r[i++]=255&d,r[i++]=d>>>24&15|16,r[i++]=d>>>16&255,r[i++]=s>>>8|128,r[i++]=255&s;for(let t=0;t<6;++t)r[i+t]=o[t];return e||(0,Ll.default)(r)};kl.default=zl;var Fl={},Rl={};Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.default=function(t,e,n){function i(t,i,r,o){const s=r&&o||0;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof i&&(i=function(t){const e=[];return t.replace(/[a-fA-F0-9]{2}/g,(function(t){e.push(parseInt(t,16))})),e}(i)),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const a=n(i.concat(t));if(a[6]=15&a[6]|e,a[8]=63&a[8]|128,r)for(let t=0;t<16;++t)r[s+t]=a[t];return r||(0,Nl.default)(a)}try{i.name=t}catch(t){}return i.DNS=jl,i.URL=ql,i},Rl.URL=Rl.DNS=void 0;var Nl=function(t){return t&&t.__esModule?t:{default:t}}(Ml);const jl="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Rl.DNS=jl;const ql="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Rl.URL=ql;var Hl={};function Wl(t){return 14+(t+64>>>9<<4)+1}function Vl(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Ul(t,e,n,i,r,o){return Vl((s=Vl(Vl(e,t),Vl(i,o)))<<(a=r)|s>>>32-a,n);var s,a}function Gl(t,e,n,i,r,o,s){return Ul(e&n|~e&i,t,e,r,o,s)}function Kl(t,e,n,i,r,o,s){return Ul(e&i|n&~i,t,e,r,o,s)}function Yl(t,e,n,i,r,o,s){return Ul(e^n^i,t,e,r,o,s)}function Jl(t,e,n,i,r,o,s){return Ul(n^(e|~i),t,e,r,o,s)}Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.default=void 0;var Xl=function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,i="0123456789abcdef";for(let r=0;r<n;r+=8){const n=t[r>>5]>>>r%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[Wl(e)-1]=e;let n=1732584193,i=-271733879,r=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const s=n,a=i,l=r,c=o;n=Gl(n,i,r,o,t[e],7,-680876936),o=Gl(o,n,i,r,t[e+1],12,-389564586),r=Gl(r,o,n,i,t[e+2],17,606105819),i=Gl(i,r,o,n,t[e+3],22,-1044525330),n=Gl(n,i,r,o,t[e+4],7,-176418897),o=Gl(o,n,i,r,t[e+5],12,1200080426),r=Gl(r,o,n,i,t[e+6],17,-1473231341),i=Gl(i,r,o,n,t[e+7],22,-45705983),n=Gl(n,i,r,o,t[e+8],7,1770035416),o=Gl(o,n,i,r,t[e+9],12,-1958414417),r=Gl(r,o,n,i,t[e+10],17,-42063),i=Gl(i,r,o,n,t[e+11],22,-1990404162),n=Gl(n,i,r,o,t[e+12],7,1804603682),o=Gl(o,n,i,r,t[e+13],12,-40341101),r=Gl(r,o,n,i,t[e+14],17,-1502002290),i=Gl(i,r,o,n,t[e+15],22,1236535329),n=Kl(n,i,r,o,t[e+1],5,-165796510),o=Kl(o,n,i,r,t[e+6],9,-1069501632),r=Kl(r,o,n,i,t[e+11],14,643717713),i=Kl(i,r,o,n,t[e],20,-373897302),n=Kl(n,i,r,o,t[e+5],5,-701558691),o=Kl(o,n,i,r,t[e+10],9,38016083),r=Kl(r,o,n,i,t[e+15],14,-660478335),i=Kl(i,r,o,n,t[e+4],20,-405537848),n=Kl(n,i,r,o,t[e+9],5,568446438),o=Kl(o,n,i,r,t[e+14],9,-1019803690),r=Kl(r,o,n,i,t[e+3],14,-187363961),i=Kl(i,r,o,n,t[e+8],20,1163531501),n=Kl(n,i,r,o,t[e+13],5,-1444681467),o=Kl(o,n,i,r,t[e+2],9,-51403784),r=Kl(r,o,n,i,t[e+7],14,1735328473),i=Kl(i,r,o,n,t[e+12],20,-1926607734),n=Yl(n,i,r,o,t[e+5],4,-378558),o=Yl(o,n,i,r,t[e+8],11,-2022574463),r=Yl(r,o,n,i,t[e+11],16,1839030562),i=Yl(i,r,o,n,t[e+14],23,-35309556),n=Yl(n,i,r,o,t[e+1],4,-1530992060),o=Yl(o,n,i,r,t[e+4],11,1272893353),r=Yl(r,o,n,i,t[e+7],16,-155497632),i=Yl(i,r,o,n,t[e+10],23,-1094730640),n=Yl(n,i,r,o,t[e+13],4,681279174),o=Yl(o,n,i,r,t[e],11,-358537222),r=Yl(r,o,n,i,t[e+3],16,-722521979),i=Yl(i,r,o,n,t[e+6],23,76029189),n=Yl(n,i,r,o,t[e+9],4,-640364487),o=Yl(o,n,i,r,t[e+12],11,-421815835),r=Yl(r,o,n,i,t[e+15],16,530742520),i=Yl(i,r,o,n,t[e+2],23,-995338651),n=Jl(n,i,r,o,t[e],6,-198630844),o=Jl(o,n,i,r,t[e+7],10,1126891415),r=Jl(r,o,n,i,t[e+14],15,-1416354905),i=Jl(i,r,o,n,t[e+5],21,-57434055),n=Jl(n,i,r,o,t[e+12],6,1700485571),o=Jl(o,n,i,r,t[e+3],10,-1894986606),r=Jl(r,o,n,i,t[e+10],15,-1051523),i=Jl(i,r,o,n,t[e+1],21,-2054922799),n=Jl(n,i,r,o,t[e+8],6,1873313359),o=Jl(o,n,i,r,t[e+15],10,-30611744),r=Jl(r,o,n,i,t[e+6],15,-1560198380),i=Jl(i,r,o,n,t[e+13],21,1309151649),n=Jl(n,i,r,o,t[e+4],6,-145523070),o=Jl(o,n,i,r,t[e+11],10,-1120210379),r=Jl(r,o,n,i,t[e+2],15,718787259),i=Jl(i,r,o,n,t[e+9],21,-343485551),n=Vl(n,s),i=Vl(i,a),r=Vl(r,l),o=Vl(o,c)}return[n,i,r,o]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(Wl(e));for(let i=0;i<e;i+=8)n[i>>5]|=(255&t[i/8])<<i%32;return n}(t),8*t.length))};Hl.default=Xl,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.default=void 0;var Zl=tc(Rl),Ql=tc(Hl);function tc(t){return t&&t.__esModule?t:{default:t}}var ec=(0,Zl.default)("v3",48,Ql.default);Fl.default=ec;var nc={};Object.defineProperty(nc,"__esModule",{value:!0}),nc.default=void 0;var ic=oc($l),rc=oc(Ml);function oc(t){return t&&t.__esModule?t:{default:t}}var sc=function(t,e,n){"string"==typeof t&&(e="binary"===t?new Uint8Array(16):null,t=null);const i=(t=t||{}).random||(t.rng||ic.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){const t=n||0;for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,rc.default)(i)};nc.default=sc;var ac={},lc={};function cc(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function uc(t,e){return t<<e|t>>>32-e}Object.defineProperty(lc,"__esModule",{value:!0}),lc.default=void 0;var dc=function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}t.push(128);const i=t.length/4+2,r=Math.ceil(i/16),o=new Array(r);for(let e=0;e<r;++e){const n=new Uint32Array(16);for(let i=0;i<16;++i)n[i]=t[64*e+4*i]<<24|t[64*e+4*i+1]<<16|t[64*e+4*i+2]<<8|t[64*e+4*i+3];o[e]=n}o[r-1][14]=8*(t.length-1)/Math.pow(2,32),o[r-1][14]=Math.floor(o[r-1][14]),o[r-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<r;++t){const i=new Uint32Array(80);for(let e=0;e<16;++e)i[e]=o[t][e];for(let t=16;t<80;++t)i[t]=uc(i[t-3]^i[t-8]^i[t-14]^i[t-16],1);let r=n[0],s=n[1],a=n[2],l=n[3],c=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),o=uc(r,5)+cc(n,s,a,l)+c+e[n]+i[t]>>>0;c=l,l=a,a=uc(s,30)>>>0,s=r,r=o}n[0]=n[0]+r>>>0,n[1]=n[1]+s>>>0,n[2]=n[2]+a>>>0,n[3]=n[3]+l>>>0,n[4]=n[4]+c>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};lc.default=dc,Object.defineProperty(ac,"__esModule",{value:!0}),ac.default=void 0;var hc=pc(Rl),fc=pc(lc);function pc(t){return t&&t.__esModule?t:{default:t}}var gc=(0,hc.default)("v5",80,fc.default);ac.default=gc,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return r.default}});var e=o(kl),n=o(Fl),i=o(nc),r=o(ac);function o(t){return t&&t.__esModule?t:{default:t}}}(xl);var mc=pn(xl);mc.v1,mc.v3;mc.v4;function vc(t){return Ii.hash(t)}function yc(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),i=new Uint8Array(t);return n.set(i),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}mc.v5;var bc,_c=Function.prototype.toString,wc=_c.call(Object);function xc(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=xc(t[n]);return e}if(t instanceof Date)return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return yc(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&_c.call(n)==wc}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=xc(t[n]);void 0!==r&&(e[n]=r)}return e}function kc(t){return zi((function(e){e=xc(e);var n=this,i="function"==typeof e[e.length-1]&&e.pop(),r=new Promise((function(i,r){var o,s,a;try{var l=(s=function(t,e){t?r(t):i(e)},a=!1,zi((function(t){if(a)throw new Error("once called more than once");a=!0,s.apply(this,t)})));e.push(l),(o=t.apply(n,e))&&"function"==typeof o.then&&i(o)}catch(t){r(t)}}));return i&&r.then((function(t){i(null,t)}),i),r}))}try{localStorage.setItem("_pouch_check_localstorage",1),bc=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){bc=!1}function $c(){return bc}function Sc(){Hi.call(this),this._listeners={},function(t){$c()&&addEventListener("storage",(function(e){t.emit(e.key)}))}(this)}function Cc(t){if("undefined"!=typeof console&&"function"==typeof console[t]){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}ji(Sc,Hi),Sc.prototype.addListener=function(t,e,n,i){if(!this._listeners[e]){var r=this,o=!1;this._listeners[e]=s,this.on(t,s)}function s(){if(r._listeners[e])if(o)o="waiting";else{o=!0;var t=function(t,e){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i];o in t&&(n[o]=t[o])}return n}(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(t).on("change",(function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,i.onChange(t))})).on("complete",(function(){"waiting"===o&&Pn(s),o=!1})).on("error",(function(){o=!1}))}}},Sc.prototype.removeListener=function(t,e){e in this._listeners&&(Hi.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},Sc.prototype.notifyLocalWindows=function(t){$c()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},Sc.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var Mc="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};function Oc(t){for(var e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n]);return e}function Dc(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(Cc("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function Tc(t,e,n){return new Promise((function(i,r){t.get(e,(function(o,s){if(o){if(404!==o.status)return r(o);s={}}var a=s._rev,l=n(s);if(!l)return i({updated:!1,rev:a});l._id=e,l._rev=a,i(function(t,e,n){return t.put(e).then((function(t){return{updated:!0,rev:t.rev}}),(function(i){if(409!==i.status)throw i;return Tc(t,e._id,n)}))}(t,l,n))}))}))}function Lc(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Lc)}catch(t){}}function Ac(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Ac)}catch(t){}}function Ec(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Ec)}catch(t){}}function Ic(t,e){return e&&t.then((function(t){Pn((function(){e(null,t)}))}),(function(t){Pn((function(){e(t)}))})),t}function Pc(t,e){return function(){var n=arguments,i=this;return t.add((function(){return e.apply(i,n)}))}}function Bc(t){var e=new rl(t),n=new Array(e.size),i=-1;return e.forEach((function(t){n[++i]=t})),n}function zc(t){var e=new Array(t.size),n=-1;return t.forEach((function(t,i){e[++n]=i})),e}function Fc(){this.promise=new Promise((function(t){t()}))}function Rc(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Nc(t,e,n,i,r,o){var s,a=function(t,e){return Rc(t)+Rc(e)+"undefined"}(n,i);if(!r&&(s=t._cachedViews=t._cachedViews||{})[a])return s[a];var l=t.info().then((function(l){var c=l.db_name+"-mrview-"+(r?"temp":vc(a));return Tc(t,"_local/"+o,(function(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var i=t.views[n]=t.views[n]||{};if(!i[c])return i[c]=!0,t})).then((function(){return t.registerDependentDatabase(c).then((function(e){var r=e.db;r.auto_compaction=!0;var o={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:i};return o.db.get("_local/lastSeq").catch((function(t){if(404!==t.status)throw t})).then((function(t){return o.seq=t?t.seq:0,s&&o.db.once("destroyed",(function(){delete s[a]})),o}))}))}))}));return s&&(s[a]=l),l}ji(Lc,Error),ji(Ac,Error),ji(Ec,Error),Fc.prototype.add=function(t){return this.promise=this.promise.catch((function(){})).then((function(){return t()})),this.promise},Fc.prototype.finish=function(){return this.promise};var jc={},qc=new Fc;function Hc(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Wc(t,e){try{t.emit("error",e)}catch(t){Cc("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Cc("error",e)}}function Vc(t,e){for(var n=t,i=0,r=e.length;i<r;i++){if(!(n=n[e[i]]))break}return n}function Uc(t,e,n){for(var i=0,r=e.length;i<r-1;i++){var o=e[i];t=t[o]=t[o]||{}}t[e[r-1]]=n}function Gc(t,e){return t<e?-1:t>e?1:0}function Kc(t){for(var e=[],n="",i=0,r=t.length;i<r;i++){var o=t[i];"."===o?i>0&&"\\"===t[i-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}var Yc=["$or","$nor","$not"];function Jc(t){return Yc.indexOf(t)>-1}function Xc(t){return Object.keys(t)[0]}function Zc(t){return t[Xc(t)]}function Qc(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];if("object"!=typeof i&&(i={$eq:i}),Jc(n))e[n]=i instanceof Array?i.map((function(t){return Qc([t])})):Qc([i]);else{var r=e[n]=e[n]||{};Object.keys(i).forEach((function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e}(t,e,r):"$lt"===t||"$lte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e}(t,e,r):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,r):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,r):void(r[t]=e)}))}}))})),e}function tu(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=Qc(t[n].$and));var i=t[e];"object"==typeof i&&tu(i)}return t}function eu(t,e){for(var n in t){"$and"===n&&(e=!0);var i=t[n];"object"==typeof i&&(e=eu(i,e))}return e}function nu(t){var e=xc(t),n=!1;eu(e,!1)&&("$and"in(e=tu(e))&&(e=Qc(e.$and)),n=!0),["$or","$nor"].forEach((function(t){t in e&&e[t].forEach((function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],r=t[i];"object"==typeof r&&null!==r||(t[i]={$eq:r})}}))})),"$not"in e&&(e.$not=Qc([e.$not]));for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],s=e[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),e[o]=s}return e}function iu(t,e,n){if(t=t.filter((function(t){return ru(t.doc,e.selector,n)})),e.sort){var i=function(t){function e(e){return t.map((function(t){var n=Kc(Xc(t));return Vc(e,n)}))}return function(t,n){var i=gl(e(t.doc),e(n.doc));return 0!==i?i:Gc(t.doc._id,n.doc._id)}}(e.sort);t=t.sort(i),"string"!=typeof e.sort[0]&&"desc"===Zc(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0,o=("limit"in e?e.limit:t.length)+r;t=t.slice(r,o)}return t}function ru(t,e,n){return n.every((function(n){var i=e[n],r=Kc(n),o=Vc(t,r);return Jc(n)?function(t,e,n){if("$or"===t)return e.some((function(t){return ru(n,t,Object.keys(t))}));if("$not"===t)return!ru(n,e,Object.keys(e));return!e.find((function(t){return ru(n,t,Object.keys(t))}))}(n,i,t):ou(i,t,r,o)}))}function ou(t,e,n,i){return!t||("object"==typeof t?Object.keys(t).every((function(r){var o=t[r];return function(t,e,n,i,r){if(!cu[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return cu[t](e,n,i,r)}(r,e,o,n,i)})):t===i)}function su(t){return null!=t}function au(t){return void 0!==t}function lu(t,e){return e.some((function(e){return t instanceof Array?t.indexOf(e)>-1:t===e}))}var cu={$elemMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.some((function(t){return ru(t,e,Object.keys(e))})):i.some((function(i){return ou(e,t,n,i)}))))},$allMatch:function(t,e,n,i){return!!Array.isArray(i)&&(0!==i.length&&("object"==typeof i[0]?i.every((function(t){return ru(t,e,Object.keys(e))})):i.every((function(i){return ou(e,t,n,i)}))))},$eq:function(t,e,n,i){return au(i)&&0===gl(i,e)},$gte:function(t,e,n,i){return au(i)&&gl(i,e)>=0},$gt:function(t,e,n,i){return au(i)&&gl(i,e)>0},$lte:function(t,e,n,i){return au(i)&&gl(i,e)<=0},$lt:function(t,e,n,i){return au(i)&&gl(i,e)<0},$exists:function(t,e,n,i){return e?au(i):!au(i)},$mod:function(t,e,n,i){return su(i)&&function(t,e){var n=e[0],i=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(i,10)!==i)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===i}(i,e)},$ne:function(t,e,n,i){return e.every((function(t){return 0!==gl(i,t)}))},$in:function(t,e,n,i){return su(i)&&lu(i,e)},$nin:function(t,e,n,i){return su(i)&&!lu(i,e)},$size:function(t,e,n,i){return su(i)&&function(t,e){return t.length===e}(i,e)},$all:function(t,e,n,i){return Array.isArray(i)&&function(t,e){return e.every((function(e){return t.indexOf(e)>-1}))}(i,e)},$regex:function(t,e,n,i){return su(i)&&function(t,e){return new RegExp(e).test(t)}(i,e)},$type:function(t,e,n,i){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(i,e)}};function uu(t){return(t=xc(t)).index||(t.index={}),["type","name","ddoc"].forEach((function(e){t.index[e]&&(t[e]=t.index[e],delete t.index[e])})),t.fields&&(t.index.fields=t.fields,delete t.fields),t.type||(t.type="json"),t}function du(t,e,n,i){var r,o;n.headers=new sl({"Content-type":"application/json"}),t.fetch(e,n).then((function(t){return r=t.status,o=t.ok,t.json()})).then((function(t){if(o)i(null,t);else{t.status=r;var e=il(t);i(e)}})).catch(i)}function hu(t,e,n){e=uu(e),du(t,"_index",{method:"POST",body:JSON.stringify(e)},n)}function fu(t,e,n){du(t,"_find",{method:"POST",body:JSON.stringify(e)},n)}function pu(t,e,n){du(t,"_explain",{method:"POST",body:JSON.stringify(e)},n)}function gu(t,e){du(t,"_index",{method:"GET"},e)}function mu(t,e,n){var i=e.ddoc,r=e.type||"json",o=e.name;return i?o?void du(t,"_index/"+[i,r,o].map(encodeURIComponent).join("/"),{method:"DELETE"},n):n(new Error("you must provide an index's name")):n(new Error("you must provide an index's ddoc"))}function vu(t){return function(){for(var e=arguments.length,n=new Array(e),i=-1;++i<e;)n[i]=arguments[i];return t.call(this,n)}}function yu(t){return vu((function(e){var n=e.pop(),i=t.apply(this,e);return function(t,e){t.then((function(t){Pn((function(){e(null,t)}))}),(function(t){Pn((function(){e(t)}))}))}(i,n),i}))}var bu=vu((function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];Array.isArray(r)?e=e.concat(bu.apply(null,r)):e.push(r)}return e}));function _u(t){for(var e={},n=0,i=t.length;n<i;n++)e=Mc(e,t[n]);return e}function wu(t,e){for(var n=0,i=Math.min(t.length,e.length);n<i;n++)if(t[n]!==e[n])return!1;return!0}function xu(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ku(t,e){var n=function(t){for(var e=0,n=t.length;e<n;e++)if(-1!==t[e].indexOf("."))return!1;return!0}(t),i=1===t.length;return n?i?function(t,e){return function(n){e(n[t])}}(t[0],e):function(t,e){return function(n){for(var i=[],r=0,o=t.length;r<o;r++)i.push(n[t[r]]);e(i)}}(t,e):i?function(t,e){var n=Kc(t);return function(t){for(var i=t,r=0,o=n.length;r<o;r++)if(void 0===(i=i[n[r]]))return;e(i)}}(t[0],e):function(t,e){return function(n){for(var i=[],r=0,o=t.length;r<o;r++){for(var s=Kc(t[r]),a=n,l=0,c=s.length;l<c;l++)if(void 0===(a=a[s[l]]))return;i.push(a)}e(i)}}(t,e)}var $u=function(t,e,n,i){function r(t,e,n){try{e(n)}catch(e){Wc(t,e)}}function o(t,e,n,i,r){try{return{output:e(n,i,r)}}catch(e){return Wc(t,e),{error:e}}}function s(t,e){var n=gl(t.key,e.key);return 0!==n?n:gl(t.value,e.value)}function a(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function l(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function c(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach((function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach((function(t){var n=e[t];e[t].data=fl(n.data,n.content_type)}))}))}(e),e}}function u(t,e,n,i){var r=e[t];void 0!==r&&(i&&(r=encodeURIComponent(JSON.stringify(r))),n.push(t+"="+r))}function d(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function h(t,e){var n=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[i]&&gl(t[n],t[i])>0)throw new Lc("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new Lc("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new Lc("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(e){var n=function(t){if(t){if("number"!=typeof t)return new Lc('Invalid value for integer: "'+t+'"');if(t<0)return new Lc('Invalid value for positive integer: "'+t+'"')}}(t[e]);if(n)throw n}))}function f(t){return function(e){if(404===e.status)return t;throw e}}function p(t,e,n){var i="_local/doc_"+t,r={_id:i,keys:[]},o=n.get(t),s=o[0];return(function(t){return 1===t.length&&/^1-/.test(t[0].rev)}(o[1])?Promise.resolve(r):e.db.get(i).catch(f(r))).then((function(t){return function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):Promise.resolve({rows:[]})}(t).then((function(e){return function(t,e){for(var n=[],i=new rl,r=0,o=e.rows.length;r<o;r++){var a=e.rows[r].doc;if(a&&(n.push(a),i.add(a._id),a._deleted=!s.has(a._id),!a._deleted)){var l=s.get(a._id);"value"in l&&(a.value=l.value)}}var c=zc(s);return c.forEach((function(t){if(!i.has(t)){var e={_id:t},r=s.get(t);"value"in r&&(e.value=r.value),n.push(e)}})),t.keys=Bc(c.concat(t.keys)),n.push(t),n}(t,e)}))}))}function g(t){var e="string"==typeof t?t:t.name,n=jc[e];return n||(n=jc[e]=new Fc),n}function m(t){return Pc(g(t),(function(){return function(t){var n,i;function o(t,e){var r={id:i._id,key:ml(t)};null!=e&&(r.value=ml(e)),n.push(r)}var a=e(t.mapFun,o),l=t.seq||0;function c(e,n){return function(){return function(t,e,n){var i="_local/lastSeq";return t.db.get(i).catch(f({_id:i,seq:0})).then((function(i){var r=zc(e);return Promise.all(r.map((function(n){return p(n,t,e)}))).then((function(e){var r=Oc(e);return i.seq=n,r.push(i),t.db.bulkDocs({docs:r})}))}))}(t,e,n)}}var u=new Fc;function d(){return t.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:l,limit:50}).then(h)}function h(t){var e=t.results;if(e.length){var n=g(e);if(u.add(c(n,l)),!(e.length<50))return d()}}function g(e){for(var o=new ol,c=0,u=e.length;c<u;c++){var d=e[c];if("_"!==d.doc._id[0]){n=[],(i=d.doc)._deleted||r(t.sourceDB,a,i),n.sort(s);var h=m(n);o.set(d.doc._id,[h,d.changes])}l=d.seq}return o}function m(t){for(var e,n=new ol,i=0,r=t.length;i<r;i++){var o=t[i],s=[o.key,o.id];i>0&&0===gl(o.key,e)&&s.push(i),n.set(yl(s),o),e=o.key}return n}return d().then((function(){return u.finish()})).then((function(){t.seq=l}))}(t)}))()}function v(t,e){return Pc(g(t),(function(){return function(t,e){var i,r=t.reduceFun&&!1!==e.reduce,s=e.skip||0;void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys);function c(e){return e.include_docs=!0,t.db.allDocs(e).then((function(t){return i=t.total_rows,t.rows.map((function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var i=function(t){for(var e=[],n=[],i=0;;){var r=t[i++];if("\0"!==r)switch(r){case"1":e.push(null);break;case"2":e.push("1"===t[i]),i++;break;case"3":var o=bl(t,i);e.push(o.num),i+=o.length;break;case"4":for(var s="";;){var a=t[i];if("\0"===a)break;s+=a,i++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(s);break;case"5":var l={element:[],index:e.length};e.push(l.element),n.push(l);break;case"6":var c={element:{},index:e.length};e.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+r)}else{if(1===e.length)return e.pop();_l(e,n)}}}(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}}))}))}function u(c){var u;if(u=r?function(t,e,i){0===i.group_level&&delete i.group_level;var r=i.group||i.group_level,s=n(t.reduceFun),l=[],c=isNaN(i.group_level)?Number.POSITIVE_INFINITY:i.group_level;e.forEach((function(t){var e=l[l.length-1],n=r?t.key:null;if(r&&Array.isArray(n)&&(n=n.slice(0,c)),e&&0===gl(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);l.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})})),e=[];for(var u=0,d=l.length;u<d;u++){var h=l[u],f=o(t.sourceDB,s,h.keys,h.values,!1);if(f.error&&f.error instanceof Ec)throw f.error;e.push({value:f.error?null:f.output,key:h.groupKey})}return{rows:a(e,i.limit,i.skip)}}(t,c,e):{total_rows:i,offset:s,rows:c},e.update_seq&&(u.update_seq=t.seq),e.include_docs){var d=Bc(c.map(l));return t.sourceDB.allDocs({keys:d,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then((function(t){var e=new ol;return t.rows.forEach((function(t){e.set(t.id,t.doc)})),c.forEach((function(t){var n=l(t),i=e.get(n);i&&(t.doc=i)})),u}))}return u}if(void 0!==e.keys){var d=e.keys.map((function(t){var n={startkey:yl([t]),endkey:yl([t,{}])};return e.update_seq&&(n.update_seq=!0),c(n)}));return Promise.all(d).then(Oc).then(u)}var h,f,p={descending:e.descending};if(e.update_seq&&(p.update_seq=!0),"start_key"in e&&(h=e.start_key),"startkey"in e&&(h=e.startkey),"end_key"in e&&(f=e.end_key),"endkey"in e&&(f=e.endkey),void 0!==h&&(p.startkey=e.descending?yl([h,{}]):yl([h])),void 0!==f){var g=!1!==e.inclusive_end;e.descending&&(g=!g),p.endkey=yl(g?[f,{}]:[f])}if(void 0!==e.key){var m=yl([e.key]),v=yl([e.key,{}]);p.descending?(p.endkey=m,p.startkey=v):(p.startkey=m,p.endkey=v)}return r||("number"==typeof e.limit&&(p.limit=e.limit),p.skip=s),c(p).then(u)}(t,e)}))()}function y(e,n,r){if("function"==typeof e._query)return function(t,e,n){return new Promise((function(i,r){t._query(e,n,(function(t,e){if(t)return r(t);i(e)}))}))}(e,n,r);if(Dc(e))return function(t,e,n){var i,r,o,s=[],a="GET";if(u("reduce",n,s),u("include_docs",n,s),u("attachments",n,s),u("limit",n,s),u("descending",n,s),u("group",n,s),u("group_level",n,s),u("skip",n,s),u("stale",n,s),u("conflicts",n,s),u("startkey",n,s,!0),u("start_key",n,s,!0),u("endkey",n,s,!0),u("end_key",n,s,!0),u("inclusive_end",n,s),u("key",n,s,!0),u("update_seq",n,s),s=""===(s=s.join("&"))?"":"?"+s,void 0!==n.keys){var l="keys="+encodeURIComponent(JSON.stringify(n.keys));l.length+s.length+1<=2e3?s+=("?"===s[0]?"&":"?")+l:(a="POST","string"==typeof e?i={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var d=Hc(e);return t.fetch("_design/"+d[0]+"/_view/"+d[1]+s,{headers:new sl({"Content-Type":"application/json"}),method:a,body:JSON.stringify(i)}).then((function(t){return r=t.ok,o=t.status,t.json()})).then((function(t){if(!r)throw t.status=o,il(t);return t.rows.forEach((function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)})),t})).then(c(n))}return i=i||{},Object.keys(e).forEach((function(t){Array.isArray(e[t])?i[t]=e[t]:i[t]=e[t].toString()})),t.fetch("_temp_view"+s,{headers:new sl({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(i)}).then((function(t){return r=t.ok,o=t.status,t.json()})).then((function(t){if(!r)throw t.status=o,il(t);return t})).then(c(n))}(e,n,r);if("string"!=typeof n)return h(r,n),qc.add((function(){return Nc(e,"temp_view/temp_view",n.map,n.reduce,!0,t).then((function(t){return function(t,e){return t.then((function(t){return e().then((function(){return t}))}),(function(t){return e().then((function(){throw t}))}))}(m(t).then((function(){return v(t,r)})),(function(){return t.db.destroy()}))}))})),qc.finish();var o=n,s=Hc(o),a=s[0],l=s[1];return e.get("_design/"+a).then((function(n){var s=n.views&&n.views[l];if(!s)throw new Ac("ddoc "+n._id+" has no view named "+l);return i(n,l),h(r,s),Nc(e,o,s.map,s.reduce,!1,t).then((function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&Pn((function(){m(t)})),v(t,r)):m(t).then((function(){return v(t,r)}))}))}))}var b;return{query:function(t,e,n){var i=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=d(t.group_level),t.limit=d(t.limit),t.skip=d(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});var r=Promise.resolve().then((function(){return y(i,t,e)}));return Ic(r,n),r},viewCleanup:(b=function(){var e=this;return"function"==typeof e._viewCleanup?function(t){return new Promise((function(e,n){t._viewCleanup((function(t,i){if(t)return n(t);e(i)}))}))}(e):Dc(e)?function(t){return t.fetch("_view_cleanup",{headers:new sl({"Content-Type":"application/json"}),method:"POST"}).then((function(t){return t.json()}))}(e):function(e){return e.get("_local/"+t).then((function(t){var n=new ol;Object.keys(t.views).forEach((function(t){var e=Hc(t),i="_design/"+e[0],r=e[1],o=n.get(i);o||(o=new rl,n.set(i,o)),o.add(r)}));var i={keys:zc(n),include_docs:!0};return e.allDocs(i).then((function(i){var r={};i.rows.forEach((function(e){var i=e.key.substring(8);n.get(e.key).forEach((function(n){var o=i+"/"+n;t.views[o]||(o=n);var s=Object.keys(t.views[o]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach((function(t){r[t]=r[t]||a}))}))}));var o=Object.keys(r).filter((function(t){return!r[t]})).map((function(t){return Pc(g(t),(function(){return new e.constructor(t,e.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),f({ok:!0}))}(e)},zi((function(t){var e=t.pop(),n=b.apply(this,t);return"function"==typeof e&&Ic(n,e),n})))}}("indexes",(function(t,e){return ku(Object.keys(t.fields),e)}),(function(){throw new Error("reduce not supported")}),(function(t,e){var n=t.views[e];if(!n.map||!n.map.fields)throw new Error("ddoc "+t._id+" with view "+e+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}));function Su(t){return t._customFindAbstractMapper||$u}function Cu(t){return t.fields=t.fields.map((function(t){if("string"==typeof t){var e={};return e[t]="asc",e}return t})),t}function Mu(t,e){for(var n=[],i=0;i<e.def.fields.length;i++){var r=Xc(e.def.fields[i]);n.push(t[r])}return n}function Ou(t){return t.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then((function(t){var e={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return e.indexes=bu(e.indexes,t.rows.filter((function(t){return"query"===t.doc.language})).map((function(t){return(void 0!==t.doc.views?Object.keys(t.doc.views):[]).map((function(e){var n=t.doc.views[e];return{ddoc:t.id,name:e,type:"json",def:Cu(n.options.def)}}))}))),e.indexes.sort((function(t,e){return Gc(t.name,e.name)})),e.total_rows=e.indexes.length,e}))}var Du=null,Tu={"￿":{}};const Lu={queryOpts:{limit:0,startkey:Tu,endkey:Du},inMemoryFields:[]};function Au(t,e){for(var n=t.def.fields.map(Xc),i=0,r=n.length;i<r;i++){if(e===n[i])return!0}return!1}function Eu(t,e){return"$eq"!==Xc(t[e])}function Iu(t,e){var n=e.def.fields.map(Xc);return t.slice().sort((function(t,e){var i=n.indexOf(t),r=n.indexOf(e);return-1===i&&(i=Number.MAX_VALUE),-1===r&&(r=Number.MAX_VALUE),Gc(i,r)}))}function Pu(t,e,n,i){var r=bu(t,function(t,e,n){for(var i=!1,r=0,o=(n=Iu(n,t)).length;r<o;r++){var s=n[r];if(i||!Au(t,s))return n.slice(r);r<o-1&&Eu(e,s)&&(i=!0)}return[]}(e,n,i),function(t){var e=[];return Object.keys(t).forEach((function(n){var i=t[n];Object.keys(i).forEach((function(t){"$ne"===t&&e.push(n)}))})),e}(n));return Iu(function(t){for(var e={},n=0;n<t.length;n++)e["$"+t[n]]=!0;return Object.keys(e).map((function(t){return t.substring(1)}))}(r),e)}function Bu(t,e,n){if(e){var i=(s=t,!((o=e).length>s.length)&&wu(o,s)),r=wu(n,t);return i&&r}var o,s;return function(t,e){t=t.slice();for(var n=0,i=e.length;n<i;n++){var r=e[n];if(!t.length)break;var o=t.indexOf(r);if(-1===o)return!1;t.splice(o,1)}return!0}(n,t)}var zu=["$eq","$gt","$gte","$lt","$lte"];function Fu(t){return-1===zu.indexOf(t)}function Ru(t,e,n,i){var r=t.def.fields.map(Xc);return!!Bu(r,e,n)&&function(t,e){var n=e[t[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===Xc(n))}(r,i)}function Nu(t,e,n,i,r){var o=function(t,e,n,i){return i.filter((function(i){return Ru(i,n,e,t)}))}(t,e,n,i);if(0===o.length){if(r)throw{error:"no_usable_index",message:"There is no index available for this selector."};var s=i[0];return s.defaultUsed=!0,s}if(1===o.length&&!r)return o[0];var a=function(t){for(var e={},n=0,i=t.length;n<i;n++)e[t[n]]=!0;return e}(e);if(r){var l="_design/"+r[0],c=2===r.length&&r[1],u=o.find((function(t){return!(!c||t.ddoc!==l||c!==t.name)||t.ddoc===l}));if(!u)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return u}return function(t,e){for(var n=null,i=-1,r=0,o=t.length;r<o;r++){var s=t[r],a=e(s);a>i&&(i=a,n=s)}return n}(o,(function(t){for(var e=t.def.fields.map(Xc),n=0,i=0,r=e.length;i<r;i++){var o=e[i];a[o]&&n++}return n}))}function ju(t,e){var n,i=Xc(e.def.fields[0]),r=t[i]||{},o=[];return Object.keys(r).forEach((function(t){Fu(t)&&o.push(i);var e=function(t,e){switch(t){case"$eq":return{key:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}return{startkey:Du}}(t,r[t]);n=n?_u([n,e]):e})),{queryOpts:n,inMemoryFields:o}}function qu(t,e){switch(t){case"$eq":return{startkey:e,endkey:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}}function Hu(t,e){return e.defaultUsed?function(t){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(t)]}}(t):1===e.def.fields.length?ju(t,e):function(t,e){var n,i,r=e.def.fields.map(Xc),o=[],s=[],a=[];function l(t){!1!==n&&s.push(Du),!1!==i&&a.push(Tu),o=r.slice(t)}for(var c=0,u=r.length;c<u;c++){var d=t[r[c]];if(!d||!Object.keys(d).length){l(c);break}if(Object.keys(d).some(Fu)){l(c);break}if(c>0){var h="$gt"in d||"$gte"in d||"$lt"in d||"$lte"in d,f=Object.keys(t[r[c-1]]),p=xu(f,["$eq"]),g=xu(f,Object.keys(d));if(h&&!p&&!g){l(c);break}}for(var m=Object.keys(d),v=null,y=0;y<m.length;y++){var b=m[y],_=qu(b,d[b]);v=v?_u([v,_]):_}s.push("startkey"in v?v.startkey:Du),a.push("endkey"in v?v.endkey:Tu),"inclusive_start"in v&&(n=v.inclusive_start),"inclusive_end"in v&&(i=v.inclusive_end)}var w={startkey:s,endkey:a};return void 0!==n&&(w.inclusive_start=n),void 0!==i&&(w.inclusive_end=i),{queryOpts:w,inMemoryFields:o}}(t,e)}function Wu(t,e){var n=t.selector,i=t.sort;if(function(t){return Object.keys(t).map((function(e){return t[e]})).some((function(t){return"object"==typeof t&&0===Object.keys(t).length}))}(n))return Mc({},Lu,{index:e[0]});var r=function(t,e){var n,i=Object.keys(t),r=e?e.map(Xc):[];return n=i.length>=r.length?i:r,0===r.length?{fields:n}:{fields:n=n.sort((function(t,e){var n=r.indexOf(t);-1===n&&(n=Number.MAX_VALUE);var i=r.indexOf(e);return-1===i&&(i=Number.MAX_VALUE),n<i?-1:n>i?1:0})),sortOrder:e.map(Xc)}}(n,i),o=r.fields,s=Nu(n,o,r.sortOrder,e,t.use_index),a=Hu(n,s);return{queryOpts:a.queryOpts,index:s,inMemoryFields:Pu(a.inMemoryFields,s,n,o)}}function Vu(t,e,n){var i,r;return e.selector&&(e.selector=nu(e.selector)),e.sort&&(e.sort=function(t){if(!Array.isArray(t))throw new Error("invalid sort json - should be an array");return t.map((function(t){if("string"==typeof t){var e={};return e[t]="asc",e}return t}))}(e.sort)),e.use_index&&(e.use_index=(i=e.use_index,r=[],"string"==typeof i?r.push(i):r=i,r.map((function(t){return t.replace("_design/","")})))),function(t){if("object"!=typeof t.selector)throw new Error("you must provide a selector when you find()")}(e),Ou(t).then((function(i){t.constructor.emit("debug",["find","planning query",e]);var r=Wu(e,i.indexes);t.constructor.emit("debug",["find","query plan",r]);var o=r.index;!function(t,e){if(e.defaultUsed&&t.sort){var n=t.sort.filter((function(t){return"_id"!==Object.keys(t)[0]})).map((function(t){return Object.keys(t)[0]}));if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}e.defaultUsed}(e,o);var s=Mc({include_docs:!0,reduce:!1,indexes_count:i.total_rows},r.queryOpts);return"startkey"in s&&"endkey"in s&&gl(s.startkey,s.endkey)>0?{docs:[]}:(e.sort&&"string"!=typeof e.sort[0]&&"desc"===Zc(e.sort[0])&&(s.descending=!0,s=function(t){var e=xc(t);return delete e.startkey,delete e.endkey,delete e.inclusive_start,delete e.inclusive_end,"endkey"in t&&(e.startkey=t.endkey),"startkey"in t&&(e.endkey=t.startkey),"inclusive_start"in t&&(e.inclusive_end=t.inclusive_start),"inclusive_end"in t&&(e.inclusive_start=t.inclusive_end),e}(s)),r.inMemoryFields.length||("limit"in e&&(s.limit=e.limit),"skip"in e&&(s.skip=e.skip)),n?Promise.resolve(r,s):Promise.resolve().then((function(){if("_all_docs"===o.name)return function(t,e){var n=xc(e);return n.descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),t.allDocs(n).then((function(t){return t.rows=t.rows.filter((function(t){return!/^_design\//.test(t.id)})),n.original_limit&&(n.limit=n.original_limit),t.rows=t.rows.slice(0,n.limit),t}))}(t,s);var e,n=(e=o).ddoc.substring(8)+"/"+e.name;return Su(t).query.call(t,n,s)})).then((function(t){!1===s.inclusive_start&&(t.rows=function(t,e,n){for(var i=n.def.fields,r=0,o=t.length;r<o;r++){var s=Mu(t[r].doc,n);if(1===i.length)s=s[0];else for(;s.length>e.length;)s.pop();if(Math.abs(gl(s,e))>0)break}return r>0?t.slice(r):t}(t.rows,s.startkey,o)),r.inMemoryFields.length&&(t.rows=iu(t.rows,e,r.inMemoryFields));var n={docs:t.rows.map((function(t){var n=t.doc;return e.fields?function(t,e){for(var n={},i=0,r=e.length;i<r;i++){var o=Kc(e[i]),s=Vc(t,o);void 0!==s&&Uc(n,o,s)}return n}(n,e.fields):n}))};return o.defaultUsed&&(n.warning="No matching index found, create an index to optimize query time."),n})))}))}var Uu=yu((function(t,e){var n,i=xc((e=uu(e)).index);function r(){return n||(n=vc(JSON.stringify(e)))}e.index=Cu(e.index),function(t){var e=t.fields.filter((function(t){return"asc"===Zc(t)}));if(0!==e.length&&e.length!==t.fields.length)throw new Error("unsupported mixed sorting")}(e.index);var o=e.name||"idx-"+r(),s=e.ddoc||"idx-"+r(),a="_design/"+s,l=!1,c=!1;return t.constructor.emit("debug",["find","creating index",a]),Tc(t,a,(function(t){return t._rev&&"query"!==t.language&&(l=!0),t.language="query",t.views=t.views||{},!(c=!!t.views[o])&&(t.views[o]={map:{fields:_u(e.index.fields)},reduce:"_count",options:{def:i}},t)})).then((function(){if(l)throw new Error('invalid language for ddoc with id "'+a+'" (should be "query")')})).then((function(){var e=s+"/"+o;return Su(t).query.call(t,e,{limit:0,reduce:!1}).then((function(){return{id:a,name:o,result:c?"exists":"created"}}))}))})),Gu=yu(Vu),Ku=yu((function(t,e){return Vu(t,e,!0).then((function(n){return{dbname:t.name,index:n.index,selector:e.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:e.use_index||[],bookmark:"nil",limit:e.limit,skip:e.skip,sort:e.sort||{},fields:e.fields,conflicts:!1,r:[49]},limit:e.limit,skip:e.skip||0,fields:e.fields}}))})),Yu=yu(Ou),Ju=yu((function(t,e){if(!e.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!e.name)throw new Error("you must supply an index.name when deleting");var n=e.ddoc,i=e.name;return Tc(t,n,(function(t){return 1===Object.keys(t.views).length&&t.views[i]?{_id:n,_deleted:!0}:(delete t.views[i],t)})).then((function(){return Su(t).viewCleanup.apply(t)})).then((function(){return{ok:!0}}))})),Xu={};Xu.createIndex=kc((function(t,e){if("object"!=typeof t)return e(new Error("you must provide an index to create"));(Dc(this)?hu:Uu)(this,t,e)})),Xu.find=kc((function(t,e){if(void 0===e&&(e=t,t=void 0),"object"!=typeof t)return e(new Error("you must provide search parameters to find()"));(Dc(this)?fu:Gu)(this,t,e)})),Xu.explain=kc((function(t,e){if(void 0===e&&(e=t,t=void 0),"object"!=typeof t)return e(new Error("you must provide search parameters to explain()"));(Dc(this)?pu:Ku)(this,t,e)})),Xu.getIndexes=kc((function(t){(Dc(this)?gu:Yu)(this,t)})),Xu.deleteIndex=kc((function(t,e){if("object"!=typeof t)return e(new Error("you must provide an index to delete"));(Dc(this)?mu:Ju)(this,t,e)}));const Zu="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,Qu="undefined"!=typeof AbortController?AbortController:Object.assign(class{constructor(){this.signal=new Qu.AbortSignal}abort(){this.signal.aborted=!0}},{AbortSignal:class{constructor(){this.aborted=!1}}}),td=new Set,ed=(t,e)=>{const n=`LRU_CACHE_OPTION_${t}`;id(n)&&rd(n,`${t} option`,`options.${e}`,cd)},nd=(t,e)=>{const n=`LRU_CACHE_METHOD_${t}`;if(id(n)){const{prototype:i}=cd,{get:r}=Object.getOwnPropertyDescriptor(i,t);rd(n,`${t} method`,`cache.${e}()`,r)}},id=t=>"object"==typeof hn&&hn&&!td.has(t),rd=(t,e,n,i)=>{td.add(t);const r=`The ${e} is deprecated. Please use ${n} instead.`;hn.emitWarning(r,"DeprecationWarning",t,i)},od=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),sd=t=>od(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ad:null:null;class ad extends Array{constructor(t){super(t),this.fill(0)}}class ld{constructor(t){const e=t?sd(t):Array;this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class cd{constructor(t={}){const{max:e=0,ttl:n,ttlResolution:i=1,ttlAutopurge:r,updateAgeOnGet:o,allowStale:s,dispose:a,disposeAfter:l,noDisposeOnSet:c,noUpdateTTL:u,maxSize:d=0,sizeCalculation:h,fetchMethod:f}=t,{length:p,maxAge:g,stale:m}=t instanceof cd?{}:t;if(0!==e&&!od(e))throw new TypeError("max option must be a nonnegative integer");const v=e?sd(e):Array;if(!v)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=d,this.sizeCalculation=h||p,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculating set to non-function")}if(this.fetchMethod=f||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new v(e),this.prev=new v(e),this.head=0,this.tail=0,this.free=new ld(e),this.initialFill=1,this.size=0,"function"==typeof a&&(this.dispose=a),"function"==typeof l?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!c,this.noUpdateTTL=!!u,0!==this.maxSize){if(!od(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!s||!!m,this.updateAgeOnGet=!!o,this.ttlResolution=od(i)||0===i?i:1,this.ttlAutopurge=!!r,this.ttl=n||g||0,this.ttl){if(!od(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const t="LRU_CACHE_UNBOUNDED";if(id(t)){td.add(t);const e="TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.";hn.emitWarning(e,"UnboundedCacheWarning",t,cd)}}m&&ed("stale","allowStale"),g&&ed("maxAge","ttl"),p&&ed("length","sizeCalculation")}getRemainingTTL(t){return this.has(t)?1/0:0}initializeTTLTracking(){this.ttls=new ad(this.max),this.starts=new ad(this.max),this.setItemTTL=(t,e)=>{if(this.starts[t]=0!==e?Zu.now():0,this.ttls[t]=e,0!==e&&this.ttlAutopurge){const n=setTimeout((()=>{this.isStale(t)&&this.delete(this.keyList[t])}),e+1);n.unref&&n.unref()}},this.updateItemAge=t=>{this.starts[t]=0!==this.ttls[t]?Zu.now():0};let t=0;const e=()=>{const e=Zu.now();if(this.ttlResolution>0){t=e;const n=setTimeout((()=>t=0),this.ttlResolution);n.unref&&n.unref()}return e};this.getRemainingTTL=n=>{const i=this.keyMap.get(n);return void 0===i?0:0===this.ttls[i]||0===this.starts[i]?1/0:this.starts[i]+this.ttls[i]-(t||e())},this.isStale=n=>0!==this.ttls[n]&&0!==this.starts[n]&&(t||e())-this.starts[n]>this.ttls[n]}updateItemAge(t){}setItemTTL(t,e){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new ad(this.max),this.removeItemSize=t=>this.calculatedSize-=this.sizes[t],this.requireSize=(t,e,n,i)=>{if(i&&!n&&(n=i(e,t)),!od(n))throw new TypeError("size must be positive integer");return n},this.addItemSize=(t,e,n,i)=>{this.sizes[t]=i;const r=this.maxSize-this.sizes[t];for(;this.calculatedSize>r;)this.evict();this.calculatedSize+=this.sizes[t]},this.delete=t=>{if(0!==this.size){const e=this.keyMap.get(t);void 0!==e&&(this.calculatedSize-=this.sizes[e])}return cd.prototype.delete.call(this,t)}}removeItemSize(t){}addItemSize(t,e,n,i){}requireSize(t,e,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.head);)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.tail);)e=this.next[e]}isValidIndex(t){return this.keyMap.get(this.keyList[t])===t}*entries(){for(const t of this.indexes())yield[this.keyList[t],this.valList[t]]}*rentries(){for(const t of this.rindexes())yield[this.keyList[t],this.valList[t]]}*keys(){for(const t of this.indexes())yield this.keyList[t]}*rkeys(){for(const t of this.rindexes())yield this.keyList[t]}*values(){for(const t of this.indexes())yield this.valList[t]}*rvalues(){for(const t of this.rindexes())yield this.valList[t]}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const n of this.indexes())if(t(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],e)}forEach(t,e=this){for(const n of this.indexes())t.call(e,this.valList[n],this.keyList[n],this)}rforEach(t,e=this){for(const n of this.rindexes())t.call(e,this.valList[n],this.keyList[n],this)}get prune(){return nd("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(const e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){const t=[];for(const e of this.indexes()){const n=this.keyList[e],i={value:this.valList[e]};this.ttls&&(i.ttl=this.ttls[e]),this.sizes&&(i.size=this.sizes[e]),t.unshift([n,i])}return t}load(t){this.clear();for(const[e,n]of t)this.set(e,n.value,n)}dispose(t,e,n){}set(t,e,{ttl:n=this.ttl,noDisposeOnSet:i=this.noDisposeOnSet,size:r=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:s=this.noUpdateTTL}={}){r=this.requireSize(t,e,r,o);let a=0===this.size?void 0:this.keyMap.get(t);if(void 0===a)a=this.newIndex(),this.keyList[a]=t,this.valList[a]=e,this.keyMap.set(t,a),this.next[this.tail]=a,this.prev[a]=this.tail,this.tail=a,this.size++,this.addItemSize(a,e,t,r),s=!1;else{const n=this.valList[a];e!==n&&(this.isBackgroundFetch(n)?n.__abortController.abort():i||(this.dispose(n,t,"set"),this.disposeAfter&&this.disposed.push([n,t,"set"])),this.removeItemSize(a),this.valList[a]=e,this.addItemSize(a,e,t,r)),this.moveToTail(a)}if(0===n||0!==this.ttl||this.ttls||this.initializeTTLTracking(),s||this.setItemTTL(a,n),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max?this.evict():0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const t=this.valList[this.head];return this.evict(),t}}evict(){const t=this.head,e=this.keyList[t],n=this.valList[t];return this.isBackgroundFetch(n)?n.__abortController.abort():(this.dispose(n,e,"evict"),this.disposeAfter&&this.disposed.push([n,e,"evict"])),this.removeItemSize(t),this.head=this.next[t],this.keyMap.delete(e),this.size--,t}has(t){return this.keyMap.has(t)&&!this.isStale(this.keyMap.get(t))}peek(t,{allowStale:e=this.allowStale}={}){const n=this.keyMap.get(t);if(void 0!==n&&(e||!this.isStale(n)))return this.valList[n]}backgroundFetch(t,e,n){const i=void 0===e?void 0:this.valList[e];if(this.isBackgroundFetch(i))return i;const r=new AbortController,o={signal:r.signal,options:n},s=Promise.resolve(this.fetchMethod(t,i,o)).then((e=>(r.signal.aborted||this.set(t,e,o.options),e)));return s.__abortController=r,s.__staleWhileFetching=i,void 0===e?(this.set(t,s,o.options),e=this.keyMap.get(t)):this.valList[e]=s,s}isBackgroundFetch(t){return t&&"object"==typeof t&&"function"==typeof t.then&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,ttl:i=this.ttl,noDisposeOnSet:r=this.noDisposeOnSet,size:o=0,sizeCalculation:s=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL}={}){if(!this.fetchMethod)return this.get(t,{allowStale:e,updateAgeOnGet:n});const l={allowStale:e,updateAgeOnGet:n,ttl:i,noDisposeOnSet:r,size:o,sizeCalculation:s,noUpdateTTL:a};let c=this.keyMap.get(t);if(void 0===c)return this.backgroundFetch(t,c,l);{const i=this.valList[c];if(this.isBackgroundFetch(i))return e&&void 0!==i.__staleWhileFetching?i.__staleWhileFetching:i;if(!this.isStale(c))return this.moveToTail(c),n&&this.updateItemAge(c),i;const r=this.backgroundFetch(t,c,l);return e&&void 0!==r.__staleWhileFetching?r.__staleWhileFetching:r}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet}={}){const i=this.keyMap.get(t);if(void 0!==i){const r=this.valList[i],o=this.isBackgroundFetch(r);if(this.isStale(i))return o?e?r.__staleWhileFetching:void 0:(this.delete(t),e?r:void 0);if(o)return;return this.moveToTail(i),n&&this.updateItemAge(i),r}}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return nd("del","delete"),this.delete}delete(t){let e=!1;if(0!==this.size){const n=this.keyMap.get(t);if(void 0!==n)if(e=!0,1===this.size)this.clear();else{this.removeItemSize(n);const e=this.valList[n];this.isBackgroundFetch(e)?e.__abortController.abort():(this.dispose(e,t,"delete"),this.disposeAfter&&this.disposed.push([e,t,"delete"])),this.keyMap.delete(t),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(const t of this.rindexes({allowStale:!0})){const e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort();else{const n=this.keyList[t];this.dispose(e,n,"delete"),this.disposeAfter&&this.disposed.push([e,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return nd("reset","clear"),this.clear}get length(){return((t,e)=>{const n=`LRU_CACHE_PROPERTY_${t}`;if(id(n)){const{prototype:i}=cd,{get:r}=Object.getOwnPropertyDescriptor(i,t);rd(n,`${t} property`,`cache.${e}`,r)}})("length","size"),this.size}}var ud=cd;class dd{constructor(){this.selectors=[],this.currentFieldName=""}regexIgnoreCaseAndDiactricis(t){let e,n,i=["aâãäåæ","eéèêë","iíìîï","oóòôõöø","uúùûü","cç","nñ","yýÿ"],r=t;for(e of i)for(n of e)t.includes(n)&&(r=r.replace(n,`(?:${e.split("").join("|")})`));return"(?i)"+r}regexIgnoreCase(t){return"(?i)"+t}withField(t){return this.currentFieldName=t,this}withDocType(t){return this.selectors.push({type:{$eq:t}}),this}containsIgnoreCase(t){return this.selectors.push({[this.currentFieldName]:{$regex:this.regexIgnoreCase(t)}}),this}startsWithIgnoreCaseAndDiacritics(t){return this.selectors.push({[this.currentFieldName]:{$regex:this.regexIgnoreCaseAndDiactricis("^"+t)}}),this}startsWithIgnoreCase(t){return this.selectors.push({[this.currentFieldName]:{$regex:this.regexIgnoreCase("^"+t)}}),this}startsWithIgnoreCaseAndLeadingZeros(t){return this.selectors.push({[this.currentFieldName]:{$regex:this.regexIgnoreCase("^(0+)?"+t)}}),this}numericFieldStartsWith(t){if(0===(t=parseInt(t)))return this;const e=(n=10,i=[])=>(i.push({$and:[{[this.currentFieldName]:{$gte:t*n}},{[this.currentFieldName]:{$lt:t*n+n}}]}),t*n*10>1e4?i:e(10*n,i));return this.selectors.push({$or:[{[this.currentFieldName]:{$eq:t}},...e()]}),this}equals(t){return this.selectors.push({[this.currentFieldName]:{$eq:t}}),this}isNotEqualTo(t){return this.selectors.push({[this.currentFieldName]:{$ne:t}}),this}greaterThan(t){return this.selectors.push({[this.currentFieldName]:{$gt:t}}),this}withAny(t){return this.selectors.push({$or:t}),this}searchTerm(t,e){const n=t.toLowerCase().split(" ").map((t=>t.trim())).filter((t=>""!==t)),i=(t,e,n=10,r=[])=>{const o=Math.abs(parseInt(t,10));return 0===o?[{$and:[{[e.key]:{$gte:1e3/Math.pow(10,t.length)}},{[e.key]:{$lt:1e3/Math.pow(10,t.length-1)}}]}]:(r.push({$and:[{[e.key]:{$gte:o*n}},{[e.key]:{$lt:o*n+n}}]}),o*n*10>1e4?r:i(t,e,10*n,r))},r=t=>{if(isNaN(t))return o(!1).map((e=>({[e.key]:{$regex:"(?i)"+("from_beginning"===e?.search?"^(0+?)?":"")+t}})));{let e=[];return o(!0).forEach((n=>{e.push({[n.key]:{$eq:parseInt(t,10)}}),e=[...e,...i(t,n)]})),e}},o=(t=!1)=>e.filter((e=>!t&&!e.numeric||t&&e.numeric)).filter((t=>!t.search||"exclude"!==t.search));return this.selectors=[{$and:n.map((t=>({$or:r(t)})))}],this}build(){return 1==this.selectors.length?this.selectors[0]:{$and:this.selectors}}buildSelectors(){return this.selectors}}const hd={couchdbHost:"127.0.0.1",couchdbHTTPS:!0,couchdbPort:"6984",couchdbUser:"user",couchdbPassword:"password",couchdbName:"leihlokal",wcUrl:"https://www.buergerstiftung-karlsruhe.de/wp-json/wc/v3",wcKey:"",wcSecret:""},fd=Object.keys(hd),pd=(()=>{const t=oe((()=>{let t=hd;return fd.forEach((e=>{localStorage.hasOwnProperty(e)&&("true"===localStorage.getItem(e)?t[e]=!0:"false"===localStorage.getItem(e)?t[e]=!1:t[e]=localStorage.getItem(e))})),t})(),(()=>t.subscribe((t=>{(t=>{for(const[e,n]of Object.entries(t))localStorage.setItem(e,String(n))})(t)}))));return t})();var gd={exports:{}};
/*!
     * js-logger - http://github.com/jonnyreeves/js-logger
     * Jonny Reeves, http://jonnyreeves.co.uk/
     * js-logger may be freely distributed under the MIT license.
     */!function(t){!function(e){var n,i={};i.VERSION="1.6.1";var r={},o=function(t,e){return function(){return e.apply(t,arguments)}},s=function(){var t,e,n=arguments,i=n[0];for(e=1;e<n.length;e++)for(t in n[e])!(t in i)&&n[e].hasOwnProperty(t)&&(i[t]=n[e][t]);return i},a=function(t,e){return{value:t,name:e}};i.TRACE=a(1,"TRACE"),i.DEBUG=a(2,"DEBUG"),i.INFO=a(3,"INFO"),i.TIME=a(4,"TIME"),i.WARN=a(5,"WARN"),i.ERROR=a(8,"ERROR"),i.OFF=a(99,"OFF");var l=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};l.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(i.TRACE,arguments)},debug:function(){this.invoke(i.DEBUG,arguments)},info:function(){this.invoke(i.INFO,arguments)},warn:function(){this.invoke(i.WARN,arguments)},error:function(){this.invoke(i.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"end"])},invoke:function(t,e){n&&this.enabledFor(t)&&n(e,s({level:t},this.context))}};var c,u=new l({filterLevel:i.OFF});(c=i).enabledFor=o(u,u.enabledFor),c.trace=o(u,u.trace),c.debug=o(u,u.debug),c.time=o(u,u.time),c.timeEnd=o(u,u.timeEnd),c.info=o(u,u.info),c.warn=o(u,u.warn),c.error=o(u,u.error),c.log=c.info,i.setHandler=function(t){n=t},i.setLevel=function(t){for(var e in u.setLevel(t),r)r.hasOwnProperty(e)&&r[e].setLevel(t)},i.getLevel=function(){return u.getLevel()},i.get=function(t){return r[t]||(r[t]=new l(s({name:t},u.context)))},i.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},n=function(t,e){Function.prototype.apply.call(t,console,e)};return"undefined"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var s,a=console.log;o.level===i.TIME?(s=(o.name?"["+o.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(s):e[s]=(new Date).getTime():console.timeEnd?console.timeEnd(s):n(a,[s+": "+((new Date).getTime()-e[s])+"ms"])):(o.level===i.WARN&&console.warn?a=console.warn:o.level===i.ERROR&&console.error?a=console.error:o.level===i.INFO&&console.info?a=console.info:o.level===i.DEBUG&&console.debug?a=console.debug:o.level===i.TRACE&&console.trace&&(a=console.trace),t.formatter(r,o),n(a,r))}},i.useDefaults=function(t){i.setLevel(t&&t.defaultLevel||i.DEBUG),i.setHandler(i.createDefaultHandler(t))},i.setDefaults=i.useDefaults,t.exports?t.exports=i:(i._prevLogger=e.Logger,i.noConflict=function(){return e.Logger=i._prevLogger,i},e.Logger=i)}(fn)}(gd);var md=gd.exports;No.plugin(Xu);var vd=new class{database;changeListeners={};onConnectedCallback;constructor(){this.queryPaginatedDocsCache=new ud({max:50}),this.cache=new ud({max:5e3})}cancelAllListeners(){for(const[t,e]of Object.entries(this.changeListeners))e.cancel()}connect(){this.cancelAllListeners(),this.cache.clear(),this.queryPaginatedDocsCache.clear();const t=d(pd);this.database=new No(`http${t.couchdbHTTPS?"s":""}://${t.couchdbUser}:${t.couchdbPassword}@${t.couchdbHost}:${t.couchdbPort}/${t.couchdbName}`),this.onConnectedCallback&&this.onConnectedCallback()}onConnected(t){this.onConnectedCallback=t}selectorBuilder(){return new dd}async updateDoc(t,e=!0){this.cache.clear();let n=t._rev;e&&(n=await this.database.get(t._id,{revs_info:!0,conflicts:!0}).then((t=>t._rev)));let i={last_update:(new Date).getTime(),...t,_rev:n};return md.debug(`Updated doc ${JSON.stringify(i)}`),this.database.put(i)}createDoc(t){return this.cache.clear(),this.queryPaginatedDocsCache.clear(),t.last_update=(new Date).getTime(),t.created=(new Date).getTime(),md.debug(`Created doc: ${JSON.stringify(t)}`),this.database.post(t)}removeDoc(t){return this.cache.clear(),md.debug(`Removed doc: ${JSON.stringify(t)}`),this.database.remove(t._id,t._rev)}fetchByType(t,e=!1){return this.findCached({selector:this.selectorBuilder().withDocType(t).build()},e).then((t=>t.docs??[]))}fetchByIdAndType(t,e){return this.findCached({selector:this.selectorBuilder().withDocType(e).withField("id").equals(parseInt(t)).build()}).then((t=>t.docs??[]))}async nextUnusedId(t){const e=await this.findCached({fields:["id"],limit:999999,selector:{type:{$eq:t}}});return Math.max(...e.docs.map((t=>t.id)).filter(Number.isInteger))+1}countDocs(t){return this.findCached({limit:99999999,fields:["_id"],selector:{$and:t}}).then((t=>t.docs.length))}async countDocsBatch(t,e){const n=await this.findCached({limit:99999999,fields:["_id",e],selector:{$or:t}});return this.countByKey(n.docs,e)}async createView(t,e,n){try{await this.database.put({_id:"_design/"+t,views:{[t]:{map:e,...n&&{reduce:n}}}})}catch(t){if("conflict"!==t.name)throw t}}async queryView(t,e={}){return this.database.query(t,e)}async createIndex(t){await this.database.createIndex(t),this.cache.clear(),this.queryPaginatedDocsCache.clear()}async docsMatchingAllSelectorsSortedBy(t){const{selectors:e,sortBy:n,rowsPerPage:i,skip:r}=t;return{docs:await this.findCached({sort:n,limit:i,skip:r,selector:{$and:e}}).then((t=>t.docs)),count:this.countDocs(e)}}cancelListenerForDocType(t){this.changeListeners[t]&&this.changeListeners[t].cancel()}async listenForChanges(t,e){await this.database.put({_id:"_design/filterbytype",filters:{filterbytype:function(t,e){return t.type===e.query.type||!0===t._deleted}.toString()}}).catch((t=>{409!==t.status&&md.error("Failed to create design doc for change filter",t)})),this.cancelListenerForDocType(e),this.changeListeners[e]=this.database.changes({since:"now",live:!0,include_docs:!1,filter:"filterbytype",query_params:{type:e}}).on("change",t).on("complete",(function(t){md.debug(`CouchDb changeListener completed: ${JSON.stringify(t)}`)})).on("error",md.error)}async query(t,e){const n=JSON.stringify(t);if(this.queryPaginatedDocsCache.has(n))return this.queryPaginatedDocsCache.get(n);const{filters:i,sortBy:r,sortReverse:o,rowsPerPage:s,currentPage:a,searchTerm:l,docType:c,columns:u}=t;let d=i.flatMap((t=>t.selectors));d.push({type:{$eq:c}}),l&&l.length>0&&d.push(this.selectorBuilder().searchTerm(l,u).build());const h=await this.docsMatchingAllSelectorsSortedBy({selectors:d,sortBy:r.map((t=>({[t]:o?"desc":"asc"}))),rowsPerPage:s,skip:s*a});return this.queryPaginatedDocsCache.set(n,h),this.listenForChanges((()=>{this.queryPaginatedDocsCache.clear(),this.cache.clear(),e()}),c),h}fetchAllDocsBySelector(t,e){return this.database.find({limit:1e5,fields:e,selector:t}).then((t=>t.docs))}fetchAll(){return this.database.allDocs({include_docs:!0}).then((t=>t.rows.map((t=>t.doc))))}fetchDocsBySelector(t,e,n=[],i=10){return this.findCached({limit:i,fields:e,selector:t,sort:n}).then((t=>t.docs))}async findCached(t,e=!1){const n=JSON.stringify(t);if(!e&&this.cache.has(n))return this.cache.get(n);const i=await this.database.find(t);return this.cache.set(n,i),i}async fetchUniqueCustomerFieldValues(t,e,n=!1){let i=this.selectorBuilder().withDocType("customer").withField(t);i=n?i.numericFieldStartsWith(e).build():i.startsWithIgnoreCase(e).build();const r=await this.findCached({limit:100,fields:[t],selector:i}).then((t=>t.docs)).then((e=>n?e:e.map((e=>({[t]:e[t].trim().replace("ß","ss")}))))),o=new Set;return r.forEach((e=>{o.add(e[t])})),Array.from(o).map((e=>({[t]:e})))}countByKey(t,e){const n={};return t.forEach((t=>{n[t[e]]||(n[t[e]]=0),n[t[e]]+=1})),n}getRentalsByEntity(t,e,n){if(!e||!e.length)return Promise.resolve({docs:[]});e.sort(((t,e)=>t-e));const i={$and:[{[`${t}_id`]:{$in:e}},{[`${t}_id`]:{$gte:e[0]}},{[`${t}_id`]:{$lte:e[e.length-1]}},{type:"rental"}]};return this.fetchAllDocsBySelector(i,n)}};function yd(t){const e=new Date(t);return isNaN(e)||0===e.getTime()?"":`${String(e.getDate()).padStart(2,0)}.${String(e.getMonth()+1).padStart(2,0)}.${e.getFullYear()}`}function bd(t){const e=new Date(t);let n=function(t,e){const n=864e5,i=t-e;return Math.round(i/n)}(t,wd());if(isNaN(e)||0===e.getTime())return"";if(!(n>=-2&&n<=2))return n>=-7&&n<0?`Vor ${Math.abs(n)} Tagen`:n<=7&&n>0?`In ${n} Tagen`:`${String(e.getDate()).padStart(2,0)}.${String(e.getMonth()+1).padStart(2,0)}.${e.getFullYear()}`;switch(n){case-2:return"Vorgestern";case-1:return"Gestern";case 0:return"Heute";case 1:return"Morgen";case 2:return"Übermorgen"}}function _d(t){return t-t%864e5}function wd(){return _d((new Date).getTime())}const xd=Object.freeze({HIGHLIGHT_RED:"rgb(250, 45, 30)",HIGHLIGHT_GREEN:"rgb(131, 235, 52)",HIGHLIGHT_BLUE:"rgb(45, 144, 224)",HIGHLIGHT_YELLOW:"rgb(247, 239, 10)",ITEM_RESERVED:"rgb(255, 155, 25)",RENTAL_RETURNED_TODAY_GREEN:"rgb(214, 252, 208)",RENTAL_LATE_RED:"rgb(240, 200, 200)",RENTAL_TO_RETURN_TODAY_BLUE:"rgb(160, 200, 250)",DEFAULT_ROW_BACKGROUND_ODD:"rgb(255, 255, 255)",DEFAULT_ROW_BACKGROUND_EVEN:"rgb(242, 242, 242)"}),kd=async t=>t.highlight;var $d=[{title:"Id",key:"id",numeric:!0,display:t=>String(t).padStart(4,"0"),search:"from_beginning",backgroundColor:kd},{title:"Bild",key:"image",isImageUrl:!0,search:"exclude",disableSort:!0,backgroundColor:kd},{title:"Gegenstand",key:"name",backgroundColor:kd},{title:"Marke",key:"brand",backgroundColor:kd},{title:"Typbezeichnung",key:"itype",backgroundColor:kd},{title:"Kategorie",key:"category",search:"exclude",backgroundColor:kd},{title:"Pfand",key:"deposit",search:"exclude",backgroundColor:kd},{title:"Anzahl Teile",key:"parts",search:"exclude",backgroundColor:kd},{title:"Erfasst am",key:"added",display:t=>yd(t),search:"exclude",backgroundColor:kd},{title:"Beschreibung",key:"description",search:"exclude",disableSort:!0,backgroundColor:kd},{title:"Synonyme",key:"synonyms",disableSort:!0,backgroundColor:kd,hideInTable:!0},{title:"Status",key:"status",search:"exclude",display:t=>"deleted"===t?"gelöscht":"instock"===t?"verfügbar":"outofstock"===t?"verliehen":"reserved"===t?"reserviert":"onbackorder"===t?"nicht verleihbar":"lost"===t?"verschollen":"repairing"===t?"in Reparatur":"forsale"===t?"zu verkaufen":void 0,backgroundColor:async t=>"reserved"==t.status?xd.ITEM_RESERVED:t.highlight},{title:"Anzahl Ausleihen",key:"rental_count",search:"exclude",disableSort:!0,displayExport:(t,e)=>t.filter((t=>"rental"===t.type&&t.item_id===e)).length,backgroundColor:kd}];const Sd=async t=>t.highlight;var Cd=[{title:"Id",key:"id",numeric:!0,search:"from_beginning",backgroundColor:Sd},{title:"Nachname",key:"lastname",backgroundColor:Sd},{title:"Vorname",key:"firstname",backgroundColor:Sd},{title:"Straße",key:"street",search:"exclude",backgroundColor:Sd},{title:"Hausnummer",key:"house_number",search:"exclude",disableSort:!0,backgroundColor:Sd,hideInTable:!0},{title:"Postleitzahl",key:"postal_code",search:"exclude",backgroundColor:Sd,hideInTable:!0},{title:"Stadt",key:"city",search:"exclude",backgroundColor:Sd},{title:"Beitritt",key:"registration_date",display:t=>yd(t),search:"exclude",backgroundColor:Sd},{title:"Verlängert am",key:"renewed_on",display:t=>yd(t),search:"exclude",backgroundColor:Sd},{title:"Bemerkung",key:"remark",search:"exclude",disableSort:!0,backgroundColor:Sd},{title:"E-Mail",key:"email",search:"exclude",disableSort:!0,backgroundColor:Sd},{title:"Telefonnummer",key:"telephone_number",display:t=>{if(!t)return t;let e=t.replace(/ /g,"");return e=e.startsWith("+")?e.replace(/(\d{5})(\d{4})(\d{1,})/,"$1 $2 $3"):e.replace(/(\d{4})(\d{4})(\d{1,})/,"$1 $2 $3"),e},search:"exclude",disableSort:!0,backgroundColor:Sd},{title:"Newsletter",key:"subscribed_to_newsletter",display:t=>["true","ja"].includes(String(t).toLowerCase())?"Ja":"Nein",search:"exclude",backgroundColor:Sd},{title:"Aufmerksam geworden",key:"heard",search:"exclude",backgroundColor:Sd},{title:"Aktive Ausleihen",key:"active_rental_count",search:"exclude",disableSort:!0,displayExport:(t,e)=>t.filter((t=>"rental"===t.type&&t.customer_id===e&&0===t.returned_on)).length,backgroundColor:Sd},{title:"Ausleihen Insgesamt",key:"rental_count",search:"exclude",disableSort:!0,displayExport:(t,e)=>t.filter((t=>"rental"===t.type&&t.customer_id===e)).length,backgroundColor:Sd}];const Md=t=>t.returned_on&&t.returned_on>0,Od=async t=>(t=>Md(t)&&t.returned_on===wd())(t)?xd.RENTAL_RETURNED_TODAY_GREEN:(t=>t.to_return_on&&t.to_return_on===wd()&&!Md(t))(t)?xd.RENTAL_TO_RETURN_TODAY_BLUE:(t=>t.to_return_on&&!Md(t)&&t.to_return_on<wd())(t)?xd.RENTAL_LATE_RED:void 0,Dd=t=>Promise.resolve(t.customer_highlight),Td=t=>Promise.resolve(t.item_highlight),Ld=t=>e=>Promise.all(t.map((t=>t(e)))).then((t=>t.find((t=>t))));var Ad=[{title:"Bild",key:"image",search:"exclude",isImageUrl:!0,disableSort:!0,backgroundColor:Ld([Td,Od])},{title:"Gegenstand Nr",key:"item_id",numeric:!0,search:"from_beginning",display:t=>String(t).padStart(4,"0"),backgroundColor:Ld([Td,Od])},{title:"Gegenstand Name",key:"item_name",backgroundColor:Ld([Td,Od])},{title:"Ausgegeben",key:"rented_on",search:"exclude",sort:["rented_on","customer_name"],display:t=>bd(t),backgroundColor:Ld([Od])},{title:"Verlängert",key:"extended_on",search:"exclude",display:t=>bd(t),backgroundColor:Ld([Od])},{title:"Zurückerwartet",key:"to_return_on",search:"exclude",display:t=>bd(t),sort:["returned_on","to_return_on","customer_name"],backgroundColor:Ld([Od]),initialSort:"asc"},{title:"Mitarbeiter",search:"exclude",key:"passing_out_employee",backgroundColor:Ld([Od])},{title:"Nutzer-Nr.",key:"customer_id",numeric:!0,search:"from_beginning",backgroundColor:Ld([Dd,Od])},{title:"Nutzername",key:"customer_name",backgroundColor:Ld([Dd,Od])},{title:"Pfand",key:"deposit",search:"exclude",backgroundColor:Ld([Od])},{title:"Pfand zurück",key:"deposit_returned",search:"exclude",backgroundColor:Ld([Od])},{title:"Zurückgegeben",key:"returned_on",search:"exclude",display:t=>bd(t),backgroundColor:Ld([Od])},{title:"Mitarbeiter",key:"receiving_employee",search:"exclude",backgroundColor:Ld([Od])},{title:"Bemerkung",key:"remark",search:"exclude",disableSort:!0,backgroundColor:Ld([Od])}];function Ed(t,e,n){let i,r;h(t,fe,(t=>n(1,r=t)));const o=t=>!("export"in t&&"exclude"===t.export),s={rental:Ad.filter(o),item:$d.filter(o),customer:Cd.filter(o)},a={rental:"Leihvorgaenge",item:"Gegenstaende",customer:"Nutzer_innen"};return t.$$.update=()=>{2&t.$$.dirty&&(i=r.split("/")[1].slice(0,-1))},[async()=>{var t=function(t){const e=s[i].filter((t=>!t.hasOwnProperty("noExport")||!t.noExport));let n=e.map((t=>t.title)).join(";")+"\r\n";return t.filter((t=>t.type===i)).forEach((i=>{let r=[];for(const n of e){let e=n.key,o=i.hasOwnProperty(e)?i[e]:"";n.displayExport?o=n.displayExport(t,i.id):n.display&&(o=n.display(o)),o=String(o).replaceAll(";",""),o=String(o).replaceAll("\r"," "),o=String(o).replaceAll("\n"," "),o=String(o).replaceAll("  "," "),r.push(o)}n+=r.join(";")+"\r\n"})),n}(await vd.fetchAll()),e=`${a[i]}.csv`,n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){var o=URL.createObjectURL(n);r.setAttribute("href",o),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}else alert("Die Export-Funktion wird von diesem Browser nicht untersützt :(")},r]}class Id extends ee{constructor(t){super(),te(this,t,Ed,null,a,{exportCSVFile:0})}get exportCSVFile(){return this.$$.ctx[0]}}function Pd(t){const e=e=>{!t||t.contains(e.target)||e.defaultPrevented||t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}function Bd(t,e,n){const i=t.slice();return i[6]=e[n],i}function zd(t){let e,n,i,r,o,s=t[6].title+"";function a(){return t[4](t[6])}return{c(){e=I("li"),n=B(s),i=z(),q(e,"class","svelte-6wx36t")},m(t,s){L(t,e,s),O(e,n),O(e,i),r||(o=R(e,"click",a),r=!0)},p(e,i){t=e,1&i&&s!==(s=t[6].title+"")&&V(n,s)},d(t){t&&A(e),r=!1,o()}}}function Fd(e){let n,i,r,s,a,l,c,u=e[0],d=[];for(let t=0;t<u.length;t+=1)d[t]=zd(Bd(e,u,t));return{c(){n=I("div"),i=I("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-6wx36t"><path fill="currentColor" d="M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z"></path></svg>',r=z(),s=I("div"),a=I("ul");for(let t=0;t<d.length;t+=1)d[t].c();q(i,"class","dropbtn svelte-6wx36t"),q(a,"class","svelte-6wx36t"),G(s,"--max-height",e[1]?`${e[2]}px`:"0"),q(s,"class","dropdown-content svelte-6wx36t"),q(n,"class","dropdown svelte-6wx36t")},m(t,o){L(t,n,o),O(n,i),O(n,r),O(n,s),O(s,a);for(let t=0;t<d.length;t+=1)d[t].m(a,null);l||(c=[R(i,"click",e[3]),w(Pd.call(null,n)),R(n,"click_outside",e[5])],l=!0)},p(t,[e]){if(3&e){let n;for(u=t[0],n=0;n<u.length;n+=1){const i=Bd(t,u,n);d[n]?d[n].p(i,e):(d[n]=zd(i),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}2&e&&G(s,"--max-height",t[1]?`${t[2]}px`:"0")},i:t,o:t,d(t){t&&A(n),E(d,t),l=!1,o(c)}}}function Rd(t,e,n){let{menuItems:i=[]}=e,r=!1,o=45*i.length;return t.$$set=t=>{"menuItems"in t&&n(0,i=t.menuItems)},[i,r,o,()=>n(1,r=!r),t=>{n(1,r=!1),t.onClick()},()=>n(1,r=!1)]}class Nd extends ee{constructor(t){super(),te(this,t,Rd,Fd,a,{menuItems:0})}}function jd(t,e,n){const i=t.slice();return i[6]=e[n],i}function qd(t){let e,n,i,r,a,l,c,u,d=t[6].title+"";return{c(){e=I("li"),n=I("a"),i=B(d),q(n,"href",r=t[6].route),q(n,"class","svelte-dgsre0"),q(e,"class","left svelte-dgsre0")},m(r,o){L(r,e,o),O(e,n),O(n,i),c||(u=[w(a=Ne.call(null,n,t[6].route)),w(l=me.call(null,n))],c=!0)},p(e,o){t=e,1&o&&d!==(d=t[6].title+"")&&V(i,d),1&o&&r!==(r=t[6].route)&&q(n,"href",r),a&&s(a.update)&&1&o&&a.update.call(null,t[6].route)},d(t){t&&A(e),c=!1,o(u)}}}function Hd(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g=t[0],m=[];for(let e=0;e<g.length;e+=1)m[e]=qd(jd(t,g,e));return c=new Id({props:{}}),t[2](c),d=new Nd({props:{menuItems:[{title:"Tabelle -> CSV",onClick:t[3]},{title:"Logs",onClick:t[4]},{title:"Einstellungen",onClick:t[5]}]}}),{c(){e=I("nav"),n=I("ul"),i=I("li"),r=I("a"),r.textContent="Start",s=z();for(let t=0;t<m.length;t+=1)m[t].c();a=z(),l=I("li"),Xt(c.$$.fragment),u=z(),Xt(d.$$.fragment),q(r,"href","/start"),q(r,"class","svelte-dgsre0"),q(i,"class","left svelte-dgsre0"),q(l,"class","right svelte-dgsre0"),q(n,"class","svelte-dgsre0"),q(e,"class","svelte-dgsre0")},m(t,o){L(t,e,o),O(e,n),O(n,i),O(i,r),O(n,s);for(let t=0;t<m.length;t+=1)m[t].m(n,null);O(n,a),O(n,l),Zt(c,l,null),O(l,u),Zt(d,l,null),h=!0,f||(p=[w(Ne.call(null,r,"/start")),w(me.call(null,r))],f=!0)},p(t,[e]){if(1&e){let i;for(g=t[0],i=0;i<g.length;i+=1){const r=jd(t,g,i);m[i]?m[i].p(r,e):(m[i]=qd(r),m[i].c(),m[i].m(n,a))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}c.$set({});const i={};2&e&&(i.menuItems=[{title:"Tabelle -> CSV",onClick:t[3]},{title:"Logs",onClick:t[4]},{title:"Einstellungen",onClick:t[5]}]),d.$set(i)},i(t){h||(zt(c.$$.fragment,t),zt(d.$$.fragment,t),h=!0)},o(t){Ft(c.$$.fragment,t),Ft(d.$$.fragment,t),h=!1},d(n){n&&A(e),E(m,n),t[2](null),Qt(c),Qt(d),f=!1,o(p)}}}function Wd(t,e,n){let i,{tabs:r=[]}=e;return t.$$set=t=>{"tabs"in t&&n(0,r=t.tabs)},[r,i,function(t){vt[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},()=>i.exportCSVFile(),()=>ge("/logs"),()=>ge("/settings")]}class Vd extends ee{constructor(t){super(),te(this,t,Wd,Hd,a,{tabs:0})}}function Ud(e){let n,i,r;return{c(){n=I("button"),n.textContent="+",q(n,"class","svelte-x15bm0")},m(t,o){L(t,n,o),i||(r=R(n,"click",e[0]),i=!0)},p:t,i:t,o:t,d(t){t&&A(n),i=!1,r()}}}function Gd(t){return[function(e){gt.call(this,t,e)}]}class Kd extends ee{constructor(t){super(),te(this,t,Gd,Ud,a,{})}}function Yd(e){let n,i,r=e[0](e[1],e[2])+"";return{c(){n=I("div"),q(n,"class",i="item "+e[3]+" svelte-3e0qet")},m(t,e){L(t,n,e),n.innerHTML=r},p(t,[e]){7&e&&r!==(r=t[0](t[1],t[2])+"")&&(n.innerHTML=r),8&e&&i!==(i="item "+t[3]+" svelte-3e0qet")&&q(n,"class",i)},i:t,o:t,d(t){t&&A(n)}}}function Jd(t,e,n){let{isActive:i=!1}=e,{isFirst:r=!1}=e,{isHover:o=!1}=e,{isSelectable:s=!1}=e,{getOptionLabel:a}=e,{item:l}=e,{filterText:c=""}=e,u="";return t.$$set=t=>{"isActive"in t&&n(4,i=t.isActive),"isFirst"in t&&n(5,r=t.isFirst),"isHover"in t&&n(6,o=t.isHover),"isSelectable"in t&&n(7,s=t.isSelectable),"getOptionLabel"in t&&n(0,a=t.getOptionLabel),"item"in t&&n(1,l=t.item),"filterText"in t&&n(2,c=t.filterText)},t.$$.update=()=>{if(242&t.$$.dirty){const t=[];i&&t.push("active"),r&&t.push("first"),o&&t.push("hover"),l.isGroupHeader&&t.push("groupHeader"),l.isGroupItem&&t.push("groupItem"),s||t.push("notSelectable"),n(3,u=t.join(" "))}},[a,l,c,u,i,r,o,s]}class Xd extends ee{constructor(t){super(),te(this,t,Jd,Yd,a,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Zd(t,e,n){const i=t.slice();return i[41]=e[n],i[42]=n,i}function Qd(t){let e,n,i=t[1],r=[];for(let e=0;e<i.length;e+=1)r[e]=oh(Zd(t,i,e));const o=t=>Ft(r[t],1,1,(()=>{r[t]=null}));let s=null;return i.length||(s=eh(t)),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=F(),s&&s.c()},m(t,i){for(let e=0;e<r.length;e+=1)r[e].m(t,i);L(t,e,i),s&&s.m(t,i),n=!0},p(t,n){if(114390&n[0]){let a;for(i=t[1],a=0;a<i.length;a+=1){const o=Zd(t,i,a);r[a]?(r[a].p(o,n),zt(r[a],1)):(r[a]=oh(o),r[a].c(),zt(r[a],1),r[a].m(e.parentNode,e))}for(Pt(),a=i.length;a<r.length;a+=1)o(a);Bt(),!i.length&&s?s.p(t,n):i.length?s&&(s.d(1),s=null):(s=eh(t),s.c(),s.m(e.parentNode,e))}},i(t){if(!n){for(let t=0;t<i.length;t+=1)zt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Ft(r[t]);n=!1},d(t){E(r,t),t&&A(e),s&&s.d(t)}}}function th(t){let e,n,i;var r=t[3];function o(t){return{props:{items:t[1],itemHeight:t[8],$$slots:{default:[sh,({item:t,i:e})=>({41:t,42:e}),({item:t,i:e})=>[0,(t?1024:0)|(e?2048:0)]]},$$scope:{ctx:t}}}}return r&&(e=new r(o(t))),{c(){e&&Xt(e.$$.fragment),n=F()},m(t,r){e&&Zt(e,t,r),L(t,n,r),i=!0},p(t,i){const s={};if(2&i[0]&&(s.items=t[1]),256&i[0]&&(s.itemHeight=t[8]),9814&i[0]|11264&i[1]&&(s.$$scope={dirty:i,ctx:t}),r!==(r=t[3])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}r?(e=new r(o(t)),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,n.parentNode,n)):e=null}else r&&e.$set(s)},i(t){i||(e&&zt(e.$$.fragment,t),i=!0)},o(t){e&&Ft(e.$$.fragment,t),i=!1},d(t){t&&A(n),e&&Qt(e,t)}}}function eh(t){let e,n=!t[11]&&nh(t);return{c(){n&&n.c(),e=F()},m(t,i){n&&n.m(t,i),L(t,e,i)},p(t,i){t[11]?n&&(n.d(1),n=null):n?n.p(t,i):(n=nh(t),n.c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&A(e)}}}function nh(t){let e,n;return{c(){e=I("div"),n=B(t[12]),q(e,"class","empty svelte-1uyqfml")},m(t,i){L(t,e,i),O(e,n)},p(t,e){4096&e[0]&&V(n,t[12])},d(t){t&&A(e)}}}function ih(t){let e,n,i,r,s,a;var l=t[4];function c(t){return{props:{item:t[41],filterText:t[13],getOptionLabel:t[6],isFirst:ch(t[42]),isActive:lh(t[41],t[9],t[10]),isHover:uh(t[2],t[41],t[42],t[1]),isSelectable:dh(t[41])}}}function u(){return t[29](t[42])}function d(){return t[30](t[42])}function h(...e){return t[31](t[41],t[42],...e)}return l&&(n=new l(c(t))),{c(){e=I("div"),n&&Xt(n.$$.fragment),i=z(),q(e,"class","listItem"),q(e,"tabindex","-1")},m(t,o){L(t,e,o),n&&Zt(n,e,null),O(e,i),r=!0,s||(a=[R(e,"mouseover",u),R(e,"focus",d),R(e,"click",h)],s=!0)},p(r,o){t=r;const s={};if(2&o[0]&&(s.item=t[41]),8192&o[0]&&(s.filterText=t[13]),64&o[0]&&(s.getOptionLabel=t[6]),1538&o[0]&&(s.isActive=lh(t[41],t[9],t[10])),6&o[0]&&(s.isHover=uh(t[2],t[41],t[42],t[1])),2&o[0]&&(s.isSelectable=dh(t[41])),l!==(l=t[4])){if(n){Pt();const t=n;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}l?(n=new l(c(t)),Xt(n.$$.fragment),zt(n.$$.fragment,1),Zt(n,e,i)):n=null}else l&&n.$set(s)},i(t){r||(n&&zt(n.$$.fragment,t),r=!0)},o(t){n&&Ft(n.$$.fragment,t),r=!1},d(t){t&&A(e),n&&Qt(n),s=!1,o(a)}}}function rh(e){let n,i,r=e[7](e[41])+"";return{c(){n=I("div"),i=B(r),q(n,"class","listGroupTitle svelte-1uyqfml")},m(t,e){L(t,n,e),O(n,i)},p(t,e){130&e[0]&&r!==(r=t[7](t[41])+"")&&V(i,r)},i:t,o:t,d(t){t&&A(n)}}}function oh(t){let e,n,i,r;const o=[rh,ih],s=[];function a(t,e){return t[41].isGroupHeader&&!t[41].isSelectable?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),i=F()},m(t,n){s[e].m(t,n),L(t,i,n),r=!0},p(t,r){let l=e;e=a(t),e===l?s[e].p(t,r):(Pt(),Ft(s[l],1,1,(()=>{s[l]=null})),Bt(),n=s[e],n?n.p(t,r):(n=s[e]=o[e](t),n.c()),zt(n,1),n.m(i.parentNode,i))},i(t){r||(zt(n),r=!0)},o(t){Ft(n),r=!1},d(t){s[e].d(t),t&&A(i)}}}function sh(t){let e,n,i,r,s;var a=t[4];function l(t){return{props:{item:t[41],filterText:t[13],getOptionLabel:t[6],isFirst:ch(t[42]),isActive:lh(t[41],t[9],t[10]),isHover:uh(t[2],t[41],t[42],t[1]),isSelectable:dh(t[41])}}}function c(){return t[26](t[42])}function u(){return t[27](t[42])}function d(...e){return t[28](t[41],t[42],...e)}return a&&(n=new a(l(t))),{c(){e=I("div"),n&&Xt(n.$$.fragment),q(e,"class","listItem")},m(t,o){L(t,e,o),n&&Zt(n,e,null),i=!0,r||(s=[R(e,"mouseover",c),R(e,"focus",u),R(e,"click",d)],r=!0)},p(i,r){t=i;const o={};if(1024&r[1]&&(o.item=t[41]),8192&r[0]&&(o.filterText=t[13]),64&r[0]&&(o.getOptionLabel=t[6]),2048&r[1]&&(o.isFirst=ch(t[42])),1536&r[0]|1024&r[1]&&(o.isActive=lh(t[41],t[9],t[10])),6&r[0]|3072&r[1]&&(o.isHover=uh(t[2],t[41],t[42],t[1])),1024&r[1]&&(o.isSelectable=dh(t[41])),a!==(a=t[4])){if(n){Pt();const t=n;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}a?(n=new a(l(t)),Xt(n.$$.fragment),zt(n.$$.fragment,1),Zt(n,e,null)):n=null}else a&&n.$set(o)},i(t){i||(n&&zt(n.$$.fragment,t),i=!0)},o(t){n&&Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),n&&Qt(n),r=!1,o(s)}}}function ah(t){let e,n,i,r,s,a;const l=[th,Qd],c=[];function u(t,e){return t[5]?0:1}return n=u(t),i=c[n]=l[n](t),{c(){e=I("div"),i.c(),q(e,"class","listContainer svelte-1uyqfml"),q(e,"style",t[14]),X(e,"virtualList",t[5])},m(i,o){L(i,e,o),c[n].m(e,null),t[32](e),r=!0,s||(a=[R(window,"keydown",t[17]),R(window,"resize",t[18])],s=!0)},p(t,o){let s=n;n=u(t),n===s?c[n].p(t,o):(Pt(),Ft(c[s],1,1,(()=>{c[s]=null})),Bt(),i=c[n],i?i.p(t,o):(i=c[n]=l[n](t),i.c()),zt(i,1),i.m(e,null)),(!r||16384&o[0])&&q(e,"style",t[14]),32&o[0]&&X(e,"virtualList",t[5])},i(t){r||(zt(i),r=!0)},o(t){Ft(i),r=!1},d(i){i&&A(e),c[n].d(),t[32](null),s=!1,o(a)}}}function lh(t,e,n){return e&&e[n]===t[n]}function ch(t){return 0===t}function uh(t,e,n,i){return dh(e)&&(t===n||1===i.length)}function dh(t){return t.isGroupHeader&&t.isSelectable||t.selectable||!t.hasOwnProperty("selectable")}function hh(t,e,n){const i=ht();let r,o,{container:s}=e,{VirtualList:a=null}=e,{Item:l=Xd}=e,{isVirtualList:c=!1}=e,{items:u=[]}=e,{labelIdentifier:d="label"}=e,{getOptionLabel:h=((t,e)=>{if(t)return t.isCreator?`Create "${e}"`:t[d]})}=e,{getGroupHeaderLabel:f=null}=e,{itemHeight:p=40}=e,{hoverItemIndex:g=0}=e,{value:m}=e,{optionIdentifier:v="value"}=e,{hideEmptyState:y=!1}=e,{noOptionsMessage:b="No options"}=e,{isMulti:_=!1}=e,{activeItemIndex:w=0}=e,{filterText:x=""}=e,{parent:k=null}=e,{listPlacement:$=null}=e,{listAutoWidth:S=null}=e,{listOffset:C=5}=e,M=0,O=!1;function D(t){t.isCreator||i("itemSelected",t)}function T(t){O||n(2,g=t)}function L(t){const{item:e,i:r,event:o}=t;if(o.stopPropagation(),m&&!_&&m[v]===e[v])return A();e.isCreator?i("itemCreated",x):dh(e)&&(n(19,w=r),n(2,g=r),D(e))}function A(){i("closeList")}async function E(t){if(c)return;let e=!0;for(;e;)t>0&&g===u.length-1?n(2,g=0):n(2,t<0&&0===g?g=u.length-1:g+=t),e=!dh(u[g]);await kt(),I("hover")}function I(t){if(c||!s)return;let e;const i=s.querySelector(`.listItem .${t}`);i&&(e=s.getBoundingClientRect().bottom-i.getBoundingClientRect().bottom),n(0,s.scrollTop-=e,s)}function P(){const{top:t,height:e,width:i}=k.getBoundingClientRect();n(14,o=""),n(14,o+=`min-width:${i}px;width:${S?"auto":"100%"};`),"top"===$||"auto"===$&&function(t){const e=t.getBoundingClientRect(),n={};return n.top=e.top<0,n.left=e.left<0,n.bottom=e.bottom>(window.innerHeight||document.documentElement.clientHeight),n.right=e.right>(window.innerWidth||document.documentElement.clientWidth),n.any=n.top||n.left||n.bottom||n.right,n}(k).bottom?n(14,o+=`bottom:${e+C}px;`):n(14,o+=`top:${e+C}px;`)}ct((()=>{if(u.length>0&&!_&&m){const t=u.findIndex((t=>t[v]===m[v]));t&&n(2,g=t)}I("active"),s.addEventListener("scroll",(()=>{clearTimeout(M),M=setTimeout((()=>{O=!1}),100)}),!1)})),lt((()=>{u||n(1,u=[]),u!==r&&u.length>0&&n(2,g=0),r=u}));return t.$$set=t=>{"container"in t&&n(0,s=t.container),"VirtualList"in t&&n(3,a=t.VirtualList),"Item"in t&&n(4,l=t.Item),"isVirtualList"in t&&n(5,c=t.isVirtualList),"items"in t&&n(1,u=t.items),"labelIdentifier"in t&&n(20,d=t.labelIdentifier),"getOptionLabel"in t&&n(6,h=t.getOptionLabel),"getGroupHeaderLabel"in t&&n(7,f=t.getGroupHeaderLabel),"itemHeight"in t&&n(8,p=t.itemHeight),"hoverItemIndex"in t&&n(2,g=t.hoverItemIndex),"value"in t&&n(9,m=t.value),"optionIdentifier"in t&&n(10,v=t.optionIdentifier),"hideEmptyState"in t&&n(11,y=t.hideEmptyState),"noOptionsMessage"in t&&n(12,b=t.noOptionsMessage),"isMulti"in t&&n(21,_=t.isMulti),"activeItemIndex"in t&&n(19,w=t.activeItemIndex),"filterText"in t&&n(13,x=t.filterText),"parent"in t&&n(22,k=t.parent),"listPlacement"in t&&n(23,$=t.listPlacement),"listAutoWidth"in t&&n(24,S=t.listAutoWidth),"listOffset"in t&&n(25,C=t.listOffset)},t.$$.update=()=>{4194305&t.$$.dirty[0]&&k&&s&&P()},[s,u,g,a,l,c,h,f,p,m,v,y,b,x,o,T,L,function(t){switch(t.key){case"Escape":t.preventDefault(),A();break;case"ArrowDown":t.preventDefault(),u.length&&E(1);break;case"ArrowUp":t.preventDefault(),u.length&&E(-1);break;case"Enter":if(t.preventDefault(),0===u.length)break;const e=u[g];if(m&&!_&&m[v]===e[v]){A();break}e.isCreator?i("itemCreated",x):(n(19,w=g),D(u[g]));break;case"Tab":if(t.preventDefault(),0===u.length)return A();if(m&&m[v]===u[g][v])return A();n(19,w=g),D(u[g])}},P,w,d,_,k,$,S,C,t=>T(t),t=>T(t),(t,e,n)=>L({item:t,i:e,event:n}),t=>T(t),t=>T(t),(t,e,n)=>L({item:t,i:e,event:n}),function(t){vt[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class fh extends ee{constructor(t){super(),te(this,t,hh,ah,a,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function ph(e){let n,i=e[0](e[1])+"";return{c(){n=I("div"),q(n,"class","selection svelte-pu1q1n")},m(t,e){L(t,n,e),n.innerHTML=i},p(t,[e]){3&e&&i!==(i=t[0](t[1])+"")&&(n.innerHTML=i)},i:t,o:t,d(t){t&&A(n)}}}function gh(t,e,n){let{getSelectionLabel:i}=e,{item:r}=e;return t.$$set=t=>{"getSelectionLabel"in t&&n(0,i=t.getSelectionLabel),"item"in t&&n(1,r=t.item)},[i,r]}class mh extends ee{constructor(t){super(),te(this,t,gh,ph,a,{getSelectionLabel:0,item:1})}}function vh(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}function yh(t){let e,n,i;function r(...e){return t[6](t[11],...e)}return{c(){e=I("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',q(e,"class","multiSelectItem_clear svelte-liu9pa")},m(t,o){L(t,e,o),n||(i=R(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&A(e),n=!1,i()}}}function bh(t){let e,n,i,r,o,s,a,l=t[4](t[9])+"",c=!t[2]&&!t[3]&&yh(t);function u(...e){return t[7](t[11],...e)}return{c(){e=I("div"),n=I("div"),i=z(),c&&c.c(),r=z(),q(n,"class","multiSelectItem_label svelte-liu9pa"),q(e,"class",o="multiSelectItem "+(t[1]===t[11]?"active":"")+" "+(t[2]?"disabled":"")+" svelte-liu9pa")},m(t,o){L(t,e,o),O(e,n),n.innerHTML=l,O(e,i),c&&c.m(e,null),O(e,r),s||(a=R(e,"click",u),s=!0)},p(i,s){t=i,17&s&&l!==(l=t[4](t[9])+"")&&(n.innerHTML=l),t[2]||t[3]?c&&(c.d(1),c=null):c?c.p(t,s):(c=yh(t),c.c(),c.m(e,r)),6&s&&o!==(o="multiSelectItem "+(t[1]===t[11]?"active":"")+" "+(t[2]?"disabled":"")+" svelte-liu9pa")&&q(e,"class",o)},d(t){t&&A(e),c&&c.d(),s=!1,a()}}}function _h(e){let n,i=e[0],r=[];for(let t=0;t<i.length;t+=1)r[t]=bh(vh(e,i,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=F()},m(t,e){for(let n=0;n<r.length;n+=1)r[n].m(t,e);L(t,n,e)},p(t,[e]){if(63&e){let o;for(i=t[0],o=0;o<i.length;o+=1){const s=vh(t,i,o);r[o]?r[o].p(s,e):(r[o]=bh(s),r[o].c(),r[o].m(n.parentNode,n))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:t,o:t,d(t){E(r,t),t&&A(n)}}}function wh(t,e,n){const i=ht();let{value:r=[]}=e,{activeValue:o}=e,{isDisabled:s=!1}=e,{multiFullItemClearable:a=!1}=e,{getSelectionLabel:l}=e;function c(t,e){e.stopPropagation(),i("multiItemClear",{i:t})}return t.$$set=t=>{"value"in t&&n(0,r=t.value),"activeValue"in t&&n(1,o=t.activeValue),"isDisabled"in t&&n(2,s=t.isDisabled),"multiFullItemClearable"in t&&n(3,a=t.multiFullItemClearable),"getSelectionLabel"in t&&n(4,l=t.getSelectionLabel)},[r,o,s,a,l,c,(t,e)=>c(t,e),(t,e)=>a?c(t,e):{}]}class xh extends ee{constructor(t){super(),te(this,t,wh,_h,a,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function kh(t,e,n){const i=t.slice();return i[23]=e[n],i}const $h=t=>({item:32&t,i:32&t,hoverItemIndex:2&t}),Sh=t=>({item:t[23].data,i:t[23].index,hoverItemIndex:t[1]});function Ch(t,e){let n,i,r;const o=e[15].default,s=f(o,e,e[14],Sh),a=s||function(t){let e;return{c(){e=B("Missing template")},m(t,n){L(t,e,n)},d(t){t&&A(e)}}}();return{key:t,first:null,c(){n=I("svelte-virtual-list-row"),a&&a.c(),i=z(),W(n,"class","svelte-g2cagw"),this.first=n},m(t,e){L(t,n,e),a&&a.m(n,null),O(n,i),r=!0},p(t,n){e=t,s&&s.p&&(!r||16418&n)&&m(s,o,e,e[14],r?g(o,e[14],n,$h):v(e[14]),Sh)},i(t){r||(zt(a,t),r=!0)},o(t){Ft(a,t),r=!1},d(t){t&&A(n),a&&a.d(t)}}}function Mh(t){let e,n,i,r,o,s,a=[],l=new Map,c=t[5];const u=t=>t[23].index;for(let e=0;e<c.length;e+=1){let n=kh(t,c,e),i=u(n);l.set(i,a[e]=Ch(i,n))}return{c(){e=I("svelte-virtual-list-viewport"),n=I("svelte-virtual-list-contents");for(let t=0;t<a.length;t+=1)a[t].c();G(n,"padding-top",t[6]+"px"),G(n,"padding-bottom",t[7]+"px"),W(n,"class","svelte-g2cagw"),G(e,"height",t[0]),W(e,"class","svelte-g2cagw"),$t((()=>t[18].call(e)))},m(l,c){L(l,e,c),O(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);t[16](n),t[17](e),i=J(e,t[18].bind(e)),r=!0,o||(s=R(e,"scroll",t[8]),o=!0)},p(t,[i]){16418&i&&(c=t[5],Pt(),a=Gt(a,i,u,1,t,c,l,n,Vt,Ch,null,kh),Bt()),(!r||64&i)&&G(n,"padding-top",t[6]+"px"),(!r||128&i)&&G(n,"padding-bottom",t[7]+"px"),(!r||1&i)&&G(e,"height",t[0])},i(t){if(!r){for(let t=0;t<c.length;t+=1)zt(a[t]);r=!0}},o(t){for(let t=0;t<a.length;t+=1)Ft(a[t]);r=!1},d(n){n&&A(e);for(let t=0;t<a.length;t+=1)a[t].d();t[16](null),t[17](null),i(),o=!1,s()}}}function Oh(t,e,n){let i,r,o,s,a,l,{$$slots:c={},$$scope:u}=e,{items:d}=e,{height:h="100%"}=e,{itemHeight:f=40}=e,{hoverItemIndex:p=0}=e,{start:g=0}=e,{end:m=0}=e,v=[],y=0,b=0,_=0;return ct((()=>{i=o.getElementsByTagName("svelte-virtual-list-row"),n(13,a=!0)})),t.$$set=t=>{"items"in t&&n(11,d=t.items),"height"in t&&n(0,h=t.height),"itemHeight"in t&&n(12,f=t.itemHeight),"hoverItemIndex"in t&&n(1,p=t.hoverItemIndex),"start"in t&&n(9,g=t.start),"end"in t&&n(10,m=t.end),"$$scope"in t&&n(14,u=t.$$scope)},t.$$.update=()=>{3584&t.$$.dirty&&n(5,s=d.slice(g,m).map(((t,e)=>({index:e+g,data:t})))),14340&t.$$.dirty&&a&&async function(t,e,o){const{scrollTop:s}=r;await kt();let a=b-s,c=g;for(;a<e&&c<t.length;){let t=i[c-g];t||(n(10,m=c+1),await kt(),t=i[c-g]),a+=v[c]=o||t.offsetHeight,c+=1}n(10,m=c);const u=t.length-m;l=(b+a)/m,n(7,_=u*l),v.length=t.length,r&&n(3,r.scrollTop=0,r)}(d,y,f)},[h,p,y,r,o,s,b,_,async function(){const{scrollTop:t}=r,e=g;for(let t=0;t<i.length;t+=1)v[g+t]=f||i[t].offsetHeight;let o=0,s=0;for(;o<d.length;){const e=v[o]||l;if(s+e>t){n(9,g=o),n(6,b=s);break}s+=e,o+=1}for(;o<d.length&&(s+=v[o]||l,o+=1,!(s>t+y)););n(10,m=o);const a=d.length-m;for(l=s/m;o<d.length;)v[o++]=l;if(n(7,_=a*l),g<e){await kt();let n=0,o=0;for(let t=g;t<e;t+=1)i[t-g]&&(n+=v[t],o+=f||i[t-g].offsetHeight);const s=o-n;r.scrollTo(0,t+s)}},g,m,d,f,a,u,c,function(t){vt[t?"unshift":"push"]((()=>{o=t,n(4,o)}))},function(t){vt[t?"unshift":"push"]((()=>{r=t,n(3,r)}))},function(){y=this.offsetHeight,n(2,y)}]}class Dh extends ee{constructor(t){super(),te(this,t,Oh,Mh,a,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Th(e){let n,i;return{c(){n=P("svg"),i=P("path"),q(i,"fill","currentColor"),q(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),q(n,"width","100%"),q(n,"height","100%"),q(n,"viewBox","-2 -2 50 50"),q(n,"focusable","false"),q(n,"aria-hidden","true"),q(n,"role","presentation")},m(t,e){L(t,n,e),O(n,i)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Lh extends ee{constructor(t){super(),te(this,t,null,Th,a,{})}}function Ah(t,e,n){const i=t.slice();return i[103]=e[n],i}function Eh(t){let e,n,i,r,o;return{c(){e=I("span"),n=B(t[33]),i=z(),r=I("span"),o=B(t[32]),q(e,"id","aria-selection"),q(r,"id","aria-context")},m(t,s){L(t,e,s),O(e,n),L(t,i,s),L(t,r,s),O(r,o)},p(t,e){4&e[1]&&V(n,t[33]),2&e[1]&&V(o,t[32])},d(t){t&&A(e),t&&A(i),t&&A(r)}}}function Ih(t){let e,i,r;const o=[t[18]];var s=t[17];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return s&&(e=new s(a())),{c(){e&&Xt(e.$$.fragment),i=F()},m(t,n){e&&Zt(e,t,n),L(t,i,n),r=!0},p(t,n){const r=262144&n[0]?Kt(o,[Yt(t[18])]):{};if(s!==(s=t[17])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(e=new s(a()),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,i.parentNode,i)):e=null}else s&&e.$set(r)},i(t){r||(e&&zt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&A(i),e&&Qt(e,t)}}}function Ph(t){let e,n,i;var r=t[26];function o(t){return{props:{value:t[2],getSelectionLabel:t[12],activeValue:t[30],isDisabled:t[9],multiFullItemClearable:t[8]}}}return r&&(e=new r(o(t)),e.$on("multiItemClear",t[38]),e.$on("focus",t[40])),{c(){e&&Xt(e.$$.fragment),n=F()},m(t,r){e&&Zt(e,t,r),L(t,n,r),i=!0},p(t,i){const s={};if(4&i[0]&&(s.value=t[2]),4096&i[0]&&(s.getSelectionLabel=t[12]),1073741824&i[0]&&(s.activeValue=t[30]),512&i[0]&&(s.isDisabled=t[9]),256&i[0]&&(s.multiFullItemClearable=t[8]),r!==(r=t[26])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}r?(e=new r(o(t)),e.$on("multiItemClear",t[38]),e.$on("focus",t[40]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,n.parentNode,n)):e=null}else r&&e.$set(s)},i(t){i||(e&&zt(e.$$.fragment,t),i=!0)},o(t){e&&Ft(e.$$.fragment,t),i=!1},d(t){t&&A(n),e&&Qt(e,t)}}}function Bh(t){let e,n,i,r,o;var s=t[25];function a(t){return{props:{item:t[2],getSelectionLabel:t[12]}}}return s&&(n=new s(a(t))),{c(){e=I("div"),n&&Xt(n.$$.fragment),q(e,"class","selectedItem svelte-b8sh3g")},m(s,a){L(s,e,a),n&&Zt(n,e,null),i=!0,r||(o=R(e,"focus",t[40]),r=!0)},p(t,i){const r={};if(4&i[0]&&(r.item=t[2]),4096&i[0]&&(r.getSelectionLabel=t[12]),s!==(s=t[25])){if(n){Pt();const t=n;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(n=new s(a(t)),Xt(n.$$.fragment),zt(n.$$.fragment,1),Zt(n,e,null)):n=null}else s&&n.$set(r)},i(t){i||(n&&zt(n.$$.fragment,t),i=!0)},o(t){n&&Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),n&&Qt(n),r=!1,o()}}}function zh(t){let e,n,i,r,o;var s=t[23];return s&&(n=new s({})),{c(){e=I("div"),n&&Xt(n.$$.fragment),q(e,"class","clearSelect svelte-b8sh3g"),q(e,"aria-hidden","true")},m(s,a){L(s,e,a),n&&Zt(n,e,null),i=!0,r||(o=R(e,"click",N(t[27])),r=!0)},p(t,i){if(s!==(s=t[23])){if(n){Pt();const t=n;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(n=new s({}),Xt(n.$$.fragment),zt(n.$$.fragment,1),Zt(n,e,null)):n=null}},i(t){i||(n&&zt(n.$$.fragment,t),i=!0)},o(t){n&&Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),n&&Qt(n),r=!1,o()}}}function Fh(t){let e;function n(t,e){return t[22]?Nh:Rh}let i=n(t),r=i(t);return{c(){e=I("div"),r.c(),q(e,"class","indicator svelte-b8sh3g"),q(e,"aria-hidden","true")},m(t,n){L(t,e,n),r.m(e,null)},p(t,o){i===(i=n(t))&&r?r.p(t,o):(r.d(1),r=i(t),r&&(r.c(),r.m(e,null)))},d(t){t&&A(e),r.d()}}}function Rh(e){let n,i;return{c(){n=P("svg"),i=P("path"),q(i,"d","M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"),q(n,"width","100%"),q(n,"height","100%"),q(n,"viewBox","0 0 20 20"),q(n,"focusable","false"),q(n,"aria-hidden","true"),q(n,"class","svelte-b8sh3g")},m(t,e){L(t,n,e),O(n,i)},p:t,d(t){t&&A(n)}}}function Nh(t){let e,n;return{c(){e=new Q,n=F(),e.a=n},m(i,r){e.m(t[22],i,r),L(i,n,r)},p(t,n){4194304&n[0]&&e.p(t[22])},d(t){t&&A(n),t&&e.d()}}}function jh(t){let e;return{c(){e=I("div"),e.innerHTML='<svg class="spinner_icon svelte-b8sh3g" viewBox="25 25 50 50"><circle class="spinner_path svelte-b8sh3g" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',q(e,"class","spinner svelte-b8sh3g")},m(t,n){L(t,e,n)},d(t){t&&A(e)}}}function qh(t){let e,i,r,o;const s=[t[34]];function a(e){t[84](e)}var l=t[24];function c(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return void 0!==t[28]&&(e.hoverItemIndex=t[28]),{props:e}}return l&&(e=new l(c(t)),vt.push((()=>Jt(e,"hoverItemIndex",a))),e.$on("itemSelected",t[43]),e.$on("itemCreated",t[44]),e.$on("closeList",t[45])),{c(){e&&Xt(e.$$.fragment),r=F()},m(t,n){e&&Zt(e,t,n),L(t,r,n),o=!0},p(t,n){const o=8&n[1]?Kt(s,[Yt(t[34])]):{};if(!i&&268435456&n[0]&&(i=!0,o.hoverItemIndex=t[28],St((()=>i=!1))),l!==(l=t[24])){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}l?(e=new l(c(t)),vt.push((()=>Jt(e,"hoverItemIndex",a))),e.$on("itemSelected",t[43]),e.$on("itemCreated",t[44]),e.$on("closeList",t[45]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,r.parentNode,r)):e=null}else l&&e.$set(o)},i(t){o||(e&&zt(e.$$.fragment,t),o=!0)},o(t){e&&Ft(e.$$.fragment,t),o=!1},d(t){t&&A(r),e&&Qt(e,t)}}}function Hh(t){let e,n,i;return{c(){e=I("input"),q(e,"name",n=t[16].name),q(e,"type","hidden"),e.value=i=t[2]?t[12](t[2]):null,q(e,"class","svelte-b8sh3g")},m(t,n){L(t,e,n)},p(t,r){65536&r[0]&&n!==(n=t[16].name)&&q(e,"name",n),4100&r[0]&&i!==(i=t[2]?t[12](t[2]):null)&&(e.value=i)},d(t){t&&A(e)}}}function Wh(t){let e,n=t[2],i=[];for(let e=0;e<n.length;e+=1)i[e]=Vh(Ah(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=F()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);L(t,e,n)},p(t,r){if(69636&r[0]){let o;for(n=t[2],o=0;o<n.length;o+=1){const s=Ah(t,n,o);i[o]?i[o].p(s,r):(i[o]=Vh(s),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(t){E(i,t),t&&A(e)}}}function Vh(t){let e,n,i;return{c(){e=I("input"),q(e,"name",n=t[16].name),q(e,"type","hidden"),e.value=i=t[103]?t[12](t[103]):null,q(e,"class","svelte-b8sh3g")},m(t,n){L(t,e,n)},p(t,r){65536&r[0]&&n!==(n=t[16].name)&&q(e,"name",n),4100&r[0]&&i!==(i=t[103]?t[12](t[103]):null)&&(e.value=i)},d(t){t&&A(e)}}}function Uh(t){let e,i,r,s,a,l,c,u,d,h,f,p,g,m,v,y,b,_,w=t[1]&&Eh(t),x=t[17]&&Ih(t),k=t[35]&&Ph(t),$=[{readOnly:c=!t[13]},t[31],{placeholder:t[36]},{style:t[14]},{disabled:t[9]}],S={};for(let t=0;t<$.length;t+=1)S=n(S,$[t]);let C=!t[7]&&t[29]&&Bh(t),M=t[37]&&zh(t),D=!t[37]&&(t[20]||t[19]&&!t[2]||!t[13]&&!t[9]&&!t[4]&&(t[29]&&!t[15]||!t[29]))&&Fh(t),T=t[4]&&jh(),E=t[5]&&qh(t),P=(!t[7]||t[7]&&!t[35])&&Hh(t),B=t[7]&&t[35]&&Wh(t);return{c(){e=I("div"),i=I("span"),w&&w.c(),r=z(),x&&x.c(),s=z(),k&&k.c(),a=z(),l=I("input"),u=z(),C&&C.c(),d=z(),M&&M.c(),h=z(),D&&D.c(),f=z(),T&&T.c(),p=z(),E&&E.c(),g=z(),P&&P.c(),m=z(),B&&B.c(),q(i,"aria-live","polite"),q(i,"aria-atomic","false"),q(i,"aria-relevant","additions text"),q(i,"class","a11yText svelte-b8sh3g"),H(l,S),X(l,"svelte-b8sh3g",!0),q(e,"class",v="selectContainer "+t[21]+" svelte-b8sh3g"),q(e,"style",t[11]),X(e,"hasError",t[10]),X(e,"multiSelect",t[7]),X(e,"disabled",t[9]),X(e,"focused",t[1])},m(n,o){L(n,e,o),O(e,i),w&&w.m(i,null),O(e,r),x&&x.m(e,null),O(e,s),k&&k.m(e,null),O(e,a),O(e,l),l.autofocus&&l.focus(),t[82](l),U(l,t[3]),O(e,u),C&&C.m(e,null),O(e,d),M&&M.m(e,null),O(e,h),D&&D.m(e,null),O(e,f),T&&T.m(e,null),O(e,p),E&&E.m(e,null),O(e,g),P&&P.m(e,null),O(e,m),B&&B.m(e,null),t[85](e),y=!0,b||(_=[R(window,"click",t[41]),R(window,"focusin",t[41]),R(window,"keydown",t[39]),R(l,"focus",t[40]),R(l,"input",t[83]),R(e,"click",t[42])],b=!0)},p(t,n){t[1]?w?w.p(t,n):(w=Eh(t),w.c(),w.m(i,null)):w&&(w.d(1),w=null),t[17]?x?(x.p(t,n),131072&n[0]&&zt(x,1)):(x=Ih(t),x.c(),zt(x,1),x.m(e,s)):x&&(Pt(),Ft(x,1,1,(()=>{x=null})),Bt()),t[35]?k?(k.p(t,n),16&n[1]&&zt(k,1)):(k=Ph(t),k.c(),zt(k,1),k.m(e,a)):k&&(Pt(),Ft(k,1,1,(()=>{k=null})),Bt()),H(l,S=Kt($,[(!y||8192&n[0]&&c!==(c=!t[13]))&&{readOnly:c},1&n[1]&&t[31],(!y||32&n[1])&&{placeholder:t[36]},(!y||16384&n[0])&&{style:t[14]},(!y||512&n[0])&&{disabled:t[9]}])),8&n[0]&&l.value!==t[3]&&U(l,t[3]),X(l,"svelte-b8sh3g",!0),!t[7]&&t[29]?C?(C.p(t,n),536871040&n[0]&&zt(C,1)):(C=Bh(t),C.c(),zt(C,1),C.m(e,d)):C&&(Pt(),Ft(C,1,1,(()=>{C=null})),Bt()),t[37]?M?(M.p(t,n),64&n[1]&&zt(M,1)):(M=zh(t),M.c(),zt(M,1),M.m(e,h)):M&&(Pt(),Ft(M,1,1,(()=>{M=null})),Bt()),t[37]||!(t[20]||t[19]&&!t[2])&&(t[13]||t[9]||t[4]||(!t[29]||t[15])&&t[29])?D&&(D.d(1),D=null):D?D.p(t,n):(D=Fh(t),D.c(),D.m(e,f)),t[4]?T||(T=jh(),T.c(),T.m(e,p)):T&&(T.d(1),T=null),t[5]?E?(E.p(t,n),32&n[0]&&zt(E,1)):(E=qh(t),E.c(),zt(E,1),E.m(e,g)):E&&(Pt(),Ft(E,1,1,(()=>{E=null})),Bt()),!t[7]||t[7]&&!t[35]?P?P.p(t,n):(P=Hh(t),P.c(),P.m(e,m)):P&&(P.d(1),P=null),t[7]&&t[35]?B?B.p(t,n):(B=Wh(t),B.c(),B.m(e,null)):B&&(B.d(1),B=null),(!y||2097152&n[0]&&v!==(v="selectContainer "+t[21]+" svelte-b8sh3g"))&&q(e,"class",v),(!y||2048&n[0])&&q(e,"style",t[11]),2098176&n[0]&&X(e,"hasError",t[10]),2097280&n[0]&&X(e,"multiSelect",t[7]),2097664&n[0]&&X(e,"disabled",t[9]),2097154&n[0]&&X(e,"focused",t[1])},i(t){y||(zt(x),zt(k),zt(C),zt(M),zt(E),y=!0)},o(t){Ft(x),Ft(k),Ft(C),Ft(M),Ft(E),y=!1},d(n){n&&A(e),w&&w.d(),x&&x.d(),k&&k.d(),t[82](null),C&&C.d(),M&&M.d(),D&&D.d(),T&&T.d(),E&&E.d(),P&&P.d(),B&&B.d(),t[85](null),b=!1,o(_)}}}function Gh(t){return t.map(((t,e)=>({index:e,value:t,label:`${t}`})))}function Kh(t,e,n){let i,r,o,s,a,l,c,u;const d=ht();let{id:h=null}=e,{container:f}=e,{input:p}=e,{isMulti:g=!1}=e,{multiFullItemClearable:m=!1}=e,{isDisabled:v=!1}=e,{isCreatable:y=!1}=e,{isFocused:b=!1}=e,{value:_=null}=e,{filterText:w=""}=e,{placeholder:x="Select..."}=e,{placeholderAlwaysShow:k=!1}=e,{items:$=null}=e,{itemFilter:S=((t,e,n)=>`${t}`.toLowerCase().includes(e.toLowerCase()))}=e,{groupBy:C}=e,{groupFilter:M=(t=>t)}=e,{isGroupHeaderSelectable:O=!1}=e,{getGroupHeaderLabel:D=(t=>t[T]||t.id)}=e,{labelIdentifier:T="label"}=e,{getOptionLabel:L=((t,e)=>t.isCreator?`Create "${e}"`:t[T])}=e,{optionIdentifier:A="value"}=e,{loadOptions:E}=e,{hasError:I=!1}=e,{containerStyles:P=""}=e,{getSelectionLabel:B=(t=>t?t[T]:null)}=e,{createGroupHeaderItem:z=(t=>({value:t,label:t}))}=e,{createItem:F=(t=>({value:t,label:t}))}=e;let{isSearchable:R=!0}=e,{inputStyles:N=""}=e,{isClearable:j=!0}=e,{isWaiting:q=!1}=e,{listPlacement:H="auto"}=e,{listOpen:W=!1}=e,{isVirtualList:V=!1}=e,{loadOptionsInterval:U=300}=e,{noOptionsMessage:G="No options"}=e,{hideEmptyState:K=!1}=e,{inputAttributes:Y={}}=e,{listAutoWidth:J=!0}=e,{itemHeight:X=40}=e,{Icon:Z}=e,{iconProps:Q={}}=e,{showChevron:tt=!1}=e,{showIndicator:et=!1}=e,{containerClasses:nt=""}=e,{indicatorSvg:it}=e,{listOffset:rt=5}=e,{ClearIcon:ot=Lh}=e,{Item:st=Xd}=e,{List:at=fh}=e,{Selection:ut=mh}=e,{MultiSelection:dt=xh}=e,{VirtualList:ft=Dh}=e;function pt(t){if(t.loadOptions&&t.filterText.length>0)return;if(!t.items)return[];t.items&&t.items.length>0&&"object"!=typeof t.items[0]&&(t.items=Gh(t.items));let e=t.items.filter((e=>{let n=S(L(e,t.filterText),t.filterText,e);return n&&t.isMulti&&t.value&&Array.isArray(t.value)&&(n=!t.value.some((n=>n[t.optionIdentifier]===e[t.optionIdentifier]))),n}));return t.groupBy&&(e=function(t){const e=[],n={};t.forEach((t=>{const i=C(t);e.includes(i)||(e.push(i),n[i]=[],i&&n[i].push(Object.assign(z(i,t),{id:i,isGroupHeader:!0,isSelectable:O}))),n[i].push(Object.assign({isGroupItem:!!i},t))}));const i=[];return M(e).forEach((t=>{i.push(...n[t])})),i}(e)),t.isCreatable&&(e=gt(e,t.filterText)),e}function gt(t,e){if(0===e.length)return t;const n=F(e);return t[0]&&e===t[0][T]?t:(n.isCreator=!0,[...t,n])}let mt,yt,bt,_t,wt,xt,{selectedValue:kt=null}=e;const $t=function(t,e,n){let i;return function(){let r=this,o=arguments,s=function(){i=null,n||t.apply(r,o)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(r,o)}}((async()=>{n(4,q=!0);let t=await E(w).catch((t=>{console.warn("svelte-select loadOptions error :>> ",t),d("error",{type:"loadOptions",details:t})}));t&&!t.cancelled&&(t?(t&&t.length>0&&"object"!=typeof t[0]&&(t=Gh(t)),n(81,i=[...t]),d("loaded",{items:i})):n(81,i=[]),y&&n(81,i=gt(i,w)),n(4,q=!1),n(1,b=!0),n(5,W=!0))}),U);let St;function Ct(){let t=!0;if(_){const e=[],i=[];_.forEach((n=>{e.includes(n[A])?t=!1:(e.push(n[A]),i.push(n))})),t||n(2,_=i)}return t}function Mt(t){let e=t?t[A]:_[A];return $.find((t=>t[A]===e))}function Ot(t){const{detail:e}=t,i=_[e?e.i:_.length-1];1===_.length?n(2,_=void 0):n(2,_=_.filter((t=>t!==i))),d("clear",i)}function Dt(){n(1,b=!0),p&&p.focus()}lt((async()=>{n(77,yt=_),n(78,bt=w),n(79,_t=b),n(80,wt=g)})),ct((()=>{b&&p&&p.focus()}));let{ariaValues:Tt=(t=>`Option ${t}, selected.`)}=e,{ariaListOpen:Lt=((t,e)=>`You are currently focused on option ${t}. There are ${e} results available.`)}=e,{ariaFocused:At=(()=>"Select is focused, type to refine list, press down to open the menu.")}=e;return t.$$set=t=>{"id"in t&&n(46,h=t.id),"container"in t&&n(0,f=t.container),"input"in t&&n(6,p=t.input),"isMulti"in t&&n(7,g=t.isMulti),"multiFullItemClearable"in t&&n(8,m=t.multiFullItemClearable),"isDisabled"in t&&n(9,v=t.isDisabled),"isCreatable"in t&&n(47,y=t.isCreatable),"isFocused"in t&&n(1,b=t.isFocused),"value"in t&&n(2,_=t.value),"filterText"in t&&n(3,w=t.filterText),"placeholder"in t&&n(48,x=t.placeholder),"placeholderAlwaysShow"in t&&n(49,k=t.placeholderAlwaysShow),"items"in t&&n(50,$=t.items),"itemFilter"in t&&n(51,S=t.itemFilter),"groupBy"in t&&n(52,C=t.groupBy),"groupFilter"in t&&n(53,M=t.groupFilter),"isGroupHeaderSelectable"in t&&n(54,O=t.isGroupHeaderSelectable),"getGroupHeaderLabel"in t&&n(55,D=t.getGroupHeaderLabel),"labelIdentifier"in t&&n(56,T=t.labelIdentifier),"getOptionLabel"in t&&n(57,L=t.getOptionLabel),"optionIdentifier"in t&&n(58,A=t.optionIdentifier),"loadOptions"in t&&n(59,E=t.loadOptions),"hasError"in t&&n(10,I=t.hasError),"containerStyles"in t&&n(11,P=t.containerStyles),"getSelectionLabel"in t&&n(12,B=t.getSelectionLabel),"createGroupHeaderItem"in t&&n(60,z=t.createGroupHeaderItem),"createItem"in t&&n(61,F=t.createItem),"isSearchable"in t&&n(13,R=t.isSearchable),"inputStyles"in t&&n(14,N=t.inputStyles),"isClearable"in t&&n(15,j=t.isClearable),"isWaiting"in t&&n(4,q=t.isWaiting),"listPlacement"in t&&n(63,H=t.listPlacement),"listOpen"in t&&n(5,W=t.listOpen),"isVirtualList"in t&&n(64,V=t.isVirtualList),"loadOptionsInterval"in t&&n(65,U=t.loadOptionsInterval),"noOptionsMessage"in t&&n(66,G=t.noOptionsMessage),"hideEmptyState"in t&&n(67,K=t.hideEmptyState),"inputAttributes"in t&&n(16,Y=t.inputAttributes),"listAutoWidth"in t&&n(68,J=t.listAutoWidth),"itemHeight"in t&&n(69,X=t.itemHeight),"Icon"in t&&n(17,Z=t.Icon),"iconProps"in t&&n(18,Q=t.iconProps),"showChevron"in t&&n(19,tt=t.showChevron),"showIndicator"in t&&n(20,et=t.showIndicator),"containerClasses"in t&&n(21,nt=t.containerClasses),"indicatorSvg"in t&&n(22,it=t.indicatorSvg),"listOffset"in t&&n(70,rt=t.listOffset),"ClearIcon"in t&&n(23,ot=t.ClearIcon),"Item"in t&&n(71,st=t.Item),"List"in t&&n(24,at=t.List),"Selection"in t&&n(25,ut=t.Selection),"MultiSelection"in t&&n(26,dt=t.MultiSelection),"VirtualList"in t&&n(72,ft=t.VirtualList),"selectedValue"in t&&n(73,kt=t.selectedValue),"ariaValues"in t&&n(74,Tt=t.ariaValues),"ariaListOpen"in t&&n(75,Lt=t.ariaListOpen),"ariaFocused"in t&&n(76,At=t.ariaFocused)},t.$$.update=()=>{140&t.$$.dirty[0]|405340160&t.$$.dirty[1]&&n(81,i=pt({loadOptions:E,filterText:w,items:$,value:_,isMulti:g,optionIdentifier:A,groupBy:C,isCreatable:y})),2048&t.$$.dirty[2]&&kt&&console.warn("selectedValue is no longer used. Please use value instead."),524288&t.$$.dirty[1]&&function(t){t&&0!==t.length&&!t.some((t=>"object"!=typeof t))&&_&&(g?!_.some((t=>!t||!t[A])):_[A])&&(Array.isArray(_)?n(2,_=_.map((t=>Mt(t)||t))):n(2,_=Mt()||_))}($),4&t.$$.dirty[0]&&_&&("string"==typeof _?n(2,_={[A]:_,label:_}):g&&Array.isArray(_)&&_.length>0&&n(2,_=_.map((t=>"string"==typeof t?{value:t,label:t}:t)))),73728&t.$$.dirty[0]&&(!Y&&R||(n(31,St=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Y)),h&&n(31,St.id=h,St),R||n(31,St.readonly=!0,St))),128&t.$$.dirty[0]|262144&t.$$.dirty[2]&&(g&&_&&(Array.isArray(_)?n(2,_=[..._]):n(2,_=[_])),wt&&!g&&_&&n(2,_=null)),132&t.$$.dirty[0]&&g&&_&&_.length>1&&Ct(),4&t.$$.dirty[0]&&_&&(g?JSON.stringify(_)!==JSON.stringify(yt)&&Ct()&&d("select",_):yt&&JSON.stringify(_[A])===JSON.stringify(yt[A])||d("select",_)),132&t.$$.dirty[0]|32768&t.$$.dirty[2]&&!_&&g&&yt&&d("select",_),2&t.$$.dirty[0]|131072&t.$$.dirty[2]&&b!==_t&&(b||W?Dt():p&&p.blur()),8&t.$$.dirty[0]|65536&t.$$.dirty[2]&&w!==bt&&0!==w.length&&(n(1,b=!0),n(5,W=!0),E?$t():(n(5,W=!0),g&&n(30,mt=void 0))),12&t.$$.dirty[0]&&n(29,r=_&&0===w.length),536904208&t.$$.dirty[0]&&n(37,o=r&&j&&!v&&!q),132&t.$$.dirty[0]|393216&t.$$.dirty[1]&&n(36,s=k&&g?x:_?"":x),132&t.$$.dirty[0]&&n(35,a=g&&_&&_.length>0),141&t.$$.dirty[0]|218103808&t.$$.dirty[1]|526326&t.$$.dirty[2]&&n(34,l={Item:st,filterText:w,optionIdentifier:A,noOptionsMessage:G,hideEmptyState:K,isVirtualList:V,VirtualList:ft,value:_,isMulti:g,getGroupHeaderLabel:D,items:i,itemHeight:X,getOptionLabel:L,listPlacement:H,parent:f,listAutoWidth:J,listOffset:rt}),132&t.$$.dirty[0]&&n(33,c=_?function(){let t;return t=g&&_.length>0?_.map((t=>B(t))).join(", "):B(_),Tt(t)}():""),268435490&t.$$.dirty[0]|524288&t.$$.dirty[2]&&n(32,u=function(){if(!b||!i||0===i.length)return"";let t=i[xt];if(W&&t){let e=B(t),n=i?i.length:0;return Lt(e,n)}return At()}())},[f,b,_,w,q,W,p,g,m,v,I,P,B,R,N,j,Y,Z,Q,tt,et,nt,it,ot,at,ut,dt,function(){n(2,_=void 0),n(5,W=!1),d("clear",_),Dt()},xt,r,mt,St,u,c,l,a,s,o,Ot,function(t){if(b)switch(t.key){case"ArrowDown":case"ArrowUp":t.preventDefault(),n(5,W=!0),n(30,mt=void 0);break;case"Tab":W||n(1,b=!1);break;case"Backspace":if(!g||w.length>0)return;if(g&&_&&_.length>0){if(Ot(void 0!==mt?mt:_.length-1),0===mt||void 0===mt)break;n(30,mt=_.length>mt?mt-1:void 0)}break;case"ArrowLeft":if(!g||w.length>0)return;void 0===mt?n(30,mt=_.length-1):_.length>mt&&0!==mt&&n(30,mt-=1);break;case"ArrowRight":if(!g||w.length>0||void 0===mt)return;mt===_.length-1?n(30,mt=void 0):mt<_.length-1&&n(30,mt+=1)}},Dt,function(t){if(!f)return;const e=t.path&&t.path.length>0?t.path[0]:t.target;f.contains(e)||(n(1,b=!1),n(5,W=!1),n(30,mt=void 0),p&&p.blur())},function(){v||(n(1,b=!0),n(5,W=!W))},function(t){const{detail:e}=t;if(e){n(3,w="");const t=Object.assign({},e);t.isGroupHeader&&!t.isSelectable||(n(2,_=g?_?_.concat([t]):[t]:t),n(2,_),setTimeout((()=>{n(5,W=!1),n(30,mt=void 0)})))}},function(t){const{detail:e}=t;g?(n(2,_=_||[]),n(2,_=[..._,F(e)])):n(2,_=F(e)),d("itemCreated",e),n(3,w=""),n(5,W=!1),n(30,mt=void 0)},function(){n(3,w=""),n(5,W=!1)},h,y,x,k,$,S,C,M,O,D,T,L,A,E,z,F,()=>i,H,V,U,G,K,J,X,rt,st,ft,kt,Tt,Lt,At,yt,bt,_t,wt,i,function(t){vt[t?"unshift":"push"]((()=>{p=t,n(6,p)}))},function(){w=this.value,n(3,w)},function(t){xt=t,n(28,xt)},function(t){vt[t?"unshift":"push"]((()=>{f=t,n(0,f)}))}]}class Yh extends ee{constructor(t){super(),te(this,t,Kh,Uh,a,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function Jh(t){let e,n;return e=new Yh({props:{items:t[1],inputStyles:t[6],value:0!==t[8].length?t[8]:void 0,isDisabled:t[5],isMulti:t[2],isCreatable:t[3],isClearable:t[4],placeholder:t[7]}}),e.$on("select",t[9]),e.$on("clear",t[10]),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(t,[n]){const i={};2&n&&(i.items=t[1]),64&n&&(i.inputStyles=t[6]),256&n&&(i.value=0!==t[8].length?t[8]:void 0),32&n&&(i.isDisabled=t[5]),4&n&&(i.isMulti=t[2]),8&n&&(i.isCreatable=t[3]),16&n&&(i.isClearable=t[4]),128&n&&(i.placeholder=t[7]),e.$set(i)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Xh(t,e,n){let i,{value:r=""}=e,{selectionOptions:o=[]}=e,{isMulti:s=!0}=e,{isCreatable:a=!0}=e,{isClearable:l=!0}=e,{disabled:c=!1}=e,{inputStyles:u="cursor: pointer;"}=e,{placeholder:d="Auswählen..."}=e;const h=t=>{let e=[];return""!==t&&(e=(s?t.split(", "):[t]).map((t=>o.find((e=>e===t||e.value===t))||t))),s||(e=0===e.length?"":e[0]),e};return t.$$set=t=>{"value"in t&&n(0,r=t.value),"selectionOptions"in t&&n(1,o=t.selectionOptions),"isMulti"in t&&n(2,s=t.isMulti),"isCreatable"in t&&n(3,a=t.isCreatable),"isClearable"in t&&n(4,l=t.isClearable),"disabled"in t&&n(5,c=t.disabled),"inputStyles"in t&&n(6,u=t.inputStyles),"placeholder"in t&&n(7,d=t.placeholder)},t.$$.update=()=>{1&t.$$.dirty&&n(8,i=h(r))},[r,o,s,a,l,c,u,d,i,t=>{let e=t.detail;e?(Array.isArray(e)||(e=[e]),n(0,r=e.map((t=>t.value)).join(", "))):n(0,r="")},t=>n(0,r="")]}class Zh extends ee{constructor(t){super(),te(this,t,Xh,Jh,a,{value:0,selectionOptions:1,isMulti:2,isCreatable:3,isClearable:4,disabled:5,inputStyles:6,placeholder:7})}}function Qh(t){let e,n,i,r,s,a,l,c,u;function d(e){t[11](e)}let h={selectionOptions:t[1],placeholder:"Filter",isMulti:!0,inputStyles:"font-size: 16px; cursor: pointer;",isCreatable:!1};return void 0!==t[2]&&(h.value=t[2]),s=new Zh({props:h}),vt.push((()=>Jt(s,"value",d))),{c(){e=I("div"),n=I("div"),i=I("input"),r=z(),Xt(s.$$.fragment),q(i,"class","searchInput svelte-13z3r12"),q(i,"type","text"),q(i,"placeholder","Suche"),q(n,"class","searchFilterBar svelte-13z3r12"),q(e,"class","container svelte-13z3r12")},m(o,a){L(o,e,a),O(e,n),O(n,i),t[8](i),U(i,t[4]),O(n,r),Zt(s,n,null),l=!0,c||(u=[R(i,"input",t[9]),R(i,"input",t[10])],c=!0)},p(t,[e]){16&e&&i.value!==t[4]&&U(i,t[4]);const n={};2&e&&(n.selectionOptions=t[1]),!a&&4&e&&(a=!0,n.value=t[2],St((()=>a=!1))),s.$set(n)},i(t){l||(zt(s.$$.fragment,t),l=!0)},o(t){Ft(s.$$.fragment,t),l=!1},d(n){n&&A(e),t[8](null),Qt(s),c=!1,o(u)}}}function tf(t,e,n){const i=ht();let{filterOptions:r=[]}=e,{activeFilters:o=[]}=e,{searchTerm:s=""}=e;let a,l,c="",u="";const d=t=>{clearTimeout(l),l=setTimeout((()=>{t()}),750)};return t.$$set=t=>{"filterOptions"in t&&n(1,r=t.filterOptions),"activeFilters"in t&&n(6,o=t.activeFilters),"searchTerm"in t&&n(0,s=t.searchTerm)},t.$$.update=()=>{1&t.$$.dirty&&n(4,c=s),64&t.$$.dirty&&u!==o.join(", ")&&n(2,u=o.join(", ")),4&t.$$.dirty&&u!==o.join(", ")&&(n(6,o=u.split(", ").filter((t=>""!==t))),i("filtersChanged",o))},[s,r,u,a,c,d,o,()=>a.focus(),function(t){vt[t?"unshift":"push"]((()=>{a=t,n(3,a)}))},function(){c=this.value,n(4,c),n(0,s)},t=>d((()=>n(0,s=t.target.value))),function(t){u=t,n(2,u)}]}class ef extends ee{constructor(t){super(),te(this,t,tf,Qh,a,{filterOptions:1,activeFilters:6,searchTerm:0,focusSearchInput:7})}get focusSearchInput(){return this.$$.ctx[7]}}const nf=/[a-zA-Z]/,rf=(t,e=0)=>[...Array(t).keys()].map((t=>t+e));function of(t,e,n){const i=t.slice();return i[6]=e[n],i}function sf(t){let e;return{c(){e=I("div"),q(e,"class","cube svelte-446r86"),G(e,"animation-delay",t[6]*(+t[5]/10)+t[4]),G(e,"left",t[6]*(+t[3]/3+ +t[3]/15)+t[1])},m(t,n){L(t,e,n)},p(t,n){10&n&&G(e,"left",t[6]*(+t[3]/3+ +t[3]/15)+t[1])},d(t){t&&A(e)}}}function af(e){let n,i=rf(3,0),r=[];for(let t=0;t<i.length;t+=1)r[t]=sf(of(e,i,t));return{c(){n=I("div");for(let t=0;t<r.length;t+=1)r[t].c();q(n,"class","wrapper svelte-446r86"),G(n,"--size",e[3]+e[1]),G(n,"--color",e[0]),G(n,"--duration",e[2])},m(t,e){L(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(58&e){let o;for(i=rf(3,0),o=0;o<i.length;o+=1){const s=of(t,i,o);r[o]?r[o].p(s,e):(r[o]=sf(s),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}10&e&&G(n,"--size",t[3]+t[1]),1&e&&G(n,"--color",t[0]),4&e&&G(n,"--duration",t[2])},i:t,o:t,d(t){t&&A(n),E(r,t)}}}function lf(t,e,n){let{color:i="#FF3E00"}=e,{unit:r="px"}=e,{duration:o="1.5s"}=e,{size:s="60"}=e,a=o.match(nf)[0],l=o.replace(nf,"");return t.$$set=t=>{"color"in t&&n(0,i=t.color),"unit"in t&&n(1,r=t.unit),"duration"in t&&n(2,o=t.duration),"size"in t&&n(3,s=t.size)},[i,r,o,s,a,l]}class cf extends ee{constructor(t){super(),te(this,t,lf,af,a,{color:0,unit:1,duration:2,size:3})}}function uf(e){let n,i,r,o,s,a;return{c(){n=I("span"),i=I("div"),r=z(),o=I("div"),s=z(),a=I("div"),q(i,"class","svelte-evhfle"),q(o,"class","svelte-evhfle"),q(a,"class","svelte-evhfle"),G(n,"--size",e[3]+e[1]),G(n,"--color",e[0]),G(n,"--duration",e[2]),q(n,"class","svelte-evhfle")},m(t,e){L(t,n,e),O(n,i),O(n,r),O(n,o),O(n,s),O(n,a)},p(t,[e]){10&e&&G(n,"--size",t[3]+t[1]),1&e&&G(n,"--color",t[0]),4&e&&G(n,"--duration",t[2])},i:t,o:t,d(t){t&&A(n)}}}function df(t,e,n){let{color:i="#FF3E00"}=e,{unit:r="px"}=e,{duration:o="1.5s"}=e,{size:s="60"}=e;return t.$$set=t=>{"color"in t&&n(0,i=t.color),"unit"in t&&n(1,r=t.unit),"duration"in t&&n(2,o=t.duration),"size"in t&&n(3,s=t.size)},[i,r,o,s]}class hf extends ee{constructor(t){super(),te(this,t,df,uf,a,{color:0,unit:1,duration:2,size:3})}}function ff(t,e,n){const i=t.slice();return i[10]=e[n],i}function pf(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function gf(e){let n,i=e[2]>1&&mf(e);return{c(){i&&i.c(),n=F()},m(t,e){i&&i.m(t,e),L(t,n,e)},p(t,e){t[2]>1?i?i.p(t,e):(i=mf(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&A(n)}}}function mf(t){let e,n,i,r,s,a,l=t[3],c=[];for(let e=0;e<l.length;e+=1)c[e]=bf(ff(t,l,e));return{c(){e=I("a"),e.textContent="«",n=z();for(let t=0;t<c.length;t+=1)c[t].c();i=z(),r=I("a"),r.textContent="»",q(e,"href","#/"),q(e,"class","svelte-tkxtr1"),q(r,"href","#/"),q(r,"class","svelte-tkxtr1")},m(o,l){L(o,e,l),L(o,n,l);for(let t=0;t<c.length;t+=1)c[t].m(o,l);L(o,i,l),L(o,r,l),s||(a=[R(e,"click",N(t[6])),R(r,"click",N(t[8]))],s=!0)},p(t,e){if(25&e){let n;for(l=t[3],n=0;n<l.length;n+=1){const r=ff(t,l,n);c[n]?c[n].p(r,e):(c[n]=bf(r),c[n].c(),c[n].m(i.parentNode,i))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}},d(t){t&&A(e),t&&A(n),E(c,t),t&&A(i),t&&A(r),s=!1,o(a)}}}function vf(t){let e,n,i,r,o=t[10]+"";return{c(){e=I("a"),n=B(o),q(e,"href","#/"),q(e,"class","disabled svelte-tkxtr1")},m(o,s){L(o,e,s),O(e,n),i||(r=R(e,"click",N(t[5])),i=!0)},p(t,e){8&e&&o!==(o=t[10]+"")&&V(n,o)},d(t){t&&A(e),i=!1,r()}}}function yf(t){let e,n,i,r,o,s=t[10]+1+"";function a(){return t[7](t[10])}return{c(){e=I("a"),n=B(s),q(e,"href","#/"),q(e,"class",i=b(t[10]===t[0]?"active":"")+" svelte-tkxtr1")},m(t,i){L(t,e,i),O(e,n),r||(o=R(e,"click",N(a)),r=!0)},p(r,o){t=r,8&o&&s!==(s=t[10]+1+"")&&V(n,s),9&o&&i!==(i=b(t[10]===t[0]?"active":"")+" svelte-tkxtr1")&&q(e,"class",i)},d(t){t&&A(e),r=!1,o()}}}function bf(t){let e;function n(t,e){return"number"==typeof t[10]?yf:vf}let i=n(t),r=i(t);return{c(){r.c(),e=F()},m(t,n){r.m(t,n),L(t,e,n)},p(t,o){i===(i=n(t))&&r?r.p(t,o):(r.d(1),r=i(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&A(e)}}}function _f(e){let n,i;return n=new hf({props:{size:"100",color:"#fc03a9",unit:"px"}}),{c(){Xt(n.$$.fragment)},m(t,e){Zt(n,t,e),i=!0},p:t,i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){Qt(n,t)}}}function wf(t){let e,n,i,r,o={ctx:t,current:null,token:null,hasCatch:!1,pending:_f,then:gf,catch:pf,value:2,blocks:[,,,]};return qt(i=t[1],o),{c(){e=I("div"),n=I("div"),o.block.c(),q(n,"class","pagination svelte-tkxtr1"),q(e,"class","container svelte-tkxtr1")},m(t,i){L(t,e,i),O(e,n),o.block.m(n,o.anchor=null),o.mount=()=>n,o.anchor=null,r=!0},p(e,[n]){t=e,o.ctx=t,2&n&&i!==(i=t[1])&&qt(i,o)||Ht(o,t,n)},i(t){r||(zt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ft(o.blocks[t])}r=!1},d(t){t&&A(e),o.block.d(),o.token=null,o=null}}}function xf(t,e,n){let{numberOfPagesPromise:i}=e,{currentPage:r}=e,o=[],s=1;function a(t=r){t=Math.min(t,s-1),t=Math.max(t,0),n(0,r=t)}return t.$$set=t=>{"numberOfPagesPromise"in t&&n(1,i=t.numberOfPagesPromise),"currentPage"in t&&n(0,r=t.currentPage)},t.$$.update=()=>{2&t.$$.dirty&&i.then((t=>n(2,s=t))),5&t.$$.dirty&&function(t){if(0===t)n(3,o=[0]);else{if(n(3,o=[r-2,r-1,r,r+1,r+2]),o[0]>=3)n(3,o=[0,"...",...o]);else for(;o[0]>0;)o.unshift(o[0]-1);if(t-1-o[o.length-1]>=3)n(3,o=[...o,"...",t-1]);else for(;o[o.length-1]<t-1;)o.push(o[o.length-1]+1);n(3,o=o.filter((e=>"..."===e||e>=0&&e<t)))}}(s)},[r,i,s,o,a,function(e){gt.call(this,t,e)},()=>a(r-1),t=>a(t),()=>a(r+1)]}class kf extends ee{constructor(t){super(),te(this,t,xf,wf,a,{numberOfPagesPromise:1,currentPage:0})}}function $f(e){return{c:t,m:t,p:t,d:t}}function Sf(t){let e;function n(t,e){return t[1]?Mf:Cf}let i=n(t),r=i(t);return{c(){r.c(),e=F()},m(t,n){r.m(t,n),L(t,e,n)},p(t,o){i===(i=n(t))&&r?r.p(t,o):(r.d(1),r=i(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&A(e)}}}function Cf(t){let e,n,i,r=t[5]+"";return{c(){e=I("div"),n=B(r),q(e,"class","cell svelte-1ebmzyw"),q(e,"style",i=`max-height: ${t[3]}px;`)},m(t,i){L(t,e,i),O(e,n)},p(t,o){4&o&&r!==(r=t[5]+"")&&V(n,r),8&o&&i!==(i=`max-height: ${t[3]}px;`)&&q(e,"style",i)},d(t){t&&A(e)}}}function Mf(t){let e,n=t[5]&&""!==t[5]&&Of(t);return{c(){n&&n.c(),e=F()},m(t,i){n&&n.m(t,i),L(t,e,i)},p(t,i){t[5]&&""!==t[5]?n?n.p(t,i):(n=Of(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&A(e)}}}function Of(t){let e,n;return{c(){e=I("img"),c(e.src,n=t[5])||q(e,"src",n),q(e,"alt","item"),q(e,"class","svelte-1ebmzyw")},m(t,n){L(t,e,n)},p(t,i){4&i&&!c(e.src,n=t[5])&&q(e,"src",n)},d(t){t&&A(e)}}}function Df(e){return{c:t,m:t,p:t,d:t}}function Tf(e){let n,i,r,o={ctx:e,current:null,token:null,hasCatch:!1,pending:Df,then:Sf,catch:$f,value:5};return qt(i=e[2](),o),{c(){n=I("td"),o.block.c(),q(n,"style",r=`background-color: ${e[0]}; color: ${e[4]}; height: ${e[3]}px;`),q(n,"class","svelte-1ebmzyw")},m(t,e){L(t,n,e),o.block.m(n,o.anchor=null),o.mount=()=>n,o.anchor=null},p(t,[s]){e=t,o.ctx=e,4&s&&i!==(i=e[2]())&&qt(i,o)||Ht(o,e,s),25&s&&r!==(r=`background-color: ${e[0]}; color: ${e[4]}; height: ${e[3]}px;`)&&q(n,"style",r)},i:t,o:t,d(t){t&&A(n),o.block.d(),o.token=null,o=null}}}function Lf(t,e,n){let{backgroundColor:i="white"}=e,{isImage:r=!1}=e,{valueFunction:o=(async()=>"")}=e,{rowHeight:s=40}=e,a="black";return t.$$set=t=>{"backgroundColor"in t&&n(0,i=t.backgroundColor),"isImage"in t&&n(1,r=t.isImage),"valueFunction"in t&&n(2,o=t.valueFunction),"rowHeight"in t&&n(3,s=t.rowHeight)},t.$$.update=()=>{1&t.$$.dirty&&function(t){var e,n=0==(t=""+t).indexOf("#"),i=0==t.indexOf("rgb");if(n&&(e=t.substr(1).match(7==t.length?/(\S{2})/g:/(\S{1})/g)))var r=parseInt(e[0],16),o=parseInt(e[1],16),s=parseInt(e[2],16);i&&(e=t.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/))&&(r=e[1],o=e[2],s=e[3]);if(void 0!==r)return(299*r+587*o+114*s)/1e3}(i)<125&&n(4,a="white")},[i,r,o,s,a]}class Af extends ee{constructor(t){super(),te(this,t,Lf,Tf,a,{backgroundColor:0,isImage:1,valueFunction:2,rowHeight:3})}}function Ef(t,e,n){const i=t.slice();return i[10]=e[n],i[12]=n,i}function If(t){let e,n;function i(){return t[9](t[10])}return e=new Af({props:{rowHeight:t[2],isImage:t[10].isImageUrl,valueFunction:i,backgroundColor:t[3][t[12]]}}),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(n,r){t=n;const o={};4&r&&(o.rowHeight=t[2]),1&r&&(o.isImage=t[10].isImageUrl),3&r&&(o.valueFunction=i),8&r&&(o.backgroundColor=t[3][t[12]]),e.$set(o)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Pf(t){let e,n,i,r,o,s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=If(Ef(t,s,e));const l=t=>Ft(a[t],1,1,(()=>{a[t]=null}));return{c(){e=I("tr");for(let t=0;t<a.length;t+=1)a[t].c();q(e,"style",n=`height: ${t[2]}px;`),q(e,"class","svelte-xkfbgl")},m(n,s){L(n,e,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);i=!0,r||(o=R(e,"click",t[8]),r=!0)},p(t,[r]){if(31&r){let n;for(s=t[0],n=0;n<s.length;n+=1){const i=Ef(t,s,n);a[n]?(a[n].p(i,r),zt(a[n],1)):(a[n]=If(i),a[n].c(),zt(a[n],1),a[n].m(e,null))}for(Pt(),n=s.length;n<a.length;n+=1)l(n);Bt()}(!i||4&r&&n!==(n=`height: ${t[2]}px;`))&&q(e,"style",n)},i(t){if(!i){for(let t=0;t<s.length;t+=1)zt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)Ft(a[t]);i=!1},d(t){t&&A(e),E(a,t),r=!1,o()}}}function Bf(t,e,n){let i,{columns:r=[]}=e,{item:o={}}=e,{rowHeight:s=36}=e,{cellBackgroundColorsFunction:a}=e,{evenRowNumber:l=!1}=e;const c=async(t,e)=>t.key in e?t.display?await t.display(e[t.key]):e[t.key]:"";let u=new Array(r.length).fill("white");return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"item"in t&&n(1,o=t.item),"rowHeight"in t&&n(2,s=t.rowHeight),"cellBackgroundColorsFunction"in t&&n(5,a=t.cellBackgroundColorsFunction),"evenRowNumber"in t&&n(6,l=t.evenRowNumber)},t.$$.update=()=>{64&t.$$.dirty&&n(7,i=l?xd.DEFAULT_ROW_BACKGROUND_EVEN:xd.DEFAULT_ROW_BACKGROUND_ODD),163&t.$$.dirty&&a(o).then((t=>{for(t||(t=[]);t.length<r.length;)t.push("");n(3,u=t.map((t=>t&&""!=t?t:i)))}))},[r,o,s,u,c,a,l,i,function(e){gt.call(this,t,e)},t=>c(t,o)]}class zf extends ee{constructor(t){super(),te(this,t,Bf,Pf,a,{columns:0,item:1,rowHeight:2,cellBackgroundColorsFunction:5,evenRowNumber:6})}}function Ff(e){let n,i,r;return{c(){n=P("svg"),i=P("path"),q(i,"fill","currentColor"),q(i,"d",e[0]),q(n,"aria-hidden","true"),q(n,"class",r=b(e[1])+" svelte-1d15yci"),q(n,"role","img"),q(n,"xmlns","http://www.w3.org/2000/svg"),q(n,"viewBox",e[2])},m(t,e){L(t,n,e),O(n,i)},p(t,[e]){1&e&&q(i,"d",t[0]),2&e&&r!==(r=b(t[1])+" svelte-1d15yci")&&q(n,"class",r),4&e&&q(n,"viewBox",t[2])},i:t,o:t,d(t){t&&A(n)}}}function Rf(t,e,i){let{icon:r}=e,o=[],s="",a="";return t.$$set=t=>{i(4,e=n(n({},e),y(t))),"icon"in t&&i(3,r=t.icon)},t.$$.update=()=>{8&t.$$.dirty&&i(2,a="0 0 "+r.icon[0]+" "+r.icon[1]),i(1,s="fa-svelte "+(e.class?e.class:"")),8&t.$$.dirty&&i(0,o=r.icon[4])},e=y(e),[o,s,a,r]}class Nf extends ee{constructor(t){super(),te(this,t,Rf,Ff,a,{icon:3})}}var jf={};!function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="sort",n=[],i="f0dc",r="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z";t.definition={prefix:"fas",iconName:e,icon:[320,512,n,i,r]},t.faSort=t.definition,t.prefix="fas",t.iconName=e,t.width=320,t.height=512,t.ligatures=n,t.unicode=i,t.svgPathData=r}(jf);var qf={};!function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="sort-down",n=[],i="f0dd",r="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z";t.definition={prefix:"fas",iconName:e,icon:[320,512,n,i,r]},t.faSortDown=t.definition,t.prefix="fas",t.iconName=e,t.width=320,t.height=512,t.ligatures=n,t.unicode=i,t.svgPathData=r}(qf);var Hf={};function Wf(t,e,n){const i=t.slice();return i[7]=e[n],i[9]=n,i}function Vf(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g,m,v=t[7].title+"";function y(){return t[5](t[7])}function b(){return t[6](t[7])}return s=new Nf({props:{icon:jf.faSort}}),c=new Nf({props:{icon:Hf.faSortUp}}),h=new Nf({props:{icon:qf.faSortDown}}),{c(){e=I("th"),n=B(v),i=z(),r=I("span"),Xt(s.$$.fragment),a=z(),l=I("span"),Xt(c.$$.fragment),u=z(),d=I("span"),Xt(h.$$.fragment),f=z(),q(r,"class","sort-indicator svelte-whzxrs"),X(r,"visible",t[2][t[7].key]),q(l,"class","sort-indicator-up svelte-whzxrs"),X(l,"visible","up"===t[1][t[9]]&&!t[2][t[7].key]),q(d,"class","sort-indicator-down svelte-whzxrs"),X(d,"visible","down"===t[1][t[9]]&&!t[2][t[7].key]),q(e,"class","clickable svelte-whzxrs")},m(o,v){L(o,e,v),O(e,n),O(e,i),O(e,r),Zt(s,r,null),O(e,a),O(e,l),Zt(c,l,null),O(e,u),O(e,d),Zt(h,d,null),O(e,f),p=!0,g||(m=[R(e,"mouseout",t[4]),R(e,"mouseover",y),R(e,"click",b)],g=!0)},p(e,i){t=e,(!p||1&i)&&v!==(v=t[7].title+"")&&V(n,v),5&i&&X(r,"visible",t[2][t[7].key]),7&i&&X(l,"visible","up"===t[1][t[9]]&&!t[2][t[7].key]),7&i&&X(d,"visible","down"===t[1][t[9]]&&!t[2][t[7].key])},i(t){p||(zt(s.$$.fragment,t),zt(c.$$.fragment,t),zt(h.$$.fragment,t),p=!0)},o(t){Ft(s.$$.fragment,t),Ft(c.$$.fragment,t),Ft(h.$$.fragment,t),p=!1},d(t){t&&A(e),Qt(s),Qt(c),Qt(h),g=!1,o(m)}}}function Uf(e){let n,i,r,o=e[7].title+"";return{c(){n=I("th"),i=B(o),r=z(),q(n,"class","svelte-whzxrs")},m(t,e){L(t,n,e),O(n,i),O(n,r)},p(t,e){1&e&&o!==(o=t[7].title+"")&&V(i,o)},i:t,o:t,d(t){t&&A(n)}}}function Gf(t){let e,n,i,r;const o=[Uf,Vf],s=[];function a(t,e){return t[7].disableSort?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),i=F()},m(t,n){s[e].m(t,n),L(t,i,n),r=!0},p(t,r){let l=e;e=a(t),e===l?s[e].p(t,r):(Pt(),Ft(s[l],1,1,(()=>{s[l]=null})),Bt(),n=s[e],n?n.p(t,r):(n=s[e]=o[e](t),n.c()),zt(n,1),n.m(i.parentNode,i))},i(t){r||(zt(n),r=!0)},o(t){Ft(n),r=!1},d(t){s[e].d(t),t&&A(i)}}}function Kf(t){let e,n,i,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Gf(Wf(t,r,e));const s=t=>Ft(o[t],1,1,(()=>{o[t]=null}));return{c(){e=I("thead"),n=I("tr");for(let t=0;t<o.length;t+=1)o[t].c();q(n,"class","svelte-whzxrs")},m(t,r){L(t,e,r),O(e,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null);i=!0},p(t,[e]){if(15&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=Wf(t,r,i);o[i]?(o[i].p(s,e),zt(o[i],1)):(o[i]=Gf(s),o[i].c(),zt(o[i],1),o[i].m(n,null))}for(Pt(),i=r.length;i<o.length;i+=1)s(i);Bt()}},i(t){if(!i){for(let t=0;t<r.length;t+=1)zt(o[t]);i=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Ft(o[t]);i=!1},d(t){t&&A(e),E(o,t)}}}function Yf(t,e,n){const i=ht();let{columns:r=[]}=e,{indicateSort:o=[]}=e,s={};return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"indicateSort"in t&&n(1,o=t.indicateSort)},[r,o,s,i,()=>n(2,s={}),t=>{n(2,s={}),n(2,s[t.key]=!0,s)},t=>i("colHeaderClicked",t)]}!function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="sort-up",n=[],i="f0de",r="M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z";t.definition={prefix:"fas",iconName:e,icon:[320,512,n,i,r]},t.faSortUp=t.definition,t.prefix="fas",t.iconName=e,t.width=320,t.height=512,t.ligatures=n,t.unicode=i,t.svgPathData=r}(Hf);class Jf extends ee{constructor(t){super(),te(this,t,Yf,Kf,a,{columns:0,indicateSort:1})}}function Xf(t){const e=t-1;return e*e*e+1}function Zf(t){return-.5*(Math.cos(Math.PI*t)-1)}function Qf(t,{delay:n=0,duration:i=400,easing:r=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:i,easing:r,css:t=>"opacity: "+t*o}}function tp(t,{delay:e=0,duration:n=400,easing:i=Xf,x:r=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(t),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-s);return{delay:e,duration:n,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*r}px, ${(1-t)*o}px);\n\t\t\topacity: ${l-u*e}`}}function ep(t){let e;return{c(){e=I("div"),q(e,"class","fullscreenoverlay svelte-pq99q7")},m(t,n){L(t,e,n)},d(t){t&&A(e)}}}function np(t){let e,n;return{c(){e=I("h1"),n=B(t[0]),q(e,"class","svelte-pq99q7")},m(t,i){L(t,e,i),O(e,n)},p(t,e){1&e&&V(n,t[0])},d(t){t&&A(e)}}}function ip(t){let e,n,i,r,o,s,a,l=t[1]&&ep(),c=t[0]&&np(t);return r=new cf({props:{size:"120",color:t[3],unit:"px"}}),{c(){l&&l.c(),e=z(),n=I("div"),c&&c.c(),i=z(),Xt(r.$$.fragment),q(n,"class","container svelte-pq99q7"),G(n,"--container-height",t[4]+"px"),G(n,"--color",t[3]),$t((()=>t[5].call(n))),X(n,"positionFixed",t[2])},m(s,u){l&&l.m(s,u),L(s,e,u),L(s,n,u),c&&c.m(n,null),O(n,i),Zt(r,n,null),o=J(n,t[5].bind(n)),a=!0},p(t,[o]){t[1]?l||(l=ep(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),t[0]?c?c.p(t,o):(c=np(t),c.c(),c.m(n,i)):c&&(c.d(1),c=null);const s={};8&o&&(s.color=t[3]),r.$set(s),(!a||16&o)&&G(n,"--container-height",t[4]+"px"),(!a||8&o)&&G(n,"--color",t[3]),4&o&&X(n,"positionFixed",t[2])},i(t){a||(zt(r.$$.fragment,t),s||$t((()=>{s=Nt(n,Qf,{duration:800}),s.start()})),a=!0)},o(t){Ft(r.$$.fragment,t),a=!1},d(t){l&&l.d(t),t&&A(e),t&&A(n),c&&c.d(),Qt(r),o()}}}function rp(t,e,n){let i,{text:r}=e,{fullScreenOverlay:o=!1}=e,{positionFixed:s=!0}=e,{color:a="#fc03a9"}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text),"fullScreenOverlay"in t&&n(1,o=t.fullScreenOverlay),"positionFixed"in t&&n(2,s=t.positionFixed),"color"in t&&n(3,a=t.color)},[r,o,s,a,i,function(){i=this.clientHeight,n(4,i)}]}class op extends ee{constructor(t){super(),te(this,t,rp,ip,a,{text:0,fullScreenOverlay:1,positionFixed:2,color:3})}}function sp(t,e,n){const i=t.slice();return i[10]=e[n],i[12]=n,i}function ap(e){let n,i=e[5](e[13])+"";return{c(){n=I("p"),q(n,"class","error svelte-1cbtbnv")},m(t,e){L(t,n,e),n.innerHTML=i},p(t,e){40&e&&i!==(i=t[5](t[13])+"")&&(n.innerHTML=i)},i:t,o:t,d(t){t&&A(n)}}}function lp(t){let e,n,i,r=[],o=new Map,s=t[9];const a=t=>t[10]._id;for(let e=0;e<s.length;e+=1){let n=sp(t,s,e),i=a(n);o.set(i,r[e]=cp(i,n))}return{c(){e=I("tbody");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){L(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null);i=!0},p(t,n){79&n&&(s=t[9],Pt(),r=Gt(r,n,a,1,t,s,o,e,Vt,cp,null,sp),Bt())},i(t){if(!i){for(let t=0;t<s.length;t+=1)zt(r[t]);n||$t((()=>{n=Nt(e,Qf,{}),n.start()})),i=!0}},o(t){for(let t=0;t<r.length;t+=1)Ft(r[t]);i=!1},d(t){t&&A(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function cp(t,e){let n,i,r;return i=new zf({props:{cellBackgroundColorsFunction:e[2],columns:e[0],item:e[10],rowHeight:e[1],evenRowNumber:e[12]%2==0}}),i.$on("click",(function(){return e[8](e[10])})),{key:t,first:null,c(){n=F(),Xt(i.$$.fragment),this.first=n},m(t,e){L(t,n,e),Zt(i,t,e),r=!0},p(t,n){e=t;const r={};4&n&&(r.cellBackgroundColorsFunction=e[2]),1&n&&(r.columns=e[0]),8&n&&(r.item=e[10]),2&n&&(r.rowHeight=e[1]),8&n&&(r.evenRowNumber=e[12]%2==0),i.$set(r)},i(t){r||(zt(i.$$.fragment,t),r=!0)},o(t){Ft(i.$$.fragment,t),r=!1},d(t){t&&A(n),Qt(i,t)}}}function up(e){let n,i;return n=new op({}),{c(){Xt(n.$$.fragment)},m(t,e){Zt(n,t,e),i=!0},p:t,i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){Qt(n,t)}}}function dp(t){let e,n,i,r,o,s;i=new Jf({props:{columns:t[0],indicateSort:t[4]}}),i.$on("colHeaderClicked",t[7]);let a={ctx:t,current:null,token:null,hasCatch:!0,pending:up,then:lp,catch:ap,value:9,error:13,blocks:[,,,]};return qt(o=t[3],a),{c(){e=I("div"),n=I("table"),Xt(i.$$.fragment),r=z(),a.block.c(),q(n,"class","svelte-1cbtbnv"),q(e,"class","tablecontainer svelte-1cbtbnv")},m(t,o){L(t,e,o),O(e,n),Zt(i,n,null),O(n,r),a.block.m(n,a.anchor=null),a.mount=()=>n,a.anchor=null,s=!0},p(e,[n]){t=e;const r={};1&n&&(r.columns=t[0]),16&n&&(r.indicateSort=t[4]),i.$set(r),a.ctx=t,8&n&&o!==(o=t[3])&&qt(o,a)||Ht(a,t,n)},i(t){s||(zt(i.$$.fragment,t),zt(a.block),s=!0)},o(t){Ft(i.$$.fragment,t);for(let t=0;t<3;t+=1){Ft(a.blocks[t])}s=!1},d(t){t&&A(e),Qt(i),a.block.d(),a.token=null,a=null}}}function hp(t,e,n){let{columns:i=[]}=e,{rowHeight:r=40}=e,{cellBackgroundColorsFunction:o}=e,{loadData:s}=e,{indicateSort:a={}}=e,{onLoadDataErrorText:l=(()=>"Fehler")}=e;const c=ht();return t.$$set=t=>{"columns"in t&&n(0,i=t.columns),"rowHeight"in t&&n(1,r=t.rowHeight),"cellBackgroundColorsFunction"in t&&n(2,o=t.cellBackgroundColorsFunction),"loadData"in t&&n(3,s=t.loadData),"indicateSort"in t&&n(4,a=t.indicateSort),"onLoadDataErrorText"in t&&n(5,l=t.onLoadDataErrorText)},[i,r,o,s,a,l,c,function(e){gt.call(this,t,e)},t=>c("rowClicked",t)]}class fp extends ee{constructor(t){super(),te(this,t,hp,dp,a,{columns:0,rowHeight:1,cellBackgroundColorsFunction:2,loadData:3,indicateSort:4,onLoadDataErrorText:5})}}const{window:pp}=Wt;function gp(t){let e,n,i,r,a,l,c,u,d,h,f,p,g,m,v,y,_,w=t[1].closeButton&&mp(t);var x=t[2];return x&&(l=new x({})),{c(){e=I("div"),n=I("div"),i=I("div"),w&&w.c(),r=z(),a=I("div"),l&&Xt(l.$$.fragment),q(a,"class",c=b(t[1].classContent)+" svelte-g4wg3a"),q(a,"style",t[9]),X(a,"content",!t[0]),q(i,"class",u=b(t[1].classWindow)+" svelte-g4wg3a"),q(i,"role","dialog"),q(i,"aria-modal","true"),q(i,"aria-label",d=t[1].ariaLabelledBy?null:t[1].ariaLabel||null),q(i,"aria-labelledby",h=t[1].ariaLabelledBy||null),q(i,"style",t[8]),X(i,"window",!t[0]),q(n,"class",p=b(t[1].classWindowWrap)+" svelte-g4wg3a"),q(n,"style",t[7]),X(n,"wrap",!t[0]),q(e,"class",g=b(t[1].classBg)+" svelte-g4wg3a"),q(e,"style",t[6]),X(e,"bg",!t[0])},m(o,c){L(o,e,c),O(e,n),O(n,i),w&&w.m(i,null),O(i,r),O(i,a),l&&Zt(l,a,null),t[48](i),t[49](n),t[50](e),v=!0,y||(_=[R(i,"introstart",(function(){s(t[13])&&t[13].apply(this,arguments)})),R(i,"outrostart",(function(){s(t[14])&&t[14].apply(this,arguments)})),R(i,"introend",(function(){s(t[15])&&t[15].apply(this,arguments)})),R(i,"outroend",(function(){s(t[16])&&t[16].apply(this,arguments)})),R(e,"mousedown",t[20]),R(e,"mouseup",t[21])],y=!0)},p(o,s){if((t=o)[1].closeButton?w?(w.p(t,s),2&s[0]&&zt(w,1)):(w=mp(t),w.c(),zt(w,1),w.m(i,r)):w&&(Pt(),Ft(w,1,1,(()=>{w=null})),Bt()),x!==(x=t[2])){if(l){Pt();const t=l;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}x?(l=new x({}),Xt(l.$$.fragment),zt(l.$$.fragment,1),Zt(l,a,null)):l=null}(!v||2&s[0]&&c!==(c=b(t[1].classContent)+" svelte-g4wg3a"))&&q(a,"class",c),(!v||512&s[0])&&q(a,"style",t[9]),3&s[0]&&X(a,"content",!t[0]),(!v||2&s[0]&&u!==(u=b(t[1].classWindow)+" svelte-g4wg3a"))&&q(i,"class",u),(!v||2&s[0]&&d!==(d=t[1].ariaLabelledBy?null:t[1].ariaLabel||null))&&q(i,"aria-label",d),(!v||2&s[0]&&h!==(h=t[1].ariaLabelledBy||null))&&q(i,"aria-labelledby",h),(!v||256&s[0])&&q(i,"style",t[8]),3&s[0]&&X(i,"window",!t[0]),(!v||2&s[0]&&p!==(p=b(t[1].classWindowWrap)+" svelte-g4wg3a"))&&q(n,"class",p),(!v||128&s[0])&&q(n,"style",t[7]),3&s[0]&&X(n,"wrap",!t[0]),(!v||2&s[0]&&g!==(g=b(t[1].classBg)+" svelte-g4wg3a"))&&q(e,"class",g),(!v||64&s[0])&&q(e,"style",t[6]),3&s[0]&&X(e,"bg",!t[0])},i(n){v||(zt(w),l&&zt(l.$$.fragment,n),$t((()=>{f||(f=jt(i,t[12],t[1].transitionWindowProps,!0)),f.run(1)})),$t((()=>{m||(m=jt(e,t[11],t[1].transitionBgProps,!0)),m.run(1)})),v=!0)},o(n){Ft(w),l&&Ft(l.$$.fragment,n),f||(f=jt(i,t[12],t[1].transitionWindowProps,!1)),f.run(0),m||(m=jt(e,t[11],t[1].transitionBgProps,!1)),m.run(0),v=!1},d(n){n&&A(e),w&&w.d(),l&&Qt(l),t[48](null),n&&f&&f.end(),t[49](null),t[50](null),n&&m&&m.end(),y=!1,o(_)}}}function mp(t){let e,n,i,r,o;const s=[yp,vp],a=[];function l(t,n){return 2&n[0]&&(e=!!t[17](t[1].closeButton)),e?0:1}return n=l(t,[-1,-1,-1]),i=a[n]=s[n](t),{c(){i.c(),r=F()},m(t,e){a[n].m(t,e),L(t,r,e),o=!0},p(t,e){let o=n;n=l(t,e),n===o?a[n].p(t,e):(Pt(),Ft(a[o],1,1,(()=>{a[o]=null})),Bt(),i=a[n],i?i.p(t,e):(i=a[n]=s[n](t),i.c()),zt(i,1),i.m(r.parentNode,r))},i(t){o||(zt(i),o=!0)},o(t){Ft(i),o=!1},d(t){a[n].d(t),t&&A(r)}}}function vp(e){let n,i,r,o;return{c(){n=I("button"),q(n,"class",i=b(e[1].classCloseButton)+" svelte-g4wg3a"),q(n,"aria-label","Close modal"),q(n,"style",e[10]),X(n,"close",!e[0])},m(t,i){L(t,n,i),r||(o=R(n,"click",e[18]),r=!0)},p(t,e){2&e[0]&&i!==(i=b(t[1].classCloseButton)+" svelte-g4wg3a")&&q(n,"class",i),1024&e[0]&&q(n,"style",t[10]),3&e[0]&&X(n,"close",!t[0])},i:t,o:t,d(t){t&&A(n),r=!1,o()}}}function yp(t){let e,n,i;var r=t[1].closeButton;function o(t){return{props:{onClose:t[18]}}}return r&&(e=new r(o(t))),{c(){e&&Xt(e.$$.fragment),n=F()},m(t,r){e&&Zt(e,t,r),L(t,n,r),i=!0},p(t,i){if(r!==(r=t[1].closeButton)){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}r?(e=new r(o(t)),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,n.parentNode,n)):e=null}},i(t){i||(e&&zt(e.$$.fragment,t),i=!0)},o(t){e&&Ft(e.$$.fragment,t),i=!1},d(t){t&&A(n),e&&Qt(e,t)}}}function bp(t){let e,n,i,r,o=t[2]&&gp(t);const s=t[47].default,a=f(s,t,t[46],null);return{c(){o&&o.c(),e=z(),a&&a.c()},m(s,l){o&&o.m(s,l),L(s,e,l),a&&a.m(s,l),n=!0,i||(r=R(pp,"keydown",t[19]),i=!0)},p(t,i){t[2]?o?(o.p(t,i),4&i[0]&&zt(o,1)):(o=gp(t),o.c(),zt(o,1),o.m(e.parentNode,e)):o&&(Pt(),Ft(o,1,1,(()=>{o=null})),Bt()),a&&a.p&&(!n||32768&i[1])&&m(a,s,t,t[46],n?g(s,t[46],i,null):v(t[46]),null)},i(t){n||(zt(o),zt(a,t),n=!0)},o(t){Ft(o),Ft(a,t),n=!1},d(t){o&&o.d(t),t&&A(e),a&&a.d(t),i=!1,r()}}}function _p(t,e={}){return function(n){return new t({...n,props:{...e,...n.props}})}}function wp(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=ht(),s=ft;let{show:a=null}=e,{key:l="simple-modal"}=e,{ariaLabel:c=null}=e,{ariaLabelledBy:u=null}=e,{closeButton:d=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:f=!0}=e,{styleBg:p={}}=e,{styleWindowWrap:g={}}=e,{styleWindow:m={}}=e,{styleContent:v={}}=e,{styleCloseButton:y={}}=e,{classBg:b=null}=e,{classWindowWrap:_=null}=e,{classWindow:w=null}=e,{classContent:x=null}=e,{classCloseButton:k=null}=e,{unstyled:$=!1}=e,{setContext:S=s}=e,{transitionBg:C=Qf}=e,{transitionBgProps:M={duration:250}}=e,{transitionWindow:O=C}=e,{transitionWindowProps:D=M}=e,{disableFocusTrap:T=!1}=e;const L={ariaLabel:c,ariaLabelledBy:u,closeButton:d,closeOnEsc:h,closeOnOuterClick:f,styleBg:p,styleWindowWrap:g,styleWindow:m,styleContent:v,styleCloseButton:y,classBg:b,classWindowWrap:_,classWindow:w,classContent:x,classCloseButton:k,transitionBg:C,transitionBgProps:M,transitionWindow:O,transitionWindowProps:D,disableFocusTrap:T,unstyled:$};let A,E,I,P,B,z,F,R,N,j,q,H,W,V,U,G={...L},K=null;const Y=t=>t?Object.keys(t).reduce(((e,n)=>`${e}; ${(t=>t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${t[n]}`),""):"",J=t=>!!(t&&t.constructor&&t.call&&t.apply),X=()=>{};let Z=X,Q=X,tt=X,et=X;const nt=(t,e={},i={},r={})=>{n(2,K=_p(t,e)),n(1,G={...L,...i}),n(6,B=Y(Object.assign({},{width:window.innerWidth,height:window.innerHeight},G.styleBg))),n(7,z=Y(G.styleWindowWrap)),n(8,F=Y(G.styleWindow)),n(9,R=Y(G.styleContent)),n(10,N=Y(G.styleCloseButton)),n(11,j=G.transitionBg),n(12,q=G.transitionWindow),rt(),n(13,Z=t=>{r.onOpen&&r.onOpen(t),o("open"),o("opening")}),n(14,Q=t=>{r.onClose&&r.onClose(t),o("close"),o("closing")}),n(15,tt=t=>{r.onOpened&&r.onOpened(t),o("opened")}),n(16,et=t=>{r.onClosed&&r.onClosed(t),o("closed")})},it=(t={})=>{K&&(n(14,Q=t.onClose||Q),n(16,et=t.onClosed||et),n(2,K=null),ot())},rt=()=>{P=window.scrollY,H=document.body.style.position,W=document.body.style.overflow,V=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${P}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},ot=()=>{document.body.style.position=H||"",document.body.style.top="",document.body.style.overflow=W||"",document.body.style.width=V||"",window.scrollTo(0,P)};S(l,{open:nt,close:it});let st=!1;return dt((()=>{st&&it()})),ct((()=>{n(45,st=!0)})),t.$$set=t=>{"show"in t&&n(22,a=t.show),"key"in t&&n(23,l=t.key),"ariaLabel"in t&&n(24,c=t.ariaLabel),"ariaLabelledBy"in t&&n(25,u=t.ariaLabelledBy),"closeButton"in t&&n(26,d=t.closeButton),"closeOnEsc"in t&&n(27,h=t.closeOnEsc),"closeOnOuterClick"in t&&n(28,f=t.closeOnOuterClick),"styleBg"in t&&n(29,p=t.styleBg),"styleWindowWrap"in t&&n(30,g=t.styleWindowWrap),"styleWindow"in t&&n(31,m=t.styleWindow),"styleContent"in t&&n(32,v=t.styleContent),"styleCloseButton"in t&&n(33,y=t.styleCloseButton),"classBg"in t&&n(34,b=t.classBg),"classWindowWrap"in t&&n(35,_=t.classWindowWrap),"classWindow"in t&&n(36,w=t.classWindow),"classContent"in t&&n(37,x=t.classContent),"classCloseButton"in t&&n(38,k=t.classCloseButton),"unstyled"in t&&n(0,$=t.unstyled),"setContext"in t&&n(39,S=t.setContext),"transitionBg"in t&&n(40,C=t.transitionBg),"transitionBgProps"in t&&n(41,M=t.transitionBgProps),"transitionWindow"in t&&n(42,O=t.transitionWindow),"transitionWindowProps"in t&&n(43,D=t.transitionWindowProps),"disableFocusTrap"in t&&n(44,T=t.disableFocusTrap),"$$scope"in t&&n(46,r=t.$$scope)},t.$$.update=()=>{4194304&t.$$.dirty[0]|16384&t.$$.dirty[1]&&st&&(J(a)?nt(a):it())},[$,G,K,A,E,I,B,z,F,R,N,j,q,Z,Q,tt,et,J,it,t=>{if(G.closeOnEsc&&K&&"Escape"===t.key&&(t.preventDefault(),it()),K&&"Tab"===t.key&&!G.disableFocusTrap){const e=I.querySelectorAll("*"),n=Array.from(e).filter((t=>t.tabIndex>=0)).sort(((t,e)=>t.tabIndex-e.tabIndex));let i=n.indexOf(document.activeElement);-1===i&&t.shiftKey&&(i=0),i+=n.length+(t.shiftKey?-1:1),i%=n.length,n[i].focus(),t.preventDefault()}},t=>{!G.closeOnOuterClick||t.target!==A&&t.target!==E||(U=t.target)},t=>{G.closeOnOuterClick&&t.target===U&&(t.preventDefault(),it())},a,l,c,u,d,h,f,p,g,m,v,y,b,_,w,x,k,S,C,M,O,D,T,st,r,i,function(t){vt[t?"unshift":"push"]((()=>{I=t,n(5,I)}))},function(t){vt[t?"unshift":"push"]((()=>{E=t,n(4,E)}))},function(t){vt[t?"unshift":"push"]((()=>{A=t,n(3,A)}))}]}class xp extends ee{constructor(t){super(),te(this,t,wp,bp,a,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}function kp(e){let n,i,r,o;return{c(){n=I("button"),i=B(e[0]),G(n,"--color","var(--"+e[1]+")"),q(n,"class","svelte-144mn5m")},m(t,s){L(t,n,s),O(n,i),r||(o=R(n,"click",e[2]),r=!0)},p(t,[e]){1&e&&V(i,t[0]),2&e&&G(n,"--color","var(--"+t[1]+")")},i:t,o:t,d(t){t&&A(n),r=!1,o()}}}function $p(t,e,n){let{text:i}=e,{color:r="blue"}=e;return t.$$set=t=>{"text"in t&&n(0,i=t.text),"color"in t&&n(1,r=t.color)},[i,r,function(e){gt.call(this,t,e)}]}class Sp extends ee{constructor(t){super(),te(this,t,$p,kp,a,{text:0,color:1})}}function Cp(t,e,n){const i=t.slice();return i[3]=e[n],i[4]=e,i[5]=n,i}function Mp(t){let e,n;return e=new op({props:{text:t[1],color:"white",fullScreenOverlay:!0}}),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(t,n){const i={};2&n&&(i.text=t[1]),e.$set(i)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Op(t){let e,n;return e=new Sp({props:{type:"button",disabled:t[3].disabled??!1,text:t[3].text,color:t[3].color??"blue"}}),e.$on("click",(function(...e){return t[2](t[3],t[4],t[5],...e)})),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(n,i){t=n;const r={};1&i&&(r.disabled=t[3].disabled??!1),1&i&&(r.text=t[3].text),1&i&&(r.color=t[3].color??"blue"),e.$set(r)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Dp(t){let e,n,i,r=t[1]&&Mp(t),o=t[0].filter(Tp),s=[];for(let e=0;e<o.length;e+=1)s[e]=Op(Cp(t,o,e));const a=t=>Ft(s[t],1,1,(()=>{s[t]=null}));return{c(){r&&r.c(),e=z(),n=I("div");for(let t=0;t<s.length;t+=1)s[t].c();q(n,"class","footer svelte-iinr0q")},m(t,o){r&&r.m(t,o),L(t,e,o),L(t,n,o);for(let t=0;t<s.length;t+=1)s[t].m(n,null);i=!0},p(t,[i]){if(t[1]?r?(r.p(t,i),2&i&&zt(r,1)):(r=Mp(t),r.c(),zt(r,1),r.m(e.parentNode,e)):r&&(Pt(),Ft(r,1,1,(()=>{r=null})),Bt()),3&i){let e;for(o=t[0].filter(Tp),e=0;e<o.length;e+=1){const r=Cp(t,o,e);s[e]?(s[e].p(r,i),zt(s[e],1)):(s[e]=Op(r),s[e].c(),zt(s[e],1),s[e].m(n,null))}for(Pt(),e=o.length;e<s.length;e+=1)a(e);Bt()}},i(t){if(!i){zt(r);for(let t=0;t<o.length;t+=1)zt(s[t]);i=!0}},o(t){Ft(r),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)Ft(s[t]);i=!1},d(t){r&&r.d(t),t&&A(e),t&&A(n),E(s,t)}}}const Tp=t=>!t.hidden;function Lp(t,e,n){let i,{buttons:r=[]}=e;return t.$$set=t=>{"buttons"in t&&n(0,r=t.buttons)},[r,i,async(t,e,o,s)=>{n(0,e[o].disabled=!0,r),n(1,i=t.loadingText),await t.onClick(),n(1,i=!1),n(0,e[o].disabled=!1,r)}]}class Ap extends ee{constructor(t){super(),te(this,t,Lp,Dp,a,{buttons:0})}}function Ep(t){let e,n,i,r,o,s;const a=t[2].default,l=f(a,t,t[1],null);return{c(){e=I("div"),n=I("div"),i=I("h3"),r=B(t[0]),o=z(),l&&l.c(),q(i,"class","svelte-rb892u"),q(n,"class","group svelte-rb892u"),q(e,"class","outerbox svelte-rb892u")},m(t,a){L(t,e,a),O(e,n),O(n,i),O(i,r),O(n,o),l&&l.m(n,null),s=!0},p(t,[e]){(!s||1&e)&&V(r,t[0]),l&&l.p&&(!s||2&e)&&m(l,a,t,t[1],s?g(a,t[1],e,null):v(t[1]),null)},i(t){s||(zt(l,t),s=!0)},o(t){Ft(l,t),s=!1},d(t){t&&A(e),l&&l.d(t)}}}function Ip(t,e,n){let{$$slots:i={},$$scope:r}=e,{title:o=""}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"$$scope"in t&&n(1,r=t.$$scope)},[o,r,i]}class Pp extends ee{constructor(t){super(),te(this,t,Ip,Ep,a,{title:0})}}function Bp(t,e,n){const i=t.slice();return i[20]=e[n],i}function zp(t,e,n){const i=t.slice();return i[23]=e[n],i[24]=e,i[25]=n,i}function Fp(t){let e,n,i,r,o=t[23].label+"";return{c(){e=I("div"),n=I("label"),i=B(o),q(n,"for",r=t[23].id),q(n,"class","svelte-cqmlvo"),q(e,"class","col-label svelte-cqmlvo")},m(t,r){L(t,e,r),O(e,n),O(n,i)},p(t,e){20&e&&o!==(o=t[23].label+"")&&V(i,o),20&e&&r!==(r=t[23].id)&&q(n,"for",r)},d(t){t&&A(e)}}}function Rp(t){let e,i,r,o;const s=[t[23].props,{id:t[23].id}];function a(e){t[14](e,t[23])}var l=t[23].component;function c(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return void 0!==t[0][t[23].id]&&(e.value=t[0][t[23].id]),{props:e}}return l&&(e=new l(c(t)),vt.push((()=>Jt(e,"value",a))),e.$on("change",t[15])),{c(){e&&Xt(e.$$.fragment),r=F()},m(t,n){e&&Zt(e,t,n),L(t,r,n),o=!0},p(n,o){t=n;const u=148&o?Kt(s,[Yt(t[23].props),{id:t[23].id}]):{};if(!i&&149&o&&(i=!0,u.value=t[0][t[23].id],St((()=>i=!1))),l!==(l=t[23].component)){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}l?(e=new l(c(t)),vt.push((()=>Jt(e,"value",a))),e.$on("change",t[15]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,r.parentNode,r)):e=null}else l&&e.$set(u)},i(t){o||(e&&zt(e.$$.fragment,t),o=!0)},o(t){e&&Ft(e.$$.fragment,t),o=!1},d(t){t&&A(r),e&&Qt(e,t)}}}function Np(t){let e,i,r;const o=[{value:t[0][t[23].id]},t[23].props,{id:t[23].id}];var s=t[23].component;function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return s&&(e=new s(a()),e.$on("change",t[13])),{c(){e&&Xt(e.$$.fragment),i=F()},m(t,n){e&&Zt(e,t,n),L(t,i,n),r=!0},p(t,n){const r=149&n?Kt(o,[{value:t[0][t[23].id]},148&n&&Yt(t[23].props),148&n&&{id:t[23].id}]):{};if(s!==(s=t[23].component)){if(e){Pt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}s?(e=new s(a()),e.$on("change",t[13]),Xt(e.$$.fragment),zt(e.$$.fragment,1),Zt(e,i.parentNode,i)):e=null}else s&&e.$set(r)},i(t){r||(e&&zt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&A(i),e&&Qt(e,t)}}}function jp(t){let e,n,i,r,o,s,a=t[23].label&&t[23].label.length>0&&Fp(t);const l=[Np,Rp],c=[];function u(t,e){return t[23].nobind?0:1}return r=u(t),o=c[r]=l[r](t),{c(){e=I("row"),a&&a.c(),n=z(),i=I("div"),o.c(),q(i,"class","col-input svelte-cqmlvo"),q(e,"class","svelte-cqmlvo")},m(t,o){L(t,e,o),a&&a.m(e,null),O(e,n),O(e,i),c[r].m(i,null),s=!0},p(t,s){t[23].label&&t[23].label.length>0?a?a.p(t,s):(a=Fp(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null);let d=r;r=u(t),r===d?c[r].p(t,s):(Pt(),Ft(c[d],1,1,(()=>{c[d]=null})),Bt(),o=c[r],o?o.p(t,s):(o=c[r]=l[r](t),o.c()),zt(o,1),o.m(i,null))},i(t){s||(zt(o),s=!0)},o(t){Ft(o),s=!1},d(t){t&&A(e),a&&a.d(),c[r].d()}}}function qp(t){let e,n,i=t[2][t[20]].filter(t[12]),r=[];for(let e=0;e<i.length;e+=1)r[e]=jp(zp(t,i,e));const o=t=>Ft(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=z()},m(t,i){for(let e=0;e<r.length;e+=1)r[e].m(t,i);L(t,e,i),n=!0},p(t,n){if(151&n){let s;for(i=t[2][t[20]].filter(t[12]),s=0;s<i.length;s+=1){const o=zp(t,i,s);r[s]?(r[s].p(o,n),zt(r[s],1)):(r[s]=jp(o),r[s].c(),zt(r[s],1),r[s].m(e.parentNode,e))}for(Pt(),s=i.length;s<r.length;s+=1)o(s);Bt()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)zt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Ft(r[t]);n=!1},d(t){E(r,t),t&&A(e)}}}function Hp(t){let e,n;return e=new Pp({props:{title:t[20],$$slots:{default:[qp]},$$scope:{ctx:t}}}),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(t,n){const i={};20&n&&(i.title=t[20]),67108887&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Wp(t){let e,n,i,r,o,s,a,l,c,u,d,h=t[4].filter(t[11]),f=[];for(let e=0;e<h.length;e+=1)f[e]=Hp(Bp(t,h,e));const p=t=>Ft(f[t],1,1,(()=>{f[t]=null}));return u=new Ap({props:{buttons:t[6]}}),{c(){e=I("div"),n=I("h1"),i=B(t[3]),r=z(),o=I("div"),s=I("div"),a=I("form");for(let t=0;t<f.length;t+=1)f[t].c();l=z(),c=I("div"),Xt(u.$$.fragment),q(n,"class","header svelte-cqmlvo"),q(a,"autocomplete","off"),q(a,"onsubmit","event.preventDefault()"),q(s,"class","content svelte-cqmlvo"),q(o,"class","contentContainer svelte-cqmlvo"),q(c,"class","footer svelte-cqmlvo"),q(e,"class","container svelte-cqmlvo")},m(h,p){L(h,e,p),O(e,n),O(n,i),O(e,r),O(e,o),O(o,s),O(s,a);for(let t=0;t<f.length;t+=1)f[t].m(a,null);t[16](a),t[17](s),O(e,l),O(e,c),Zt(u,c,null),d=!0},p(t,[e]){if((!d||8&e)&&V(i,t[3]),151&e){let n;for(h=t[4].filter(t[11]),n=0;n<h.length;n+=1){const i=Bp(t,h,n);f[n]?(f[n].p(i,e),zt(f[n],1)):(f[n]=Hp(i),f[n].c(),zt(f[n],1),f[n].m(a,null))}for(Pt(),n=h.length;n<f.length;n+=1)p(n);Bt()}const n={};64&e&&(n.buttons=t[6]),u.$set(n)},i(t){if(!d){for(let t=0;t<h.length;t+=1)zt(f[t]);zt(u.$$.fragment,t),d=!0}},o(t){f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)Ft(f[t]);Ft(u.$$.fragment,t),d=!1},d(n){n&&A(e),E(f,n),t[16](null),t[17](null),Qt(u)}}}function Vp(t,e,n){let i,r,o,{config:s={}}=e,{doc:a={}}=e,{createNew:l=!1}=e,{closePopup:c}=e,u=[],d="",h=[],f={};const p=t=>"function"==typeof t?t({doc:a,form:o,createNew:l,closePopup:c,updateDoc:t=>n(0,a={...a,...t}),container:i,contextVars:f}):t,g=t=>t.hidden&&p(t.hidden);ct((()=>{s.onMount&&p(s.onMount)(),n(3,d=p(s.title));let t=s.inputs.map((t=>({...t,props:(()=>{let e={};return Object.keys(t.props??[]).forEach((n=>e[n]=p(t.props[n]))),e})()})));n(4,h=[...new Set(t.map((t=>t.group)))]),h.forEach((e=>n(2,u[e]=t.filter((t=>t.group===e)),u))),l&&Object.keys(s.initialValues).forEach((async t=>{n(0,a[t]=await s.initialValues[t](),a)}))})),ut((()=>{let t=i.querySelectorAll("input,textarea");for(var e=0;e<t.length;e++)t[e].setAttribute("tabindex",e+1)}));return t.$$set=t=>{"config"in t&&n(8,s=t.config),"doc"in t&&n(0,a=t.doc),"createNew"in t&&n(9,l=t.createNew),"closePopup"in t&&n(10,c=t.closePopup)},t.$$.update=()=>{257&t.$$.dirty&&n(6,r=p(s.footerButtons)),258&t.$$.dirty&&n(6,r=p(s.footerButtons))},[a,o,u,d,h,i,r,g,s,l,c,t=>u[t].some((t=>!g(t))),t=>!g(t),()=>n(1,o.wasChecked=!1,o),function(e,i){t.$$.not_equal(a[i.id],e)&&(a[i.id]=e,n(0,a))},()=>n(1,o.wasChecked=!1,o),function(t){vt[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){vt[t?"unshift":"push"]((()=>{i=t,n(5,i)}))}]}class Up extends ee{constructor(t){super(),te(this,t,Vp,Wp,a,{config:8,doc:0,createNew:9,closePopup:10})}}function Gp(t){let e,n;return e=new xp({props:{show:t[1],closeButton:!1,closeOnEsc:!0,closeOnOuterClick:!1,styleWindow:{width:"55rem","max-width":"90%",height:"100%",overflow:"hidden","margin-top":0,"margin-bottom":0},styleContent:{height:"100%",padding:0,overflow:"hidden",margin:0}}}),e.$on("close",(function(){s(t[0])&&t[0].apply(this,arguments)})),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(n,[i]){t=n;const r={};2&i&&(r.show=t[1]),e.$set(r)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Kp(t,e,n){let i;const r=oe();let o;return h(t,r,(t=>n(1,i=t))),[o,i,r,function(t,e=(()=>{})){t.closePopup=()=>r.set(null),n(0,o=e),r.set(_p(Up,t))}]}class Yp extends ee{constructor(t){super(),te(this,t,Kp,Gp,a,{show:3})}get show(){return this.$$.ctx[3]}}const{window:Jp}=Wt;function Xp(t){let e,n,i,r,o,s,a,l,c,u,d,h,f,p;$t(t[20]);function g(e){t[22](e)}e=new Yp({props:{}}),t[21](e);let m={filterOptions:Object.keys(t[0].filters).map(Qp),activeFilters:t[6]};function v(e){t[28](e)}void 0!==t[3]&&(m.searchTerm=t[3]),i=new ef({props:m}),vt.push((()=>Jt(i,"searchTerm",g))),t[23](i),i.$on("filtersChanged",t[24]),s=new fp({props:{rowHeight:Zp,columns:t[2],loadData:t[12],cellBackgroundColorsFunction:t[25],indicateSort:t[15],onLoadDataErrorText:tg}}),s.$on("rowClicked",t[26]),s.$on("colHeaderClicked",t[27]);let y={numberOfPagesPromise:t[13]};return void 0!==t[4]&&(y.currentPage=t[4]),l=new kf({props:y}),vt.push((()=>Jt(l,"currentPage",v))),d=new Kd({}),d.$on("click",t[29]),{c(){Xt(e.$$.fragment),n=z(),Xt(i.$$.fragment),o=z(),Xt(s.$$.fragment),a=z(),Xt(l.$$.fragment),u=z(),Xt(d.$$.fragment)},m(r,c){Zt(e,r,c),L(r,n,c),Zt(i,r,c),L(r,o,c),Zt(s,r,c),L(r,a,c),Zt(l,r,c),L(r,u,c),Zt(d,r,c),h=!0,f||(p=R(Jp,"resize",t[20]),f=!0)},p(t,n){e.$set({});const o={};1&n[0]&&(o.filterOptions=Object.keys(t[0].filters).map(Qp)),64&n[0]&&(o.activeFilters=t[6]),!r&&8&n[0]&&(r=!0,o.searchTerm=t[3],St((()=>r=!1))),i.$set(o);const a={};4&n[0]&&(a.columns=t[2]),4096&n[0]&&(a.loadData=t[12]),4&n[0]&&(a.cellBackgroundColorsFunction=t[25]),32768&n[0]&&(a.indicateSort=t[15]),s.$set(a);const u={};8192&n[0]&&(u.numberOfPagesPromise=t[13]),!c&&16&n[0]&&(c=!0,u.currentPage=t[4],St((()=>c=!1))),l.$set(u)},i(t){h||(zt(e.$$.fragment,t),zt(i.$$.fragment,t),zt(s.$$.fragment,t),zt(l.$$.fragment,t),zt(d.$$.fragment,t),h=!0)},o(t){Ft(e.$$.fragment,t),Ft(i.$$.fragment,t),Ft(s.$$.fragment,t),Ft(l.$$.fragment,t),Ft(d.$$.fragment,t),h=!1},d(r){t[21](null),Qt(e,r),r&&A(n),t[23](null),Qt(i,r),r&&A(o),Qt(s,r),r&&A(a),Qt(l,r),r&&A(u),Qt(d,r),f=!1,p()}}}const Zp=40;const Qp=t=>({value:t,label:t}),tg=t=>401===t.status?"Benutzername oder Passwort für die Datenbank ist nicht korrekt. Bitte in den Einstellungen (Zahnrad rechts oben) überprüfen.":`Keine Verbindung zur Datenbank. <br />${t.hasOwnProperty("message")?t.message:""}`;function eg(t,e,n){let{columns:i=[]}=e,{filters:r={}}=e,{docType:o=""}=e,{inputs:s=[]}=e,{onData:a=null}=e,l=[],c=!1,u=!1;const d=()=>{n(9,c=!1),u&&h()},h=()=>{c?u=!0:(u=!1,n(12,b=vd.query({filters:$.map((t=>r.filters[t])),columns:i,searchTerm:w,currentPage:x,rowsPerPage:25,sortBy:m,sortReverse:g,docType:o},h).then((t=>(p?.focusSearchInput(),n(13,_=t.count.then((t=>{const e=t%25;let n=(t-e)/25;return e>0&&(n+=1),n}))),t.docs))).then((t=>a?a(t):t)).catch((t=>{throw md.error(t),t}))))};let f,p,g,m,v,y=!1,b=Promise.resolve(),_=new Promise((()=>{})),w="",x=0,k=window.innerHeight,$=r.activeByDefault,S="id";ut((async()=>{if(!1===y){await b;const t=document.querySelector(".pagination"),e=document.querySelector("thead"),n=document.querySelector("tbody tr"),i=1;if(t&&e&&n){let r=window.innerHeight-t.offsetHeight-e.getBoundingClientRect().bottom;y=Math.floor(r/(n.getBoundingClientRect().height+i))}}})),dt((()=>{vd.cancelListenerForDocType(o)}));const C=t=>"initialSort"in t;$=r.activeByDefault,(()=>{n(7,S=i.find(C)?i.find(C).key:S);const t=i.find((t=>t.key===S));n(14,m=t.sort?t.sort:[S])})(),n(8,g=!!i.some(C)&&"desc"===i.find(C).initialSort);return t.$$set=t=>{"columns"in t&&n(17,i=t.columns),"filters"in t&&n(0,r=t.filters),"docType"in t&&n(18,o=t.docType),"inputs"in t&&n(1,s=t.inputs),"onData"in t&&n(19,a=t.onData)},t.$$.update=()=>{131072&t.$$.dirty[0]&&n(2,l=i.filter((t=>!t.hideInTable))),32&t.$$.dirty[0]&&(y=!1),456&t.$$.dirty[0]&&0!==x&&n(4,x=0),504&t.$$.dirty[0]&&h(),388&t.$$.dirty[0]&&n(15,v=l.map((t=>t.key===S?g?"up":"down":"")))},[r,s,l,w,x,k,$,S,g,c,f,p,b,_,m,v,d,i,o,a,function(){n(5,k=Jp.innerHeight)},function(t){vt[t?"unshift":"push"]((()=>{f=t,n(10,f)}))},function(t){w=t,n(3,w)},function(t){vt[t?"unshift":"push"]((()=>{p=t,n(11,p)}))},t=>{JSON.stringify(t.detail)!==JSON.stringify($)&&n(6,$=t.detail)},t=>Promise.all(l.map((e=>e.backgroundColor(t)))),t=>{n(9,c=!0),f.show({doc:t.detail,createNew:!1,config:s},d)},t=>{S==t.detail.key?n(8,g=!g):n(8,g=!1),n(7,S=t.detail.key);const e=l.find((t=>t.key===S));n(14,m=e.sort??[S])},function(t){x=t,n(4,x)},()=>{n(9,c=!0),f.show({createNew:!0,config:s},d)}]}class ng extends ee{constructor(t){super(),te(this,t,eg,Xp,a,{columns:17,filters:0,docType:18,inputs:1,onData:19},null,[-1,-1])}}function ig(t){return"[object Date]"===Object.prototype.toString.call(t)}function rg(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>rg(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(ig(t)&&ig(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),i={};return n.forEach((n=>{i[n]=rg(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=i[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}const og=({from:t=0,to:i=1,reverse:r=!1,duration:o=300,delay:s=0,css:a={},onChange:l=(()=>!1),onEnd:c=(()=>!1),easing:u})=>{const d=function(t,i={}){const r=oe(t);let o,s=t;function a(a,l){if(null==t)return r.set(t=a),Promise.resolve();s=a;let c=o,u=!1,{delay:d=0,duration:h=400,easing:f=e,interpolate:p=rg}=n(n({},i),l);if(0===h)return c&&(c.abort(),c=null),r.set(t=s),Promise.resolve();const g=k()+d;let m;return o=M((e=>{if(e<g)return!0;u||(m=p(t,a),"function"==typeof h&&(h=h(t,a)),u=!0),c&&(c.abort(),c=null);const n=e-g;return n>h?(r.set(t=a),!1):(r.set(t=m(f(n/h))),!0)})),o.promise}return{set:a,update:(e,n)=>a(e(s,t),n),subscribe:r.subscribe}}(r?i:t,{duration:o,delay:s,easing:u});return d.subscribe((e=>{let n="";for(let t in a){const{input:i,output:r,onComplete:o=(()=>!1),beforeStart:s=(()=>!1)}=a[t],l=i.filter((t=>t<=e)).reverse()[0],c=i.indexOf(l);let u;if(l||0===l)if(i.length-1===c)u=r[r.length-1],i[i.length-1]<=e&&o();else{const t=i[c+1],n=100*(e-l)/(t-l),o=r[c],s=r[c+1];"object"==typeof s?(u="",s.map((t=>{u+=o+(t-o)*n/100,u+=" "}))):u=o+(s-o)*n/100}else u=r[0],s();n+=`${t}: ${u};`}l(n),e!==i&&e!==t||c()})),{play:()=>d.set(i),reverse:()=>d.set(t)}};function sg(e){let n,i,r,o,s,a,l,c,u,d;return{c(){n=I("div"),i=I("input"),r=z(),o=P("svg"),s=P("rect"),a=P("rect"),l=P("path"),q(i,"id",e[4]),q(i,"type","checkbox"),q(i,"name",e[2]),q(i,"class","svelte-d8g7vy"),q(s,"class","checkbox__border svelte-d8g7vy"),q(s,"rx","15%"),q(a,"class","checkbox__border -active svelte-d8g7vy"),q(a,"style",e[8]),q(a,"rx","15%"),q(l,"style",e[9]),q(l,"class","checkbox__check svelte-d8g7vy"),q(l,"d","M 89.5 13 L 46 71 L 28 54"),q(o,"class","checkbox__svg svelte-d8g7vy"),q(o,"preserveAspectRatio","none"),q(o,"viewBox","0 0 100 100"),q(n,"id",e[3]),q(n,"class",c="checkbox "+e[11].class+" svelte-d8g7vy"),G(n,"width",e[1]),G(n,"height",e[1]),X(n,"-changeBg",e[7]),X(n,"-checked",e[0]||!e[6])},m(t,c){L(t,n,c),O(n,i),O(n,r),O(n,o),O(o,s),O(o,a),O(o,l),e[15](n),u||(d=R(i,"change",e[10]),u=!0)},p(t,[e]){16&e&&q(i,"id",t[4]),4&e&&q(i,"name",t[2]),256&e&&q(a,"style",t[8]),512&e&&q(l,"style",t[9]),8&e&&q(n,"id",t[3]),2048&e&&c!==(c="checkbox "+t[11].class+" svelte-d8g7vy")&&q(n,"class",c),2&e&&G(n,"width",t[1]),2&e&&G(n,"height",t[1]),2176&e&&X(n,"-changeBg",t[7]),2113&e&&X(n,"-checked",t[0]||!t[6])},i:t,o:t,d(t){t&&A(n),e[15](null),u=!1,d()}}}function ag(t,e,i){let r,o,s,a=!0,l=!1,{checked:c=!1,size:u="3rem",name:d="",id:h="",labelId:f="",duration:p=900,primaryColor:g="#242432",secondaryColor:m="#d8d8ea"}=e;const v=ht(),b={to:100,duration:p,easing:Zf,reverse:c},_=og({...b,duration:p,css:{"stroke-dashoffset":{input:[0,45,75],output:[342,-150,-307],onComplete:()=>i(7,l=!0)},"stroke-dasharray":{input:[0,45,75],output:[342,154,[0,310]]},opacity:{input:[0,5],output:[0,1]}},onChange:t=>i(8,o=t),onEnd:()=>i(6,a=!0)}),w=og({...b,css:{"stroke-dashoffset":{input:[65,100],output:[300,144],beforeStart:()=>i(7,l=!1)},"stroke-dasharray":{input:[65,100],output:[100,84]}},onChange:t=>i(9,s=t)}),x=(t,e)=>r.style.setProperty(t,e);return ct((()=>{x("--checkbox-color-primary",g),x("--checkbox-color-secondary",m)})),t.$$set=t=>{i(11,e=n(n({},e),y(t))),"checked"in t&&i(0,c=t.checked),"size"in t&&i(1,u=t.size),"name"in t&&i(2,d=t.name),"id"in t&&i(3,h=t.id),"labelId"in t&&i(4,f=t.labelId),"duration"in t&&i(12,p=t.duration),"primaryColor"in t&&i(13,g=t.primaryColor),"secondaryColor"in t&&i(14,m=t.secondaryColor)},e=y(e),[c,u,d,h,f,r,a,l,o,s,()=>{if(!a)return!1;c?(_.reverse(),w.reverse()):(_.play(),w.play()),i(6,a=!1),i(0,c=!c),v("change",c)},e,p,g,m,function(t){vt[t?"unshift":"push"]((()=>{r=t,i(5,r)}))}]}class lg extends ee{constructor(t){super(),te(this,t,ag,sg,a,{checked:0,size:1,name:2,id:3,labelId:4,duration:12,primaryColor:13,secondaryColor:14})}}function cg(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g,m,v,y,b,_,w,x,k,$,S,C,M,D,T,E,P,B,F,N,j,H,W,V,G,K,Y,J,X,Z,Q,tt,et,nt,it,rt,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt;function _t(e){t[2](e)}let wt={size:"2rem"};return void 0!==t[0].couchdbHTTPS&&(wt.checked=t[0].couchdbHTTPS),m=new lg({props:wt}),vt.push((()=>Jt(m,"checked",_t))),{c(){e=I("div"),n=I("div"),i=I("div"),i.innerHTML='<div class="col-25 svelte-wezv84"><h2 class="svelte-wezv84">Datenbank</h2></div>',r=z(),s=I("div"),a=I("div"),a.innerHTML='<label for="couchdbhost" class="svelte-wezv84">Host</label>',l=z(),c=I("div"),u=I("input"),d=z(),h=I("div"),f=I("div"),f.innerHTML='<label for="couchdbhost" class="svelte-wezv84">HTTPS</label>',p=z(),g=I("div"),Xt(m.$$.fragment),y=z(),b=I("div"),_=I("div"),_.innerHTML='<label for="couchdbport" class="svelte-wezv84">Port</label>',w=z(),x=I("div"),k=I("input"),$=z(),S=I("div"),C=I("div"),C.innerHTML='<label for="couchdbuser" class="svelte-wezv84">Benutzername</label>',M=z(),D=I("div"),T=I("input"),E=z(),P=I("div"),B=I("div"),B.innerHTML='<label for="couchdbpassword" class="svelte-wezv84">Passwort</label>',F=z(),N=I("div"),j=I("input"),H=z(),W=I("div"),V=I("div"),V.innerHTML='<label for="couchdbhost" class="svelte-wezv84">Datenbank</label>',G=z(),K=I("div"),Y=I("input"),J=z(),X=I("div"),X.innerHTML='<div class="col-25 svelte-wezv84"><h2 class="svelte-wezv84">WooCommerce</h2></div>',Z=z(),Q=I("div"),tt=I("div"),tt.innerHTML='<label for="wcurl" class="svelte-wezv84">URL</label>',et=z(),nt=I("div"),it=I("input"),rt=z(),ot=I("div"),st=I("div"),st.innerHTML='<label for="wckey" class="svelte-wezv84">API Key</label>',at=z(),lt=I("div"),ct=I("input"),ut=z(),dt=I("div"),ht=I("div"),ht.innerHTML='<label for="wcsecret" class="svelte-wezv84">Secret</label>',ft=z(),pt=I("div"),gt=I("input"),q(i,"class","row svelte-wezv84"),q(a,"class","col-25 svelte-wezv84"),q(u,"id","couchdbhost"),q(u,"type","text"),q(u,"placeholder","127.0.0.1"),q(u,"class","svelte-wezv84"),q(c,"class","col-75 svelte-wezv84"),q(s,"class","row svelte-wezv84"),q(f,"class","col-25 svelte-wezv84"),q(g,"class","col-75 svelte-wezv84"),q(h,"class","row svelte-wezv84"),q(_,"class","col-25 svelte-wezv84"),q(k,"id","couchdbport"),q(k,"type","text"),q(k,"placeholder","6984"),q(k,"class","svelte-wezv84"),q(x,"class","col-75 svelte-wezv84"),q(b,"class","row svelte-wezv84"),q(C,"class","col-25 svelte-wezv84"),q(T,"id","couchdbuser"),q(T,"type","text"),q(T,"placeholder","Benutzername"),q(T,"class","svelte-wezv84"),q(D,"class","col-75 svelte-wezv84"),q(S,"class","row svelte-wezv84"),q(B,"class","col-25 svelte-wezv84"),q(j,"id","couchdbpassword"),q(j,"type","password"),q(j,"placeholder","Passwort"),q(j,"class","svelte-wezv84"),q(N,"class","col-75 svelte-wezv84"),q(P,"class","row svelte-wezv84"),q(V,"class","col-25 svelte-wezv84"),q(Y,"id","couchdbname"),q(Y,"type","text"),q(Y,"placeholder","Datenbank Name"),q(Y,"class","svelte-wezv84"),q(K,"class","col-75 svelte-wezv84"),q(W,"class","row svelte-wezv84"),q(X,"class","row svelte-wezv84"),q(tt,"class","col-25 svelte-wezv84"),q(it,"id","wcurl"),q(it,"type","text"),q(it,"placeholder","https://"),q(it,"class","svelte-wezv84"),q(nt,"class","col-75 svelte-wezv84"),q(Q,"class","row svelte-wezv84"),q(st,"class","col-25 svelte-wezv84"),q(ct,"id","wckey"),q(ct,"type","text"),q(ct,"placeholder","API Key"),q(ct,"class","svelte-wezv84"),q(lt,"class","col-75 svelte-wezv84"),q(ot,"class","row svelte-wezv84"),q(ht,"class","col-25 svelte-wezv84"),q(gt,"id","wcsecret"),q(gt,"type","password"),q(gt,"placeholder","Secret"),q(gt,"class","svelte-wezv84"),q(pt,"class","col-75 svelte-wezv84"),q(dt,"class","row svelte-wezv84"),q(n,"class","content svelte-wezv84"),q(e,"class","container svelte-wezv84")},m(o,v){L(o,e,v),O(e,n),O(n,i),O(n,r),O(n,s),O(s,a),O(s,l),O(s,c),O(c,u),U(u,t[0].couchdbHost),O(n,d),O(n,h),O(h,f),O(h,p),O(h,g),Zt(m,g,null),O(n,y),O(n,b),O(b,_),O(b,w),O(b,x),O(x,k),U(k,t[0].couchdbPort),O(n,$),O(n,S),O(S,C),O(S,M),O(S,D),O(D,T),U(T,t[0].couchdbUser),O(n,E),O(n,P),O(P,B),O(P,F),O(P,N),O(N,j),U(j,t[0].couchdbPassword),O(n,H),O(n,W),O(W,V),O(W,G),O(W,K),O(K,Y),U(Y,t[0].couchdbName),O(n,J),O(n,X),O(n,Z),O(n,Q),O(Q,tt),O(Q,et),O(Q,nt),O(nt,it),U(it,t[0].wcUrl),O(n,rt),O(n,ot),O(ot,st),O(ot,at),O(ot,lt),O(lt,ct),U(ct,t[0].wcKey),O(n,ut),O(n,dt),O(dt,ht),O(dt,ft),O(dt,pt),O(pt,gt),U(gt,t[0].wcSecret),mt=!0,yt||(bt=[R(u,"input",t[1]),R(k,"input",t[3]),R(T,"input",t[4]),R(j,"input",t[5]),R(Y,"input",t[6]),R(it,"input",t[7]),R(ct,"input",t[8]),R(gt,"input",t[9])],yt=!0)},p(t,[e]){1&e&&u.value!==t[0].couchdbHost&&U(u,t[0].couchdbHost);const n={};!v&&1&e&&(v=!0,n.checked=t[0].couchdbHTTPS,St((()=>v=!1))),m.$set(n),1&e&&k.value!==t[0].couchdbPort&&U(k,t[0].couchdbPort),1&e&&T.value!==t[0].couchdbUser&&U(T,t[0].couchdbUser),1&e&&j.value!==t[0].couchdbPassword&&U(j,t[0].couchdbPassword),1&e&&Y.value!==t[0].couchdbName&&U(Y,t[0].couchdbName),1&e&&it.value!==t[0].wcUrl&&U(it,t[0].wcUrl),1&e&&ct.value!==t[0].wcKey&&U(ct,t[0].wcKey),1&e&&gt.value!==t[0].wcSecret&&U(gt,t[0].wcSecret)},i(t){mt||(zt(m.$$.fragment,t),mt=!0)},o(t){Ft(m.$$.fragment,t),mt=!1},d(t){t&&A(e),Qt(m),yt=!1,o(bt)}}}function ug(t,e,n){let i,r,o;h(t,pd,(t=>n(0,i=t)));const s=()=>{localStorage.removeItem("stats"),vd.connect(),Pe("Einstellungen gespeichert!",1500)};return dt(pd.subscribe((t=>{var e;r&&JSON.stringify(t)!==JSON.stringify(r)&&(e=s,clearTimeout(o),o=setTimeout((()=>{e()}),750)),r=JSON.parse(JSON.stringify(t))}))),[i,function(){i.couchdbHost=this.value,pd.set(i)},function(e){t.$$.not_equal(i.couchdbHTTPS,e)&&(i.couchdbHTTPS=e,pd.set(i))},function(){i.couchdbPort=this.value,pd.set(i)},function(){i.couchdbUser=this.value,pd.set(i)},function(){i.couchdbPassword=this.value,pd.set(i)},function(){i.couchdbName=this.value,pd.set(i)},function(){i.wcUrl=this.value,pd.set(i)},function(){i.wcKey=this.value,pd.set(i)},function(){i.wcSecret=this.value,pd.set(i)}]}class dg extends ee{constructor(t){super(),te(this,t,ug,cg,a,{})}}function hg(e){let n,i,r,o;return{c(){n=I("button"),i=B(e[0]),q(n,"class","button-tight svelte-jklzts")},m(t,s){L(t,n,s),O(n,i),r||(o=R(n,"click",e[1]),r=!0)},p(t,[e]){1&e&&V(i,t[0])},i:t,o:t,d(t){t&&A(n),r=!1,o()}}}function fg(t,e,n){let{text:i}=e;return t.$$set=t=>{"text"in t&&n(0,i=t.text)},[i,function(e){gt.call(this,t,e)}]}class pg extends ee{constructor(t){super(),te(this,t,fg,hg,a,{text:0})}}function gg(t,e,n){const i=t.slice();return i[18]=e[n][0],i[19]=e[n][1],i}function mg(t){let e,n,i;return{c(){e=I("input"),q(e,"type","text"),q(e,"id",t[1]),q(e,"name",t[1]),e.readOnly=t[2],e.disabled=t[5],e.required=t[3],q(e,"pattern",t[4]),q(e,"class","svelte-15cwqkh")},m(r,o){L(r,e,o),U(e,t[0]),n||(i=[R(e,"input",t[15]),R(e,"keydown",_g),R(e,"input",t[16])],n=!0)},p(t,n){2&n&&q(e,"id",t[1]),2&n&&q(e,"name",t[1]),4&n&&(e.readOnly=t[2]),32&n&&(e.disabled=t[5]),8&n&&(e.required=t[3]),16&n&&q(e,"pattern",t[4]),1&n&&e.value!==t[0]&&U(e,t[0])},d(t){t&&A(e),n=!1,o(i)}}}function vg(t){let e,n,i;return{c(){e=I("textarea"),q(e,"type","text"),q(e,"id",t[1]),q(e,"name",t[1]),e.readOnly=t[2],e.disabled=t[5],e.required=t[3],q(e,"pattern",t[4]),q(e,"class","svelte-15cwqkh")},m(r,o){L(r,e,o),t[12](e),U(e,t[0]),n||(i=[R(e,"input",t[13]),R(e,"input",t[14])],n=!0)},p(t,n){2&n&&q(e,"id",t[1]),2&n&&q(e,"name",t[1]),4&n&&(e.readOnly=t[2]),32&n&&(e.disabled=t[5]),8&n&&(e.required=t[3]),16&n&&q(e,"pattern",t[4]),1&n&&U(e,t[0])},d(r){r&&A(e),t[12](null),n=!1,o(i)}}}function yg(t){let e,n;return e=new pg({props:{text:t[19]}}),e.$on("click",(function(){return t[17](t[18])})),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(n,i){t=n;const r={};128&i&&(r.text=t[19]),e.$set(r)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function bg(t){let e,n,i;function r(t,e){return t[6]?vg:mg}let o=r(t),s=o(t),a=Object.entries(t[7]),l=[];for(let e=0;e<a.length;e+=1)l[e]=yg(gg(t,a,e));const c=t=>Ft(l[t],1,1,(()=>{l[t]=null}));return{c(){s.c(),e=z();for(let t=0;t<l.length;t+=1)l[t].c();n=F()},m(t,r){s.m(t,r),L(t,e,r);for(let e=0;e<l.length;e+=1)l[e].m(t,r);L(t,n,r),i=!0},p(t,[i]){if(o===(o=r(t))&&s?s.p(t,i):(s.d(1),s=o(t),s&&(s.c(),s.m(e.parentNode,e))),129&i){let e;for(a=Object.entries(t[7]),e=0;e<a.length;e+=1){const r=gg(t,a,e);l[e]?(l[e].p(r,i),zt(l[e],1)):(l[e]=yg(r),l[e].c(),zt(l[e],1),l[e].m(n.parentNode,n))}for(Pt(),e=a.length;e<l.length;e+=1)c(e);Bt()}},i(t){if(!i){for(let t=0;t<a.length;t+=1)zt(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Ft(l[t]);i=!1},d(t){s.d(t),t&&A(e),E(l,t),t&&A(n)}}}const _g=t=>"Enter"===t.key?t.preventDefault():t;function wg(t,e,n){let i,{id:r=""}=e,{readonly:o=!1}=e,{value:s=""}=e,{required:a=!1}=e,{pattern:l=null}=e,{disabled:c=!1}=e,{multiline:u=!1}=e,{onlyNumbers:d=!1}=e,{quickset:h={}}=e;const f=ht(),p=()=>{i&&(n(8,i.style.height="10px",i),n(8,i.style.height=i.scrollHeight+"px",i))};ct(p);return t.$$set=t=>{"id"in t&&n(1,r=t.id),"readonly"in t&&n(2,o=t.readonly),"value"in t&&n(0,s=t.value),"required"in t&&n(3,a=t.required),"pattern"in t&&n(4,l=t.pattern),"disabled"in t&&n(5,c=t.disabled),"multiline"in t&&n(6,u=t.multiline),"onlyNumbers"in t&&n(11,d=t.onlyNumbers),"quickset"in t&&n(7,h=t.quickset)},t.$$.update=()=>{2049&t.$$.dirty&&d&&"number"!=typeof s&&""!==s&&n(0,s=parseInt(s))},[s,r,o,a,l,c,u,h,i,f,p,d,function(t){vt[t?"unshift":"push"]((()=>{i=t,n(8,i)}))},function(){s=this.value,n(0,s),n(11,d)},t=>{p(),f("change",t.target.value)},function(){s=this.value,n(0,s),n(11,d)},t=>f("change",t.target.value),t=>{n(0,s=t)}]}class xg extends ee{constructor(t){super(),te(this,t,wg,bg,a,{id:1,readonly:2,value:0,required:3,pattern:4,disabled:5,multiline:6,onlyNumbers:11,quickset:7})}}const kg=t=>({noResultsText:2048&t[0]}),$g=t=>({noResultsText:t[11]}),Sg=t=>({createText:16384&t[0]}),Cg=t=>({createText:t[14]}),Mg=t=>({loadingText:4096&t[0]}),Og=t=>({loadingText:t[12]});function Dg(t,e,n){const i=t.slice();return i[116]=e[n],i[118]=n,i}const Tg=t=>({item:1&t[1],label:1&t[1]}),Lg=t=>({item:t[116].item,label:t[116].highlighted?t[116].highlighted:t[116].label});function Ag(t,e,n){const i=t.slice();return i[119]=e[n],i}const Eg=t=>({label:2&t[0],item:2&t[0]}),Ig=t=>({label:t[38](t[119]),item:t[119],unselectItem:t[45]});function Pg(t,e,n){const i=t.slice();return i[118]=e[n],i}function Bg(t){let e,n=t[1],i=[];for(let e=0;e<n.length;e+=1)i[e]=Fg(Pg(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=F()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);L(t,e,n)},p(t,r){if(18&r[0]|128&r[1]){let o;for(n=t[1],o=0;o<n.length;o+=1){const s=Pg(t,n,o);i[o]?i[o].p(s,r):(i[o]=Fg(s),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(t){E(i,t),t&&A(e)}}}function zg(t){let e,n;return{c(){e=I("option"),n=B(t[3]),e.__value=t[2],e.value=e.__value,e.selected=!0,q(e,"class","svelte-1nqq7zl")},m(t,i){L(t,e,i),O(e,n)},p(t,i){8&i[0]&&V(n,t[3]),4&i[0]&&(e.__value=t[2],e.value=e.__value)},d(t){t&&A(e)}}}function Fg(t){let e,n,i,r,o=t[38](t[118])+"";return{c(){e=I("option"),n=B(o),i=z(),e.__value=r=t[4](t[118],!0),e.value=e.__value,e.selected=!0,q(e,"class","svelte-1nqq7zl")},m(t,r){L(t,e,r),O(e,n),O(e,i)},p(t,i){2&i[0]&&o!==(o=t[38](t[118])+"")&&V(n,o),18&i[0]&&r!==(r=t[4](t[118],!0))&&(e.__value=r,e.value=e.__value)},d(t){t&&A(e)}}}function Rg(t){let e,n,i=t[1],r=[];for(let e=0;e<i.length;e+=1)r[e]=Ng(Ag(t,i,e));const o=t=>Ft(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=F()},m(t,i){for(let e=0;e<r.length;e+=1)r[e].m(t,i);L(t,e,i),n=!0},p(t,n){if(2&n[0]|16512&n[1]|1048576&n[2]){let s;for(i=t[1],s=0;s<i.length;s+=1){const o=Ag(t,i,s);r[s]?(r[s].p(o,n),zt(r[s],1)):(r[s]=Ng(o),r[s].c(),zt(r[s],1),r[s].m(e.parentNode,e))}for(Pt(),s=i.length;s<r.length;s+=1)o(s);Bt()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)zt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Ft(r[t]);n=!1},d(t){E(r,t),t&&A(e)}}}function Ng(t){let e;const n=t[83].tag,i=f(n,t,t[82],Ig),r=i||function(t){let e,n,i,r,o,a,l,c,u=t[38](t[119])+"";return{c(){e=I("div"),n=I("span"),i=B(u),r=z(),o=I("span"),a=z(),q(n,"class","tag svelte-1nqq7zl"),q(o,"class","tag is-delete svelte-1nqq7zl"),q(e,"class","tags has-addons svelte-1nqq7zl")},m(u,d){L(u,e,d),O(e,n),O(n,i),O(e,r),O(e,o),L(u,a,d),l||(c=R(o,"click",N((function(){s(t[45](t[119]))&&t[45](t[119]).apply(this,arguments)}))),l=!0)},p(e,n){t=e,2&n[0]&&u!==(u=t[38](t[119])+"")&&V(i,u)},d(t){t&&A(e),t&&A(a),l=!1,c()}}}(t);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,o){i?i.p&&(!e||2&o[0]|1048576&o[2])&&m(i,n,t,t[82],e?g(n,t[82],o,Eg):v(t[82]),Ig):r&&r.p&&(!e||2&o[0])&&r.p(t,e?o:[-1,-1,-1,-1])},i(t){e||(zt(r,t),e=!0)},o(t){Ft(r,t),e=!1},d(t){r&&r.d(t)}}}function jg(e){let n,i,r;return{c(){n=I("span"),n.textContent="✖",q(n,"class","autocomplete-clear-button svelte-1nqq7zl")},m(t,o){L(t,n,o),i||(r=R(n,"click",e[49]),i=!0)},p:t,d(t){t&&A(n),i=!1,r()}}}function qg(t){let e,n;const i=t[83]["no-results"],r=f(i,t,t[82],$g),o=r||function(t){let e;return{c(){e=B(t[11])},m(t,n){L(t,e,n)},p(t,n){2048&n[0]&&V(e,t[11])},d(t){t&&A(e)}}}(t);return{c(){e=I("div"),o&&o.c(),q(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(t,i){L(t,e,i),o&&o.m(e,null),n=!0},p(t,e){r?r.p&&(!n||2048&e[0]|1048576&e[2])&&m(r,i,t,t[82],n?g(i,t[82],e,kg):v(t[82]),$g):o&&o.p&&(!n||2048&e[0])&&o.p(t,n?e:[-1,-1,-1,-1])},i(t){n||(zt(o,t),n=!0)},o(t){Ft(o,t),n=!1},d(t){t&&A(e),o&&o.d(t)}}}function Hg(t){let e,n,i,r;const o=t[83].create,s=f(o,t,t[82],Cg),a=s||function(t){let e;return{c(){e=B(t[14])},m(t,n){L(t,e,n)},p(t,n){16384&n[0]&&V(e,t[14])},d(t){t&&A(e)}}}(t);return{c(){e=I("div"),a&&a.c(),q(e,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(o,s){L(o,e,s),a&&a.m(e,null),n=!0,i||(r=R(e,"click",t[39]),i=!0)},p(t,e){s?s.p&&(!n||16384&e[0]|1048576&e[2])&&m(s,o,t,t[82],n?g(o,t[82],e,Sg):v(t[82]),Cg):a&&a.p&&(!n||16384&e[0])&&a.p(t,n?e:[-1,-1,-1,-1])},i(t){n||(zt(a,t),n=!0)},o(t){Ft(a,t),n=!1},d(t){t&&A(e),a&&a.d(t),i=!1,r()}}}function Wg(t){let e,n;const i=t[83].loading,r=f(i,t,t[82],Og),o=r||function(t){let e;return{c(){e=B(t[12])},m(t,n){L(t,e,n)},p(t,n){4096&n[0]&&V(e,t[12])},d(t){t&&A(e)}}}(t);return{c(){e=I("div"),o&&o.c(),q(e,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(t,i){L(t,e,i),o&&o.m(e,null),n=!0},p(t,e){r?r.p&&(!n||4096&e[0]|1048576&e[2])&&m(r,i,t,t[82],n?g(i,t[82],e,Mg):v(t[82]),Og):o&&o.p&&(!n||4096&e[0])&&o.p(t,n?e:[-1,-1,-1,-1])},i(t){n||(zt(o,t),n=!0)},o(t){Ft(o,t),n=!1},d(t){t&&A(e),o&&o.d(t)}}}function Vg(t){let e,n,i,r=t[31],o=[];for(let e=0;e<r.length;e+=1)o[e]=Yg(Dg(t,r,e));const s=t=>Ft(o[t],1,1,(()=>{o[t]=null}));let a=t[5]>0&&t[31].length>t[5]&&Jg(t);return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=z(),a&&a.c(),n=F()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);L(t,e,r),a&&a.m(t,r),L(t,n,r),i=!0},p(t,i){if(1073741856&i[0]|524801&i[1]|1048576&i[2]){let n;for(r=t[31],n=0;n<r.length;n+=1){const s=Dg(t,r,n);o[n]?(o[n].p(s,i),zt(o[n],1)):(o[n]=Yg(s),o[n].c(),zt(o[n],1),o[n].m(e.parentNode,e))}for(Pt(),n=r.length;n<o.length;n+=1)s(n);Bt()}t[5]>0&&t[31].length>t[5]?a?a.p(t,i):(a=Jg(t),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(t){if(!i){for(let t=0;t<r.length;t+=1)zt(o[t]);i=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Ft(o[t]);i=!1},d(t){E(o,t),t&&A(e),a&&a.d(t),t&&A(n)}}}function Ug(t){let e,n,i,r,s;const a=t[83].item,l=f(a,t,t[82],Lg),c=l||function(t){let e;function n(t,e){return t[116].highlighted?Kg:Gg}let i=n(t),r=i(t);return{c(){r.c(),e=F()},m(t,n){r.m(t,n),L(t,e,n)},p(t,o){i===(i=n(t))&&r?r.p(t,o):(r.d(1),r=i(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&A(e)}}}(t);function u(){return t[86](t[116])}function d(){return t[87](t[118])}return{c(){e=I("div"),c&&c.c(),q(e,"class",n="autocomplete-list-item "+(t[118]===t[30]?"selected":"")+" svelte-1nqq7zl"),X(e,"confirmed",t[50](t[116].item))},m(t,n){L(t,e,n),c&&c.m(e,null),i=!0,r||(s=[R(e,"click",u),R(e,"pointerenter",d)],r=!0)},p(r,o){t=r,l?l.p&&(!i||1&o[1]|1048576&o[2])&&m(l,a,t,t[82],i?g(a,t[82],o,Tg):v(t[82]),Lg):c&&c.p&&(!i||1&o[1])&&c.p(t,i?o:[-1,-1,-1,-1]),(!i||1073741824&o[0]&&n!==(n="autocomplete-list-item "+(t[118]===t[30]?"selected":"")+" svelte-1nqq7zl"))&&q(e,"class",n),1073741824&o[0]|524289&o[1]&&X(e,"confirmed",t[50](t[116].item))},i(t){i||(zt(c,t),i=!0)},o(t){Ft(c,t),i=!1},d(t){t&&A(e),c&&c.d(t),r=!1,o(s)}}}function Gg(t){let e,n,i=t[116].label+"";return{c(){e=new Q,n=F(),e.a=n},m(t,r){e.m(i,t,r),L(t,n,r)},p(t,n){1&n[1]&&i!==(i=t[116].label+"")&&e.p(i)},d(t){t&&A(n),t&&e.d()}}}function Kg(t){let e,n,i=t[116].highlighted+"";return{c(){e=new Q,n=F(),e.a=n},m(t,r){e.m(i,t,r),L(t,n,r)},p(t,n){1&n[1]&&i!==(i=t[116].highlighted+"")&&e.p(i)},d(t){t&&A(n),t&&e.d()}}}function Yg(t){let e,n,i=t[116]&&(t[5]<=0||t[118]<t[5])&&Ug(t);return{c(){i&&i.c(),e=F()},m(t,r){i&&i.m(t,r),L(t,e,r),n=!0},p(t,n){t[116]&&(t[5]<=0||t[118]<t[5])?i?(i.p(t,n),32&n[0]|1&n[1]&&zt(i,1)):(i=Ug(t),i.c(),zt(i,1),i.m(e.parentNode,e)):i&&(Pt(),Ft(i,1,1,(()=>{i=null})),Bt())},i(t){n||(zt(i),n=!0)},o(t){Ft(i),n=!1},d(t){i&&i.d(t),t&&A(e)}}}function Jg(t){let e,n=t[13]&&Xg(t);return{c(){n&&n.c(),e=F()},m(t,i){n&&n.m(t,i),L(t,e,i)},p(t,i){t[13]?n?n.p(t,i):(n=Xg(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&A(e)}}}function Xg(t){let e,n,i,r,o,s=t[31].length-t[5]+"";return{c(){e=I("div"),n=B("..."),i=B(s),r=z(),o=B(t[13]),q(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(t,s){L(t,e,s),O(e,n),O(e,i),O(e,r),O(e,o)},p(t,e){32&e[0]|1&e[1]&&s!==(s=t[31].length-t[5]+"")&&V(i,s),8192&e[0]&&V(o,t[13])},d(t){t&&A(e)}}}function Zg(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g,m,v,y,b,_,w;function x(t,e){return!t[6]&&t[2]?zg:t[6]&&t[1]?Bg:void 0}let k=x(t),$=k&&k(t),S=t[6]&&t[1]&&Rg(t),C=t[35]&&jg(t);const M=[Vg,Wg,Hg,qg],D=[];function T(t,e){return t[31]&&t[31].length>0?0:t[34]&&t[12]?1:t[7]?2:t[11]?3:-1}return~(g=T(t))&&(m=D[g]=M[g](t)),{c(){e=I("div"),n=I("select"),$&&$.c(),i=z(),r=I("div"),S&&S.c(),s=z(),a=I("input"),h=z(),C&&C.c(),f=z(),p=I("div"),m&&m.c(),q(n,"name",t[20]),q(n,"id",t[21]),n.multiple=t[6],q(n,"class","svelte-1nqq7zl"),q(a,"type","text"),q(a,"class",l=(t[17]?t[17]:"")+" "+(t[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),q(a,"id",c=t[18]?t[18]:""),q(a,"autocomplete",u=t[23]?"on":"off"),q(a,"placeholder",t[15]),q(a,"name",t[19]),a.disabled=t[26],a.required=t[28],q(a,"title",t[22]),a.readOnly=d=t[24]||t[8]&&t[1],q(a,"tabindex",t[29]),q(r,"class","input-container svelte-1nqq7zl"),q(p,"class",v=(t[25]?t[25]:"")+" autocomplete-list "+(t[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),q(e,"class",y=(t[16]?t[16]:"")+" "+(t[9]||!t[0].length?"hide-arrow":"")+" "+(t[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+t[37]+" svelte-1nqq7zl"),X(e,"show-clear",t[35]),X(e,"is-loading",t[10]&&t[34])},m(o,l){L(o,e,l),O(e,n),$&&$.m(n,null),O(e,i),O(e,r),S&&S.m(r,null),O(r,s),O(r,a),t[84](a),U(a,t[3]),O(r,h),C&&C.m(r,null),O(e,f),O(e,p),~g&&D[g].m(p,null),t[88](p),b=!0,_||(w=[R(window,"click",t[41]),R(a,"input",t[85]),R(a,"input",t[44]),R(a,"focus",t[47]),R(a,"blur",t[48]),R(a,"keydown",t[42]),R(a,"click",t[46]),R(a,"keypress",t[43])],_=!0)},p(t,i){k===(k=x(t))&&$?$.p(t,i):($&&$.d(1),$=k&&k(t),$&&($.c(),$.m(n,null))),(!b||1048576&i[0])&&q(n,"name",t[20]),(!b||2097152&i[0])&&q(n,"id",t[21]),(!b||64&i[0])&&(n.multiple=t[6]),t[6]&&t[1]?S?(S.p(t,i),66&i[0]&&zt(S,1)):(S=Rg(t),S.c(),zt(S,1),S.m(r,s)):S&&(Pt(),Ft(S,1,1,(()=>{S=null})),Bt()),(!b||134348800&i[0]&&l!==(l=(t[17]?t[17]:"")+" "+(t[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&q(a,"class",l),(!b||262144&i[0]&&c!==(c=t[18]?t[18]:""))&&q(a,"id",c),(!b||8388608&i[0]&&u!==(u=t[23]?"on":"off"))&&q(a,"autocomplete",u),(!b||32768&i[0])&&q(a,"placeholder",t[15]),(!b||524288&i[0])&&q(a,"name",t[19]),(!b||67108864&i[0])&&(a.disabled=t[26]),(!b||268435456&i[0])&&(a.required=t[28]),(!b||4194304&i[0])&&q(a,"title",t[22]),(!b||16777474&i[0]&&d!==(d=t[24]||t[8]&&t[1]))&&(a.readOnly=d),(!b||536870912&i[0])&&q(a,"tabindex",t[29]),8&i[0]&&a.value!==t[3]&&U(a,t[3]),t[35]?C?C.p(t,i):(C=jg(t),C.c(),C.m(r,null)):C&&(C.d(1),C=null);let o=g;g=T(t),g===o?~g&&D[g].p(t,i):(m&&(Pt(),Ft(D[o],1,1,(()=>{D[o]=null})),Bt()),~g?(m=D[g],m?m.p(t,i):(m=D[g]=M[g](t),m.c()),zt(m,1),m.m(p,null)):m=null),(!b||33554432&i[0]|32&i[1]&&v!==(v=(t[25]?t[25]:"")+" autocomplete-list "+(t[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&q(p,"class",v),(!b||66113&i[0]&&y!==(y=(t[16]?t[16]:"")+" "+(t[9]||!t[0].length?"hide-arrow":"")+" "+(t[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+t[37]+" svelte-1nqq7zl"))&&q(e,"class",y),66113&i[0]|16&i[1]&&X(e,"show-clear",t[35]),67137&i[0]|8&i[1]&&X(e,"is-loading",t[10]&&t[34])},i(t){b||(zt(S),zt(m),b=!0)},o(t){Ft(S),Ft(m),b=!1},d(n){n&&A(e),$&&$.d(),S&&S.d(),t[84](null),C&&C.d(),~g&&D[g].d(),t[88](null),_=!1,o(w)}}}function Qg(t,e){let n=function(t,e){if("function"!=typeof t)return void console.error("Not a function: "+t+", argument: "+e);let n;try{n=t(e)}catch(n){console.warn("Error executing Autocomplete function on value: "+e+" function: "+t)}return n}(t,e);return null==n&&(n=""),"string"!=typeof n&&(n=n.toString()),n}function tm(t,e){if(!t)return 0;const n=t.keywords;let i=0;return e.forEach((t=>{n.includes(t)&&i++})),i}function em(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function nm(t,e,n){let i,r,{$$slots:o={},$$scope:s}=e,{items:a=[]}=e,{searchFunction:l=!1}=e,{labelFieldName:c}=e,{keywordsFieldName:u=c}=e,{valueFieldName:d}=e,{labelFunction:h=function(t){return null==t?"":c?t[c]:t}}=e,{keywordsFunction:f=function(t){return null==t?"":u?t[u]:h(t)}}=e,{valueFunction:p=function(t,e=!1){return null==t?t:!S||e?d?t[d]:t:t.map((t=>d?t[d]:t))}}=e,{keywordsCleanFunction:g=function(t){return t}}=e,{textCleanFunction:m=function(t){return t}}=e,{beforeChange:v=function(t,e){return!0}}=e,{onChange:y=function(t){}}=e,{onFocus:b=function(){}}=e,{onBlur:_=function(){}}=e,{onCreate:w=function(t){ot&&console.log("onCreate: "+t)}}=e,{selectFirstIfEmpty:x=!1}=e,{minCharactersToSearch:k=1}=e,{maxItemsToShowInList:$=0}=e,{multiple:S=!1}=e,{create:C=!1}=e,{ignoreAccents:M=!0}=e,{matchAllKeywords:O=!0}=e,{sortByMatchedKeywords:D=!1}=e,{itemFilterFunction:T}=e,{itemSortFunction:L}=e,{lock:A=!1}=e,{delay:E=0}=e,{localFiltering:I=!0}=e,{localSorting:P=!0}=e,{cleanUserText:B=!0}=e,{closeOnBlur:z=!1}=e,{hideArrow:F=!1}=e,{showClear:R=!1}=e,{showLoadingIndicator:N=!1}=e,{noResultsText:j="No results found"}=e,{loadingText:q="Loading results..."}=e,{moreItemsText:H="items not shown"}=e,{createText:W="Not found, add anyway?"}=e,{placeholder:V}=e,{className:U}=e,{inputClassName:G}=e,{inputId:K}=e,{name:Y}=e,{selectName:J}=e,{selectId:X}=e,{title:Z}=e,{html5autocomplete:Q}=e,{readonly:tt}=e,{dropdownClassName:et}=e,{disabled:nt=!1}=e,{noInputStyles:it=!1}=e,{required:rt=null}=e,{debug:ot=!1}=e,{tabindex:st=0}=e,{selectedItem:at=(S?[]:void 0)}=e,{value:lt}=e,{highlightedItem:ct}=e;const ut="sautocomplete-"+Math.floor(1e3*Math.random());let dt,ht,ft,pt,gt=!1,mt=!1,yt=-1,{text:bt}=e,_t=0,wt=[],xt=0,kt=0;function $t(t){return Qg(h,t)}function St(t){const e=Qg(f,t);let n=Qg(g,e);return n=n.toLowerCase().trim(),M&&(n=em(n)),ot&&console.log("Extracted keywords: '"+n+"' from item: "+JSON.stringify(t)),n}function Ct(){let t;ot&&(t="Autocomplete prepare list "+(K?`(id: ${K})`:""),console.time(t),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(a))),Array.isArray(a)||(console.warn("Autocomplete items / search function did not return array but",a),n(0,a=[]));const e=a?a.length:0;wt=new Array(e),e>0&&a.forEach(((t,e)=>{const n=function(t){return{keywords:I?St(t):[],label:$t(t),item:t}}(t);void 0===n&&console.log("Undefined item for: ",t),wt[e]=n})),n(31,ft=wt),ot&&(console.log(wt.length+" items to search"),console.timeEnd(t))}async function Mt(){let t;ot&&(t="Autocomplete search "+(K?`(id: ${K})`:""),console.time(t),console.log("Searching user entered text: '"+bt+"'"));let e=function(t){if(null==t)return"";if(!B)return t;const e=t.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return Qg(m,e).toLowerCase().trim()}(bt);if(k>1&&e.length<k&&(e=""),n(81,_t=e.length),ot&&console.log("Changed user entered text '"+bt+"' into '"+e+"'"),""===e)return l?(n(0,a=[]),ot&&console.log("User entered text is empty clear list of items")):(n(31,ft=wt),ot&&console.log("User entered text is empty set the list of items to all items")),Vt(),void(ot&&console.timeEnd(t));if(l){xt+=1;const t=xt;if(n(34,mt=!0),"AsyncGeneratorFunction"===l.constructor.name){for await(const i of l(e,$)){if(t<kt)return!1;t>kt&&n(0,a=[]),kt=t,n(0,a=[...a,...i]),Ot(e)}kt<t&&(kt=t,n(0,a=[]),Ot(e))}else{let i=await l(e,$);if(t<kt)return!1;kt=t,n(0,a=i),Ot(e)}n(34,mt=!1)}else Ot(e);ot&&(console.timeEnd(t),console.log("Search found "+ft.length+" items"))}function Ot(t){Ct();const e=(M?em(t):t).split(/\s+/g).filter((t=>""!==t));let i;I?(i=T?wt.filter((t=>T(t.item,e))):wt.filter((t=>function(t,e){const n=tm(t,e);return O?n>=e.length:n>0}(t,e))),P&&(L?i=i.sort(((t,n)=>L(t.item,n.item,e))):D&&(i=i.sort(((t,n)=>function(t,e,n){return tm(e,n)-tm(t,n)}(t,n,e)))))):i=wt;const r=Ut(e,"label");return n(31,ft=i.map(r)),Vt(),!0}function Dt(t){let e;if(ot&&console.log("createdItem",t),void 0!==t){Ct(),n(31,ft=wt);let i=jt(t,ft);i<=0&&(n(0,a=[t]),Ct(),n(31,ft=wt),i=0),i>=0&&(n(30,yt=i),e=ft[yt])}return e}function Tt(t){if(ot&&console.log("selectListItem",t),void 0===t&&C){const e=w(bt);if(void 0!==e){if("function"==typeof e.then)return e.then((t=>{if(void 0!==t){const e=Dt(t);void 0!==e&&Tt(e)}})),!0;t=Dt(e)}}if(void 0===t)return ot&&console.log("listItem is undefined. Can not select."),!1;if(A&&at)return!0;const e=t.item;return v(at,e)&&(S?at?at.includes(e)?n(1,at=at.filter((t=>t!==e))):n(1,at=[...at,e]):n(1,at=[e]):(n(1,at=void 0),n(1,at=e))),!0}function Lt(){ot&&console.log("selectItem",yt);Tt(ft[yt])?(ot&&console.log("selectListItem true, closing"),Ht(),S&&dt.focus()):ot&&console.log("selectListItem false, not closing")}function At(){ot&&console.log("up"),qt(),yt>0&&n(30,yt--,yt),It()}function Et(){ot&&console.log("down"),qt(),yt<ft.length-1&&n(30,yt++,yt),It()}function It(){ot&&console.log("highlight");const t=".selected";ot&&console.log("Seaching DOM element: .selected in "+ht);const e=ht&&ht.querySelector(t);e?"function"==typeof e.scrollIntoViewIfNeeded?(ot&&console.log("Scrolling selected item into view"),e.scrollIntoViewIfNeeded()):"function"===e.scrollIntoView?(ot&&console.log("Scrolling selected item into view"),e.scrollIntoView()):ot&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):ot&&console.warn("Selected item not found to scroll into view")}function Pt(t){ot&&console.log("onListItemClick"),Tt(t)&&(Ht(),S&&dt.focus())}function Bt(t){ot&&console.log("unselectItem",t),n(1,at=at.filter((e=>e!==t))),dt.focus()}function zt(){Mt()&&(n(30,yt=0),qt())}function Ft(t){ot&&console.log("onEsc"),t.stopPropagation(),gt&&(dt.focus(),Ht())}function Rt(t){ot&&console.log("onBackspace"),Bt(at[at.length-1])}function Nt(){if(ot&&console.log("resetListToAllItemsAndOpen"),bt?!wt.length&&at&&l&&Mt():n(31,ft=wt),qt(),at){ot&&console.log("Searching currently selected item: "+JSON.stringify(at));const t=jt(at,ft);t>=0&&(n(30,yt=t),It())}}function jt(t,e){ot&&console.log("Finding index for item",t);let n=-1;for(let i=0;i<e.length;i++){const r=e[i];if(void 0!==r){if(ot&&console.log("Item "+i+": "+JSON.stringify(r)),t===r.item){n=i;break}}else ot&&console.log(`listItem ${i} is undefined. Skipping.`)}return ot&&(n>=0?console.log("Found index for item: "+n):console.warn("Not found index for item: "+t)),n}function qt(){ot&&console.log("open"),Wt()||n(80,gt=!0)}function Ht(){ot&&console.log("close"),n(80,gt=!1),n(34,mt=!1),!bt&&x&&(n(30,yt=0),Lt())}function Wt(){return k>1&&_t<k}function Vt(){Wt()&&Ht()}function Ut(t,e){return n=>{let i=n[e];const r=Object.assign({highlighted:void 0},n);r.highlighted=i;const o=i.toLowerCase(),s=M?em(o):o;if(t&&t.length){const e=[];for(let n=0;n<t.length;n++){let i=t[n];M&&(i=em(i));const r=i.length;let o=0;do{if(o=s.indexOf(i,o),o>=0){let t=o+r;e.push([o,t]),o=t}}while(-1!==o)}if(e.length>0){const t=new Set;for(let n=0;n<e.length;n++){const i=e[n],r=i[0],s=i[1],a=o.substring(r,s);t.add(a)}for(let e of t){if("b"===e)continue;const t=new RegExp("("+e+")","ig"),n=r.highlighted.replace(t,"<b>$1</b>");r.highlighted=n}}}return r}}return t.$$set=t=>{"items"in t&&n(0,a=t.items),"searchFunction"in t&&n(52,l=t.searchFunction),"labelFieldName"in t&&n(53,c=t.labelFieldName),"keywordsFieldName"in t&&n(54,u=t.keywordsFieldName),"valueFieldName"in t&&n(55,d=t.valueFieldName),"labelFunction"in t&&n(56,h=t.labelFunction),"keywordsFunction"in t&&n(57,f=t.keywordsFunction),"valueFunction"in t&&n(4,p=t.valueFunction),"keywordsCleanFunction"in t&&n(58,g=t.keywordsCleanFunction),"textCleanFunction"in t&&n(59,m=t.textCleanFunction),"beforeChange"in t&&n(60,v=t.beforeChange),"onChange"in t&&n(61,y=t.onChange),"onFocus"in t&&n(62,b=t.onFocus),"onBlur"in t&&n(63,_=t.onBlur),"onCreate"in t&&n(64,w=t.onCreate),"selectFirstIfEmpty"in t&&n(65,x=t.selectFirstIfEmpty),"minCharactersToSearch"in t&&n(66,k=t.minCharactersToSearch),"maxItemsToShowInList"in t&&n(5,$=t.maxItemsToShowInList),"multiple"in t&&n(6,S=t.multiple),"create"in t&&n(7,C=t.create),"ignoreAccents"in t&&n(67,M=t.ignoreAccents),"matchAllKeywords"in t&&n(68,O=t.matchAllKeywords),"sortByMatchedKeywords"in t&&n(69,D=t.sortByMatchedKeywords),"itemFilterFunction"in t&&n(70,T=t.itemFilterFunction),"itemSortFunction"in t&&n(71,L=t.itemSortFunction),"lock"in t&&n(8,A=t.lock),"delay"in t&&n(72,E=t.delay),"localFiltering"in t&&n(73,I=t.localFiltering),"localSorting"in t&&n(74,P=t.localSorting),"cleanUserText"in t&&n(75,B=t.cleanUserText),"closeOnBlur"in t&&n(76,z=t.closeOnBlur),"hideArrow"in t&&n(9,F=t.hideArrow),"showClear"in t&&n(77,R=t.showClear),"showLoadingIndicator"in t&&n(10,N=t.showLoadingIndicator),"noResultsText"in t&&n(11,j=t.noResultsText),"loadingText"in t&&n(12,q=t.loadingText),"moreItemsText"in t&&n(13,H=t.moreItemsText),"createText"in t&&n(14,W=t.createText),"placeholder"in t&&n(15,V=t.placeholder),"className"in t&&n(16,U=t.className),"inputClassName"in t&&n(17,G=t.inputClassName),"inputId"in t&&n(18,K=t.inputId),"name"in t&&n(19,Y=t.name),"selectName"in t&&n(20,J=t.selectName),"selectId"in t&&n(21,X=t.selectId),"title"in t&&n(22,Z=t.title),"html5autocomplete"in t&&n(23,Q=t.html5autocomplete),"readonly"in t&&n(24,tt=t.readonly),"dropdownClassName"in t&&n(25,et=t.dropdownClassName),"disabled"in t&&n(26,nt=t.disabled),"noInputStyles"in t&&n(27,it=t.noInputStyles),"required"in t&&n(28,rt=t.required),"debug"in t&&n(78,ot=t.debug),"tabindex"in t&&n(29,st=t.tabindex),"selectedItem"in t&&n(1,at=t.selectedItem),"value"in t&&n(2,lt=t.value),"highlightedItem"in t&&n(51,ct=t.highlightedItem),"text"in t&&n(3,bt=t.text),"$$scope"in t&&n(82,s=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty[0]|2097152&t.$$.dirty[1]&&(l||Ct()),2&t.$$.dirty[0]&&(n(2,lt=p(at)),n(3,bt=S?"":$t(at)),n(31,ft=wt),y(at)),1073741824&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(51,ct=ft&&yt&&yt>=0&&yt<ft.length?ft[yt].item:null),1&t.$$.dirty[0]|786432&t.$$.dirty[2]&&n(36,i=gt&&(a&&a.length>0||_t>0)),322&t.$$.dirty[0]|32768&t.$$.dirty[2]&&n(35,r=R||(A||S)&&at)},[a,at,lt,bt,p,$,S,C,A,F,N,j,q,H,W,V,U,G,K,Y,J,X,Z,Q,tt,et,nt,it,rt,st,yt,ft,dt,ht,mt,r,i,ut,$t,Lt,Pt,function(t){ot&&console.log("onDocumentClick"),t.composedPath().some((t=>t.classList&&t.classList.contains(ut)))?(ot&&console.log("onDocumentClick inside"),It()):(ot&&console.log("onDocumentClick outside"),Ht())},function(t){ot&&console.log("onKeyDown");let e=t.key;"Tab"===e&&t.shiftKey&&(e="ShiftTab");const n={Tab:gt?Ht():null,ShiftTab:gt?Ht():null,ArrowDown:Et.bind(this),ArrowUp:At.bind(this),Escape:Ft.bind(this),Backspace:S&&at&&at.length&&!bt?Rt.bind(this):null}[e];"function"==typeof n&&n(t)},function(t){ot&&console.log("onKeyPress"),"Enter"===t.key&&(t.preventDefault(),Lt())},function(t){ot&&console.log("onInput"),n(3,bt=t.target.value),pt&&clearTimeout(pt),E?pt=setTimeout(zt,E):zt()},Bt,function(){ot&&console.log("onInputClick"),Nt()},function(){ot&&console.log("onFocus"),b(),Nt()},function(){ot&&console.log("onBlur"),z&&Ht(),_()},function(){ot&&console.log("clear"),n(3,bt=""),n(1,at=S?[]:void 0),setTimeout((()=>{dt.focus(),Ht()}))},function(t){return!!at&&(S?at.includes(t):t===at)},ct,l,c,u,d,h,f,g,m,v,y,b,_,w,x,k,M,O,D,T,L,E,I,P,B,z,R,ot,Ut,gt,_t,s,o,function(t){vt[t?"unshift":"push"]((()=>{dt=t,n(32,dt)}))},function(){bt=this.value,n(3,bt)},t=>Pt(t),t=>{n(30,yt=t)},function(t){vt[t?"unshift":"push"]((()=>{ht=t,n(33,ht)}))}]}class im extends ee{constructor(t){super(),te(this,t,nm,Zg,a,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function rm(t){let e,n,i;return n=new im({props:{delay:500,searchFunction:t[3],textCleanFunction:t[14],labelFunction:t[15],beforeChange:t[16],inputId:t[2],noResultsText:t[1],disabled:t[5],localSorting:t[12],hideArrow:!0,sortByMatchedKeywords:t[11],itemSortFunction:t[9],localSearch:!1,localFiltering:t[10],valueFieldName:t[8],selectedItem:{attr:t[0]},html5autocomplete:!1,required:t[6]}}),{c(){e=I("div"),Xt(n.$$.fragment),q(e,"class","container svelte-nhdxi9")},m(t,r){L(t,e,r),Zt(n,e,null),i=!0},p(t,[e]){const i={};8&e&&(i.searchFunction=t[3]),1&e&&(i.textCleanFunction=t[14]),272&e&&(i.labelFunction=t[15]),385&e&&(i.beforeChange=t[16]),4&e&&(i.inputId=t[2]),2&e&&(i.noResultsText=t[1]),32&e&&(i.disabled=t[5]),4096&e&&(i.localSorting=t[12]),2048&e&&(i.sortByMatchedKeywords=t[11]),512&e&&(i.itemSortFunction=t[9]),1024&e&&(i.localFiltering=t[10]),256&e&&(i.valueFieldName=t[8]),1&e&&(i.selectedItem={attr:t[0]}),64&e&&(i.required=t[6]),n.$set(i)},i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),Qt(n)}}}function om(t,e,n){let{noResultsText:i}=e,{id:r}=e,{searchFunction:o}=e,{value:s}=e,{suggestionFormat:a}=e,{disabled:l}=e,{required:c}=e,{onlyNumbers:u=!1}=e,{onSelected:d=(()=>{})}=e,{valueField:h}=e,{itemSortFunction:f}=e,{localFiltering:p}=e,{sortByMatchedKeywords:g}=e,{localSorting:m}=e;ct((()=>function(t,e=!0){const n=t=>{["0","1","2","3","4","5","6","7","8","9"].includes(t.key)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())};return e&&t.addEventListener("keypress",n),{destroy(){t.removeEventListener("keypress",n)}}}(document.getElementById(r),u)));return t.$$set=t=>{"noResultsText"in t&&n(1,i=t.noResultsText),"id"in t&&n(2,r=t.id),"searchFunction"in t&&n(3,o=t.searchFunction),"value"in t&&n(0,s=t.value),"suggestionFormat"in t&&n(4,a=t.suggestionFormat),"disabled"in t&&n(5,l=t.disabled),"required"in t&&n(6,c=t.required),"onlyNumbers"in t&&n(13,u=t.onlyNumbers),"onSelected"in t&&n(7,d=t.onSelected),"valueField"in t&&n(8,h=t.valueField),"itemSortFunction"in t&&n(9,f=t.itemSortFunction),"localFiltering"in t&&n(10,p=t.localFiltering),"sortByMatchedKeywords"in t&&n(11,g=t.sortByMatchedKeywords),"localSorting"in t&&n(12,m=t.localSorting)},[s,i,r,o,a,l,c,d,h,f,p,g,m,u,t=>n(0,s=t),t=>{if(void 0===t)return"";const e=Object.values(t);return 0===e.length?"":1===e.length&&"attr"===Object.keys(t)[0]?t.attr:a?a(...e):t[h]},(t,e)=>{h&&n(0,s=e[h]),d(e)}]}class sm extends ee{constructor(t){super(),te(this,t,om,rm,a,{noResultsText:1,id:2,searchFunction:3,value:0,suggestionFormat:4,disabled:5,required:6,onlyNumbers:13,onSelected:7,valueField:8,itemSortFunction:9,localFiltering:10,sortByMatchedKeywords:11,localSorting:12})}}var am={exports:{}};!function(t,e){t.exports=function(){var t=1e3,e=6e4,n=36e5,i="millisecond",r="second",o="minute",s="hour",a="day",l="week",c="month",u="quarter",d="year",h="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},y={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+v(i,2,"0")+":"+v(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,c),o=n-r<0,s=e.clone().add(i+(o?-1:1),c);return+(-(i+(n-r)/(o?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:l,d:a,D:h,h:s,m:o,s:r,ms:i,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",_={};_[b]=m;var w=function(t){return t instanceof S},x=function(t,e,n){var i;if(!t)return b;if("string"==typeof t)_[t]&&(i=t),e&&(_[t]=e,i=t);else{var r=t.name;_[r]=t,i=r}return!n&&i&&(b=i),i||!n&&b},k=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},$=y;$.l=x,$.i=w,$.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function m(t){this.$L=x(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(p);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return $},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return k(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<k(t)},v.$g=function(t,e,n){return $.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,i=!!$.u(e)||e,u=$.p(t),f=function(t,e){var r=$.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?r:r.endOf(a)},p=function(t,e){return $.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return i?f(1,0):f(31,11);case c:return i?f(1,m):f(0,m+1);case l:var b=this.$locale().weekStart||0,_=(g<b?g+7:g)-b;return f(i?v-_:v+(6-_),m);case a:case h:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case r:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,l=$.p(t),u="set"+(this.$u?"UTC":""),f=(n={},n[a]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[s]=u+"Hours",n[o]=u+"Minutes",n[r]=u+"Seconds",n[i]=u+"Milliseconds",n)[l],p=l===a?this.$D+(e-this.$W):e;if(l===c||l===d){var g=this.clone().set(h,1);g.$d[f](p),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[$.p(t)]()},v.add=function(i,u){var h,f=this;i=Number(i);var p=$.p(u),g=function(t){var e=k(f);return $.w(e.date(e.date()+Math.round(t*i)),f)};if(p===c)return this.set(c,this.$M+i);if(p===d)return this.set(d,this.$y+i);if(p===a)return g(1);if(p===l)return g(7);var m=(h={},h[o]=e,h[s]=n,h[r]=t,h)[p]||1,v=this.$d.getTime()+i*m;return $.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var i=t||"YYYY-MM-DDTHH:mm:ssZ",r=$.z(this),o=this.$H,s=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=function(t,n,r,o){return t&&(t[n]||t(e,i))||r[n].substr(0,o)},d=function(t){return $.s(o%12||12,t,"0")},h=n.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:$.s(a+1,2,"0"),MMM:u(n.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:$.s(o,2,"0"),h:d(1),hh:d(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:$.s(s,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:r};return i.replace(g,(function(t,e){return e||p[t]||r.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,h,f){var p,g=$.p(h),m=k(i),v=(m.utcOffset()-this.utcOffset())*e,y=this-m,b=$.m(this,m);return b=(p={},p[d]=b/12,p[c]=b,p[u]=b/3,p[l]=(y-v)/6048e5,p[a]=(y-v)/864e5,p[s]=y/n,p[o]=y/e,p[r]=y/t,p)[g]||y,f?b:$.a(b)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return _[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=x(t,e,!0);return i&&(n.$L=i),n},v.clone=function(){return $.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),C=S.prototype;return k.prototype=C,[["$ms",i],["$s",r],["$m",o],["$H",s],["$W",a],["$M",c],["$y",d],["$D",h]].forEach((function(t){C[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),k.extend=function(t,e){return t.$i||(t(e,S,k),t.$i=!0),k},k.locale=x,k.isDayjs=w,k.unix=function(t){return k(1e3*t)},k.en=_[b],k.Ls=_,k.p={},k}()}(am);var lm=am.exports,cm={exports:{}};!function(t,e){t.exports=function(t,e,n){var i=e.prototype,r=function(t){return t&&(t.indexOf?t:t.s)},o=function(t,e,n,i,o){var s=t.name?t:t.$locale(),a=r(s[e]),l=r(s[n]),c=a||l.map((function(t){return t.substr(0,i)}));if(!o)return c;var u=s.weekStart;return c.map((function(t,e){return c[(e+(u||0))%7]}))},s=function(){return n.Ls[n.locale()]},a=function(t,e){return t.formats[e]||function(t){return t.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}(t.formats[e.toUpperCase()])},l=function(){var t=this;return{months:function(e){return e?e.format("MMMM"):o(t,"months")},monthsShort:function(e){return e?e.format("MMM"):o(t,"monthsShort","months",3)},firstDayOfWeek:function(){return t.$locale().weekStart||0},weekdays:function(e){return e?e.format("dddd"):o(t,"weekdays")},weekdaysMin:function(e){return e?e.format("dd"):o(t,"weekdaysMin","weekdays",2)},weekdaysShort:function(e){return e?e.format("ddd"):o(t,"weekdaysShort","weekdays",3)},longDateFormat:function(e){return a(t.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return l.bind(this)()},n.localeData=function(){var t=s();return{firstDayOfWeek:function(){return t.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(e){return a(t,e)},meridiem:t.meridiem,ordinal:t.ordinal}},n.months=function(){return o(s(),"months")},n.monthsShort=function(){return o(s(),"monthsShort","months",3)},n.weekdays=function(t){return o(s(),"weekdays",null,null,t)},n.weekdaysShort=function(t){return o(s(),"weekdaysShort","weekdays",3,t)},n.weekdaysMin=function(t){return o(s(),"weekdaysMin","weekdays",2,t)}}}(cm);var um=cm.exports,dm={exports:{}};!function(t,e){t.exports=function(t,e,n){var i=function(t,e){if(!e||!e.length||!e[0]||1===e.length&&!e[0].length)return null;var n;1===e.length&&e[0].length>0&&(e=e[0]),n=e[0];for(var i=1;i<e.length;i+=1)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n};n.max=function(){var t=[].slice.call(arguments,0);return i("isAfter",t)},n.min=function(){var t=[].slice.call(arguments,0);return i("isBefore",t)}}}(dm);var hm=dm.exports,fm={exports:{}};!function(t,e){t.exports=function(t,e){e.prototype.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)}}}(fm);var pm=fm.exports,gm={exports:{}};!function(t,e){t.exports=function(t,e){e.prototype.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)}}}(gm);var mm=gm.exports,vm={exports:{}};!function(t,e){t.exports=function(t){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function r(t,e,n){var r=i[n];return Array.isArray(r)&&(r=r[e?0:1]),r.replace("%d",t)}var o={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan_Feb_März_Apr_Mai_Juni_Juli_Aug_Sept_Okt_Nov_Dez".split("_"),ordinal:function(t){return t+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return n.default.locale(o,null,!0),o}(am.exports)}(vm);var ym=vm.exports;function bm(t,e){return t.isSame(e,"month")?e.add(1,"month"):e}function _m(t,e){const n=t.startOf("month").startOf("week"),i=t.endOf("month").endOf("week").add(1,"day"),r=[];let o=n;for(;o.isBefore(i,"day");){const i=Math.floor(o.diff(n,"days")/7),s=o.isSame(t,"month");r[i]=r[i]||{days:[],id:`${o.format("YYYYMMYYYY")}${i}`},r[i].days.push(Object.assign({partOfMonth:s,firstOfMonth:s&&1===o.date(),lastOfMonth:s&&o.date()===t.daysInMonth(),day:o.date(),month:o.month(),year:o.year(),date:o},e(o))),o=o.add(1,"day")}return{month:t.month(),year:t.year(),weeks:r}}function wm(t){const{start:e,end:n,selectableCallback:i}=t,r=e.startOf("month").startOf("day"),o=bm(r,n.startOf("month").startOf("day")),s=[],a=function(t,e,n){return i=>{const r=i.isSameOrAfter(t,"day")&&i.isSameOrBefore(e,"day");return{isInRange:r,selectable:r&&(!n||n(i.toDate())),isToday:i.isSame(lm(),"day")}}}(e,n,i);let l=lm(r);for(;l.isSameOrBefore(o);)s.push(_m(l,a)),l=l.add(1,"month");return s}function xm(t,e,n){return t.valueOf()<e.start.valueOf()||t.valueOf()>e.end.valueOf()?(console.warn("Provided date",t.format(),"is outside specified start-and-end range",e.start.format(),"to",e.end.format()),n?e.start:e.end):t}lm.extend(um),lm.extend(hm),lm.extend(pm),lm.extend(mm),lm.locale(ym);const km={};function $m(t,e){const n=lm().startOf("day"),{isDateChosen:i,chosen:[r,o]}=function(t,e){let n,i=!1;if(e.isRangePicker){const[r,o]=t||[];i=Boolean(r).valueOf()&&Boolean(o).valueOf(),n=i?t.map(lm):[lm.max(lm(),e.start),lm.min(lm().add(1,"month"),e.end)]}else i=Boolean(t).valueOf(),n=[i?lm(t):lm.max(lm(),e.start)];const[r,o]=n;return{isDateChosen:i,chosen:[xm(r,e,!0),...e.isRangePicker?[xm(o,e,!1)]:[]]}}(t,e),s=oe(r),a=oe(o),{formatter:l}=function(t,e,n){return{formatter:se([t,e],(([t,e])=>{const i=t&&t.format(n.format),r=n.isRangePicker&&e&&e.format(n.format);return{formattedSelected:i,formattedSelectedEnd:r,formattedCombined:n.isRangePicker?`${i} - ${r}`:i}}))}}(s,a,e),c=oe("date-view"),u=r.startOf("month"),d=e.isRangePicker?bm(r,o).startOf("month"):null;return{months:wm(e),component:c,today:n,selectedStartDate:s,selectedEndDate:a,leftCalendarDate:oe(u),rightCalendarDate:oe(d),config:e,shouldShakeDate:oe(!1),isOpen:oe(!1),isClosing:oe(!1),highlighted:oe(n),formatter:l,isDateChosen:oe(i),resetView:()=>{c.set("date-view")},isSelectingFirstDate:oe(!0)}}const Sm={page:{padding:6,deadzone:80},content:{medium:{single:{height:410,width:340},range:{height:410,width:680}},small:{single:{height:410,width:340},range:{height:786,width:340}}}};function Cm(t,e,n){const{isRangePicker:i}=n,{pageWidth:r,viewportHeight:o,viewportWidth:s}=function(t){const e=[...t.document.body.children].reduce(((t,e)=>Math.max(t,e.getBoundingClientRect().right)),0)-t.document.body.getBoundingClientRect().x;return{pageWidth:Math.min(t.document.body.scrollWidth,e),pageHeight:t.document.body.scrollHeight,viewportHeight:t.innerHeight,viewportWidth:t.innerWidth}}(t),a=r<480?"small":"medium",l=i?"range":"single",{padding:c,deadzone:u}=Sm.page,{width:d,height:h}=Sm.content[a][l];if(o<h+c+u||s<d+c)return{fullscreen:!0,top:0,left:0};let f=Math.max(c,e.pageX-d/2);f+d>r&&(f=r-d-c);let p=Math.max(c,e.pageY-h/2);return p+h>o&&(p=o-h-c),{top:p,left:f}}const Mm=(t,e,n)=>{t&&t.addEventListener(e,(function i(){n.apply(this,arguments),t.removeEventListener(e,i)}))},{window:Om}=Wt,Dm=t=>({}),Tm=t=>({}),Lm=t=>({}),Am=t=>({});function Em(t){let e,n,i,r,s,a,l,c,u;$t(t[17]);const d=t[16].trigger,h=f(d,t,t[15],Am),p=t[16].contents,y=f(p,t,t[15],Tm);return{c(){e=I("div"),n=I("div"),h&&h.c(),i=z(),r=I("div"),s=I("div"),a=I("div"),y&&y.c(),q(n,"class","trigger"),q(a,"class","contents-inner svelte-10d3skr"),q(s,"class","wrapper svelte-10d3skr"),q(r,"class","contents-wrapper svelte-10d3skr"),G(r,"top",t[6]+"px"),G(r,"left",t[7]+"px"),X(r,"visible",t[8]),X(r,"shrink",t[9]),X(r,"is-fullscreen",t[5]),q(e,"class","sc-popover svelte-10d3skr")},m(o,d){L(o,e,d),O(e,n),h&&h.m(n,null),t[18](n),O(e,i),O(e,r),O(r,s),O(s,a),y&&y.m(a,null),t[19](s),t[20](r),t[21](e),l=!0,c||(u=[R(Om,"resize",t[17]),R(n,"click",t[12])],c=!0)},p(t,[e]){h&&h.p&&(!l||32768&e)&&m(h,d,t,t[15],l?g(d,t[15],e,Lm):v(t[15]),Am),y&&y.p&&(!l||32768&e)&&m(y,p,t,t[15],l?g(p,t[15],e,Dm):v(t[15]),Tm),(!l||64&e)&&G(r,"top",t[6]+"px"),(!l||128&e)&&G(r,"left",t[7]+"px"),256&e&&X(r,"visible",t[8]),512&e&&X(r,"shrink",t[9]),32&e&&X(r,"is-fullscreen",t[5])},i(t){l||(zt(h,t),zt(y,t),l=!0)},o(t){Ft(h,t),Ft(y,t),l=!1},d(n){n&&A(e),h&&h.d(n),t[18](null),y&&y.d(n),t[19](null),t[20](null),t[21](null),c=!1,o(u)}}}function Im(t,e,n){let i,r,{$$slots:o={},$$scope:s}=e;const{isOpen:a,isClosing:l,config:c,resetView:u}=pt(km);h(t,a,(t=>n(8,i=t))),h(t,l,(t=>n(9,r=t)));const d=ht();let f,p,g,m,v,y=!1,b=0,_=0,{trigger:w}=e;function x(){l.set(!0),Mm(m,"animationend",(()=>{l.set(!1),a.set(!1),d("closed")}))}function k(t){if(!i)return;let e=t.target;do{if(e===f)return;e=e.parentNode}while(e);x()}ct((()=>{if(c.closeOnFocusLoss&&document.addEventListener("click",k),w)return g.appendChild(w.parentNode.removeChild(w)),()=>{c.closeOnFocusLoss&&document.removeEventListener("click",k)}}));return t.$$set=t=>{"trigger"in t&&n(13,w=t.trigger),"$$scope"in t&&n(15,s=t.$$scope)},[f,p,g,m,v,y,b,_,i,r,a,l,async t=>{a.set(!0),u(),await kt();const{top:e,left:i,fullscreen:r}=Cm(window,t,c);n(5,y=r),n(6,b=e),n(7,_=i),d("opened")},w,x,s,o,function(){n(1,p=Om.innerWidth)},function(t){vt[t?"unshift":"push"]((()=>{g=t,n(2,g)}))},function(t){vt[t?"unshift":"push"]((()=>{m=t,n(3,m)}))},function(t){vt[t?"unshift":"push"]((()=>{v=t,n(4,v)}))},function(t){vt[t?"unshift":"push"]((()=>{f=t,n(0,f)}))}]}class Pm extends ee{constructor(t){super(),te(this,t,Im,Em,a,{trigger:13,close:14})}get close(){return this.$$.ctx[14]}}class Bm{constructor(t={}){this.style="",this.buttonBackgroundColor="#fff",this.buttonBorderColor="#eee",this.buttonTextColor="#333",this.buttonWidth="300px",this.highlightColor="#f7901e",this.passiveHighlightColor="#FCD9B1",this.dayBackgroundColor="none",this.dayBackgroundColorIsNight="none",this.dayTextColor="#4a4a4a",this.dayTextColorIsNight="#4a4a4a",this.dayTextColorInRange="white",this.dayHighlightedBackgroundColor="#efefef",this.dayHighlightedTextColor="#4a4a4a",this.currentDayTextColor="#000",this.selectedDayTextColor="white",this.timeNightModeTextColor="white",this.timeNightModeBackgroundColor="#808080",this.timeDayModeTextColor="white",this.timeDayModeBackgroundColor="white",this.timeSelectedTextColor="#3d4548",this.timeInputTextColor="#3d4548",this.timeConfirmButtonColor="#2196F3",this.timeConfirmButtonTextColor="white",this.toolbarBorderColor="#888",this.contentBackground="white",this.monthYearTextColor="#3d4548",this.legendTextColor="#4a4a4a",this.datepickerWidth="auto",Object.entries(t).forEach((([t,e])=>{this[t]=e}))}toWrapperStyle(){return`\n      --button-background-color: ${this.buttonBackgroundColor};\n      --button-border-color: ${this.buttonBorderColor};\n      --button-text-color: ${this.buttonTextColor};\n      --button-width: ${this.buttonWidth};\n      --highlight-color: ${this.highlightColor};\n      --passive-highlight-color: ${this.passiveHighlightColor};\n\n      --day-background-color: ${this.dayBackgroundColor};\n      --day-background-color-is-night: ${this.dayBackgroundColorIsNight};\n      --day-text-color: ${this.dayTextColor};\n      --day-text-color-in-range: ${this.dayTextColorInRange};\n      --day-text-color-is-night: ${this.dayTextColorIsNight};\n      --day-highlighted-background-color: ${this.dayHighlightedBackgroundColor};\n      --day-highlighted-text-color: ${this.dayHighlightedTextColor};\n\n      --current-day-text-color: ${this.currentDayTextColor};\n      --selected-day-text-color: ${this.selectedDayTextColor};\n\n      --time-night-mode-text-color: ${this.timeNightModeTextColor};\n      --time-night-mode-background-color: ${this.timeNightModeBackgroundColor};\n      --time-day-mode-text-color: ${this.timeDayModeTextColor};\n      --time-day-mode-background-color: ${this.timeDayModeBackgroundColor};\n\n      --time-selected-text-color: ${this.timeSelectedTextColor};\n      --time-input-text-color: ${this.timeInputTextColor};\n      --time-confirm-button-text-color: ${this.timeConfirmButtonTextColor};\n      --time-confirm-button-color: ${this.timeConfirmButtonColor};\n\n      --toolbar-border-color: ${this.toolbarBorderColor};\n\n      --content-background: ${this.contentBackground};\n\n      --month-year-text-color: ${this.monthYearTextColor};\n      --legend-text-color: ${this.legendTextColor};\n      --datepicker-width: ${this.datepickerWidth};\n\n      ${this.style}\n    `}}function zm(t,e,n){const i=t.startOf("day").toDate(),r=e.startOf("day").toDate(),o=n.startOf("day").toDate();return o>i&&o<r}function Fm(t,e,n){const i=t.slice();return i[16]=e[n],i}function Rm(t){let e,n,i,r,o,s,a,l=t[16].date.date()+"";function c(){return t[15](t[16])}return{c(){e=I("div"),n=I("button"),i=B(l),o=z(),q(n,"class","day--label svelte-1gcp452"),q(n,"type","button"),q(n,"aria-label",r=t[16].date.format("YYYY-MM-DD")),X(n,"highlighted",t[16].date.isSame(t[5],"day")),X(n,"shake-date",t[6]&&t[16].date.isSame(t[6],"day")),X(n,"disabled",!t[16].selectable),q(e,"class","day svelte-1gcp452"),X(e,"is-night",!t[2]),X(e,"is-range-picker",t[7].isRangePicker),X(e,"outside-month",!t[16].partOfMonth),X(e,"first-of-month",t[16].firstOfMonth),X(e,"last-of-month",t[16].lastOfMonth),X(e,"selection-start",t[16].date.isSame(t[3],"day")),X(e,"selection-end",t[7].isRangePicker&&t[16].date.isSame(t[4],"day")),X(e,"part-of-range",t[7].isRangePicker&&zm(t[3],t[4],t[16].date)),X(e,"is-today",t[16].isToday),X(e,"is-disabled",!t[16].selectable)},m(t,r){L(t,e,r),O(e,n),O(n,i),O(e,o),s||(a=R(n,"click",j(c)),s=!0)},p(o,s){t=o,1&s&&l!==(l=t[16].date.date()+"")&&V(i,l),1&s&&r!==(r=t[16].date.format("YYYY-MM-DD"))&&q(n,"aria-label",r),33&s&&X(n,"highlighted",t[16].date.isSame(t[5],"day")),65&s&&X(n,"shake-date",t[6]&&t[16].date.isSame(t[6],"day")),1&s&&X(n,"disabled",!t[16].selectable),4&s&&X(e,"is-night",!t[2]),1&s&&X(e,"outside-month",!t[16].partOfMonth),1&s&&X(e,"first-of-month",t[16].firstOfMonth),1&s&&X(e,"last-of-month",t[16].lastOfMonth),9&s&&X(e,"selection-start",t[16].date.isSame(t[3],"day")),145&s&&X(e,"selection-end",t[7].isRangePicker&&t[16].date.isSame(t[4],"day")),153&s&&X(e,"part-of-range",t[7].isRangePicker&&zm(t[3],t[4],t[16].date)),1&s&&X(e,"is-today",t[16].isToday),1&s&&X(e,"is-disabled",!t[16].selectable)},d(t){t&&A(e),s=!1,a()}}}function Nm(e){let n,i,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=Rm(Fm(e,r,t));return{c(){n=I("div");for(let t=0;t<o.length;t+=1)o[t].c();q(n,"class","week svelte-1gcp452")},m(t,e){L(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[i]){if(e=t,8445&i){let t;for(r=e[0],t=0;t<r.length;t+=1){const s=Fm(e,r,t);o[t]?o[t].p(s,i):(o[t]=Rm(s),o[t].c(),o[t].m(n,null))}for(;t<o.length;t+=1)o[t].d(1);o.length=r.length}},i(t){t&&(i||$t((()=>{i=Nt(n,tp,{x:50*e[1],duration:180,delay:90}),i.start()})))},o:t,d(t){t&&A(n),E(o,t)}}}function jm(t,e,n){let i,r,o,s,a,{viewContextKey:l}=e,{days:c}=e,{direction:u}=e;const{config:d,shouldShakeDate:f,highlighted:p,selectedStartDate:g,selectedEndDate:m}=pt(km);h(t,f,(t=>n(6,a=t))),h(t,p,(t=>n(5,s=t))),h(t,g,(t=>n(3,r=t))),h(t,m,(t=>n(4,o=t)));const{isDaytime:v}=pt(l);h(t,v,(t=>n(2,i=t)));const y=ht();return t.$$set=t=>{"viewContextKey"in t&&n(14,l=t.viewContextKey),"days"in t&&n(0,c=t.days),"direction"in t&&n(1,u=t.direction)},[c,u,i,r,o,s,a,d,f,p,g,m,v,y,l,t=>y("chosen",{date:t.date})]}class qm extends ee{constructor(t){super(),te(this,t,jm,Nm,a,{viewContextKey:14,days:0,direction:1})}}function Hm(t,e,n){const i=t.slice();return i[7]=e[n],i}function Wm(t,e,n){const i=t.slice();return i[10]=e[n],i}function Vm(e){let n,i,r=e[10]+"";return{c(){n=I("span"),i=B(r),q(n,"class","svelte-lktis3")},m(t,e){L(t,n,e),O(n,i)},p:t,d(t){t&&A(n)}}}function Um(t,e){let n,i,r;return i=new qm({props:{viewContextKey:e[0],days:e[7].days,direction:e[1]}}),i.$on("chosen",e[6]),{key:t,first:null,c(){n=F(),Xt(i.$$.fragment),this.first=n},m(t,e){L(t,n,e),Zt(i,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.viewContextKey=e[0]),4&n&&(r.days=e[7].days),2&n&&(r.direction=e[1]),i.$set(r)},i(t){r||(zt(i.$$.fragment,t),r=!0)},o(t){Ft(i.$$.fragment,t),r=!1},d(t){t&&A(n),Qt(i,t)}}}function Gm(t){let e,n,i,r,o,s,a=[],l=new Map,c=lm.weekdaysShort(!0),u=[];for(let e=0;e<c.length;e+=1)u[e]=Vm(Wm(t,c,e));let d=t[2].visibleMonth.weeks;const h=t=>t[7].id;for(let e=0;e<d.length;e+=1){let n=Hm(t,d,e),i=h(n);l.set(i,a[e]=Um(i,n))}return{c(){e=I("div"),n=I("div"),i=I("div"),r=I("div");for(let t=0;t<u.length;t+=1)u[t].c();o=z();for(let t=0;t<a.length;t+=1)a[t].c();q(r,"class","month-week svelte-lktis3"),q(i,"class","legend svelte-lktis3"),q(n,"class","month-dates svelte-lktis3"),q(e,"class","month-container svelte-lktis3")},m(t,l){L(t,e,l),O(e,n),O(n,i),O(i,r);for(let t=0;t<u.length;t+=1)u[t].m(r,null);O(n,o);for(let t=0;t<a.length;t+=1)a[t].m(n,null);s=!0},p(t,[e]){if(0&e){let n;for(c=lm.weekdaysShort(!0),n=0;n<c.length;n+=1){const i=Wm(t,c,n);u[n]?u[n].p(i,e):(u[n]=Vm(i),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}7&e&&(d=t[2].visibleMonth.weeks,Pt(),a=Gt(a,e,h,1,t,d,l,n,Vt,Um,null,Hm),Bt())},i(t){if(!s){for(let t=0;t<d.length;t+=1)zt(a[t]);s=!0}},o(t){for(let t=0;t<a.length;t+=1)Ft(a[t]);s=!1},d(t){t&&A(e),E(u,t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Km(t,e,n){let i,{viewContextKey:r}=e,{id:o}=e;const{monthView:s}=pt(r);h(t,s,(t=>n(2,i=t)));let a,l=o;return t.$$set=t=>{"viewContextKey"in t&&n(0,r=t.viewContextKey),"id"in t&&n(4,o=t.id)},t.$$.update=()=>{48&t.$$.dirty&&(n(1,a=l<o?1:-1),n(5,l=o))},[r,a,i,s,o,l,function(e){gt.call(this,t,e)}]}class Ym extends ee{constructor(t){super(),te(this,t,Km,Gm,a,{viewContextKey:0,id:4})}}function Jm(t,e,n){const i=t.slice();return i[27]=e[n],i[29]=n,i}function Xm(t){let e,n,i,r,o,s,a,l=t[27].abbrev+"";function c(...e){return t[21](t[27],t[29],...e)}return{c(){e=I("button"),n=I("span"),i=B(l),r=z(),q(n,"class","svelte-1c4p61v"),q(e,"class","month-selector--month svelte-1c4p61v"),e.disabled=o=!t[27].selectable,X(e,"selected",t[29]===t[0].month())},m(t,o){L(t,e,o),O(e,n),O(n,i),O(e,r),s||(a=R(e,"click",c),s=!0)},p(n,r){t=n,4&r&&l!==(l=t[27].abbrev+"")&&V(i,l),4&r&&o!==(o=!t[27].selectable)&&(e.disabled=o),1&r&&X(e,"selected",t[29]===t[0].month())},d(t){t&&A(e),s=!1,a()}}}function Zm(e){let n,i,r,s,a,l,c,u,d,h,f,p,g,m,v,y,b,_=e[0].format("MMMM YYYY")+"",w=e[2],x=[];for(let t=0;t<w.length;t+=1)x[t]=Xm(Jm(e,w,t));return{c(){n=I("div"),i=I("div"),r=I("button"),s=I("i"),l=z(),c=I("button"),u=I("span"),d=B(_),h=z(),f=I("button"),p=I("i"),m=z(),v=I("div");for(let t=0;t<x.length;t+=1)x[t].c();q(s,"class","arrow left svelte-1c4p61v"),q(r,"class","control svelte-1c4p61v"),q(r,"type","button"),q(r,"aria-label","Previous month"),r.disabled=a=!e[3],q(c,"type","button"),q(c,"class","label svelte-1c4p61v"),q(p,"class","arrow right svelte-1c4p61v"),q(f,"class","control svelte-1c4p61v"),q(f,"type","button"),q(f,"aria-label","Next month"),f.disabled=g=!e[4],q(i,"class","heading-section svelte-1c4p61v"),q(v,"class","month-selector svelte-1c4p61v"),X(v,"open",e[1]),q(n,"class","title svelte-1c4p61v")},m(t,o){L(t,n,o),O(n,i),O(i,r),O(r,s),O(i,l),O(i,c),O(c,u),O(u,d),O(i,h),O(i,f),O(f,p),O(n,m),O(n,v);for(let t=0;t<x.length;t+=1)x[t].m(v,null);y||(b=[R(r,"click",e[19]),R(c,"click",e[10]),R(f,"click",e[20])],y=!0)},p(t,[e]){if(8&e&&a!==(a=!t[3])&&(r.disabled=a),1&e&&_!==(_=t[0].format("MMMM YYYY")+"")&&V(d,_),16&e&&g!==(g=!t[4])&&(f.disabled=g),2053&e){let n;for(w=t[2],n=0;n<w.length;n+=1){const i=Jm(t,w,n);x[n]?x[n].p(i,e):(x[n]=Xm(i),x[n].c(),x[n].m(v,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=w.length}2&e&&X(v,"open",t[1])},i:t,o:t,d(t){t&&A(n),E(x,t),y=!1,o(b)}}}function Qm(t,e,n){let i,r,o,s,a,l,c,u,d,{viewContextKey:f}=e;const{months:p,config:g,highlighted:m,leftCalendarDate:v,rightCalendarDate:y}=pt(km);h(t,v,(t=>n(18,d=t))),h(t,y,(t=>n(17,u=t)));const{isStart:b,displayedDate:_,monthView:w}=pt(f);h(t,_,(t=>n(0,l=t))),h(t,w,(t=>n(16,c=t)));let x,k=!1;function $(t){(1!==t||s)&&(-1!==t||a)&&(_.update((e=>e.add(t,"months"))),m.set(l))}function S(){n(1,k=!k)}function C(t,{monthDefinition:e,index:n}){var i;(t.stopPropagation(),e.selectable)&&(i=n,_.update((t=>t.month(i))),m.set(l),S())}return t.$$set=t=>{"viewContextKey"in t&&n(12,f=t.viewContextKey)},t.$$.update=()=>{if(1&t.$$.dirty){const t=g.start.isSame(l,"year"),e=g.end.isSame(l,"year");n(2,x=lm.months().map(((n,i)=>Object.assign({},{name:n,abbrev:lm.monthsShort()[i]},{selectable:!t&&!e||(!t||i>=g.start.month())&&(!e||i<=g.end.year())}))))}1&t.$$.dirty&&n(14,i=lm(l).diff("0000-00-00","month")),262144&t.$$.dirty&&n(13,r=lm(d).diff("0000-00-00","month")),131072&t.$$.dirty&&n(15,o=lm(u).diff("0000-00-00","month")),114688&t.$$.dirty&&n(4,s=c.monthIndex<p.length-1&&(!g.isRangePicker||!b||i<o-1)),90112&t.$$.dirty&&n(3,a=c.monthIndex>0&&(!(g.isRangePicker&&!b)||i>r+1))},[l,k,x,a,s,v,y,_,w,$,S,C,f,r,i,o,c,u,d,()=>$(-1),()=>$(1),(t,e,n)=>C(n,{monthDefinition:t,index:e})]}class tv extends ee{constructor(t){super(),te(this,t,Qm,Zm,a,{viewContextKey:12})}}let ev;function nv(t){let e,n,i,r,o;return n=new tv({props:{viewContextKey:t[0]}}),r=new Ym({props:{viewContextKey:t[0],id:t[1]}}),r.$on("chosen",t[5]),{c(){e=I("div"),Xt(n.$$.fragment),i=z(),Xt(r.$$.fragment),q(e,"class","svelte-3fib5n")},m(t,s){L(t,e,s),Zt(n,e,null),O(e,i),Zt(r,e,null),o=!0},p(t,[e]){const i={};1&e&&(i.viewContextKey=t[0]),n.$set(i);const o={};1&e&&(o.viewContextKey=t[0]),2&e&&(o.id=t[1]),r.$set(o)},i(t){o||(zt(n.$$.fragment,t),zt(r.$$.fragment,t),o=!0)},o(t){Ft(n.$$.fragment,t),Ft(r.$$.fragment,t),o=!1},d(t){t&&A(e),Qt(n),Qt(r)}}}function iv(t,e,n){let i,r,{viewContextKey:o}=e;const s=ht(),{displayedDate:a}=pt(o);h(t,a,(t=>n(4,r=t)));const{months:l,shouldShakeDate:c}=pt(km);function u(t){return function(t,e){const n=function(t,e,n,i){const r=t.find((t=>t.month===e&&t.year===i));if(!r)return null;for(let t=0;t<r.weeks.length;t+=1)for(let o=0;o<r.weeks[t].days.length;o+=1){const s=r.weeks[t].days[o];if(s.month===e&&s.day===n&&s.year===i)return s}return null}(t,e.month(),e.date(),e.year());return n&&n.selectable}(l,t)?(s("chosen",{date:t}),!0):function(t,e){clearTimeout(ev),t.set(e),ev=setTimeout((()=>{t.set(!1)}),700)}(c,t)}return t.$$set=t=>{"viewContextKey"in t&&n(0,o=t.viewContextKey)},t.$$.update=()=>{16&t.$$.dirty&&n(1,i=r.unix())},[o,i,a,u,r,t=>u(t.detail.date)]}class rv extends ee{constructor(t){super(),te(this,t,iv,nv,a,{viewContextKey:0})}}function ov(t,e){return se([e],(([e])=>{let n=0;const i=e.month(),r=e.year();for(let e=0;e<t.length;e+=1)t[e].month===i&&t[e].year===r&&(n=e);return{monthIndex:n,visibleMonth:t[n]}}))}function sv(t,e){const{config:n,months:i,leftCalendarDate:r,rightCalendarDate:o,selectedStartDate:s,selectedEndDate:a}=e,[l,c]=t?[s,r]:[a,o],u=se(l,(t=>{if(!t)return!0;const[e]=lm(t).format("HH:mm").split(":").map((t=>parseInt(t)));return e>n.morning&&e<n.night}));return{isStart:t,date:l,view:rv,isDaytime:u,displayedDate:c,monthView:ov(i,c)}}function av(e){let n,i,r,o,s;return{c(){n=I("div"),i=I("button"),r=B(e[0]),q(i,"type","button"),q(i,"class","button svelte-hbl86k"),q(n,"class","toolbar svelte-hbl86k")},m(t,a){L(t,n,a),O(n,i),O(i,r),o||(s=R(i,"click",N(e[2])),o=!0)},p(t,[e]){1&e&&V(r,t[0])},i:t,o:t,d(t){t&&A(n),o=!1,s()}}}function lv(t,e,n){let i,{continueText:r}=e;const o=ht(),{config:s,component:a,isDateChosen:l}=pt(km);function c(){l.set(!0),o("close")}return h(t,a,(t=>n(3,i=t))),t.$$set=t=>{"continueText"in t&&n(0,r=t.continueText)},[r,a,function(){l.set(!1),"date-view"===i?s.isTimePicker?a.set("time-view"):c():"time-view"===i&&c()}]}class cv extends ee{constructor(t){super(),te(this,t,lv,av,a,{continueText:0})}}function uv(e){let n,i,r;return{c(){n=I("span"),q(n,"class","chevron svelte-twxu81"),X(n,"bottom",!e[0])},m(t,o){L(t,n,o),i||(r=R(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&X(n,"bottom",!t[0])},i:t,o:t,d(t){t&&A(n),i=!1,r()}}}function dv(t,e,n){let{up:i=!0}=e;return t.$$set=t=>{"up"in t&&n(0,i=t.up)},[i,function(e){gt.call(this,t,e)}]}class hv extends ee{constructor(t){super(),te(this,t,dv,uv,a,{up:0})}}function fv(t,e){let n;t.addEventListener("keydown",l),t.addEventListener("focus",o),t.addEventListener("blur",a);const i=e.subscribe((t=>{n=t.split(""),r()}));function r(){t.value=n.join("")}function o(){n=[],r()}function s(){e.set(n.join("")),r()}function a(){5!==n.digits?(n=d(e).split(""),r()):s()}function l(t){t.preventDefault();const e=t.which;e>=48&&e<=57&&function(t){const e=t-48;if(function(t){const e=n.length>4,i=0===n.length&&![0,1,2].includes(t),r=1===n.length&&2===n[0]&&t>3,o=3===n.length&&t>5;return e||i||r||o}(e))return;2===n.length&&n.push(":"),n.push(e),5===n.length&&s();r()}(e),8===e&&(n.pop(),3===n.length&&n.pop(),r())}return{destroy(){i(),t.removeEventListener("keydown",l),t.removeEventListener("focus",o),t.removeEventListener("blur",a)}}}function pv(t,e){return[String(t).padStart(2,"0"),String(e).padStart(2,"0")].join(":")}function gv(t){let e,n,i,r,o,s,a,l,c,u,d,h,f,p,g;return i=new hv({props:{up:!0}}),i.$on("click",t[7]),o=new hv({props:{up:!0}}),o.$on("click",t[8]),u=new hv({props:{up:!1}}),u.$on("click",t[9]),h=new hv({props:{up:!1}}),h.$on("click",t[10]),{c(){e=I("div"),n=I("div"),Xt(i.$$.fragment),r=z(),Xt(o.$$.fragment),s=z(),a=I("input"),l=z(),c=I("div"),Xt(u.$$.fragment),d=z(),Xt(h.$$.fragment),q(n,"class","controls svelte-w5vedm"),q(a,"type","text"),q(a,"class","svelte-w5vedm"),q(c,"class","controls svelte-w5vedm"),q(e,"class","time-picker svelte-w5vedm"),X(e,"is-night",!t[0])},m(m,v){L(m,e,v),O(e,n),Zt(i,n,null),O(n,r),Zt(o,n,null),O(e,s),O(e,a),O(e,l),O(e,c),Zt(u,c,null),O(c,d),Zt(h,c,null),f=!0,p||(g=w(fv.call(null,a,t[5])),p=!0)},p(t,[n]){1&n&&X(e,"is-night",!t[0])},i(t){f||(zt(i.$$.fragment,t),zt(o.$$.fragment,t),zt(u.$$.fragment,t),zt(h.$$.fragment,t),f=!0)},o(t){Ft(i.$$.fragment,t),Ft(o.$$.fragment,t),Ft(u.$$.fragment,t),Ft(h.$$.fragment,t),f=!1},d(t){t&&A(e),Qt(i),Qt(o),Qt(u),Qt(h),p=!1,g()}}}function mv(t,e,n){let i,r,{viewContextKey:o}=e;const{config:s}=pt(km),{date:a,isDaytime:l}=pt(o);h(t,a,(t=>n(11,i=t))),h(t,l,(t=>n(0,r=t)));const{increment:c,decrement:u,time:d}=function(t,e){const n=oe(lm(t).format("HH:mm"));return{increment:function(t){n.update((n=>{let[i,r]=n.split(":");return"hour"===t&&i<23&&++i,"minute"===t&&r<59&&(r=Math.min(59,parseInt(r)+e.minuteStep)),pv(i,r)}))},decrement:function(t){n.update((n=>{let[i,r]=n.split(":");return"hour"===t&&i>0&&--i,"minute"===t&&r>0&&(r=Math.max(0,parseInt(r)-e.minuteStep)),pv(i,r)}))},time:n,set:function(t){n.set(t)}}}(i,s);ct((()=>d.subscribe((t=>{const[e,n]=t.split(":").map((t=>parseInt(t)));a.update((t=>t.hour(e).minute(n)))}))));return t.$$set=t=>{"viewContextKey"in t&&n(6,o=t.viewContextKey)},[r,a,l,c,u,d,o,()=>c("hour"),()=>c("minute"),()=>u("hour"),()=>u("minute")]}class vv extends ee{constructor(t){super(),te(this,t,mv,gv,a,{viewContextKey:6})}}function yv(t){let e,n,i,r,o,s,a=lm(t[2]).format(t[5].format)+"";return o=new vv({props:{viewContextKey:t[0]}}),{c(){e=I("div"),n=I("span"),i=B(a),r=z(),Xt(o.$$.fragment),q(n,"class","chosen-date svelte-17tznc2"),q(e,"class","time-container svelte-17tznc2"),X(e,"is-night",!t[1])},m(t,a){L(t,e,a),O(e,n),O(n,i),O(e,r),Zt(o,e,null),s=!0},p(t,[n]){(!s||4&n)&&a!==(a=lm(t[2]).format(t[5].format)+"")&&V(i,a);const r={};1&n&&(r.viewContextKey=t[0]),o.$set(r),2&n&&X(e,"is-night",!t[1])},i(t){s||(zt(o.$$.fragment,t),s=!0)},o(t){Ft(o.$$.fragment,t),s=!1},d(t){t&&A(e),Qt(o)}}}function bv(t,e,n){let i,r,{viewContextKey:o}=e;const{date:s,isDaytime:a}=pt(o);h(t,s,(t=>n(2,r=t))),h(t,a,(t=>n(1,i=t)));const{config:l}=pt(km);return t.$$set=t=>{"viewContextKey"in t&&n(0,o=t.viewContextKey)},[o,i,r,s,a,l]}class _v extends ee{constructor(t){super(),te(this,t,bv,yv,a,{viewContextKey:0})}}function wv(t){let e,n,i;var r="date-view"===t[2]?rv:_v;function o(t){return{props:{viewContextKey:t[0]}}}return r&&(n=new r(o(t)),n.$on("chosen",t[6])),{c(){e=I("div"),n&&Xt(n.$$.fragment),q(e,"class","calendar svelte-1sgbxd0"),X(e,"is-range-picker",t[3].isRangePicker),X(e,"day",t[1]),X(e,"night",!t[1])},m(t,r){L(t,e,r),n&&Zt(n,e,null),i=!0},p(t,[i]){const s={};if(1&i&&(s.viewContextKey=t[0]),r!==(r="date-view"===t[2]?rv:_v)){if(n){Pt();const t=n;Ft(t.$$.fragment,1,0,(()=>{Qt(t,1)})),Bt()}r?(n=new r(o(t)),n.$on("chosen",t[6]),Xt(n.$$.fragment),zt(n.$$.fragment,1),Zt(n,e,null)):n=null}else r&&n.$set(s);2&i&&X(e,"day",t[1]),2&i&&X(e,"night",!t[1])},i(t){i||(n&&zt(n.$$.fragment,t),i=!0)},o(t){n&&Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),n&&Qt(n)}}}function xv(t,e,n){let i,r,{viewContextKey:o}=e;const{config:s,component:a}=pt(km);h(t,a,(t=>n(2,r=t)));const{isDaytime:l}=pt(o);return h(t,l,(t=>n(1,i=t))),t.$$set=t=>{"viewContextKey"in t&&n(0,o=t.viewContextKey)},[o,i,r,s,a,l,function(e){gt.call(this,t,e)}]}class kv extends ee{constructor(t){super(),te(this,t,xv,wv,a,{viewContextKey:0})}}const $v=t=>({formatted:256&t[0]}),Sv=t=>({formatted:t[8]});function Cv(t){let e;function n(t,e){return t[4]?Ov:Mv}let i=n(t),r=i(t);return{c(){e=I("button"),r.c(),q(e,"class","calendar-button svelte-19zfrtc"),q(e,"type","button")},m(t,n){L(t,e,n),r.m(e,null)},p(t,o){i===(i=n(t))&&r?r.p(t,o):(r.d(1),r=i(t),r&&(r.c(),r.m(e,null)))},d(t){t&&A(e),r.d()}}}function Mv(t){let e;return{c(){e=B(t[0])},m(t,n){L(t,e,n)},p(t,n){1&n[0]&&V(e,t[0])},d(t){t&&A(e)}}}function Ov(t){let e,n=t[8].formattedCombined+"";return{c(){e=B(n)},m(t,n){L(t,e,n)},p(t,i){256&i[0]&&n!==(n=t[8].formattedCombined+"")&&V(e,n)},d(t){t&&A(e)}}}function Dv(t){let e,n;const i=t[34].default,r=f(i,t,t[37],Sv),o=r||function(t){let e,n=!t[1]&&Cv(t);return{c(){n&&n.c(),e=F()},m(t,i){n&&n.m(t,i),L(t,e,i)},p(t,i){t[1]?n&&(n.d(1),n=null):n?n.p(t,i):(n=Cv(t),n.c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&A(e)}}}(t);return{c(){e=I("div"),o&&o.c(),q(e,"slot","trigger"),q(e,"class","svelte-19zfrtc")},m(t,i){L(t,e,i),o&&o.m(e,null),n=!0},p(t,e){r?r.p&&(!n||256&e[0]|64&e[1])&&m(r,i,t,t[37],n?g(i,t[37],e,$v):v(t[37]),Sv):o&&o.p&&(!n||275&e[0])&&o.p(t,n?e:[-1,-1])},i(t){n||(zt(o,t),n=!0)},o(t){Ft(o,t),n=!1},d(t){t&&A(e),o&&o.d(t)}}}function Tv(e){let n,i,r,o,s,a,l;r=new kv({props:{viewContextKey:e[10]}}),r.$on("chosen",e[21]);let c=e[12].isRangePicker&&function(e){let n,i;return n=new kv({props:{viewContextKey:e[11]}}),n.$on("chosen",e[21]),{c(){Xt(n.$$.fragment)},m(t,e){Zt(n,t,e),i=!0},p:t,i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){Qt(n,t)}}}(e);return a=new cv({props:{continueText:e[3]}}),a.$on("close",e[22]),{c(){n=I("div"),i=I("div"),Xt(r.$$.fragment),o=z(),c&&c.c(),s=z(),Xt(a.$$.fragment),q(i,"class","view svelte-19zfrtc"),q(n,"class","contents svelte-19zfrtc"),q(n,"slot","contents"),X(n,"is-range-picker",e[12].isRangePicker)},m(t,e){L(t,n,e),O(n,i),Zt(r,i,null),O(i,o),c&&c.m(i,null),O(n,s),Zt(a,n,null),l=!0},p(t,e){t[12].isRangePicker&&c.p(t,e);const n={};8&e[0]&&(n.continueText=t[3]),a.$set(n)},i(t){l||(zt(r.$$.fragment,t),zt(c),zt(a.$$.fragment,t),l=!0)},o(t){Ft(r.$$.fragment,t),Ft(c),Ft(a.$$.fragment,t),l=!1},d(t){t&&A(n),Qt(r),c&&c.d(),Qt(a)}}}function Lv(t){let e,n,i,r,o={trigger:t[1],$$slots:{contents:[Tv],trigger:[Dv]},$$scope:{ctx:t}};return n=new Pm({props:o}),t[35](n),n.$on("opened",t[20]),n.$on("closed",t[36]),{c(){e=I("div"),Xt(n.$$.fragment),q(e,"class","datepicker svelte-19zfrtc"),q(e,"style",i=t[2].toWrapperStyle()),X(e,"open",t[6]),X(e,"closing",t[7])},m(t,i){L(t,e,i),Zt(n,e,null),r=!0},p(t,o){const s={};2&o[0]&&(s.trigger=t[1]),283&o[0]|64&o[1]&&(s.$$scope={dirty:o,ctx:t}),n.$set(s),(!r||4&o[0]&&i!==(i=t[2].toWrapperStyle()))&&q(e,"style",i),64&o[0]&&X(e,"open",t[6]),128&o[0]&&X(e,"closing",t[7])},i(t){r||(zt(n.$$.fragment,t),r=!0)},o(t){Ft(n.$$.fragment,t),r=!1},d(i){i&&A(e),t[35](null),Qt(n)}}}function Av(t,e,n){let i,r,o,s,a,l,c,{$$slots:u={},$$scope:d}=e,{range:f=!1}=e,{placeholder:p="Choose Date"}=e,{format:g="DD / MM / YYYY"}=e,{start:m=lm().subtract(1,"year")}=e,{end:v=lm().add(1,"year")}=e,{trigger:y=null}=e,{selectableCallback:b=null}=e,{styling:_=new Bm}=e,{selected:w}=e,{closeOnFocusLoss:x=!0}=e,{time:k=!1}=e,{morning:$=7}=e,{night:S=19}=e,{minuteStep:C=5}=e,{continueText:M="Continue"}=e;const O=ht(),D={},T={},L={start:lm(m),end:lm(v),isRangePicker:f,isTimePicker:k,closeOnFocusLoss:x,format:g,morning:$,night:S,selectableCallback:b,minuteStep:parseInt(C)};ft(km,$m(w,L));const{selectedStartDate:A,selectedEndDate:E,isOpen:I,isClosing:P,highlighted:B,formatter:z,isDateChosen:F,isSelectingFirstDate:R}=pt(km);let N;function j(){if(!L.isRangePicker)return;const t=s,e=o;e.isBefore(t)&&(A.set(e),E.set(t))}h(t,A,(t=>n(40,s=t))),h(t,E,(t=>n(39,o=t))),h(t,I,(t=>n(6,a=t))),h(t,P,(t=>n(7,l=t))),h(t,z,(t=>n(8,c=t))),h(t,F,(t=>n(4,i=t))),h(t,R,(t=>n(38,r=t))),ft(D,sv(!0,pt(km))),L.isRangePicker&&ft(T,sv(!1,pt(km)));return t.$$set=t=>{"range"in t&&n(24,f=t.range),"placeholder"in t&&n(0,p=t.placeholder),"format"in t&&n(25,g=t.format),"start"in t&&n(26,m=t.start),"end"in t&&n(27,v=t.end),"trigger"in t&&n(1,y=t.trigger),"selectableCallback"in t&&n(28,b=t.selectableCallback),"styling"in t&&n(2,_=t.styling),"selected"in t&&n(23,w=t.selected),"closeOnFocusLoss"in t&&n(29,x=t.closeOnFocusLoss),"time"in t&&n(30,k=t.time),"morning"in t&&n(31,$=t.morning),"night"in t&&n(32,S=t.night),"minuteStep"in t&&n(33,C=t.minuteStep),"continueText"in t&&n(3,M=t.continueText),"$$scope"in t&&n(37,d=t.$$scope)},t.$$.update=()=>{16&t.$$.dirty[0]&&i&&(L.isRangePicker?(n(23,w=[s,o]),O("range-selected",{from:s.toDate(),to:o.toDate()})):(n(23,w=s.toDate()),O("date-selected",{date:s.toDate()})),O("change"))},[p,y,_,M,i,N,a,l,c,O,D,T,L,A,E,I,P,z,F,R,function(){B.set(s),O("open")},function(t){const{date:e}=t.detail;r?A.set(e):E.set(e),j(),L.isRangePicker&&R.update((t=>!t))},function(){j(),N.close()},w,f,g,m,v,b,x,k,$,S,C,u,function(t){vt[t?"unshift":"push"]((()=>{N=t,n(5,N)}))},()=>O("close"),d]}class Ev extends ee{constructor(t){super(),te(this,t,Av,Lv,a,{range:24,placeholder:0,format:25,start:26,end:27,trigger:1,selectableCallback:28,styling:2,selected:23,closeOnFocusLoss:29,time:30,morning:31,night:32,minuteStep:33,continueText:3},null,[-1,-1])}}function Iv(t){let e,n,i;return{c(){e=I("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" role="presentation"><path fill="currentColor" d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n      l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',q(e,"class","clear svelte-a9z6xt")},m(r,o){L(r,e,o),n||(i=R(e,"click",j(t[1])),n=!0)},d(t){t&&A(e),n=!1,i()}}}function Pv(e){let n,i=e[0]&&Iv(e);return{c(){i&&i.c(),n=F()},m(t,e){i&&i.m(t,e),L(t,n,e)},p(t,[e]){t[0]?i||(i=Iv(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&A(n)}}}function Bv(t,e,n){let{visible:i=!0}=e;return t.$$set=t=>{"visible"in t&&n(0,i=t.visible)},[i,function(e){gt.call(this,t,e)}]}class zv extends ee{constructor(t){super(),te(this,t,Bv,Pv,a,{visible:0})}}function Fv(t,e,n){const i=t.slice();return i[10]=e[n][0],i[11]=e[n][1],i}function Rv(t){let e,n;return e=new Ev({props:{selected:0===t[0]?new Date:new Date(t[0]),format:"#{d}.#{m}.#{Y}",start:new Date(2018,1,1),end:Wv(),continueText:"Speichern",$$slots:{default:[jv]},$$scope:{ctx:t}}}),e.$on("date-selected",t[8]),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.selected=0===t[0]?new Date:new Date(t[0])),16385&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Nv(e){let n,i;return{c(){n=I("input"),q(n,"type","text"),n.value=i=0===e[0]?"-":yd(e[0]),n.disabled=!0,q(n,"class","svelte-d77rmw")},m(t,e){L(t,n,e)},p(t,e){1&e&&i!==(i=0===t[0]?"-":yd(t[0]))&&n.value!==i&&(n.value=i)},i:t,o:t,d(t){t&&A(n)}}}function jv(t){let e,n,i,r,o;return r=new zv({props:{visible:0!==t[0]}}),r.$on("click",t[7]),{c(){e=I("input"),i=z(),Xt(r.$$.fragment),q(e,"type","text"),e.value=n=0===t[0]?"-":yd(t[0]),q(e,"class","svelte-d77rmw")},m(t,n){L(t,e,n),L(t,i,n),Zt(r,t,n),o=!0},p(t,i){(!o||1&i&&n!==(n=0===t[0]?"-":yd(t[0]))&&e.value!==n)&&(e.value=n);const s={};1&i&&(s.visible=0!==t[0]),r.$set(s)},i(t){o||(zt(r.$$.fragment,t),o=!0)},o(t){Ft(r.$$.fragment,t),o=!1},d(t){t&&A(e),t&&A(i),Qt(r,t)}}}function qv(t){let e,n;return e=new pg({props:{text:t[11]}}),e.$on("click",(function(){return t[9](t[10])})),{c(){Xt(e.$$.fragment)},m(t,i){Zt(e,t,i),n=!0},p(n,i){t=n;const r={};2&i&&(r.text=t[11]),e.$set(r)},i(t){n||(zt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Qt(e,t)}}}function Hv(t){let e,n,i,r,o;const s=[Nv,Rv],a=[];function l(t,e){return t[2]?0:1}e=l(t),n=a[e]=s[e](t);let c=Object.entries(t[1]),u=[];for(let e=0;e<c.length;e+=1)u[e]=qv(Fv(t,c,e));const d=t=>Ft(u[t],1,1,(()=>{u[t]=null}));return{c(){n.c(),i=z();for(let t=0;t<u.length;t+=1)u[t].c();r=F()},m(t,n){a[e].m(t,n),L(t,i,n);for(let e=0;e<u.length;e+=1)u[e].m(t,n);L(t,r,n),o=!0},p(t,[o]){let h=e;if(e=l(t),e===h?a[e].p(t,o):(Pt(),Ft(a[h],1,1,(()=>{a[h]=null})),Bt(),n=a[e],n?n.p(t,o):(n=a[e]=s[e](t),n.c()),zt(n,1),n.m(i.parentNode,i)),66&o){let e;for(c=Object.entries(t[1]),e=0;e<c.length;e+=1){const n=Fv(t,c,e);u[e]?(u[e].p(n,o),zt(u[e],1)):(u[e]=qv(n),u[e].c(),zt(u[e],1),u[e].m(r.parentNode,r))}for(Pt(),e=c.length;e<u.length;e+=1)d(e);Bt()}},i(t){if(!o){zt(n);for(let t=0;t<c.length;t+=1)zt(u[t]);o=!0}},o(t){Ft(n),u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Ft(u[t]);o=!1},d(t){a[e].d(t),t&&A(i),E(u,t),t&&A(r)}}}function Wv(){const t=new Date;return t.setMonth(t.getMonth()+2),t}function Vv(t,e,n){const i=ht(),r=(t=(new Date).getTime())=>6e4*new Date(t).getTimezoneOffset();let{quickset:o={}}=e,{value:s=0}=e,{disabled:a=!1}=e,{showAlertOnPastDateSelection:l=!1}=e;function c(t){let e=new Date;e.setDate(e.getDate()+t),n(0,s=_d(e.getTime()))}return t.$$set=t=>{"quickset"in t&&n(1,o=t.quickset),"value"in t&&n(0,s=t.value),"disabled"in t&&n(2,a=t.disabled),"showAlertOnPastDateSelection"in t&&n(3,l=t.showAlertOnPastDateSelection)},[s,o,a,l,i,r,c,()=>{n(0,s=0),i("change",void 0)},t=>{const e=t.detail.date,o=e.getTime()-r(e.getTime());_d(s)!==_d(o)&&(n(0,s=_d(o)),i("change",e)),l&&_d(o)<wd()&&alert("Achtung: Dieses Datum liegt in der Vergangenheit, bitte prüfe ob es korrekt ist.")},t=>c(parseInt(t))]}class Uv extends ee{constructor(t){super(),te(this,t,Vv,Hv,a,{quickset:1,value:0,disabled:2,showAlertOnPastDateSelection:3})}}function Gv(t){let e,i,r;const o=[{class:"checkbox"},{size:"1.7rem"},{disabled:t[1]},t[3]];function s(e){t[4](e)}let a={};for(let t=0;t<o.length;t+=1)a=n(a,o[t]);return void 0!==t[0]&&(a.checked=t[0]),e=new lg({props:a}),vt.push((()=>Jt(e,"checked",s))),e.$on("change",t[5]),{c(){Xt(e.$$.fragment)},m(t,n){Zt(e,t,n),r=!0},p(t,[n]){const r=10&n?Kt(o,[o[0],o[1],2&n&&{disabled:t[1]},8&n&&Yt(t[3])]):{};!i&&1&n&&(i=!0,r.checked=t[0],St((()=>i=!1))),e.$set(r)},i(t){r||(zt(e.$$.fragment,t),r=!0)},o(t){Ft(e.$$.fragment,t),r=!1},d(t){Qt(e,t)}}}function Kv(t,e,i){let{value:r}=e,{disabled:o=!1}=e,{onChange:s}=e;return t.$$set=t=>{i(3,e=n(n({},e),y(t))),"value"in t&&i(0,r=t.value),"disabled"in t&&i(1,o=t.disabled),"onChange"in t&&i(2,s=t.onChange)},e=y(e),[r,o,s,e,function(t){r=t,i(0,r)},t=>{s&&s(t.detail)}]}class Yv extends ee{constructor(t){super(),te(this,t,Kv,Gv,a,{value:0,disabled:1,onChange:2})}}var Jv={title:t=>"Nutzer:in "+(t.createNew?"anlegen":"bearbeiten"),initialValues:{id:()=>vd.nextUnusedId("customer"),registration_date:()=>wd(),type:()=>"customer",lastname:()=>"",firstname:()=>"",renewed_on:()=>0,remark:()=>"",subscribed_to_newsletter:()=>!1,email:()=>"",street:()=>"",house_number:()=>"",postal_code:()=>"",city:()=>"",telephone_number:()=>"",heard:()=>"",highlight:()=>""},footerButtons:t=>[{text:"Abbrechen",onClick:t.closePopup},{text:"Löschen",onClick:()=>((t,e)=>{if(confirm("Soll diese/r Nutzer:in wirklich gelöscht werden?"))return vd.removeDoc(t).then((()=>Pe("Nutzer:in gelöscht!"))).then(e).catch((t=>{md.error(t),Ae("Nutzer:in konnte nicht gelöscht werden!",{persist:!0})}))})(t.doc,t.closePopup),color:"red",hidden:t.createNew,loadingText:"Nutzer:in wird gelöscht"},{text:"Speichern",onClick:()=>(async(t,e,n,i)=>{if(!i.wasChecked&&!i.checkValidity())return i.wasChecked=!0,void Ee("Einige benötigte Felder sind nicht (korrekt) ausgefüllt. Trotzdem speichern?");await vd.fetchByIdAndType(t.id,"customer").then((e=>n?e.length>0:e.some((e=>e._id!==t._id))))?Ae("Ein/e Nutzer:in mit dieser Nummer existiert bereits!",6e3):await(n?vd.createDoc(t):vd.updateDoc(t)).then((t=>Pe("Nutzer:in gespeichert!"))).then(e).catch((t=>{Ae("Nutzer:in konnte nicht gespeichert werden!",{persist:!0}),md.error(t)}))})(t.doc,t.closePopup,t.createNew,t.form),loadingText:"Nutzer:in wird gespeichert"}],inputs:[{id:"id",label:"Nutzernummer",group:"ID und Name",component:xg,props:{pattern:"[0-9]+",required:!0,onlyNumbers:!0}},{id:"firstname",label:"Vorname",group:"ID und Name",component:xg,props:{required:!0}},{id:"lastname",label:"Nachname",group:"ID und Name",component:xg,props:{required:!0}},{id:"street",label:"Straße",group:"Adresse",component:sm,props:{required:!0,searchFunction:t=>t=>vd.fetchUniqueCustomerFieldValues("street",t),noResultsText:"Straße noch nicht in Datenbank",valueField:"street"}},{id:"house_number",label:"Hausnummer",group:"Adresse",component:xg,props:{required:!0}},{id:"postal_code",label:"Postleitzahl",group:"Adresse",component:sm,props:{required:!0,onlyNumbers:!0,searchFunction:t=>t=>vd.fetchUniqueCustomerFieldValues("postal_code",t,!0),valueField:"postal_code",noResultsText:"PLZ noch nicht in Datenbank"}},{id:"city",label:"Stadt",group:"Adresse",component:sm,props:{required:!0,searchFunction:t=>t=>vd.fetchUniqueCustomerFieldValues("city",t),valueField:"city",noResultsText:"Stadt noch nicht in Datenbank"}},{id:"email",label:"E-Mail",group:"Kontakt",component:xg,props:{required:!0,pattern:".+@.+.[a-zA-Z]+"}},{id:"telephone_number",label:"Telefonnummer",group:"Kontakt",component:xg},{id:"subscribed_to_newsletter",label:"Newsletter",group:"Kontakt",component:Yv},{id:"registration_date",label:"Beitritt",group:"Mitgliedschaft",component:Uv,props:{container:t=>t.container}},{id:"renewed_on",label:"Verlängert am",group:"Mitgliedschaft",component:Uv,hidden:t=>t.createNew,props:{quickset:{0:"Heute"},container:t=>t.container}},{id:"heard",label:"Aufmerksam geworden",group:"Mitgliedschaft",component:Zh,props:{selectionOptions:["Internet","Freunde & Bekannte","Zeitung / Medien","Nachbarschaft"],isCreatable:!0,isMulti:!0,isClearable:!0}},{id:"remark",label:"Bemerkung",group:"Sonstiges",component:xg},{id:"highlight",label:"Markieren",group:"Sonstiges",component:Zh,props:{selectionOptions:[{value:"",label:"Nicht markieren"},{value:xd.HIGHLIGHT_GREEN,label:"<a style='color:"+xd.HIGHLIGHT_GREEN+"'>■</a> Grün"},{value:xd.HIGHLIGHT_BLUE,label:"<a style='color: "+xd.HIGHLIGHT_BLUE+"'>■</a> Blau"},{value:xd.HIGHLIGHT_YELLOW,label:"<a style='color: "+xd.HIGHLIGHT_YELLOW+"'>■</a> Gelb"},{value:xd.HIGHLIGHT_RED,label:"<a style='color: "+xd.HIGHLIGHT_RED+"'>■</a> Rot"}],isClearable:!0,isMulti:!1}}]};const Xv=(new Date).getTime()-31536e6;var Zv={filters:{"Newsletter: Ja":{required_fields:["subscribed_to_newsletter"],selectors:{subscribed_to_newsletter:{$eq:!0}}},"Newsletter: Nein":{required_fields:["subscribed_to_newsletter"],selectors:{subscribed_to_newsletter:{$eq:!1}}},"Beitritt vor > 1 Jahr":{required_fields:["registration_date"],selectors:{registration_date:{$lt:Xv}}},"Beitritt vor < 1 Jahr":{required_fields:["registration_date"],selectors:{registration_date:{$gt:Xv}}},"Verlängert vor > 1 Jahr":{required_fields:["renewed_on"],selectors:{renewed_on:{$lt:Xv}}},"Verlängert vor < 1 Jahr":{required_fields:["renewed_on"],selectors:{renewed_on:{$gt:Xv}}}},activeByDefault:[]};const Qv=t=>vd.selectorBuilder().withDocType("item").withField("id").equals(t).build();var ty={async onDataLoaded(t){const e=t.map((()=>Promise.withResolvers())),n=t.map((()=>Promise.withResolvers()));return async function(){const i=await vd.getRentalsByEntity("customer",t.map((t=>t.id)),["customer_id","returned_on"]),r=i.filter((t=>0===t.returned_on)),o=vd.countByKey(i,"customer_id"),s=vd.countByKey(r,"customer_id");t.forEach(((t,i)=>{e[i].resolve(o[t.id]||0),n[i].resolve(s[t.id]||0)}))}(),t.forEach(((t,i)=>{t.rental_count=e[i].promise,t.active_rental_count=n[i].promise})),t}};const ey={"Küche":{id:73,name:"Küche",slug:"kueche"},Garten:{id:28,name:"Garten",slug:"garten"},Freizeit:{id:32,name:"Freizeit",slug:"freizeit"},Haushalt:{id:26,name:"Haushalt",slug:"haushalt"},Kinder:{id:31,name:"Kinder",slug:"kinder"},Heimwerker:{id:29,name:"Heimwerker",slug:"heimwerker"}};var ny=new class{_settings(){return d(pd)}_productsUrl(){return`${this._settings().wcUrl}/products?consumer_key=${this._settings().wcKey}&consumer_secret=${this._settings().wcSecret}`}_productUrl(t){return`${this._settings().wcUrl}/products/${t}?consumer_key=${this._settings().wcKey}&consumer_secret=${this._settings().wcSecret}`}_translateItemAttributesForWc(t){const e=t.synonyms&&t.synonyms.trim().length>0,n=!(!t.expected_return_date||"outofstock"!=t.status);return{name:t.name,sku:String(t.id),stock_status:(i=t.status,["reserved"].includes(i)?"outofstock":["lost","repairing","forsale"].includes(i)?"onbackorder":i),attributes:[{id:1,name:"Pfand",position:0,visible:!0,variation:!1,options:[(t.deposit??"0")+" €"]}],categories:t.category.split(", ").filter((t=>t in ey)).map((t=>ey[t])),short_description:`<div class="hidden">Art.Nr.: ${t.id}</div>\n      ${t.description??""}<br /> ${e?`<small>(Synonyme: ${t.synonyms})</small>`:""}`,meta_data:[{key:"marke",value:t.brand??"-"},{key:"typenbezeichnung",value:t.itype??"-"},{key:"anzahl_teile",value:t.parts??"-"},{key:"zuruckerwartet",value:n?t.expected_return_date:""}]};var i}async fetchWithRetry(t,e={},n=0){try{let n=await fetch(t,e);if(n.ok)return n;throw new Error(`Failed to fetch '${t}', response code ${n.status}`)}catch(i){if(n<3)return md.warn(i),await this.fetchWithRetry(t,e,n+1);throw i}}async fetchItem(t){var e=await this.fetchWithRetry(this._productUrl(t));return e=await e.json()}async updateItem(t){await this.fetchWithRetry(this._productUrl(t.wc_id),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(this._translateItemAttributesForWc(t))})}async createItem(t){var e=await this.fetchWithRetry(this._productsUrl(),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(this._translateItemAttributesForWc(t))});return await e.json()}async deleteItem(t){await this.fetchWithRetry(this._productUrl(t.wc_id),{method:"DELETE"})}};const iy=(t,e)=>{Object.keys(t).forEach((n=>{const i=e.find((t=>t.key===n));i&&i.numeric&&""===t[n]&&(t[n]=0)}))};const ry=t=>"deleted"===t.doc.status;var oy={title:t=>"Gegenstand "+(t.createNew?"anlegen":"bearbeiten"),initialValues:{id:()=>vd.nextUnusedId("item"),added:()=>wd(),status:()=>"instock",type:()=>"item",name:()=>"",brand:()=>"",itype:()=>"",category:()=>"",deposit:()=>"",parts:()=>"",exists_more_than_once:()=>!1,manual:()=>"",package:()=>"",wc_url:()=>"",wc_id:()=>"",image:()=>"",highlight:()=>"",synonyms:()=>"",description:()=>""},height:"20rem",footerButtons:t=>[{text:"Abbrechen",onClick:t.closePopup},{text:"Löschen",onClick:()=>(async(t,e)=>{confirm("Soll dieser Gegenstand wirklich gelöscht werden?")&&(t.status="deleted",await vd.updateDoc(t).then((()=>Pe("Gegenstand als gelöscht markiert!"))).then(e).catch((t=>{md.error(t),Ae("Gegenstand konnte nicht gelöscht werden!",{persist:!0})})),await ny.deleteItem(t).then((()=>Pe("Gegenstand von der Webseite gelöscht!",3e3))).catch((t=>{Ee("Gegenstand konnte nicht von der Webseite gelöscht werden!",{persist:!0}),md.error(t)})))})(t.doc,t.closePopup),color:"red",hidden:"deleted"===t.doc.status||t.createNew,loadingText:"Gegenstand wird gelöscht"},{text:"Wiederherstellen",onClick:()=>(async(t,e)=>{if(confirm("Soll dieser Gegenstand wiederhergestellt werden?")){let n=(await vd.fetchDocsBySelector(Qv(t.id)))[0];n.status="instock",await ny.createItem(n).then((t=>(Pe("Gegenstand auf der Webseite erstellt!",3e3),n.wc_url=t.permalink,n.wc_id=t.id,vd.updateDoc(n)))).then(e).catch((t=>{Ee("Gegenstand konnte auf der Webseite nicht erstellt werden!",6e3),md.error(t)}))}})(t.doc,t.closePopup),color:"green",hidden:"deleted"!==t.doc.status,loadingText:"Gegenstand wird wiederhergestellt"},{text:"Speichern",onClick:t.createNew?()=>(async(t,e,n)=>{if(!n.wasChecked&&!n.checkValidity())return n.wasChecked=!0,void Ee("Einige benötigte Felder sind nicht (korrekt) ausgefüllt. Trotzdem speichern?");await vd.fetchByIdAndType(t.id,"item").then((t=>t.length>0))?Ae("Ein Gegenstand mit dieser Nummer existiert bereits!",6e3):(iy(t,$d),await ny.createItem(t).then((e=>{t.wc_url=e.permalink,t.wc_id=e.id,Pe("Gegenstand auf der Webseite erstellt!",3e3)})).catch((t=>{Ee("Gegenstand konnte auf der Webseite nicht erstellt werden!",{persist:!0}),md.error(t)})).then((()=>vd.createDoc(t))).then(e).then((()=>Pe("Gegenstand gespeichert!"))).catch((t=>{Ae("Gegenstand konnte nicht gespeichert werden!",{persist:!0}),md.error(t)})))})(t.doc,t.closePopup,t.form):()=>(async(t,e,n)=>{if(!n.wasChecked&&!n.checkValidity())return n.wasChecked=!0,void Ee("Einige benötigte Felder sind nicht (korrekt) ausgefüllt. Trotzdem speichern?");await vd.fetchByIdAndType(t.id,"item").then((e=>e.some((e=>e._id!==t._id))))?Ae("Ein Gegenstand mit dieser Nummer existiert bereits!",6e3):(iy(t,$d),await vd.updateDoc(t).then(e).then((()=>Pe("Gegenstand gespeichert!"))).catch((t=>{Ae("Gegenstand konnte nicht gespeichert werden!",6e3),md.error(t)})),ny.updateItem(t).then((()=>Pe("Gegenstand auf der Webseite aktualisiert!",3e3))).catch((t=>{Ee("Gegenstand auf der Webseite konnte nicht aktualisiert werden!",6e3),md.error(t)})))})(t.doc,t.closePopup,t.form),loadingText:"Gegenstand wird gespeichert"}],inputs:[{id:"id",label:"Nr",group:"Bezeichnung",component:xg,props:{required:!0,onlyNumbers:!0,pattern:"[0-9]+",disabled:ry}},{id:"name",label:"Name",group:"Bezeichnung",component:xg,props:{required:!0,disabled:ry}},{id:"brand",label:"Marke",group:"Bezeichnung",component:xg,props:{disabled:ry}},{id:"itype",label:"Typbezeichnung",group:"Bezeichnung",component:xg,props:{disabled:ry}},{id:"category",label:"Kategorie",group:"Eigenschaften",component:Zh,props:{disabled:ry,selectionOptions:["Küche","Haushalt","Garten","Kinder","Freizeit","Heimwerker"],isCreatable:!1,isMulti:!0,isClearable:!0}},{id:"deposit",label:"Pfand",group:"Eigenschaften",component:xg,props:{onlyNumbers:!0,disabled:ry}},{id:"added",label:"Erfasst am",group:"Eigenschaften",component:Uv,props:{disabled:ry,container:t=>t.container}},{id:"description",label:"Beschreibung",group:"Beschreibung",component:xg,props:{multiline:!0,disabled:ry}},{id:"synonyms",label:"Synonyme",group:"Beschreibung",component:Zh,props:{isCreatable:!0,isMulti:!0,isClearable:!0,placeholder:"Synonyme anlegen",disabled:ry}},{id:"parts",label:"Anzahl Teile",group:"Eigenschaften",component:xg,props:{disabled:ry}},{id:"image",label:"Bild",group:"Bild",component:xg,props:{disabled:ry}},{id:"status",label:"Status",group:"Status",component:Zh,props:{selectionOptions:[{value:"instock",label:"verfügbar"},{value:"outofstock",label:"verliehen"},{value:"onbackorder",label:"nicht verleihbar"},{value:"reserved",label:"reserviert"},{value:"lost",label:"verschollen"},{value:"repairing",label:"in Reparatur"},{value:"forsale",label:"zu verkaufen"}],isCreatable:!1,isMulti:!1,isClearable:!1,disabled:ry}},{id:"exists_more_than_once",label:"Mehrmals vorhanden",group:"Status",component:Yv,props:{disabled:ry}},{id:"highlight",label:"Markieren",group:"Status",component:Zh,props:{selectionOptions:[{value:"",label:"Nicht markieren"},{value:xd.HIGHLIGHT_GREEN,label:"<a style='color:"+xd.HIGHLIGHT_GREEN+"'>■</a> Grün"},{value:xd.HIGHLIGHT_BLUE,label:"<a style='color: "+xd.HIGHLIGHT_BLUE+"'>■</a> Blau"},{value:xd.HIGHLIGHT_YELLOW,label:"<a style='color: "+xd.HIGHLIGHT_YELLOW+"'>■</a> Gelb"},{value:xd.HIGHLIGHT_RED,label:"<a style='color: "+xd.HIGHLIGHT_RED+"'>■</a> Rot"}],isClearable:!0,isMulti:!1,disabled:ry}},{id:"internal_note",label:"Interne Notiz",group:"Status",component:xg,props:{multiline:!0}}]},sy={async onDataLoaded(t){const e=t.map((()=>Promise.withResolvers()));return async function(){const n=await vd.getRentalsByEntity("item",t.map((t=>t.id)),["item_id"]),i=vd.countByKey(n,"item_id");t.forEach(((t,n)=>e[n].resolve(i[t.id]||0)))}(),t.forEach(((t,n)=>{t.rental_count=e[n].promise})),t}};(()=>{const t=oe({})})();const ay=(()=>{const t=oe(new Array);return{...t,add:e=>t.update((t=>e?[...t,e]:t))}})(),ly=async t=>{try{return(await vd.fetchDocsBySelector(Qv(t)))[0]}catch(e){throw md.error(e),`Failed to load item with id ${t}`}},cy=async(t,e,n)=>{t.status=e,t.expected_return_date=((t,e)=>{const n="outofstock"===t.status&&e&&e.to_return_on&&e.to_return_on>=wd()&&!e.returned_on;let i="";return"reserved"===t.status?i="Reserviert und noch nicht abgeholt":n&&(i=yd(e.to_return_on)),i})(t,n),await vd.updateDoc(t),await ny.updateItem(t),Pe(`'${t.name}' wurde als ${"instock"===t.status?"verfügbar":"verliehen"} markiert.`)};async function uy(t){const{doc:e,closePopup:n,createNew:i,contextVars:r,form:o}=t;if(o.wasChecked||o.checkValidity()){if(iy(e,Ad),void 0!==r.initialItemId&&r.initialItemId!==e.item_id)try{const t=await ly(r.initialItemId);await cy(t,"instock"),Ee(`Status von '${r.initialItemName}' wurde auf 'verfügbar' geändert. Bitter überprüfe ob das stimmt.`,{persist:!0})}catch(t){md.error(`Failed to update status of initial item with name ${r.initialItemName} id ${r.initialItemId}, ${t}`),Ee(`Status von '${r.initialItemName}' konnte nicht aktualisiert werden. Bitte überprüfe den Status dieses Gegenstandes.`,{persist:!0})}if(r.updateItemStatus)try{const t=await ly(e.item_id);e.image=t.image,await cy(t,(s=e,s.returned_on&&0!==s.returned_on&&s.returned_on<=(new Date).getTime()||s.rented_on>(new Date).getTime()?"instock":"outofstock"),e)}catch(t){md.error(`Failed to update status of item with id ${e.item_id}, ${t}`),Ae(`Status des Gegenstandes mit ID '${e.item_id}' konnte nicht aktualisiert werden!`,{persist:!0})}else md.debug(`Did not update item of rental ${e._id} because updateItemStatus is false.`);var s;await(i?vd.createDoc(e):vd.updateDoc(e)).then((t=>Pe("Leihvorgang gespeichert!"))).then((()=>ay.add(e.passing_out_employee))).then((()=>ay.add(e.receiving_employee))).then(n).catch((t=>{Ae("Leihvorgang konnte nicht gespeichert werden!",{persist:!0}),md.error(t)}))}else Ae("Nicht alle benötigten Felder sind (korrekt) ausgefüllt.",3e3)}var dy=!1;function hy(){var t={};for(let e of d(ay))t[e]=e;return t}function fy(t){if(""!=t.doc.receiving_employee)return t.doc.receiving_employee;let e;for(e of d(ay));return e||(e=t.doc.passing_out_employee),e}const py=(t,e)=>{t.doc.item_id!==e.id&&(t.updateDoc({item_id:e.id,item_name:e.name,deposit:e.deposit}),((t,e)=>{e?(t.contextVars.updateItemStatus=!1,dy=!0):dy=!1})(t,e.exists_more_than_once),my(e))},gy=(t,e)=>{t.updateDoc({customer_name:e.lastname,customer_id:e.id}),yy(e.id)},my=async t=>{var e={instock:"verfügbar",outofstock:"verliehen",reserved:"reserviert",onbackorder:"temporär nicht verfügbar / in Reparatur",lost:"verschollen",repairing:"in Reparatur",forsale:"zu verkaufen"}[t.status];if(["outofstock","reserved","onbackorder","lost","repairing","forsale"].includes(t.status)?Ae(`${t.name} (${t.id}) ist nicht verfügbar, hat Status: ${e}`,1e4):"undefined"==t.status&&Ee(`Fehler beim Statuscheck, ${t.name} (${t.id}) hat Status: ${e}`,1e4),t.highlight&&""!==t.highlight){const e=(t=>{switch(t){case xd.HIGHLIGHT_GREEN:return"Grün, hängt eventuell vorne im Schaufenster";case xd.HIGHLIGHT_YELLOW:return"Gelb, hängt eventuell vorne im Schaufenster";case xd.HIGHLIGHT_RED:return"Rot, ACHTUNG, etwas könnte mit dem Gegenstand nicht in Ordnung sein oder muss beachtet werden";case xd.HIGHLIGHT_BLUE:return"Blau"}return"Unbekannte farbliche Markierung, bitte nachsehen"})(t.highlight);Ie(`${t.name} (${t.id}) wurde farblich markiert: ${e}`,{persist:!0})}};let vy=(t,e)=>null==t|null==e?0:void 0!==t.id&void 0!==e.id&!(isNaN(t.id)|isNaN(e.id))?t.id-e.id:isNaN(t)|isNaN(e)?0:t-e;const yy=async t=>{vd.fetchAllDocsBySelector((t=>vd.selectorBuilder().withDocType("rental").withField("customer_id").equals(t).withField("returned_on").equals(0).build())(t),["item_name"]).then((t=>t.map((t=>t.item_name)))).then((t=>{t.length>0&&t.length<3?Ee(`Nutzer:in hat schon diese Gegenstände ausgeliehen: ${t.join(", ")}`,6e3):t.length>=3&&Ae(`Nutzer:in hat schon mehr als 2 Gegenstände ausgeliehen: ${t.join(", ")}`,6e3)})),vd.fetchAllDocsBySelector((t=>vd.selectorBuilder().withDocType("customer").withField("id").equals(t).build())(t),["remark","highlight"]).then((t=>{if(t.length>0&&t[0].remark&&""!==t[0].remark&&Ae(t[0].remark,{persist:!0}),t.length>0&&t[0].highlight&&""!==t[0].highlight){Ie("Diese/r Nutzer:in wurde farblich markiert: "+(t=>{switch(t){case xd.HIGHLIGHT_GREEN:return"Grün, ist Teil des Teams";case xd.HIGHLIGHT_YELLOW:return"Gelb";case xd.HIGHLIGHT_RED:return"Rot, ACHTUNG, bitte nachsehen";case xd.HIGHLIGHT_BLUE:return"Blau"}return"unbekannte Markierung, bitte nachsehen"})(t[0].highlight),{persist:!0})}}))};var by={title:t=>"Leihvorgang "+(t.createNew?"anlegen":"bearbeiten"),initialValues:{rented_on:()=>wd(),to_return_on:()=>_d((new Date).getTime()+6048e5),returned_on:()=>0,extended_on:()=>0,type:()=>"rental",image:()=>"",item_id:()=>"",item_name:()=>"",customer_id:()=>"",customer_name:()=>"",passing_out_employee:()=>"",receiving_employee:()=>"",deposit:()=>"",deposit_returned:()=>"",remark:()=>""},onMount:t=>()=>{dy=!1,t.contextVars.updateItemStatus=!0,t.contextVars.initialItemId=t.doc.item_id,t.contextVars.initialItemName=t.doc.item_name,t.doc.item_id&&vd.fetchDocsBySelector(Qv(t.doc.item_id),["id","name","deposit","exists_more_than_once"]).then((e=>py(t,e[0])))},footerButtons:t=>[{text:"Abbrechen",onClick:t.closePopup},{text:"Löschen",onClick:()=>(async(t,e)=>{confirm("Soll dieser Leihvorgang wirklich gelöscht werden?")&&vd.removeDoc(t).then((()=>Pe("Leihvorgang gelöscht!"))).then(e).catch((t=>{md.error(t),Ae("Leihvorgang konnte nicht gelöscht werden!",6e3)}))})(t.doc,t.closePopup),color:"red",hidden:t.createNew,loadingText:"Leihvorgang wird gelöscht"},{text:"Zurückgeben "+(fy(t)?`\n(als ${fy(t)})`:""),onClick:()=>async function(t,e){const{doc:n,closePopup:i,createNew:r,contextVars:o}=t;r?md.error("createNew is true if it should be false"):(n.deposit_returned=n.deposit_returned?n.deposit_returned:n.deposit,n.receiving_employee=n.receiving_employee?n.receiving_employee:e,n.returned_on=n.returned_on?n.returned_on:wd(),await uy(t))}(t,fy(t)),color:"green",hidden:t.createNew,loadingText:"Leihvorgang wird abgeschlossen"},{text:"Speichern",onClick:()=>uy(t),loadingText:"Leihvorgang wird gespeichert"}],inputs:[{id:"item_id",label:"Nr",group:"Gegenstand",component:sm,nobind:!0,props:{required:!0,localSorting:!0,sortByMatchedKeywords:!0,itemSortFunction:()=>vy,valueField:"id",onlyNumbers:!0,searchFunction:t=>t=>{return vd.fetchDocsBySelector((e=t,vd.selectorBuilder().withField("id").numericFieldStartsWith(e).withDocType("item").withField("status").isNotEqualTo("deleted").build()),["id","name","deposit","exists_more_than_once","status","highlight"]);var e},suggestionFormat:t=>(t,e)=>`${String(t).padStart(4,"0")}: ${e}`,noResultsText:"Kein Gegenstand mit dieser Id",onSelected:t=>e=>{py(t,e)}}},{id:"item_name",label:"Name",group:"Gegenstand",component:sm,nobind:!0,props:{valueField:"name",searchFunction:t=>t=>{return vd.fetchDocsBySelector((e="name",n=t,vd.selectorBuilder().withField(e).startsWithIgnoreCase(n).withField("status").isNotEqualTo("deleted").withDocType("item").build()),["id","name","deposit","exists_more_than_once"]);var e,n},suggestionFormat:t=>(t,e)=>`${String(t).padStart(4,"0")}: ${e}`,noResultsText:"Kein Gegenstand mit diesem Name",onSelected:t=>e=>{py(t,e)}}},{id:"update_status",label:"Status aktualisieren",group:"Gegenstand",component:Yv,nobind:!0,hidden:()=>dy,props:{value:t=>t.contextVars.updateItemStatus,onChange:t=>e=>t.contextVars.updateItemStatus=e}},{id:"rented_on",label:"Ausgeliehen am",group:"Zeitraum",component:Uv,props:{container:t=>t.container}},{id:"extended_on",label:"Verlängert am",group:"Zeitraum",hidden:t=>t.createNew,component:Uv,props:{quickset:{0:"Heute"},container:t=>t.container}},{id:"to_return_on",label:"Zurückerwartet am",group:"Zeitraum",component:Uv,props:{quickset:{7:"1 Woche",14:"2 Wochen",21:"3 Wochen"},container:t=>t.container,showAlertOnPastDateSelection:!0}},{id:"returned_on",label:"Zurückgegeben am",group:"Zeitraum",component:Uv,hidden:t=>t.createNew,props:{quickset:{0:"Heute"},container:t=>t.container}},{id:"customer_id",label:"Nr",group:"Nutzer:in",component:sm,nobind:!0,props:{required:!0,localSorting:!0,sortByMatchedKeywords:!0,itemSortFunction:()=>vy,localFiltering:!0,valueField:"id",onlyNumbers:!0,searchFunction:t=>t=>{return vd.fetchDocsBySelector((e=t,vd.selectorBuilder().withField("id").numericFieldStartsWith(e).withDocType("customer").build()),["id","firstname","lastname"],["id"]);var e},suggestionFormat:t=>(t,e,n)=>`${t}: ${e} ${n}`,noResultsText:"Kein/e Nutzer:in mit dieser Nummer",onSelected:t=>e=>{gy(t,e)}}},{id:"customer_name",label:"Nachname",group:"Nutzer:in",component:sm,nobind:!0,props:{valueField:"lastname",searchFunction:t=>t=>{return vd.fetchDocsBySelector((e="lastname",n=t,vd.selectorBuilder().withField(e).startsWithIgnoreCaseAndDiacritics(n).withDocType("customer").build()),["id","firstname","lastname"]);var e,n},suggestionFormat:t=>(t,e,n)=>`${t}: ${e} ${n}`,noResultsText:"Kein/e Nutzer:in mit diesem Name",onSelected:t=>e=>{gy(t,e)}}},{id:"deposit",label:"Pfand",group:"Pfand",component:xg,props:{required:!0,pattern:"[0-9]+",onlyNumbers:!0}},{id:"deposit_returned",label:"Pfand zurück",group:"Pfand",hidden:t=>t.createNew,component:xg,props:{quickset:t=>({[t.doc.deposit]:t.doc.deposit}),onlyNumbers:!0}},{id:"passing_out_employee",label:"Ausgabe",group:"Mitarbeiter",component:xg,props:{required:!0,quickset:hy}},{id:"receiving_employee",label:"Rücknahme",group:"Mitarbeiter",hidden:t=>t.createNew,component:xg,props:{quickset:hy}},{id:"remark",label:"Bemerkung",group:"Mitarbeiter",component:xg,props:{multiline:!0}}]};const _y=864e5,wy=wd();var xy=[{route:"/customers",inputs:Jv,columns:Cd,filters:Zv,docType:"customer",title:"Nutzer:innen",onData:ty.onDataLoaded},{route:"/items",inputs:oy,columns:$d,filters:{filters:{"nicht gelöscht":{required_fields:["status"],selectors:{status:{$ne:"deleted"}}},"gelöscht":{required_fields:["status"],selectors:{status:{$eq:"deleted"}}},"verfügbar":{required_fields:["status"],selectors:{status:{$eq:"instock"}}},ausgeliehen:{required_fields:["status"],selectors:{status:{$eq:"outofstock"}}},reserviert:{required_fields:["status"],selectors:{status:{$eq:"reserved"}}},"nicht verleihbar":{required_fields:["status"],selectors:{status:{$eq:"onbackorder"}}},verschollen:{required_fields:["status"],selectors:{status:{$eq:"lost"}}},"in Reparatur":{required_fields:["status"],selectors:{status:{$eq:"repairing"}}},"zu verkaufen":{required_fields:["status"],selectors:{status:{$eq:"forsale"}}},"Kategorie Küche":{required_fields:["category"],selectors:{category:{$eq:"Küche"}}},"Kategorie Haushalt":{required_fields:["category"],selectors:{category:{$eq:"Haushalt"}}},"Kategorie Garten":{required_fields:["category"],selectors:{category:{$eq:"Garten"}}},"Kategorie Heimwerker":{required_fields:["category"],selectors:{category:{$eq:"Heimwerker"}}},"Kategorie Kinder":{required_fields:["category"],selectors:{category:{$eq:"Kinder"}}},"Kategorie Freizeit":{required_fields:["category"],selectors:{category:{$eq:"Freizeit"}}}},activeByDefault:["nicht gelöscht"]},docType:"item",title:"Gegenstände",onData:sy.onDataLoaded},{route:"/rentals",inputs:by,columns:Ad,filters:{filters:{aktuell:{required_fields:["returned_on"],selectors:{$or:[{returned_on:{$eq:0}},{returned_on:{$exists:!1}},{$and:[{returned_on:{$gte:wy}},{returned_on:{$lt:wy+_y}}]}]}},abgeschlossen:{required_fields:["returned_on"],selectors:{returned_on:{$gt:0}}},"Rückgabe heute":{required_fields:["to_return_on"],selectors:{$and:[{to_return_on:{$gte:wy}},{to_return_on:{$lt:wy+_y}}]}},"verspätet":{required_fields:["returned_on","to_return_on"],selectors:{$and:[{to_return_on:{$gt:0}},{returned_on:{$eq:0}},{to_return_on:{$lt:wy}}]}}},activeByDefault:["aktuell"]},docType:"rental",title:"Leihvorgänge",onData:{async onDataLoaded(t){const e=t.map((()=>Promise.withResolvers())),n=t.map((()=>Promise.withResolvers()));function i(t,e){return e.sort(((t,e)=>t-e)),{$and:[{type:t},{id:{$gte:e.length?e[0]:0,$lte:e.length?e[e.length-1]:999999,$or:e}}]}}return async function(){const n=i("item",t.map((t=>t.item_id))),r=await vd.fetchDocsBySelector(n,["id","_rev","highlight"],[],10*t.length);t.forEach(((t,n)=>{e[n].resolve(r.find((e=>e.id===t.item_id))?.highlight||"")}))}(),async function(){const e=i("customer",t.map((t=>t.customer_id))),r=await vd.fetchDocsBySelector(e,["id","_rev","highlight"],[],10*t.length);t.forEach(((t,e)=>{n[e].resolve(r.find((e=>e.id===t.customer_id))?.highlight||"")}))}(),t.forEach(((t,i)=>{t.item_highlight=e[i].promise,t.customer_highlight=n[i].promise})),t}}.onDataLoaded}],ky=!1;const $y=async()=>{ky||(await Promise.all([...Cd,...$d,...Ad].filter((t=>!t.disableSort)).map((t=>vd.createIndex({index:{fields:t.sort?["type",...t.sort]:["type",t.key]}})))),await vd.createIndex({index:{fields:["type"]}}),ky=!0)},Sy=(new Date).getTime(),Cy=()=>JSON.parse(localStorage.getItem("logs")??"[]"),My=t=>{return e=[...Cy(),t],localStorage.setItem("logs",JSON.stringify(e.filter((t=>Sy-t.time<6048e5))));var e};function Oy(t){md.setLevel(md.DEBUG);var e=md.createDefaultHandler();return md.setHandler((function(t,n){e(t,n),"object"==typeof t[0]&&(t[0]=t[0].toString()),My({time:(new Date).getTime(),level:n.level,message:t[0]})})),[]}class Dy extends ee{constructor(t){super(),te(this,t,Oy,null,a,{})}}function Ty(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ly(e){let n,i,r,o=e[1](e[2])+"";return{c(){n=B(o),i=z(),r=I("br")},m(t,e){L(t,n,e),L(t,i,e),L(t,r,e)},p:t,d(t){t&&A(n),t&&A(i),t&&A(r)}}}function Ay(e){let n,i,r,o,s,a,l,c,u=Cy(),d=[];for(let t=0;t<u.length;t+=1)d[t]=Ly(Ty(e,u,t));return{c(){n=I("div"),i=I("div"),r=I("h1"),r.textContent="Logs",o=z(),s=I("button"),s.textContent="Download",a=z();for(let t=0;t<d.length;t+=1)d[t].c();q(i,"class","header"),q(n,"class","content svelte-1jmp5ie")},m(t,u){L(t,n,u),O(n,i),O(i,r),O(i,o),O(i,s),O(n,a);for(let t=0;t<d.length;t+=1)d[t].m(n,null);l||(c=R(s,"click",e[0]),l=!0)},p(t,[e]){if(2&e){let i;for(u=Cy(),i=0;i<u.length;i+=1){const r=Ty(t,u,i);d[i]?d[i].p(r,e):(d[i]=Ly(r),d[i].c(),d[i].m(n,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=u.length}},i:t,o:t,d(t){t&&A(n),E(d,t),l=!1,c()}}}function Ey(t){const e=t=>`${new Date(t.time).toLocaleDateString()} ${new Date(t.time).toLocaleTimeString()} [${t.level.name}] ${t.message}`;return[function(){var t=Cy().map(e).join("\n"),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",`LeihLokalVerwaltung_Logs_${(new Date).getUTCDate()}_${(new Date).getUTCMonth()+1}`),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},e]}class Iy extends ee{constructor(t){super(),te(this,t,Ey,Ay,a,{})}}function Py(t,{from:e,to:n},i={}){const r=getComputedStyle(t),o="none"===r.transform?"":r.transform,[a,l]=r.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*a/n.width-(n.left+a),u=e.top+e.height*l/n.height-(n.top+l),{delay:d=0,duration:h=(t=>120*Math.sqrt(t)),easing:f=Xf}=i;return{delay:d,duration:s(h)?h(Math.sqrt(c*c+u*u)):h,easing:f,css:(t,i)=>{const r=i*c,s=i*u,a=t+i*e.width/n.width,l=t+i*e.height/n.height;return`transform: ${o} translate(${r}px, ${s}px) scale(${a}, ${l});`}}}var By,zy=new Uint8Array(16);function Fy(){if(!By&&!(By="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return By(zy)}var Ry=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ny(t){return"string"==typeof t&&Ry.test(t)}for(var jy=[],qy=0;qy<256;++qy)jy.push((qy+256).toString(16).substr(1));function Hy(t,e,n){var i=(t=t||{}).random||(t.rng||Fy)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jy[t[e+0]]+jy[t[e+1]]+jy[t[e+2]]+jy[t[e+3]]+"-"+jy[t[e+4]]+jy[t[e+5]]+"-"+jy[t[e+6]]+jy[t[e+7]]+"-"+jy[t[e+8]]+jy[t[e+9]]+"-"+jy[t[e+10]]+jy[t[e+11]]+jy[t[e+12]]+jy[t[e+13]]+jy[t[e+14]]+jy[t[e+15]]).toLowerCase();if(!Ny(n))throw TypeError("Stringified UUID is invalid");return n}(i)}function Wy(t,e){const n=new ResizeObserver(e);return n.observe(t),{destroy(){n.unobserve(t)}}}function Vy(e){let n,i,r,o;return{c(){n=P("svg"),i=P("path"),q(i,"d","M0 281.296l0 -68.355q1.953 -37.107 29.295 -62.496t64.449 -25.389l93.744 0l0 -31.248q0 -39.06 27.342 -66.402t66.402 -27.342l312.48 0q39.06 0 66.402 27.342t27.342 66.402l0 31.248l93.744 0q37.107 0 64.449 25.389t29.295 62.496l0 68.355q0 25.389 -18.553 43.943t-43.943 18.553l0 531.216q0 52.731 -36.13 88.862t-88.862 36.13l-499.968 0q-52.731 0 -88.862 -36.13t-36.13 -88.862l0 -531.216q-25.389 0 -43.943 -18.553t-18.553 -43.943zm62.496 0l749.952 0l0 -62.496q0 -13.671 -8.789 -22.46t-22.46 -8.789l-687.456 0q-13.671 0 -22.46 8.789t-8.789 22.46l0 62.496zm62.496 593.712q0 25.389 18.553 43.943t43.943 18.553l499.968 0q25.389 0 43.943 -18.553t18.553 -43.943l0 -531.216l-624.96 0l0 531.216zm62.496 -31.248l0 -406.224q0 -13.671 8.789 -22.46t22.46 -8.789l62.496 0q13.671 0 22.46 8.789t8.789 22.46l0 406.224q0 13.671 -8.789 22.46t-22.46 8.789l-62.496 0q-13.671 0 -22.46 -8.789t-8.789 -22.46zm31.248 0l62.496 0l0 -406.224l-62.496 0l0 406.224zm31.248 -718.704l374.976 0l0 -31.248q0 -13.671 -8.789 -22.46t-22.46 -8.789l-312.48 0q-13.671 0 -22.46 8.789t-8.789 22.46l0 31.248zm124.992 718.704l0 -406.224q0 -13.671 8.789 -22.46t22.46 -8.789l62.496 0q13.671 0 22.46 8.789t8.789 22.46l0 406.224q0 13.671 -8.789 22.46t-22.46 8.789l-62.496 0q-13.671 0 -22.46 -8.789t-8.789 -22.46zm31.248 0l62.496 0l0 -406.224l-62.496 0l0 406.224zm156.24 0l0 -406.224q0 -13.671 8.789 -22.46t22.46 -8.789l62.496 0q13.671 0 22.46 8.789t8.789 22.46l0 406.224q0 13.671 -8.789 22.46t-22.46 8.789l-62.496 0q-13.671 0 -22.46 -8.789t-8.789 -22.46zm31.248 0l62.496 0l0 -406.224l-62.496 0l0 406.224z"),q(n,"width","1.5em"),q(n,"height","1.5em"),q(n,"viewBox","0 0 875 1000"),q(n,"xmlns","http://www.w3.org/2000/svg")},m(t,s){L(t,n,s),O(n,i),r||(o=R(n,"click",j(e[0])),r=!0)},p:t,i:t,o:t,d(t){t&&A(n),r=!1,o()}}}function Uy(t){return[function(e){gt.call(this,t,e)}]}class Gy extends ee{constructor(t){super(),te(this,t,Uy,Vy,a,{})}}let Ky={};const Yy=(t,e=null)=>{document.execCommand(t,!1,e)},Jy=(t,e)=>{if(e=e||(t&&t.tagName?[t.tagName]:[]),!t||!t.parentNode)return e;const n=(t=t.parentNode).tagName;return t.style&&t.getAttribute&&[t.style.textAlign||t.getAttribute("align"),t.style.color||"FONT"===n&&"forecolor",t.style.backgroundColor&&"backcolor"].filter((t=>t)).forEach((t=>e.push(t))),"DIV"===n?e:(e.push(n),Jy(t,e).filter((t=>null!=t)))},Xy=t=>{const e=document.getSelection();if(Ky.range=null,e.rangeCount){let n,i=Ky.range=e.getRangeAt(0),r=document.createRange();r.selectNodeContents(t),r.setEnd(i.startContainer,i.startOffset),n=(r+"").length,Ky.metaRange={start:n,end:n+(i+"").length}}},Zy=t=>{let e,n=Ky.metaRange,i=Ky.range,r=document.getSelection();if(i){if(n&&n.start!==n.end){let i,r=0,o=[t],s=!1,a=!1;for(e=document.createRange();!a&&(i=o.pop());)if(3===i.nodeType){let t=r+i.length;!s&&n.start>=r&&n.start<=t&&(e.setStart(i,n.start-r),s=!0),s&&n.end>=r&&n.end<=t&&(e.setEnd(i,n.end-r),a=!0),r=t}else{let t=i.childNodes,e=t.length;for(;e>0;)e-=1,o.push(t[e])}}r.removeAllRanges(),r.addRange(e||i)}},Qy=(t,e)=>{Array.from(t).forEach((t=>{e.some((e=>e===t.tagName.toLowerCase()))&&(t.children.length&&Qy(t.children,e),(t=>{const e=document.createDocumentFragment();for(;t.firstChild;){const n=t.removeChild(t.firstChild);e.appendChild(n)}t.parentNode.replaceChild(e,t)})(t))}))},tb=t=>Object.keys(t).map((e=>t[e])),eb=t=>(["style","script","applet","embed","noframes","noscript"].forEach((e=>{t=t.replace(new RegExp(`<${e}.*?${e}(.*?)>`,"gi"),"")})),t),nb=(t,e)=>t===e||!!t.parentElement&&nb(t.parentElement,e),ib='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z"></path><path d="M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z"></path></svg>';var rb={viewHtml:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path fill="none" stroke="currentColor" stroke-width="8" stroke-miterlimit="10" d="M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9"></path></svg>',title:"View HTML",result:function(){let t=d(this.references),e=d(this.state).actionObj,n=d(this.helper);n.showEditor=!n.showEditor,t.editor.style.display=n.showEditor?"block":"none",t.raw.style.display=n.showEditor?"none":"block",n.showEditor?t.editor.innerHTML=t.raw.value:t.raw.value=t.editor.innerHTML,setTimeout((()=>{Object.keys(e).forEach((t=>e[t].disabled=!n.showEditor)),e.viewHtml.disabled=!1,e.viewHtml.active=!n.showEditor,this.state.update((t=>(t.actionBtns=tb(e),t.actionObj=e,t)))}))}},undo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z"></path></svg>',title:"Undo",result:()=>Yy("undo")},redo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z"></path></svg>',title:"Redo",result:()=>Yy("redo")},b:{icon:"<b>B</b>",title:"Bold",result:()=>Yy("bold")},i:{icon:"<i>I</i>",title:"Italic",result:()=>Yy("italic")},u:{icon:"<u>U</u>",title:"Underline",result:()=>Yy("underline")},strike:{icon:"<strike>S</strike>",title:"Strike-through",result:()=>Yy("strikeThrough")},sup:{icon:"A<sup>2</sup>",title:"Superscript",result:()=>Yy("superscript")},sub:{icon:"A<sub>2</sub>",title:"Subscript",result:()=>Yy("subscript")},h1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>Yy("formatBlock","<H1>")},h2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>Yy("formatBlock","<H2>")},p:{icon:"&#182;",title:"Paragraph",result:()=>Yy("formatBlock","<P>")},blockquote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>Yy("formatBlock","<BLOCKQUOTE>")},ol:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z"></path></svg>',title:"Ordered List",result:()=>Yy("insertOrderedList")},ul:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z"></path></svg>',title:"Unordered List",result:()=>Yy("insertUnorderedList")},hr:{icon:"&#8213;",title:"Horizontal Line",result:()=>Yy("insertHorizontalRule")},left:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z"></path></svg>',title:"Justify left",result:()=>Yy("justifyLeft")},right:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z"></path></svg>',title:"Justify right",result:()=>Yy("justifyRight")},center:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z"></path></svg>',title:"Justify center",result:()=>Yy("justifyCenter")},justify:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z"></path></svg>',title:"Justify full",result:()=>Yy("justifyFull")},a:{icon:ib,title:"Insert link",result:function(){const t=d(this.state).actionObj,e=d(this.references);if(t.a.active){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(document.getSelection().focusNode),e.removeAllRanges(),e.addRange(n),Yy("unlink"),t.a.title="Insert link",t.a.icon=ib,this.state.update((e=>(e.actionBtn=tb(t),e.actionObj=t,e)))}else Xy(e.editor),e.modal.$set({show:!0,event:"linkUrl",title:"Insert link",label:"Url"}),d(this.helper).link||(this.helper.update((t=>(t.link=!0,t))),e.modal.$on("linkUrl",(n=>{Zy(e.editor),Yy("createLink",n.detail),t.a.title="Unlink",t.a.icon='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z"></path><path d="M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z"></path></svg>',this.state.update((e=>(e.actionBtn=tb(t),e.actionObj=t,e)))})))}},image:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M64 17v38H8V17h56m8-8H0v54h72V9z"></path><path d="M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z"></path></svg>',title:"Image",result:function(){const t=d(this.references);Xy(t.editor),t.modal.$set({show:!0,event:"imageUrl",title:"Insert image",label:"Url"}),d(this.helper).image||(this.helper.update((t=>(t.image=!0,t))),t.modal.$on("imageUrl",(e=>{Zy(t.editor),Yy("insertImage",e.detail)})))}},forecolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z"></path></svg>',title:"Text color",colorPicker:!0,result:function(){ob.call(this,"foreColor")}},backcolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M36.5 22.3l-6.3 18.1H43l-6.3-18.1z"></path><path d="M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z"></path></svg>',title:"Background color",colorPicker:!0,result:function(){ob.call(this,"backColor")}},removeFormat:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z"></path></svg>',title:"Remove format",result:function(){const t=d(this.references),e=window.getSelection();if(!e.toString().length){Qy(t.editor.children,this.removeFormatTags);const n=document.createRange();n.selectNodeContents(t.editor),e.removeAllRanges(),e.addRange(n)}Yy("removeFormat"),e.removeAllRanges()}}};const ob=function(t){const e=d(this.references);Xy(e.editor),console.log(e.colorPicker),e.colorPicker.$set({show:!0,event:t}),d(this.helper)[t]||(this.helper.update((e=>(e[t]=!0,e))),e.colorPicker.$on(t,(n=>{let i=n.detail;if(i.modal){this.modal.$set({show:!0,event:"colorHref",title:"Text color",label:"foreColor"===t?"Text color":"Background color"});const n=t;d(this.helper)[`${n}Modal`]||(d(this.helper)[`${n}Modal`]=!0,this.modal.$on("colorHref",(t=>{let i=t.detail;Zy(e.editor),Yy(n,i)})))}else Zy(e.editor),Yy(t,i.color)})))};function sb(t){let e;return{c(){e=I("span"),e.textContent="Required",q(e,"class","msg-error svelte-42yfje")},m(t,n){L(t,e,n)},d(t){t&&A(e)}}}function ab(e){let n,i,r,s,a,l,c,u,d,h,f,p,g,m,v,y,b,_,w,x,k,$,S=e[2]&&sb();return{c(){n=I("div"),i=I("div"),r=z(),s=I("div"),a=I("div"),l=I("span"),c=B(e[3]),u=z(),d=I("form"),h=I("label"),f=I("input"),p=z(),g=I("span"),m=I("span"),v=B(e[4]),y=z(),S&&S.c(),b=z(),_=I("button"),_.textContent="Confirm",w=z(),x=I("button"),x.textContent="Cancel",q(i,"class","cl-editor-overlay svelte-42yfje"),q(l,"class","modal-title svelte-42yfje"),q(f,"type","text"),q(f,"name","text"),q(f,"class","svelte-42yfje"),q(m,"class","svelte-42yfje"),q(g,"class","input-info svelte-42yfje"),q(h,"class","modal-label svelte-42yfje"),X(h,"input-error",e[2]),q(_,"class","modal-button modal-submit svelte-42yfje"),q(_,"type","submit"),q(x,"class","modal-button modal-reset svelte-42yfje"),q(x,"type","reset"),q(a,"class","modal-box svelte-42yfje"),q(s,"class","cl-editor-modal svelte-42yfje"),G(n,"display",e[0]?"block":"none")},m(t,o){L(t,n,o),O(n,i),O(n,r),O(n,s),O(s,a),O(a,l),O(l,c),O(a,u),O(a,d),O(d,h),O(h,f),e[10](f),U(f,e[1]),O(h,p),O(h,g),O(g,m),O(m,v),O(g,y),S&&S.m(g,null),O(d,b),O(d,_),O(d,w),O(d,x),k||($=[R(i,"click",e[7]),R(f,"keyup",e[8]),R(f,"input",e[11]),R(x,"click",e[7]),R(d,"submit",N(e[12]))],k=!0)},p(t,[e]){8&e&&V(c,t[3]),2&e&&f.value!==t[1]&&U(f,t[1]),16&e&&V(v,t[4]),t[2]?S||(S=sb(),S.c(),S.m(g,null)):S&&(S.d(1),S=null),4&e&&X(h,"input-error",t[2]),1&e&&G(n,"display",t[0]?"block":"none")},i:t,o:t,d(t){t&&A(n),e[10](null),S&&S.d(),k=!1,o($)}}}function lb(t,e,n){let i=new ht,{show:r=!1}=e,{text:o=""}=e,{event:s=""}=e,{title:a=""}=e,{label:l=""}=e,{error:c=!1}=e,u={};function d(){o?(console.log("dispatcher",o,s),i(s,o),h()):(n(2,c=!0),u.text.focus())}function h(){n(0,r=!1),n(1,o=""),n(2,c=!1)}return t.$$set=t=>{"show"in t&&n(0,r=t.show),"text"in t&&n(1,o=t.text),"event"in t&&n(9,s=t.event),"title"in t&&n(3,a=t.title),"label"in t&&n(4,l=t.label),"error"in t&&n(2,c=t.error)},t.$$.update=()=>{33&t.$$.dirty&&r&&setTimeout((()=>{u.text.focus()}))},[r,o,c,a,l,u,d,h,function(){n(2,c=!1)},s,function(t){vt[t?"unshift":"push"]((()=>{u.text=t,n(5,u)}))},function(){o=this.value,n(1,o)},t=>d()]}class cb extends ee{constructor(t){super(),te(this,t,lb,ab,a,{show:0,text:1,event:9,title:3,label:4,error:2})}get show(){return this.$$.ctx[0]}set show(t){this.$$set({show:t}),Ot()}get text(){return this.$$.ctx[1]}set text(t){this.$$set({text:t}),Ot()}get event(){return this.$$.ctx[9]}set event(t){this.$$set({event:t}),Ot()}get title(){return this.$$.ctx[3]}set title(t){this.$$set({title:t}),Ot()}get label(){return this.$$.ctx[4]}set label(t){this.$$set({label:t}),Ot()}get error(){return this.$$.ctx[2]}set error(t){this.$$set({error:t}),Ot()}}function ub(t,e,n){const i=t.slice();return i[9]=e[n],i}function db(t){let e,n,i,r,o=(t[9].text||"")+"";function s(...e){return t[5](t[9],...e)}return{c(){e=I("button"),n=B(o),q(e,"type","button"),q(e,"class","color-picker-btn svelte-njq4pk"),G(e,"background-color",t[9].color)},m(t,o){L(t,e,o),O(e,n),i||(r=R(e,"click",s),i=!0)},p(i,r){t=i,2&r&&o!==(o=(t[9].text||"")+"")&&V(n,o),2&r&&G(e,"background-color",t[9].color)},d(t){t&&A(e),i=!1,r()}}}function hb(e){let n,i,r,o,s,a,l=e[1],c=[];for(let t=0;t<l.length;t+=1)c[t]=db(ub(e,l,t));return{c(){n=I("div"),i=I("div"),r=z(),o=I("div");for(let t=0;t<c.length;t+=1)c[t].c();q(i,"class","color-picker-overlay svelte-njq4pk"),q(o,"class","color-picker-wrapper svelte-njq4pk"),G(n,"display",e[0]?"block":"none")},m(t,l){L(t,n,l),O(n,i),O(n,r),O(n,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);s||(a=R(i,"click",e[2]),s=!0)},p(t,[e]){if(10&e){let n;for(l=t[1],n=0;n<l.length;n+=1){const i=ub(t,l,n);c[n]?c[n].p(i,e):(c[n]=db(i),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}1&e&&G(n,"display",t[0]?"block":"none")},i:t,o:t,d(t){t&&A(n),E(c,t),s=!1,a()}}}function fb(t,e,n){const i=new ht,r=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"];let{show:o=!1}=e,{btns:s=[]}=e,{event:a=""}=e;function l(){n(0,o=!1)}function c(t){i(a,t),l()}ct((()=>{n(1,s=(()=>{const t=r.map((t=>({color:`#${t}`})));return t.push({text:"#",modal:!0}),t})())}));return t.$$set=t=>{"show"in t&&n(0,o=t.show),"btns"in t&&n(1,s=t.btns),"event"in t&&n(4,a=t.event)},[o,s,l,c,a,(t,e)=>c(t)]}class pb extends ee{constructor(t){super(),te(this,t,fb,hb,a,{show:0,btns:1,event:4})}}const gb=function(t){const{subscribe:e,set:n,update:i}=oe({actionBtns:[],actionObj:{}});return{name:t,set:n,update:i,subscribe:e}};function mb(t,e,n){const i=t.slice();return i[37]=e[n],i}function vb(t){let e,n,i,r,o,s,a,l,c=t[37].icon+"";function u(...e){return t[23](t[37],...e)}return{c(){e=I("button"),n=new Q,i=z(),n.a=i,q(e,"type","button"),q(e,"class",r="cl-button "+(t[37].active?"active":"")+" svelte-1a534py"),q(e,"title",o=t[37].title),e.disabled=s=t[37].disabled},m(t,r){L(t,e,r),n.m(c,e),O(e,i),a||(l=R(e,"click",u),a=!0)},p(i,a){t=i,8&a[0]&&c!==(c=t[37].icon+"")&&n.p(c),8&a[0]&&r!==(r="cl-button "+(t[37].active?"active":"")+" svelte-1a534py")&&q(e,"class",r),8&a[0]&&o!==(o=t[37].title)&&q(e,"title",o),8&a[0]&&s!==(s=t[37].disabled)&&(e.disabled=s)},d(t){t&&A(e),a=!1,l()}}}function yb(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g=t[3].actionBtns,m=[];for(let e=0;e<g.length;e+=1)m[e]=vb(mb(t,g,e));c=new cb({props:{}}),t[30](c);return d=new pb({props:{}}),t[31](d),{c(){e=I("div"),n=I("div");for(let t=0;t<m.length;t+=1)m[t].c();i=z(),r=I("div"),s=z(),a=I("textarea"),l=z(),Xt(c.$$.fragment),u=z(),Xt(d.$$.fragment),q(n,"class","cl-actionbar svelte-1a534py"),q(r,"id",t[1]),q(r,"class","cl-content svelte-1a534py"),G(r,"height",t[0]),q(r,"contenteditable","true"),q(a,"class","cl-textarea svelte-1a534py"),G(a,"max-height",t[0]),G(a,"min-height",t[0]),q(e,"class","cl svelte-1a534py")},m(o,g){L(o,e,g),O(e,n);for(let t=0;t<m.length;t+=1)m[t].m(n,null);O(e,i),O(e,r),t[24](r),O(e,s),O(e,a),t[29](a),O(e,l),Zt(c,e,null),O(e,u),Zt(d,e,null),t[32](e),h=!0,f||(p=[R(window,"click",t[22]),R(r,"input",t[25]),R(r,"mouseup",t[26]),R(r,"keyup",t[27]),R(r,"paste",t[28])],f=!0)},p(t,e){if(136&e[0]){let i;for(g=t[3].actionBtns,i=0;i<g.length;i+=1){const r=mb(t,g,i);m[i]?m[i].p(r,e):(m[i]=vb(r),m[i].c(),m[i].m(n,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}(!h||2&e[0])&&q(r,"id",t[1]),(!h||1&e[0])&&G(r,"height",t[0]),(!h||1&e[0])&&G(a,"max-height",t[0]),(!h||1&e[0])&&G(a,"min-height",t[0]);c.$set({});d.$set({})},i(t){h||(zt(c.$$.fragment,t),zt(d.$$.fragment,t),h=!0)},o(t){Ft(c.$$.fragment,t),Ft(d.$$.fragment,t),h=!1},d(n){n&&A(e),E(m,n),t[24](null),t[29](null),t[30](null),Qt(c),t[31](null),Qt(d),t[32](null),f=!1,o(p)}}}const bb=[];function _b(t,e,n){let i,r,o,s=new ht,{actions:a=[]}=e,{height:l="300px"}=e,{html:c=""}=e,{contentId:u=""}=e,{removeFormatTags:d=["h1","h2","blockquote"]}=e,f=oe({foreColor:!1,backColor:!1,foreColorModal:!1,backColorModal:!1,image:!1,link:!1,showEditor:!0,blurActive:!1});h(t,f,(t=>n(33,r=t))),bb.push({});let p="editor_"+bb.length,g=gb(p);h(t,g,(t=>n(3,o=t)));let m=oe({});h(t,m,(t=>n(2,i=t))),_(g,o.actionObj=((t,e=[])=>{if(e&&e.length){const n={};return e.forEach((e=>{"string"==typeof e?n[e]=Object.assign({},t[e]):t[e.name]?n[e.name]=Object.assign(t[e.name],e):n[e.name]=Object.assign({},e)})),n}return t})(rb,a),o);let v={exec:$,getHtml:S,getText:C,setHtml:M,saveRange:O,restoreRange:D,helper:f,references:m,state:g,removeFormatTags:d};function y(t){i.editor.focus(),O(i.editor),D(i.editor),t.result.call(v),b()}function b(t){const e=t?[]:Jy(document.getSelection().focusNode);Object.keys(o.actionObj).forEach((t=>_(g,o.actionObj[t].active=!1,o))),e.forEach((t=>(o.actionObj[t.toLowerCase()]||{}).active=!0)),_(g,o.actionBtns=tb(o.actionObj),o),g.set(o)}function w(t){t.preventDefault(),$("insertHTML",t.clipboardData.getData("text/html")?(t=>{const e=t.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);let n=e&&e[1]||t;return n=n.replace(/\r?\n|\r/g," ").replace(/<!--(.*?)-->/g,"").replace(new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font|w:sdt)(.*?)>","gi"),"").replace(/<!\[if !supportLists\]>(.*?)<!\[endif\]>/gi,"").replace(/style="[^"]*"/gi,"").replace(/style='[^']*'/gi,"").replace(/&nbsp;/gi," ").replace(/>(\s+)</g,"><").replace(/class="[^"]*"/gi,"").replace(/class='[^']*'/gi,"").replace(/<[^/].*?>/g,(t=>t.split(/[ >]/g)[0]+">")).trim(),n=eb(n),n})(t.clipboardData.getData("text/html")):t.clipboardData.getData("text"))}function x(t){s("change",t)}function k(t){!nb(t.target,i.editorWrapper)&&r.blurActive&&s("blur",t),_(f,r.blurActive=!0,r)}function $(t,e){Yy(t,e)}function S(t){return t?eb(i.editor.innerHTML):i.editor.innerHTML}function C(){return i.editor.innerText}function M(t,e){const n=e?eb(t):t||"";_(m,i.editor.innerHTML=n,i),_(m,i.raw.value=n,i)}function O(){Xy(i.editor)}function D(){Zy(i.editor)}ft(p,v),ct((()=>{_(g,o.actionBtns=tb(o.actionObj),o),M(c)}));const T=i;return t.$$set=t=>{"actions"in t&&n(12,a=t.actions),"height"in t&&n(0,l=t.height),"html"in t&&n(13,c=t.html),"contentId"in t&&n(1,u=t.contentId),"removeFormatTags"in t&&n(14,d=t.removeFormatTags)},[l,u,i,o,f,g,m,y,b,w,x,k,a,c,d,$,S,C,M,O,D,T,t=>k(t),(t,e)=>y(t),function(t){vt[t?"unshift":"push"]((()=>{i.editor=t,m.set(i)}))},t=>x(t.target.innerHTML),()=>b(),()=>b(),t=>w(t),function(t){vt[t?"unshift":"push"]((()=>{i.raw=t,m.set(i)}))},function(t){vt[t?"unshift":"push"]((()=>{i.modal=t,m.set(i)}))},function(t){vt[t?"unshift":"push"]((()=>{i.colorPicker=t,m.set(i)}))},function(t){vt[t?"unshift":"push"]((()=>{i.editorWrapper=t,m.set(i)}))}]}class wb extends ee{constructor(t){super(),te(this,t,_b,yb,a,{actions:12,height:0,html:13,contentId:1,removeFormatTags:14,exec:15,getHtml:16,getText:17,setHtml:18,saveRange:19,restoreRange:20,refs:21},null,[-1,-1])}get actions(){return this.$$.ctx[12]}set actions(t){this.$$set({actions:t}),Ot()}get height(){return this.$$.ctx[0]}set height(t){this.$$set({height:t}),Ot()}get html(){return this.$$.ctx[13]}set html(t){this.$$set({html:t}),Ot()}get contentId(){return this.$$.ctx[1]}set contentId(t){this.$$set({contentId:t}),Ot()}get removeFormatTags(){return this.$$.ctx[14]}set removeFormatTags(t){this.$$set({removeFormatTags:t}),Ot()}get exec(){return this.$$.ctx[15]}get getHtml(){return this.$$.ctx[16]}get getText(){return this.$$.ctx[17]}get setHtml(){return this.$$.ctx[18]}get saveRange(){return this.$$.ctx[19]}get restoreRange(){return this.$$.ctx[20]}get refs(){return this.$$.ctx[21]}}function xb(t){let e,n,i,r,o;return n=new wb({props:{html:t[0],actions:["b","i","u","ul","ol","h1","h2","forecolor",{name:"save",icon:"<b>Speichern</b>",title:"Speichern",result:t[5]}],height:t[1]-kb+"px",contentId:"notes-content"}}),n.$on("change",t[6]),{c(){e=I("div"),Xt(n.$$.fragment),G(e,"--editor-width",t[2]+"px")},m(s,a){L(s,e,a),Zt(n,e,null),i=!0,r||(o=R(e,"dragstart",j(N(t[4]))),r=!0)},p(t,[r]){const o={};1&r&&(o.html=t[0]),2&r&&(o.height=t[1]-kb+"px"),n.$set(o),(!i||4&r)&&G(e,"--editor-width",t[2]+"px")},i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){t&&A(e),Qt(n),r=!1,o()}}}const kb=36;function $b(t,e,n){ct((()=>{document.getElementById("notes-content").focus()}));let{heightPx:i}=e,{widthPx:r}=e,{contentHtml:o=""}=e;const s=ht();return t.$$set=t=>{"heightPx"in t&&n(1,i=t.heightPx),"widthPx"in t&&n(2,r=t.widthPx),"contentHtml"in t&&n(0,o=t.contentHtml)},[o,i,r,s,function(e){gt.call(this,t,e)},()=>{s("save")},t=>{n(0,o=t.detail),s("change")}]}class Sb extends ee{constructor(t){super(),te(this,t,$b,xb,a,{heightPx:1,widthPx:2,contentHtml:0})}}function Cb(t){let e,n,i,r,s,a,l,c,u,d,h,f,p,g,m,v=t[11](new Date(t[1]))+"",y=""===t[0]&&Ob();return c=new Gy({}),c.$on("click",t[12]),{c(){e=I("div"),n=I("div"),i=new Q,r=z(),y&&y.c(),s=z(),a=I("div"),l=I("div"),Xt(c.$$.fragment),u=z(),d=I("div"),h=B(v),i.a=r,q(n,"class","noteviewcontent svelte-1c1kny"),q(l,"class","deletebutton svelte-1c1kny"),q(d,"class","lastedit"),q(a,"class","footer svelte-1c1kny"),q(e,"class","noteview svelte-1c1kny"),G(e,"background-color",t[2]),G(e,"--note-width",t[7]+"px"),G(e,"--note-height",t[8]+"px"),q(e,"draggable",!0),q(e,"ondragover","return false"),$t((()=>t[19].call(e)))},m(o,v){L(o,e,v),O(e,n),i.m(t[0],n),O(n,r),y&&y.m(n,null),O(e,s),O(e,a),O(a,l),Zt(c,l,null),O(a,u),O(a,d),O(d,h),f=J(e,t[19].bind(e)),p=!0,g||(m=[R(n,"click",t[9]),w(Wy.call(null,e,t[13])),R(e,"dragstart",t[15]),R(e,"drop",N(t[16]))],g=!0)},p(t,r){(!p||1&r)&&i.p(t[0]),""===t[0]?y||(y=Ob(),y.c(),y.m(n,null)):y&&(y.d(1),y=null),(!p||2&r)&&v!==(v=t[11](new Date(t[1]))+"")&&V(h,v),(!p||4&r)&&G(e,"background-color",t[2]),(!p||128&r)&&G(e,"--note-width",t[7]+"px"),(!p||256&r)&&G(e,"--note-height",t[8]+"px")},i(t){p||(zt(c.$$.fragment,t),p=!0)},o(t){Ft(c.$$.fragment,t),p=!1},d(t){t&&A(e),y&&y.d(),Qt(c),f(),g=!1,o(m)}}}function Mb(t){let e,n,i;function r(e){t[17](e)}let o={heightPx:t[8],widthPx:t[7]};return void 0!==t[0]&&(o.contentHtml=t[0]),e=new Sb({props:o}),vt.push((()=>Jt(e,"contentHtml",r))),e.$on("change",t[18]),e.$on("save",t[10]),{c(){Xt(e.$$.fragment)},m(t,n){Zt(e,t,n),i=!0},p(t,i){const r={};256&i&&(r.heightPx=t[8]),128&i&&(r.widthPx=t[7]),!n&&1&i&&(n=!0,r.contentHtml=t[0],St((()=>n=!1))),e.$set(r)},i(t){i||(zt(e.$$.fragment,t),i=!0)},o(t){Ft(e.$$.fragment,t),i=!1},d(t){Qt(e,t)}}}function Ob(t){let e;return{c(){e=I("div"),e.textContent="Zum Bearbeiten hier klicken",q(e,"class","helptext svelte-1c1kny")},m(t,n){L(t,e,n)},d(t){t&&A(e)}}}function Db(t){let e,n,i,r,s,a,l;const c=[Mb,Cb],u=[];function d(t,e){return t[3]?0:1}return i=d(t),r=u[i]=c[i](t),{c(){e=I("div"),n=I("div"),r.c(),q(n,"class","note svelte-1c1kny"),q(e,"class","notecontainer svelte-1c1kny")},m(r,o){L(r,e,o),O(e,n),u[i].m(n,null),s=!0,a||(l=[w(Pd.call(null,n)),R(n,"click_outside",t[10])],a=!0)},p(t,[e]){let o=i;i=d(t),i===o?u[i].p(t,e):(Pt(),Ft(u[o],1,1,(()=>{u[o]=null})),Bt(),r=u[i],r?r.p(t,e):(r=u[i]=c[i](t),r.c()),zt(r,1),r.m(n,null))},i(t){s||(zt(r),s=!0)},o(t){Ft(r),s=!1},d(t){t&&A(e),u[i].d(),a=!1,o(l)}}}function Tb(t,e,n){let{contentHtml:i=""}=e,{timestamp:r=(new Date).getTime()}=e,{backgroundColor:o}=e,{id:s}=e;const a=24*parseFloat(getComputedStyle(document.documentElement).fontSize);let l,c,u=!1,d=!1,h=a,f=a,p=!1;const g=ht();ct((()=>{const t=localStorage.getItem(s+"_size");if(null!==t){let e=JSON.parse(t);n(7,h=e.width),n(8,f=e.height)}}));return t.$$set=t=>{"contentHtml"in t&&n(0,i=t.contentHtml),"timestamp"in t&&n(1,r=t.timestamp),"backgroundColor"in t&&n(2,o=t.backgroundColor),"id"in t&&n(14,s=t.id)},[i,r,o,u,d,l,c,h,f,()=>{u||n(3,u=!0)},()=>{n(3,u=!1),d&&(g("change",i),n(4,d=!1))},t=>{const e=t=>t.toString().padStart(2,"0");return`${e(t.getDate())}.${e(t.getMonth()+1)}.${t.getFullYear()}`},t=>{confirm("Soll diese Notiz wirklich gelöscht werden?")&&g("delete")},()=>{p&&(localStorage.setItem(s+"_size",JSON.stringify({width:l,height:c})),n(7,h=l),n(8,f=c)),p=!0},s,function(e){gt.call(this,t,e)},function(e){gt.call(this,t,e)},function(t){i=t,n(0,i)},t=>n(4,d=!0),function(){l=this.offsetWidth,c=this.offsetHeight,n(5,l),n(6,c)}]}class Lb extends ee{constructor(t){super(),te(this,t,Tb,Db,a,{contentHtml:0,timestamp:1,backgroundColor:2,id:14})}}function Ab(e){let n,i,r,o;return{c(){n=P("svg"),i=P("g"),r=P("g"),o=P("polygon"),q(o,"points","289.391,222.609 289.391,0 222.609,0 222.609,222.609 0,222.609 0,289.391 222.609,289.391 222.609,512 \n\t\t\t289.391,512 289.391,289.391 512,289.391 512,222.609"),q(n,"x","0px"),q(n,"y","0px"),q(n,"viewBox","0 0 512 512"),q(n,"width","6em"),q(n,"height","6em")},m(t,e){L(t,n,e),O(n,i),O(i,r),O(r,o)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Eb extends ee{constructor(t){super(),te(this,t,null,Ab,a,{})}}function Ib(e){let n,i,r,o,s,a,l,c,u;return o=new Eb({}),{c(){n=I("div"),i=I("div"),r=I("div"),Xt(o.$$.fragment),s=z(),a=I("div"),a.textContent="Neue Notiz",q(a,"class","text svelte-13ow87f"),q(r,"class","addnotecontent svelte-13ow87f"),q(i,"class","addnote svelte-13ow87f"),q(n,"class","addnotecontainer svelte-13ow87f"),q(n,"id","addnotecontainer")},m(t,d){L(t,n,d),O(n,i),O(i,r),Zt(o,r,null),O(r,s),O(r,a),l=!0,c||(u=R(i,"click",e[0]),c=!0)},p:t,i(t){l||(zt(o.$$.fragment,t),l=!0)},o(t){Ft(o.$$.fragment,t),l=!1},d(t){t&&A(n),Qt(o),c=!1,u()}}}function Pb(t){return[function(e){gt.call(this,t,e)}]}class Bb extends ee{constructor(t){super(),te(this,t,Pb,Ib,a,{})}}function zb(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function Fb(n,i){let r,o,s,a,l=t;return o=new Lb({props:{id:i[14]._id,contentHtml:i[14].contentHtml,timestamp:i[14].timestamp,backgroundColor:i[14].backgroundColor}}),o.$on("delete",(function(...t){return i[6](i[14],...t)})),o.$on("change",(function(...t){return i[7](i[14],...t)})),o.$on("dragstart",(function(...t){return i[8](i[16],...t)})),o.$on("drop",(function(...t){return i[9](i[16],...t)})),{key:n,first:null,c(){r=I("div"),Xt(o.$$.fragment),this.first=r},m(t,e){L(t,r,e),Zt(o,r,null),a=!0},p(t,e){i=t;const n={};1&e&&(n.id=i[14]._id),1&e&&(n.contentHtml=i[14].contentHtml),1&e&&(n.timestamp=i[14].timestamp),1&e&&(n.backgroundColor=i[14].backgroundColor),o.$set(n)},r(){s=r.getBoundingClientRect()},f(){ot(r),l()},a(){l(),l=function(n,i,r,o){if(!i)return t;const s=n.getBoundingClientRect();if(i.left===s.left&&i.right===s.right&&i.top===s.top&&i.bottom===s.bottom)return t;const{delay:a=0,duration:l=300,easing:c=e,start:u=k()+a,end:d=u+l,tick:h=t,css:f}=r(n,{from:i,to:s},o);let p,g=!0,m=!1;function v(){f&&rt(n,p),g=!1}return M((t=>{if(!m&&t>=u&&(m=!0),m&&t>=d&&(h(1,0),v()),!g)return!1;if(m){const e=0+1*c((t-u)/l);h(e,1-e)}return!0})),f&&(p=it(n,0,1,l,a,c,f)),a||(m=!0),h(0,1),v}(r,s,Py,{duration:Nb})},i(t){a||(zt(o.$$.fragment,t),a=!0)},o(t){Ft(o.$$.fragment,t),a=!1},d(t){t&&A(r),Qt(o)}}}function Rb(t){let e,n,i,r,o,s,a,l=[],c=new Map,u=t[0];const d=t=>t[14]._id;for(let e=0;e<u.length;e+=1){let n=zb(t,u,e),i=d(n);c.set(i,l[e]=Fb(i,n))}return s=new Bb({}),s.$on("click",t[1]),{c(){e=I("div"),n=I("div"),n.textContent="Notizen",i=z(),r=I("div");for(let t=0;t<l.length;t+=1)l[t].c();o=z(),Xt(s.$$.fragment),q(n,"class","notescontainerheader svelte-t4qyib"),q(r,"class","notescontainercontent svelte-t4qyib"),q(e,"class","notescontainer svelte-t4qyib")},m(t,c){L(t,e,c),O(e,n),O(e,i),O(e,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);O(r,o),Zt(s,r,null),a=!0},p(t,[e]){if(61&e){u=t[0],Pt();for(let t=0;t<l.length;t+=1)l[t].r();l=Gt(l,e,d,1,t,u,c,r,Ut,Fb,o,zb);for(let t=0;t<l.length;t+=1)l[t].a();Bt()}},i(t){if(!a){for(let t=0;t<u.length;t+=1)zt(l[t]);zt(s.$$.fragment,t),a=!0}},o(t){for(let t=0;t<l.length;t+=1)Ft(l[t]);Ft(s.$$.fragment,t),a=!1},d(t){t&&A(e);for(let t=0;t<l.length;t+=1)l[t].d();Qt(s)}}}const Nb=300,jb="note";function qb(t,e,n){const i=["#ffd8c0","#a1f5cf","#f1bff4","#d9bafd","#a4e2fb","#fdb7b8"];let r=[];const o=(t=!1)=>vd.fetchByType("note",t).then((t=>n(0,r=t.sort(((t,e)=>t.orderIndex-e.orderIndex))))).catch((t=>{md.error("Failed to load notes",t),Ae("Notizen konnten nicht geladen werden!",{persist:!0})}));ct((()=>{o().then((()=>vd.listenForChanges((()=>o(!0)),jb)))})),dt((()=>{vd.cancelListenerForDocType(jb)}));const s=t=>{const e=r.find((e=>e._id===t));n(0,r=r.filter((e=>e._id!==t))),vd.removeDoc(e).catch((e=>{md.error(`Failed to remove note ${t}`,e),Ae("Notiz konnte nicht gelöscht werden!",{persist:!0})}))},a=(t,e)=>{const i=r.find((e=>e._id===t));i.timestamp=(new Date).getTime(),i.contentHtml=e,n(0,r=[...r]),vd.updateDoc(i,!1).then((t=>i._rev=t.rev)).catch((e=>{md.error(`Failed to save note ${t}`,e),Ae("Notiz konnte nicht gespeichert werden!",{persist:!0})}))},l=(t,e)=>{t.dataTransfer.dropEffect="move";const i=parseInt(t.dataTransfer.getData("text/plain"));if(i!==e){const t=r[i];n(0,r[i]=r[e],r),n(0,r[e]=t,r),r.forEach(((t,e)=>t.orderIndex=e)),n(0,r=[...r]),r.forEach((t=>vd.updateDoc(t)))}},c=(t,e)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move";const n=e;t.dataTransfer.setData("text/plain",n)};return[r,()=>{const t={_id:Hy(),contentHtml:"",timestamp:(new Date).getTime(),backgroundColor:i[Math.floor(Math.random()*i.length)],orderIndex:Math.min(r.map((t=>t.orderIndex)))-1,type:"note"};n(0,r=[t,...r]),vd.createDoc(t).then((e=>t._rev=e.rev)).catch((e=>{md.error(`Failed to create note ${t._id}`,e),Ae("Notiz konnte nicht gespeichert werden!",{persist:!0})}))},s,a,l,c,(t,e)=>s(t._id),(t,e)=>a(t._id,e.detail),(t,e)=>c(e,t),(t,e)=>l(e,t)]}class Hb extends ee{constructor(t){super(),te(this,t,qb,Rb,a,{})}}
/*!
     * Chart.js v3.6.0
     * https://www.chartjs.org
     * (c) 2021 Chart.js Contributors
     * Released under the MIT License
     */
const Wb="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Vb(t,e,n){const i=n||(t=>Array.prototype.slice.call(t));let r=!1,o=[];return function(...n){o=i(n),r||(r=!0,Wb.call(window,(()=>{r=!1,t.apply(e,o)})))}}const Ub=t=>"start"===t?"left":"end"===t?"right":"center",Gb=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Kb(){}const Yb=function(){let t=0;return function(){return t++}}();function Jb(t){return null==t}function Xb(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function Zb(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const Qb=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function t_(t,e){return Qb(t)?t:e}function e_(t,e){return void 0===t?e:t}const n_=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function i_(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function r_(t,e,n,i){let r,o,s;if(Xb(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(Zb(t))for(s=Object.keys(t),o=s.length,r=0;r<o;r++)e.call(n,t[s[r]],s[r])}function o_(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function s_(t){if(Xb(t))return t.map(s_);if(Zb(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=s_(t[n[r]]);return e}return t}function a_(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function l_(t,e,n,i){if(!a_(t))return;const r=e[t],o=n[t];Zb(r)&&Zb(o)?c_(r,o,i):e[t]=s_(o)}function c_(t,e,n){const i=Xb(e)?e:[e],r=i.length;if(!Zb(t))return t;const o=(n=n||{}).merger||l_;for(let s=0;s<r;++s){if(!Zb(e=i[s]))continue;const r=Object.keys(e);for(let i=0,s=r.length;i<s;++i)o(r[i],t,e,n)}return t}function u_(t,e){return c_(t,e,{merger:d_})}function d_(t,e,n){if(!a_(t))return;const i=e[t],r=n[t];Zb(i)&&Zb(r)?u_(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=s_(r))}function h_(t,e){const n=t.indexOf(".",e);return-1===n?t.length:n}function f_(t,e){if(""===e)return t;let n=0,i=h_(e,n);for(;t&&i>n;)t=t[e.substr(n,i-n)],n=i+1,i=h_(e,n);return t}function p_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const g_=t=>void 0!==t,m_=t=>"function"==typeof t,v_=Math.PI,y_=2*v_,b_=y_+v_,__=Number.POSITIVE_INFINITY,w_=v_/180,x_=v_/2,k_=v_/4,$_=2*v_/3,S_=Math.log10,C_=Math.sign;function M_(t){const e=Math.round(t);t=D_(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(S_(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function O_(t){return!isNaN(parseFloat(t))&&isFinite(t)}function D_(t,e,n){return Math.abs(t-e)<n}function T_(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function L_(t){return t*(v_/180)}function A_(t){return t*(180/v_)}function E_(t){if(!Qb(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function I_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function P_(t,e){return(t-e+b_)%y_-v_}function B_(t){return(t%y_+y_)%y_}function z_(t,e,n,i){const r=B_(t),o=B_(e),s=B_(n),a=B_(o-r),l=B_(s-r),c=B_(r-o),u=B_(r-s);return r===o||r===s||i&&o===s||a>l&&c<u}function F_(t,e,n){return Math.max(e,Math.min(n,t))}const R_=t=>0===t||1===t,N_=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*y_/n),j_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*y_/n)+1,q_={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*x_),easeOutSine:t=>Math.sin(t*x_),easeInOutSine:t=>-.5*(Math.cos(v_*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>R_(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>R_(t)?t:N_(t,.075,.3),easeOutElastic:t=>R_(t)?t:j_(t,.075,.3),easeInOutElastic(t){const e=.1125;return R_(t)?t:t<.5?.5*N_(2*t,e,.45):.5+.5*j_(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-q_.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*q_.easeInBounce(2*t):.5*q_.easeOutBounce(2*t-1)+.5},H_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},W_="0123456789ABCDEF",V_=t=>W_[15&t],U_=t=>W_[(240&t)>>4]+W_[15&t],G_=t=>(240&t)>>4==(15&t);function K_(t){var e=function(t){return G_(t.r)&&G_(t.g)&&G_(t.b)&&G_(t.a)}(t)?V_:U_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function Y_(t){return t+.5|0}const J_=(t,e,n)=>Math.max(Math.min(t,n),e);function X_(t){return J_(Y_(2.55*t),0,255)}function Z_(t){return J_(Y_(255*t),0,255)}function Q_(t){return J_(Y_(t/2.55)/100,0,1)}function tw(t){return J_(Y_(100*t),0,100)}const ew=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const nw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iw(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function rw(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function ow(t,e,n){const i=iw(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function sw(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),s=(r+o)/2;let a,l,c;return r!==o&&(c=r-o,l=s>.5?c/(2-r-o):c/(r+o),a=r===e?(n-i)/c+(n<i?6:0):r===n?(i-e)/c+2:(e-n)/c+4,a=60*a+.5),[0|a,l||0,s]}function aw(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Z_)}function lw(t,e,n){return aw(iw,t,e,n)}function cw(t){return(t%360+360)%360}function uw(t){const e=nw.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?X_(+e[5]):Z_(+e[5]));const r=cw(+e[2]),o=+e[3]/100,s=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return aw(ow,t,e,n)}(r,o,s):"hsv"===e[1]?function(t,e,n){return aw(rw,t,e,n)}(r,o,s):lw(r,o,s),{r:n[0],g:n[1],b:n[2],a:i}}const dw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let fw;function pw(t){fw||(fw=function(){const t={},e=Object.keys(hw),n=Object.keys(dw);let i,r,o,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],r=0;r<n.length;r++)o=n[r],a=a.replace(o,dw[o]);o=parseInt(hw[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),fw.transparent=[0,0,0,0]);const e=fw[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function gw(t,e,n){if(t){let i=sw(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=lw(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function mw(t,e){return t?Object.assign(e||{},t):t}function vw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Z_(t[3]))):(e=mw(t,{r:0,g:0,b:0,a:1})).a=Z_(e.a),e}function yw(t){return"r"===t.charAt(0)?function(t){const e=ew.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=255&(e[8]?X_(t):255*t)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?X_(n):n),i=255&(e[4]?X_(i):i),r=255&(e[6]?X_(r):r),{r:n,g:i,b:r,a:o}}}(t):uw(t)}class bw{constructor(t){if(t instanceof bw)return t;const e=typeof t;let n;"object"===e?n=vw(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*H_[t[1]],g:255&17*H_[t[2]],b:255&17*H_[t[3]],a:5===n?17*H_[t[4]]:255}:7!==n&&9!==n||(e={r:H_[t[1]]<<4|H_[t[2]],g:H_[t[3]]<<4|H_[t[4]],b:H_[t[5]]<<4|H_[t[6]],a:9===n?H_[t[7]]<<4|H_[t[8]]:255})),e}(t)||pw(t)||yw(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=mw(this._rgb);return t&&(t.a=Q_(t.a)),t}set rgb(t){this._rgb=vw(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Q_(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?K_(this._rgb):this._rgb}hslString(){return this._valid?function(t){if(!t)return;const e=sw(t),n=e[0],i=tw(e[1]),r=tw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Q_(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):this._rgb}mix(t,e){const n=this;if(t){const i=n.rgb,r=t.rgb;let o;const s=e===o?.5:e,a=2*s-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*r.r+.5,i.g=255&c*i.g+o*r.g+.5,i.b=255&c*i.b+o*r.b+.5,i.a=s*i.a+(1-s)*r.a,n.rgb=i}return n}clone(){return new bw(this.rgb)}alpha(t){return this._rgb.a=Z_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Y_(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return gw(this._rgb,2,t),this}darken(t){return gw(this._rgb,2,-t),this}saturate(t){return gw(this._rgb,1,t),this}desaturate(t){return gw(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=sw(t);n[0]=cw(n[0]+e),n=lw(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function _w(t){return new bw(t)}const ww=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function xw(t){return ww(t)?t:_w(t)}function kw(t){return ww(t)?t:_w(t).saturate(.5).darken(.1).hexString()}const $w=Object.create(null),Sw=Object.create(null);function Cw(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function Mw(t,e,n){return"string"==typeof e?c_(Cw(t,e),n):c_(Cw(t,""),e)}var Ow=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>kw(e.backgroundColor),this.hoverBorderColor=(t,e)=>kw(e.borderColor),this.hoverColor=(t,e)=>kw(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return Mw(this,t,e)}get(t){return Cw(this,t)}describe(t,e){return Mw(Sw,t,e)}override(t,e){return Mw($w,t,e)}route(t,e,n,i){const r=Cw(this,t),o=Cw(this,n),s="_"+e;Object.defineProperties(r,{[s]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[i];return Zb(t)?Object.assign({},e,t):e_(t,e)},set(t){this[s]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Dw(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function Tw(t,e,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],null!=d&&!0!==Xb(d))s=Dw(t,r,o,s,d);else if(Xb(d))for(c=0,u=d.length;c<u;c++)h=d[c],null==h||Xb(h)||(s=Dw(t,r,o,s,h));t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[o[l]];o.splice(0,f)}return s}function Lw(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Aw(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Ew(t,e,n,i){let r,o,s,a,l;const c=e.pointStyle,u=e.rotation,d=e.radius;let h=(u||0)*w_;if(c&&"object"==typeof c&&(r=c.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(h),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void t.restore();if(!(isNaN(d)||d<=0)){switch(t.beginPath(),c){default:t.arc(n,i,d,0,y_),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*d,i-Math.cos(h)*d),h+=$_,t.lineTo(n+Math.sin(h)*d,i-Math.cos(h)*d),h+=$_,t.lineTo(n+Math.sin(h)*d,i-Math.cos(h)*d),t.closePath();break;case"rectRounded":l=.516*d,a=d-l,o=Math.cos(h+k_)*a,s=Math.sin(h+k_)*a,t.arc(n-o,i-s,l,h-v_,h-x_),t.arc(n+s,i-o,l,h-x_,h),t.arc(n+o,i+s,l,h,h+x_),t.arc(n-s,i+o,l,h+x_,h+v_),t.closePath();break;case"rect":if(!u){a=Math.SQRT1_2*d,t.rect(n-a,i-a,2*a,2*a);break}h+=k_;case"rectRot":o=Math.cos(h)*d,s=Math.sin(h)*d,t.moveTo(n-o,i-s),t.lineTo(n+s,i-o),t.lineTo(n+o,i+s),t.lineTo(n-s,i+o),t.closePath();break;case"crossRot":h+=k_;case"cross":o=Math.cos(h)*d,s=Math.sin(h)*d,t.moveTo(n-o,i-s),t.lineTo(n+o,i+s),t.moveTo(n+s,i-o),t.lineTo(n-s,i+o);break;case"star":o=Math.cos(h)*d,s=Math.sin(h)*d,t.moveTo(n-o,i-s),t.lineTo(n+o,i+s),t.moveTo(n+s,i-o),t.lineTo(n-s,i+o),h+=k_,o=Math.cos(h)*d,s=Math.sin(h)*d,t.moveTo(n-o,i-s),t.lineTo(n+o,i+s),t.moveTo(n+s,i-o),t.lineTo(n-s,i+o);break;case"line":o=Math.cos(h)*d,s=Math.sin(h)*d,t.moveTo(n-o,i-s),t.lineTo(n+o,i+s);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(h)*d,i+Math.sin(h)*d)}t.fill(),e.borderWidth>0&&t.stroke()}}function Iw(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Pw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Bw(t){t.restore()}function zw(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Fw(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Rw(t,e,n,i,r,o={}){const s=Xb(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);Jb(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)c=s[l],a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Jb(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,i,o.maxWidth)),t.fillText(c,n,i,o.maxWidth),Nw(t,n,i,c,o),i+=r.lineHeight;t.restore()}function Nw(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function jw(t,e){const{x:n,y:i,w:r,h:o,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,-x_,v_,!0),t.lineTo(n,i+o-s.bottomLeft),t.arc(n+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,v_,x_,!0),t.lineTo(n+r-s.bottomRight,i+o),t.arc(n+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,x_,0,!0),t.lineTo(n+r,i+s.topRight),t.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-x_,!0),t.lineTo(n+s.topLeft,i)}const qw=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Hw=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ww(t,e){const n=(""+t).match(qw);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function Vw(t,e){const n={},i=Zb(e),r=i?Object.keys(e):e,o=Zb(t)?i?n=>e_(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=+o(t)||0;return n}function Uw(t){return Vw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gw(t){return Vw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Kw(t){const e=Uw(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Yw(t,e){t=t||{},e=e||Ow.font;let n=e_(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=e_(t.style,e.style);i&&!(""+i).match(Hw)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:e_(t.family,e.family),lineHeight:Ww(e_(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:e_(t.weight,e.weight),string:""};return r.string=function(t){return!t||Jb(t.size)||Jb(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Jw(t,e,n,i){let r,o,s,a=!0;for(r=0,o=t.length;r<o;++r)if(s=t[r],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==n&&Xb(s)&&(s=s[n%s.length],a=!1),void 0!==s))return i&&!a&&(i.cacheable=!1),s}function Xw(t,e){return Object.assign(Object.create(t),e)}function Zw(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const Qw=(t,e,n)=>Zw(t,n,(i=>t[i][e]<n)),tx=(t,e,n)=>Zw(t,n,(i=>t[i][e]>=n));const ex=["push","pop","shift","splice","unshift"];function nx(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(ex.forEach((e=>{delete t[e]})),delete t._chartjs)}function ix(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function rx(t,e=[""],n=t,i,r=(()=>t[0])){g_(i)||(i=gx("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>rx([r,...t],e,n,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>cx(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=gx(ax(o,t),n),g_(r))return lx(t,r)?fx(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>mx(t).includes(e),ownKeys:t=>mx(t),set:(t,e,n)=>((t._storage||(t._storage=r()))[e]=n,delete t[e],delete t._keys,!0)})}function ox(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:sx(t,i),setContext:e=>ox(t,e,n,i),override:r=>ox(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>cx(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=t;let a=i[e];m_(a)&&s.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(o,s||i),a.delete(t),Zb(e)&&(e=fx(r._scopes,r,t,e));return e}(e,a,t,n));Xb(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=n;if(g_(o.index)&&i(t))e=e[o.index%e.length];else if(Zb(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=fx(i,r,t,l);e.push(ox(n,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));lx(e,a)&&(a=ox(a,r,o&&o[e],s));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function sx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:m_(n)?n:()=>n,isIndexable:m_(i)?i:()=>i}}const ax=(t,e)=>t?t+p_(e):e,lx=(t,e)=>Zb(e)&&"adapters"!==t;function cx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function ux(t,e,n){return m_(t)?t(e,n):t}const dx=(t,e)=>!0===t?e:"string"==typeof t?f_(e,t):void 0;function hx(t,e,n,i){for(const r of e){const e=dx(n,r);if(e){t.add(e);const r=ux(e._fallback,n,e);if(g_(r)&&r!==n&&r!==i)return r}else if(!1===e&&g_(i)&&n!==i)return null}return!1}function fx(t,e,n,i){const r=e._rootScopes,o=ux(e._fallback,n,i),s=[...t,...r],a=new Set;a.add(i);let l=px(a,s,n,o||n);return null!==l&&((!g_(o)||o===n||(l=px(a,s,o,l),null!==l))&&rx(Array.from(a),[""],r,o,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(Xb(r)&&Zb(n))return n;return r}(e,n,i))))}function px(t,e,n,i){for(;n;)n=hx(t,e,n,i);return n}function gx(t,e){for(const n of e){if(!n)continue;const e=n[t];if(g_(e))return e}}function mx(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const vx=Number.EPSILON||1e-14,yx=(t,e)=>e<t.length&&!t[e].skip&&t[e],bx=t=>"x"===t?"y":"x";function _x(t,e,n,i){const r=t.skip?e:t,o=e,s=n.skip?e:n,a=I_(o,r),l=I_(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:o.x-d*(s.x-r.x),y:o.y-d*(s.y-r.y)},next:{x:o.x+h*(s.x-r.x),y:o.y+h*(s.y-r.y)}}}function wx(t,e="x"){const n=bx(e),i=t.length,r=Array(i).fill(0),o=Array(i);let s,a,l,c=yx(t,0);for(s=0;s<i;++s)if(a=l,l=c,c=yx(t,s+1),l){if(c){const t=c[e]-l[e];r[s]=0!==t?(c[n]-l[n])/t:0}o[s]=a?c?C_(r[s-1])!==C_(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}!function(t,e,n){const i=t.length;let r,o,s,a,l,c=yx(t,0);for(let u=0;u<i-1;++u)l=c,c=yx(t,u+1),l&&c&&(D_(e[u],0,vx)?n[u]=n[u+1]=0:(r=n[u]/e[u],o=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[u]=r*s*e[u],n[u+1]=o*s*e[u])))}(t,r,o),function(t,e,n="x"){const i=bx(n),r=t.length;let o,s,a,l=yx(t,0);for(let c=0;c<r;++c){if(s=a,a=l,l=yx(t,c+1),!a)continue;const r=a[n],u=a[i];s&&(o=(r-s[n])/3,a[`cp1${n}`]=r-o,a[`cp1${i}`]=u-o*e[c]),l&&(o=(l[n]-r)/3,a[`cp2${n}`]=r+o,a[`cp2${i}`]=u+o*e[c])}}(t,o,e)}function xx(t,e,n){return Math.max(Math.min(t,n),e)}function kx(t,e,n,i,r){let o,s,a,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)wx(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=_x(n,a,t[Math.min(o+1,s-(i?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,o,s,a=Iw(t[0],e);for(n=0,i=t.length;n<i;++n)s=o,o=a,a=n<i-1&&Iw(t[n+1],e),o&&(r=t[n],s&&(r.cp1x=xx(r.cp1x,e.left,e.right),r.cp1y=xx(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=xx(r.cp2x,e.left,e.right),r.cp2y=xx(r.cp2y,e.top,e.bottom)))}(t,n)}function $x(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Sx(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Cx(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Mx=t=>window.getComputedStyle(t,null);const Ox=["top","right","bottom","left"];function Dx(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=Ox[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Tx(t,e){const{canvas:n,currentDevicePixelRatio:i}=e,r=Mx(n),o="border-box"===r.boxSizing,s=Dx(r,"padding"),a=Dx(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.native||t,i=n.touches,r=i&&i.length?i[0]:n,{offsetX:o,offsetY:s}=r;let a,l,c=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(o,s,n.target))a=o,l=s;else{const t=e.getBoundingClientRect();a=r.clientX-t.left,l=r.clientY-t.top,c=!0}return{x:a,y:l,box:c}}(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:p}=e;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}const Lx=t=>Math.round(10*t)/10;function Ax(t,e,n,i){const r=Mx(t),o=Dx(r,"margin"),s=Cx(r.maxWidth,t,"clientWidth")||__,a=Cx(r.maxHeight,t,"clientHeight")||__,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=Sx(t);if(o){const t=o.getBoundingClientRect(),s=Mx(o),a=Dx(s,"border","width"),l=Dx(s,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,i=Cx(s.maxWidth,o,"clientWidth"),r=Cx(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||__,maxHeight:r||__}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=Dx(r,"border","width"),e=Dx(r,"padding");c-=e.width+t.width,u-=e.height+t.height}return c=Math.max(0,c-o.width),u=Math.max(0,i?Math.floor(c/i):u-o.height),c=Lx(Math.min(c,s,l.maxWidth)),u=Lx(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Lx(c/2)),{width:c,height:u}}function Ex(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=r/i,t.width=o/i;const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||s.height!==r||s.width!==o)&&(t.currentDevicePixelRatio=i,s.height=r,s.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Ix=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Px(t,e){const n=function(t,e){return Mx(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Bx(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function zx(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Fx(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=Bx(t,r,n),a=Bx(r,o,n),l=Bx(o,e,n),c=Bx(s,a,n),u=Bx(a,l,n);return Bx(c,u,n)}const Rx=new Map;function Nx(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Rx.get(n);return i||(i=new Intl.NumberFormat(t,e),Rx.set(n,i)),i}(e,n).format(t)}function jx(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function qx(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Hx(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Wx(t){return"angle"===t?{between:z_,compare:P_,normalize:B_}:{between:(t,e,n)=>t>=Math.min(e,n)&&t<=Math.max(n,e),compare:(t,e)=>t-e,normalize:t=>t}}function Vx({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function Ux(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,s=e.length,{compare:a,between:l,normalize:c}=Wx(i),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:s,normalize:a}=Wx(i),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&s(a(e[d%l][i]),r,o);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,b=null;const _=()=>y||l(r,v,g)&&0!==a(r,v),w=()=>!y||0===a(o,g)||l(o,v,g);for(let t=u,n=u;t<=d;++t)m=e[t%s],m.skip||(g=c(m[i]),g!==v&&(y=l(g,r,o),null===b&&_()&&(b=0===a(g,r)?t:n),null!==b&&w()&&(p.push(Vx({start:b,end:t,loop:h,count:s,style:f})),b=null),n=t,v=g));return null!==b&&p.push(Vx({start:b,end:d,loop:h,count:s,style:f})),p}function Gx(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=Ux(i[r],t.points,e);o.length&&n.push(...o)}return n}function Kx(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=Yx(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=n.length,c=[];let u=o,d=e[0].start,h=d;function f(t,e,i,r){const o=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!=e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,d=e%l)}}for(const t of e){d=a?d:t.start;let e,o=n[d%l];for(h=d+1;h<=t.end;h++){const a=n[h%l];e=Yx(i.setContext(Xw(r,{type:"segment",p0:o,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Jx(e,u)&&f(d,h-1,t.loop,u),o=a,u=e}d<h-1&&f(d,h-1,t.loop,u)}return c}(t,e,n,i):e}function Yx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Jx(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}
/*!
     * Chart.js v3.6.0
     * https://www.chartjs.org
     * (c) 2021 Chart.js Contributors
     * Released under the MIT License
     */var Xx=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Wb.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,s=r.length-1,a=!1;for(;s>=0;--s)o=r[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),a=!0):(r[s]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const Zx="transparent",Qx={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=xw(t||Zx),r=i.valid&&xw(e||Zx);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class tk{constructor(t,e,n,i){const r=e[n];i=Jw([t.to,i,r,t.from]);const o=Jw([t.from,r,i]);this._active=!0,this._fn=t.fn||Qx[t.type||typeof o],this._easing=q_[t.easing]||q_.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Jw([t.to,e,i,t.from]),this._from=Jw([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,s=this._to;let a;if(this._active=r!==s&&(o||e<n),!this._active)return this._target[i]=s,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}Ow.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const ek=Object.keys(Ow.animation);Ow.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),Ow.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Ow.describe("animations",{_fallback:"animation"}),Ow.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class nk{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Zb(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!Zb(i))return;const r={};for(const t of ek)r[t]=i[t];(Xb(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(r[l]=u=new tk(d,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Xx.add(this._chart,n),!0):void 0}}function ik(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function rk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function ok(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let s,a,l,c;if(null!==e){for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===n){if(i.all)continue;break}c=t.values[l],Qb(c)&&(o||0===e||C_(e)===C_(c))&&(e+=c)}return e}}function sk(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function ak(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function lk(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function ck(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=i,l=o.axis,c=s.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,s,i),d=e.length;let h;for(let t=0;t<d;++t){const n=e[t],{[l]:o,[c]:d}=n;h=(n._stacks||(n._stacks={}))[c]=ak(r,u,o),h[a]=d,h._top=lk(h,s,!0,i.type),h._bottom=lk(h,s,!1,i.type)}}function uk(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function dk(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const hk=t=>"reset"===t||"none"===t,fk=(t,e)=>e?t:Object.assign({},t);class pk{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sk(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&dk(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=e_(n.xAxisID,uk(t,"x")),o=e.yAxisID=e_(n.yAxisID,uk(t,"y")),s=e.rAxisID=e_(n.rAxisID,uk(t,"r")),a=e.indexAxis,l=e.iAxisID=i(a,r,o,s),c=e.vAxisID=i(a,o,r,s);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nx(this._data,this),t._stacked&&dk(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Zb(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){nx(n,this);const t=this._cachedMeta;dk(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),ex.forEach((t=>{const e="_onData"+p_(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),r}})})))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=sk(e.vScale,e),e.stack!==n.stack&&(i=!0,dk(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&ck(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,s=r.axis;let a,l,c,u=0===t&&e===i.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Xb(i[t])?this.parseArrayData(n,i,t,e):Zb(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(r()&&(u=!1),d=l);n._sorted=u}o&&ck(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,s=r.axis,a=o.axis,l=r.getLabels(),c=r===o,u=new Array(i);let d,h,f;for(d=0,h=i;d<h;++d)f=d+n,u[d]={[s]:c||r.parse(l[f],f),[a]:o.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,s=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],s[a]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=e[d],l[c]={x:r.parse(f_(h,s),d),y:o.parse(f_(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return ok({keys:rk(i,!0),values:e._stacks[t.axis]},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const s=i&&n._stacks[e.axis];i&&s&&(i.values=s,o=ok(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,s=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rk(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(s);let d,h;function f(){h=i[d];const e=h[s.axis];return!Qb(h[t.axis])||c>e||u<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,t,h,a),!r));++d);if(r)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],Qb(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.configure(),this._cachedDataOpts={},this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Zb(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(e_(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=ik(t,n),r=ik(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||i.length-s;let l;for(n.dataset&&n.dataset.draw(t,r,s,a),l=s;l<s+a;++l){const e=i[l];e.hidden||(e.active?o.push(e):e.draw(t,r))}for(l=0;l<o.length;++l)o[l].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Xw(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Xw(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,s=r[o],a=this.enableOptionSharing&&g_(n);if(s)return fk(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Ow.elements[t]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,i)),u);return f.$shared&&(f.$shared=a,r[o]=Object.freeze(fk(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,s=r[o];if(s)return s;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(o,this.getContext(t,n,e))}const l=new nk(i,a&&a.animations);return a&&a._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||hk(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){hk(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!hk(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(r),s=t;s<o;++s)r[s]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&dk(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){this._sync(["_removeElements",t,e]),this._sync(["_insertElements",t,arguments.length-2])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function gk(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=ix(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,s,a=e._length;const l=()=>{32767!==o&&-32768!==o&&(g_(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),l();for(s=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),l();return a}function mk(t,e,n,i){return Xb(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),s=Math.min(r,o),a=Math.max(r,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:o,min:s,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function vk(t,e,n,i){const r=t.iScale,o=t.vScale,s=r.getLabels(),a=r===o,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(s[c],c),l.push(mk(h,d,o,c));return l}function yk(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function bk(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);const{start:s,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(o[_k(u,s,a,l)]=!0,r=c)),o[_k(r,s,a,l)]=!0,t.borderSkipped=o}function _k(t,e,n,i){return t=i?wk(t=function(t,e,n){return t===e?n:t===n?e:t}(t,e,n),n,e):wk(t,e,n)}function wk(t,e,n){return"start"===t?e:"end"===t?n:t}function xk(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}pk.defaults={},pk.prototype.datasetElementType=null,pk.prototype.dataElementType=null;class kk extends pk{parsePrimitiveData(t,e,n,i){return vk(t,e,n,i)}parseArrayData(t,e,n,i){return vk(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?s:a,c="x"===o.axis?s:a,u=[];let d,h,f,p;for(d=n,h=n+i;d<h;++d)p=e[d],f={},f[r.axis]=r.parse(f_(p,l),d),u.push(mk(f_(p,c),f,o,d));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,s=yk(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),u=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d);this.updateSharedOptions(d,i,u);for(let u=e;u<e+n;u++){const e=this.getParsed(u),n=r||Jb(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(u),f=this._calculateBarIndexPixels(u,c),p=(e._stacks||{})[s.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||yk(e._custom)||o===p._top||o===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=d||this.resolveDataElementOptions(u,t[u].active?"active":i));const m=g.options||t[u].options;bk(g,m,p,o),xk(g,m,c.ratio),this.updateElement(t[u],u,g,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,o=i.length,s=[];let a,l;for(a=0;a<o;++a)if(l=i[a],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(Jb(t)||isNaN(t))continue}if((!1===r||-1===s.indexOf(l.stack)||void 0===r&&void 0===l.stack)&&s.push(l.stack),l.index===t)break}return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const s=t.barThickness;return{min:s||gk(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:i,minBarLength:r}}=this,o=i||0,s=this.getParsed(t),a=s._custom,l=yk(a);let c,u,d=s[e.axis],h=0,f=n?this.applyStack(e,s,n):d;f!==d&&(h=f-d,f=d),l&&(d=a.barStart,f=a.barEnd-a.barStart,0!==d&&C_(d)!==C_(a.barEnd)&&(h=0),h+=d);const p=Jb(i)||l?h:i;let g=e.getPixelForValue(p);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(h+f):g,u=c-g,Math.abs(u)<r&&(u=function(t,e,n){return 0!==t?C_(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,o)*r,d===o&&(g-=u/2),c=g+u),g===e.getPixelForValue(o)){const t=C_(u)*e.getLineWidthForValue(o)/2;g+=t,u-=t}return{size:u,base:g,head:c,center:c+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=e_(i.maxBarThickness,1/0);let s,a;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,s;return Jb(r)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=r*i,s=1),{chunk:o/i,ratio:s,start:e.pixels[t]-o/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}kk.id="bar",kk.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},kk.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class $k extends pk{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=e_(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=e_(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,r=this.getParsed(t),o=n.getLabelForValue(r.x),s=i.getLabelForValue(r.y),a=r._custom;return{label:e.label,value:"("+o+", "+s+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:s}=this._cachedMeta,a=this.resolveDataElementOptions(e,i),l=this.getSharedOptions(a),c=this.includeOptions(i,l),u=o.axis,d=s.axis;for(let a=e;a<e+n;a++){const e=t[a],n=!r&&this.getParsed(a),l={},h=l[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[u]),f=l[d]=r?s.getBasePixel():s.getPixelForValue(n[d]);l.skip=isNaN(h)||isNaN(f),c&&(l.options=this.resolveDataElementOptions(a,e.active?"active":i),r&&(l.options.radius=0)),this.updateElement(e,a,l,i)}this.updateSharedOptions(l,i,a)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=e_(n&&n._custom,r),i}}$k.id="bubble",$k.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},$k.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Sk extends pk{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,s=t=>+n[t];if(Zb(n[t])){const{key:t="value"}=this._parsing;s=e=>+f_(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=s(r)}}_getRotation(){return L_(this.options.rotation-90)}_getCircumference(){return L_(this.options.circumference)}_getRotationExtents(){let t=y_,e=-y_;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,o=0,s=0;if(e<y_){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,i)=>z_(t,a,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>z_(t,a,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,d),m=f(x_,u,h),v=p(v_,c,d),y=p(v_+x_,u,h);i=(g-v)/2,r=(m-y)/2,o=-(g+v)/2,s=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:s}}(h,d,a),v=(n.width-o)/f,y=(n.height-o)/p,b=Math.max(Math.min(v,y)/2,0),_=n_(this.options.radius,b),w=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,i.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/y_)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=r&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,f=this.resolveDataElementOptions(e,i),p=this.getSharedOptions(f),g=this.includeOptions(i,p);let m,v=this._getRotation();for(m=0;m<e;++m)v+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:h,innerRadius:d};g&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),v+=e,this.updateElement(n,m,o,i)}this.updateSharedOptions(p,i,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?y_*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Nx(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,s,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,s=o.controller,s!==this&&s.configure();break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=s.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(e_(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Sk.id="doughnut",Sk.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Sk.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},Sk.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Xb(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class Ck extends pk{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=function(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:h}=s.getUserBounds();d&&(r=F_(Math.min(Qw(a,s.axis,c).lo,n?i:Qw(e,l,s.getPixelForValue(c)).lo),0,i-1)),o=h?F_(Math.max(Qw(a,s.axis,u).hi+1,n?0:Qw(e,l,s.getPixelForValue(u)).hi+1),r,i)-r:i-r}return{start:r,count:o}}(e,i,o);this._drawStart=s,this._drawCount=a,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}(e)&&(s=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(i,s,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=o.axis,f=s.axis,{spanGaps:p,segment:g}=this.options,m=O_(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),p=v?e:{},b=Jb(n[f]),_=p[h]=o.getPixelForValue(n[h],c),w=p[f]=r||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[f],c);p.skip=isNaN(_)||isNaN(w)||b,p.stop=c>0&&n[h]-y[h]>m,g&&(p.parsed=n,p.raw=l.data[c]),d&&(p.options=u||this.resolveDataElementOptions(c,e.active?"active":i)),v||this.updateElement(e,c,p,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ck.id="line",Ck.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Ck.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Mk extends pk{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Nx(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,s=this.getDataset(),a=o.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,d=l.getIndexAngle(0)-.5*v_;let h,f=d;const p=360/this.countVisibleElements();for(h=0;h<e;++h)f+=this._computeAngle(h,i,p);for(h=e;h<e+n;h++){const e=t[h];let n=f,g=f+this._computeAngle(h,i,p),m=o.getDataVisibility(h)?l.getDistanceFromCenterForValue(s.data[h]):0;f=g,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=g=d));const v={x:c,y:u,innerRadius:0,outerRadius:m,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,v,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let n=0;return e.data.forEach(((e,i)=>{!isNaN(t.data[i])&&this.chart.getDataVisibility(i)&&n++})),n}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?L_(this.resolveDataElementOptions(t,e).angle||n):0}}Mk.id="polarArea",Mk.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Mk.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Ok extends Sk{}Ok.id="pie",Ok.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Dk extends pk{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this.getDataset(),o=this._cachedMeta.rScale,s="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),l=o.getPointPositionForValue(a,r.data[a]),c=s?o.xCenter:l.x,u=s?o.yCenter:l.y,d={x:c,y:u,angle:l.angle,skip:isNaN(c)||isNaN(u),options:n};this.updateElement(e,a,d,i)}}}Dk.id="radar",Dk.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Dk.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Tk extends Ck{}Tk.id="scatter",Tk.defaults={showLine:!1,fill:!1},Tk.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Lk=Object.freeze({__proto__:null,BarController:kk,BubbleController:$k,DoughnutController:Sk,LineController:Ck,PolarAreaController:Mk,PieController:Ok,RadarController:Dk,ScatterController:Tk});function Ak(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ek{constructor(t){this.options=t||{}}formats(){return Ak()}parse(t,e){return Ak()}format(t,e){return Ak()}add(t,e,n){return Ak()}diff(t,e,n){return Ak()}startOf(t,e,n){return Ak()}endOf(t,e){return Ak()}}Ek.override=function(t){Object.assign(Ek.prototype,t)};var Ik={_date:Ek};function Pk(t,e){return"native"in t?{x:t.x,y:t.y}:Tx(t,e)}function Bk(t,e,n,i){const{controller:r,data:o,_sorted:s}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&s&&o.length){const t=a._reversePixels?tx:Qw;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),s=t(o,e,n+r);return{lo:i.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function zk(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:a}=o[t],{lo:l,hi:c}=Bk(o[t],e,s,r);for(let t=l;t<=c;++t){const e=a[t];e.skip||i(e,n,t)}}}function Fk(t,e,n,i){const r=[];if(!Iw(e,t.chartArea,t._minPadding))return r;return zk(t,n,e,(function(t,n,o){t.inRange(e.x,e.y,i)&&r.push({element:t,datasetIndex:n,index:o})}),!0),r}function Rk(t,e,n,i,r){const o=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let s=Number.POSITIVE_INFINITY,a=[];if(!Iw(e,t.chartArea,t._minPadding))return a;return zk(t,n,e,(function(n,l,c){if(i&&!n.inRange(e.x,e.y,r))return;const u=n.getCenterPoint(r);if(!Iw(u,t.chartArea,t._minPadding)&&!n.inRange(e.x,e.y,r))return;const d=o(e,u);d<s?(a=[{element:n,datasetIndex:l,index:c}],s=d):d===s&&a.push({element:n,datasetIndex:l,index:c})})),a}function Nk(t,e,n,i){const r=Pk(e,t),o=[],s=n.axis,a="x"===s?"inXRange":"inYRange";let l=!1;return function(t,e){const n=t.getSortedVisibleDatasetMetas();let i,r,o;for(let t=0,s=n.length;t<s;++t){({index:i,data:r}=n[t]);for(let t=0,n=r.length;t<n;++t)o=r[t],o.skip||e(o,i,t)}}(t,((t,e,n)=>{t[a](r[s],i)&&o.push({element:t,datasetIndex:e,index:n}),t.inRange(r.x,r.y,i)&&(l=!0)})),n.intersect&&!l?[]:o}var jk={modes:{index(t,e,n,i){const r=Pk(e,t),o=n.axis||"x",s=n.intersect?Fk(t,r,o,i):Rk(t,r,o,!1,i),a=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&a.push({element:n,datasetIndex:t.index,index:e})})),a):[]},dataset(t,e,n,i){const r=Pk(e,t),o=n.axis||"xy";let s=n.intersect?Fk(t,r,o,i):Rk(t,r,o,!1,i);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,i)=>Fk(t,Pk(e,t),n.axis||"xy",i),nearest:(t,e,n,i)=>Rk(t,Pk(e,t),n.axis||"xy",n.intersect,i),x:(t,e,n,i)=>(n.axis="x",Nk(t,e,n,i)),y:(t,e,n,i)=>(n.axis="y",Nk(t,e,n,i))}};const qk=["left","top","right","bottom"];function Hk(t,e){return t.filter((t=>t.pos===e))}function Wk(t,e){return t.filter((t=>-1===qk.indexOf(t.pos)&&t.box.axis===e))}function Vk(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Uk(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!qk.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:s&&e.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:s&&e.availableHeight)}return n}function Gk(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Kk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Yk(t,e,n,i){const{pos:r,box:o}=n,s=t.maxPadding;if(!Zb(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&Kk(s,o.getPadding());const a=Math.max(0,e.outerWidth-Gk(s,t,"left","right")),l=Math.max(0,e.outerHeight-Gk(s,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Jk(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function Xk(t,e,n,i){const r=[];let o,s,a,l,c,u;for(o=0,s=t.length,c=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Jk(a.horizontal,e));const{same:s,other:d}=Yk(e,n,a,i);c|=s&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&Xk(r,e,n,i)||u}function Zk(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Qk(t,e,n,i){const r=n.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=e.w*c,o=l.size||t.height;g_(l.start)&&(s=l.start),t.fullSize?Zk(t,r.left,s,n.outerWidth-r.right-r.left,o):Zk(t,e.left+l.placed,s,i,o),l.start=s,l.placed+=i,s=t.bottom}else{const i=e.h*c,s=l.size||t.width;g_(l.start)&&(o=l.start),t.fullSize?Zk(t,o,r.top,s,n.outerHeight-r.bottom-r.top):Zk(t,o,e.top+l.placed,s,i),l.start=o,l.placed+=i,o=t.right}}e.x=o,e.y=s}Ow.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var t$={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Kw(t.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,o,s,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:s,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}(t),n=Vk(e.filter((t=>t.box.fullSize)),!0),i=Vk(Hk(e,"left"),!0),r=Vk(Hk(e,"right")),o=Vk(Hk(e,"top"),!0),s=Vk(Hk(e,"bottom")),a=Wk(e,"x"),l=Wk(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:Hk(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;r_(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},r);Kk(h,Kw(i));const f=Object.assign({maxPadding:h,w:o,h:s,x:r.left,y:r.top},r),p=Uk(l.concat(c),d);Xk(a.fullSize,f,d,p),Xk(l,f,d,p),Xk(c,f,d,p)&&Xk(l,f,d,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Qk(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Qk(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},r_(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h)}))}};class e${acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class n$ extends e${acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const i$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},r$=t=>null===t||""===t;const o$=!!Ix&&{passive:!0};function s$(t,e,n){t.canvas.removeEventListener(e,n,o$)}function a$(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{for(const e of t)for(const t of e.addedNodes)if(t===i||t.contains(i))return n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function l$(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{for(const e of t)for(const t of e.removedNodes)if(t===i||t.contains(i))return n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const c$=new Map;let u$=0;function d$(){const t=window.devicePixelRatio;t!==u$&&(u$=t,c$.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function h$(t,e,n){const i=t.canvas,r=i&&Sx(i);if(!r)return;const o=Vb(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),s=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return s.observe(r),function(t,e){c$.size||window.addEventListener("resize",d$),c$.set(t,e)}(t,o),s}function f$(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){c$.delete(t),c$.size||window.removeEventListener("resize",d$)}(t)}function p$(t,e,n){const i=t.canvas,r=Vb((e=>{null!==t.ctx&&n(function(t,e){const n=i$[t.type]||t.type,{x:i,y:r}=Tx(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,o$)}(i,e,r),r}class g$ extends e${acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",r$(r)){const e=Px(t,"width");void 0!==e&&(t.width=e)}if(r$(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Px(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];Jb(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:a$,detach:l$,resize:h$}[e]||p$;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:f$,detach:f$,resize:f$}[e]||s$)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return Ax(t,e,n,i)}isAttached(t){const e=Sx(t);return!(!e||!e.isConnected)}}class m${constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return O_(this.x)&&O_(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}m$.defaults={},m$.defaultRoutes=void 0;const v$={values:t=>Xb(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const s=S_(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Nx(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(S_(t)));return 1===i||2===i||5===i?v$.numeric.call(this,t,e,n):""}};var y$={formatters:v$};function b$(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=r.length,s=r[0],a=r[o-1],l=[];if(o>i)return function(t,e,n,i){let r,o=0,s=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===s&&(e.push(t[r]),o++,s=n[o*i])}(e,l,r,o/i),l;const c=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(r,e,i);if(o>0){let t,n;const i=o>1?Math.round((a-s)/(o-1)):null;for(_$(e,l,c,Jb(i)?0:s-i,s),t=0,n=o-1;t<n;t++)_$(e,l,c,r[t],r[t+1]);return _$(e,l,c,a,Jb(i)?e.length:a+i),l}return _$(e,l,c),l}function _$(t,e,n,i,r){const o=e_(i,0),s=Math.min(e_(r,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<s;l++)l===c&&(e.push(t[l]),u++,c=Math.round(o+u*n))}Ow.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:y$.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Ow.route("scale.ticks","color","","color"),Ow.route("scale.grid","color","","borderColor"),Ow.route("scale.grid","borderColor","","borderColor"),Ow.route("scale.title","color","","color"),Ow.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),Ow.describe("scales",{_fallback:"scale"}),Ow.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const w$=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function x$(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function k$(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-o,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<o-a||c>s+a)))return c}function $$(t){return t.drawTicks?t.tickLength:0}function S$(t,e){if(!t.display)return 0;const n=Yw(t.font,e),i=Kw(t.padding);return(Xb(t.text)?t.text.length:1)*n.lineHeight+i.height}function C$(t,e,n){let i=Ub(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class M$ extends m${constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=t_(t,Number.POSITIVE_INFINITY),e=t_(e,Number.NEGATIVE_INFINITY),n=t_(n,Number.POSITIVE_INFINITY),i=t_(i,Number.NEGATIVE_INFINITY),{min:t_(t,n),max:t_(e,i),minDefined:Qb(t),maxDefined:Qb(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:t_(n,t_(i,n)),max:t_(i,t_(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){i_(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,o=n_(e,(r-i)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(i,-Math.abs(o)),max:s(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?x$(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=b$(this,this.ticks),this._labelSizes=null),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){i_(this.options.afterUpdate,[this])}beforeSetDimensions(){i_(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){i_(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),i_(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){i_(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=i_(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){i_(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){i_(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,r=e.maxRotation;let o,s,a,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=F_(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:h/(n-1),u+6>o&&(o=h/(n-(t.offset?.5:1)),s=this.maxHeight-$$(t.grid)-e.padding-S$(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=A_(Math.min(Math.asin(F_((c.highest.height+6)/o,-1,1)),Math.asin(F_(s/a,-1,1))-Math.asin(F_(d/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){i_(this.options.afterCalculateLabelRotation,[this])}beforeFit(){i_(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=S$(i,e.options.font);if(s?(t.width=this.maxWidth,t.height=$$(r)+o):(t.height=this.maxHeight,t.width=$$(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),a=2*n.padding,l=L_(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const e=n.mirror?0:u*r.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*r.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=i*t.width,d=n*e.height):(u=n*t.height,d=i*e.width):"start"===r?d=e.width:"end"===r?u=t.width:(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){i_(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Jb(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=x$(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,r=[],o=[];let s,a,l,c,u,d,h,f,p,g,m,v=0,y=0;for(s=0;s<e;++s){if(c=t[s].label,u=this._resolveTickFontOptions(s),n.font=d=u.string,h=i[d]=i[d]||{data:{},gc:[]},f=u.lineHeight,p=g=0,Jb(c)||Xb(c)){if(Xb(c))for(a=0,l=c.length;a<l;++a)m=c[a],Jb(m)||Xb(m)||(p=Dw(n,h.data,h.gc,p,m),g+=f)}else p=Dw(n,h.data,h.gc,p,c),g=f;r.push(p),o.push(g),v=Math.max(p,v),y=Math.max(g,y)}!function(t,e){r_(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(i,e);const b=r.indexOf(v),_=o.indexOf(y),w=t=>({width:r[t]||0,height:o[t]||0});return{first:w(0),last:w(e-1),widest:w(b),highest:w(_),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return F_(this._alignToPixels?Lw(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Xw(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Xw(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=L_(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,s=r?r.widest.width+o:0,a=r?r.highest.height+o:0;return this.isHorizontal()?a*n>s*i?s/n:a/i:a*i<s*n?a/n:s/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o}=i,s=r.offset,a=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=$$(r),u=[],d=r.setContext(this.getContext()),h=d.drawBorder?d.borderWidth:0,f=h/2,p=function(t){return Lw(n,t,h)};let g,m,v,y,b,_,w,x,k,$,S,C;if("top"===o)g=p(this.bottom),_=this.bottom-c,x=g-f,$=p(t.top)+f,C=t.bottom;else if("bottom"===o)g=p(this.top),$=t.top,C=p(t.bottom)-f,_=g+f,x=this.top+c;else if("left"===o)g=p(this.right),b=this.right-c,w=g-f,k=p(t.left)+f,S=t.right;else if("right"===o)g=p(this.left),k=t.left,S=p(t.right)-f,b=g+f,w=this.left+c;else if("x"===e){if("center"===o)g=p((t.top+t.bottom)/2+.5);else if(Zb(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}$=t.top,C=t.bottom,_=g+f,x=_+c}else if("y"===e){if("center"===o)g=p((t.left+t.right)/2);else if(Zb(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}b=g-f,w=b-c,k=t.left,S=t.right}const M=e_(i.ticks.maxTicksLimit,l),O=Math.max(1,Math.ceil(l/M));for(m=0;m<l;m+=O){const t=r.setContext(this.getContext(m)),e=t.lineWidth,i=t.color,o=r.borderDash||[],l=t.borderDashOffset,c=t.tickWidth,d=t.tickColor,h=t.tickBorderDash||[],f=t.tickBorderDashOffset;v=k$(this,m,s),void 0!==v&&(y=Lw(n,v,e),a?b=w=k=S=y:_=x=$=C=y,u.push({tx1:b,ty1:_,tx2:w,ty2:x,x1:k,y1:$,x2:S,y2:C,width:e,color:i,borderDash:o,borderDashOffset:l,tickWidth:c,tickColor:d,tickBorderDash:h,tickBorderDashOffset:f}))}return this._ticksLength=l,this._borderValue=g,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,d=$$(n.grid),h=d+c,f=u?-c:h,p=-L_(this.labelRotation),g=[];let m,v,y,b,_,w,x,k,$,S,C,M,O="middle";if("top"===i)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(d);x=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(d);x=t.textAlign,_=t.x}else if("x"===e){if("center"===i)w=(t.top+t.bottom)/2+h;else if(Zb(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)+h}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-h;else if(Zb(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?O="top":"end"===a&&(O="bottom"));const D=this._getLabelSizes();for(m=0,v=s.length;m<v;++m){y=s[m],b=y.label;const t=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,$=this._resolveTickFontOptions(m),S=$.lineHeight,C=Xb(b)?b.length:1;const e=C/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d;if(o?(_=k,M="top"===i?"near"===l||0!==p?-C*S+S/2:"center"===l?-D.highest.height/2-e*S+S:-D.highest.height+S/2:"near"===l||0!==p?S/2:"center"===l?D.highest.height/2-e*S:D.highest.height-C*S,u&&(M*=-1)):(w=k,M=(1-C)*S/2),t.showLabelBackdrop){const e=Kw(t.backdropPadding),n=D.heights[m],i=D.widths[m];let r=w+M-e.top,o=_-e.left;switch(O){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":o-=i/2;break;case"right":o-=i}d={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({rotation:p,label:b,font:$,color:n,strokeColor:a,strokeWidth:c,textOffset:M,textAlign:x,textBaseline:O,translation:[_,w],backdrop:d})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-L_(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const s=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(!r)return;const o=n.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let a,l,c,u;this.isHorizontal()?(a=Lw(t,this.left,r)-r/2,l=Lw(t,this.right,o)+o/2,c=u=s):(c=Lw(t,this.top,r)-r/2,u=Lw(t,this.bottom,o)+o/2,a=l=s),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(a,c),e.lineTo(l,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Pw(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let r,o;for(r=0,o=i.length;r<o;++r){const t=i[r],n=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Rw(e,o,0,t.textOffset,n,t)}n&&Bw(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Yw(n.font),o=Kw(n.padding),s=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||Zb(e)?(a+=o.bottom,Xb(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(t,e,n,i){const{top:r,left:o,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=s-r,m=a-o;if(t.isHorizontal()){if(h=Gb(i,o,a),Zb(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:w$(t,n,e);d=a-o}else{if(Zb(n)){const t=Object.keys(n)[0],i=n[t];h=u[t].getPixelForValue(i)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:w$(t,n,e);f=Gb(i,s,r),p="left"===n?-x_:x_}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,e,s);Rw(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:C$(s,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=e_(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===M$.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return Yw(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class O${constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=c_(Object.create(null),[n?Ow.get(n):{},Ow.get(e),t.defaults]);Ow.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");Ow.route(o,r,l,a)}))}(e,t.defaultRoutes);t.descriptors&&Ow.describe(e,t.descriptors)}(t,o,n),this.override&&Ow.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in Ow[i]&&(delete Ow[i][n],this.override&&delete $w[n])}}var D$=new class{constructor(){this.controllers=new O$(pk,"datasets",!0),this.elements=new O$(m$,"elements"),this.plugins=new O$(Object,"plugins"),this.scales=new O$(M$,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):r_(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=p_(t);i_(n["before"+i],[],n),e[t](n),i_(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class T${constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"destroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===i_(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Jb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=e_(n.options&&n.options.plugins,{}),r=function(t){const e=[],n=Object.keys(D$.plugins.items);for(let t=0;t<n.length;t++)e.push(D$.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const r=[],o=t.getContext();for(let s=0;s<e.length;s++){const a=e[s],l=L$(n[a.id],i);null!==l&&r.push({plugin:a,options:A$(t.config,a,l,o)})}return r}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function L$(t,e){return e||!1!==t?!0===t?{}:t:null}function A$(t,e,n,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(n,r);return t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function E$(t,e){const n=Ow.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function I$(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function P$(t){const e=t.options||(t.options={});e.plugins=e_(e.plugins,{}),e.scales=function(t,e){const n=$w[t.type]||{scales:{}},i=e.scales||{},r=E$(t.type,e),o=Object.create(null),s=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!Zb(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=I$(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(a,r),c=n.scales||{};o[a]=o[a]||t,s[t]=u_(Object.create(null),[{axis:a},e,c[a],c[l]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,a=n.indexAxis||E$(r,e),l=($w[r]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),r=n[e+"AxisID"]||o[e]||e;s[r]=s[r]||Object.create(null),u_(s[r],[{axis:e},i[r],l[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];u_(e,[Ow.scales[e.type],Ow.scale])})),s}(t,e)}function B$(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const z$=new Map,F$=new Set;function R$(t,e){let n=z$.get(t);return n||(n=e(),z$.set(t,n),F$.add(n)),n}const N$=(t,e,n)=>{const i=f_(e,n);void 0!==i&&t.add(i)};class j${constructor(t){this._config=function(t){return(t=t||{}).data=B$(t.data),P$(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=B$(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),P$(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return R$(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return R$(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return R$(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return R$(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),s=o.get(e);if(s)return s;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>N$(a,t,e)))),e.forEach((t=>N$(a,i,t))),e.forEach((t=>N$(a,$w[r]||{},t))),e.forEach((t=>N$(a,Ow,t))),e.forEach((t=>N$(a,Sw,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),F$.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,$w[e]||{},Ow.datasets[e]||{},{type:e},Ow,Sw]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:s}=q$(this._resolverCache,t,i);let a=o;if(function(t,e){const{isScriptable:n,isIndexable:i}=sx(t);for(const r of e){const e=n(r),o=i(r),s=(o||e)&&t[r];if(e&&(m_(s)||H$(s))||o&&Xb(s))return!0}return!1}(o,e)){r.$shared=!1;a=ox(o,n=m_(n)?n():n,this.createResolver(t,n,s))}for(const t of e)r[t]=a[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=q$(this._resolverCache,t,n);return Zb(e)?ox(r,e,void 0,i):r}}function q$(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:rx(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)}return o}const H$=t=>Zb(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||m_(t[n])),!1);const W$=["top","bottom","left","right","chartArea"];function V$(t,e){return"top"===t||"bottom"===t||-1===W$.indexOf(t)&&"x"===e}function U$(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function G$(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),i_(n&&n.onComplete,[t],e)}function K$(t){const e=t.chart,n=e.options.animation;i_(n&&n.onProgress,[t],e)}function Y$(t){return $x()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const J$={},X$=t=>{const e=Y$(t);return Object.values(J$).filter((t=>t.canvas===e)).pop()};class Z${constructor(t,e){const n=this.config=new j$(e),i=Y$(t),r=X$(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!$x()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?n$:g$}(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Yb(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new T$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),o.resizeDelay||0),J$[this.id]=this,s&&a?(Xx.listen(this,"complete",G$),Xx.listen(this,"progress",K$),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Jb(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ex(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Aw(this.canvas,this.ctx),this}stop(){return Xx.stop(this),this}resize(t,e){Xx.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ex(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),i_(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){r_(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=I$(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),r_(r,(e=>{const r=e.options,o=r.id,s=I$(o,r),a=e_(r.type,e.dtype);void 0!==r.position&&V$(r.position,s)===V$(e.dposition)||(r.position=e.dposition),i[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(D$.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)})),r_(i,((t,e)=>{t||delete n[e]})),r_(n,(t=>{t$.configure(this,t,t.options),t$.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(U$("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||E$(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=D$.getController(o),{datasetElementType:i,dataElementType:s}=Ow.datasets[o];Object.assign(e.prototype,{dataElementType:D$.getElement(s),datasetElementType:i&&D$.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){r_(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext());r_(this.scales,(t=>{t$.removeBox(this,t)}));const i=this._animationsDisabled=!n.animation;this.ensureScalesHaveIDs(),this.buildOrUpdateScales();if(((t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0})(new Set(Object.keys(this._listeners)),new Set(n.events))&&!!this._responsiveListeners===n.responsive||(this.unbindEvents(),this.bindEvents()),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||r_(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(U$("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;t$.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],r_(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,m_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Xx.has(this)?this.attached&&!Xx.running(this)&&Xx.start(this):(this.draw(),G$({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Pw(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Bw(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,n,i){const r=jk.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Xw(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);g_(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Xx.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Aw(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete J$[this.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};r_(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{i("attach",s),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){r_(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},r_(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,s,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!o_(n,e)&&(this._active=n,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),s=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e){const{_active:n=[],options:i}=this,r=i.hover,o=e;let s=[],a=!1,l=null;return"mouseout"!==t.type&&(s=this.getElementsAtEventForMode(t,r.mode,r,o),l="click"===t.type?this._lastEvent:t),this._lastEvent=null,Iw(t,this.chartArea,this._minPadding)&&(i_(i.onHover,[t,s,this],this),"mouseup"!==t.type&&"click"!==t.type&&"contextmenu"!==t.type||i_(i.onClick,[t,s,this],this)),a=!o_(s,n),(a||e)&&(this._active=s,this._updateHoverStyles(s,n,e)),this._lastEvent=l,a}}const Q$=()=>r_(Z$.instances,(t=>t._plugins.invalidate())),tS=!0;function eS(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(o,s,a,i-c,n+c),l>r?(c=r/l,t.arc(o,s,l,n+c,i-c,!0)):t.arc(o,s,r,n+x_,i-x_),t.closePath(),t.clip()}function nS(t,e,n,i){const r=Vw(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,s=Math.min(o,i*e/2),a=t=>{const e=(n-Math.min(o,t))*i/2;return F_(t,0,Math.min(o,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:F_(r.innerStart,0,s),innerEnd:F_(r.innerEnd,0,s)}}function iS(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function rS(t,e,n,i,r){const{x:o,y:s,startAngle:a,pixelMargin:l,innerRadius:c}=e,u=Math.max(e.outerRadius+i+n-l,0),d=c>0?c+i+n+l:0;let h=0;const f=r-a;if(i){const t=((c>0?c-i:0)+(u>0?u-i:0))/2;h=(f-(0!==t?f*t/(t+i):f))/2}const p=(f-Math.max(.001,f*u-n/v_)/u)/2,g=a+p+h,m=r-p-h,{outerStart:v,outerEnd:y,innerStart:b,innerEnd:_}=nS(e,d,u,m-g),w=u-v,x=u-y,k=g+v/w,$=m-y/x,S=d+b,C=d+_,M=g+b/S,O=m-_/C;if(t.beginPath(),t.arc(o,s,u,k,$),y>0){const e=iS(x,$,o,s);t.arc(e.x,e.y,y,$,m+x_)}const D=iS(C,m,o,s);if(t.lineTo(D.x,D.y),_>0){const e=iS(C,O,o,s);t.arc(e.x,e.y,_,m+x_,O+Math.PI)}if(t.arc(o,s,d,m-_/d,g+b/d,!0),b>0){const e=iS(S,M,o,s);t.arc(e.x,e.y,b,M+Math.PI,g-x_)}const T=iS(w,g,o,s);if(t.lineTo(T.x,T.y),v>0){const e=iS(w,k,o,s);t.arc(e.x,e.y,v,g-x_,k)}t.closePath()}function oS(t,e,n,i,r){const{options:o}=e,s="inner"===o.borderAlign;o.borderWidth&&(s?(t.lineWidth=2*o.borderWidth,t.lineJoin="round"):(t.lineWidth=o.borderWidth,t.lineJoin="bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:r,startAngle:o,pixelMargin:s,fullCircles:a}=e,l=Math.max(e.outerRadius-s,0),c=e.innerRadius+s;let u;for(n&&eS(t,e,o+y_),t.beginPath(),t.arc(i,r,c,o+y_,o,!0),u=0;u<a;++u)t.stroke();for(t.beginPath(),t.arc(i,r,l,o,o+y_),u=0;u<a;++u)t.stroke()}(t,e,s),s&&eS(t,e,r),rS(t,e,n,i,r),t.stroke())}Object.defineProperties(Z$,{defaults:{enumerable:tS,value:Ow},instances:{enumerable:tS,value:J$},overrides:{enumerable:tS,value:$w},registry:{enumerable:tS,value:D$},version:{enumerable:tS,value:"3.6.0"},getChart:{enumerable:tS,value:X$},register:{enumerable:tS,value:(...t)=>{D$.add(...t),Q$()}},unregister:{enumerable:tS,value:(...t)=>{D$.remove(...t),Q$()}}});class sS extends m${constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=function(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*v_&&(o+=y_),{angle:o,distance:r}}(i,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2;return(u>=y_||z_(r,s,a))&&(o>=l+d&&o<=c+d)}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(o+s+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>y_?Math.floor(n/y_):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(i){o=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*o,Math.sin(e)*o),this.circumference>=v_&&(o=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const s=function(t,e,n,i){const{fullCircles:r,startAngle:o,circumference:s}=e;let a=e.endAngle;if(r){rS(t,e,n,i,o+y_);for(let e=0;e<r;++e)t.fill();isNaN(s)||(a=o+s%y_,s%y_==0&&(a+=y_))}return rS(t,e,n,i,a),t.fill(),a}(t,this,o,r);oS(t,this,o,r,s),t.restore()}}function aS(t,e,n=e){t.lineCap=e_(n.borderCapStyle,e.borderCapStyle),t.setLineDash(e_(n.borderDash,e.borderDash)),t.lineDashOffset=e_(n.borderDashOffset,e.borderDashOffset),t.lineJoin=e_(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=e_(n.borderWidth,e.borderWidth),t.strokeStyle=e_(n.borderColor,e.borderColor)}function lS(t,e,n){t.lineTo(n.x,n.y)}function cS(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:s,end:a}=e,l=Math.max(r,s),c=Math.min(o,a),u=r<s&&o<s||r>a&&o>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function uS(t,e,n,i){const{points:r,options:o}=e,{count:s,start:a,loop:l,ilen:c}=cS(r,n,i),u=function(t){return t.stepped?zw:t.tension||"monotone"===t.cubicInterpolationMode?Fw:lS}(o);let d,h,f,{move:p=!0,reverse:g}=i||{};for(d=0;d<=c;++d)h=r[(a+(g?c-d:d))%s],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,o.stepped),f=h);return l&&(h=r[(a+(g?c:0))%s],u(t,f,h,g,o.stepped)),!!l}function dS(t,e,n,i){const r=e.points,{count:o,start:s,ilen:a}=cS(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,f,p,g,m=0,v=0;const y=t=>(s+(c?a-t:t))%o,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=r[y(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=r[y(u)],d.skip)continue;const e=d.x,n=d.y,i=0|e;i===h?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),h=i,v=0,f=p=n),g=n}b()}function hS(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?dS:uS}sS.id="arc",sS.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},sS.defaultRoutes={backgroundColor:"backgroundColor"};const fS="function"==typeof Path2D;function pS(t,e,n,i){fS&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),aS(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,s=hS(e);for(const a of r)aS(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class gS extends m${constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;kx(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return Kx(t,!0===i?[{start:s,end:a,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let s,a=e,l=t[e];for(s=e+1;s<=n;++s){const n=t[s%r];n.skip||n.stop?l.skip||(i=!1,o.push({start:e%r,end:(s-1)%r,loop:i}),e=a=n.stop?s:null):(a=s,l.skip&&(e=s)),l=n}return null!==a&&o.push({start:e%r,end:a%r,loop:i}),o}(n,s,a<s?a+r:a,!!t._fullLoop&&0===s&&a===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=Gx(this,{property:e,start:i,end:i});if(!o.length)return;const s=[],a=function(t){return t.stepped?zx:t.tension||"monotone"===t.cubicInterpolationMode?Fx:Bx}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],d=r[c],h=r[u];if(d===h){s.push(d);continue}const f=a(d,h,Math.abs((i-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],s.push(f)}return 1===s.length?s[0]:s}pathSegment(t,e,n){return hS(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=hS(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const s of i)o&=r(t,this,s,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),pS(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function mS(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}gS.id="line",gS.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},gS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},gS.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class vS extends m${constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return mS(this,t,"x",e)}inYRange(t,e){return mS(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Iw(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Ew(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function yS(t,e){const{x:n,y:i,base:r,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=s/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=o/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function bS(t,e,n,i){return t?0:F_(e,n,i)}function _S(t){const e=yS(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=Uw(i);return{t:bS(r.top,o.top,0,n),r:bS(r.right,o.right,0,e),b:bS(r.bottom,o.bottom,0,n),l:bS(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Gw(r),s=Math.min(e,n),a=t.borderSkipped,l=i||Zb(r);return{topLeft:bS(!l||a.top||a.left,o.topLeft,0,s),topRight:bS(!l||a.top||a.right,o.topRight,0,s),bottomLeft:bS(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:bS(!l||a.bottom||a.right,o.bottomRight,0,s)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function wS(t,e,n,i){const r=null===e,o=null===n,s=t&&!(r&&o)&&yS(t,i);return s&&(r||e>=s.left&&e<=s.right)&&(o||n>=s.top&&n<=s.bottom)}function xS(t,e){t.rect(e.x,e.y,e.w,e.h)}function kS(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+s,radius:t.radius}}vS.id="point",vS.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},vS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class $S extends m${constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=_S(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?jw:xS;var a;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),s(t,kS(o,e,r)),t.clip(),s(t,kS(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),s(t,kS(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return wS(this,t,e,n)}inXRange(t,e){return wS(this,t,null,e)}inYRange(t,e){return wS(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}$S.id="bar",$S.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},$S.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var SS=Object.freeze({__proto__:null,ArcElement:sS,LineElement:gS,PointElement:vS,BarElement:$S});function CS(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function MS(t){t.data.datasets.forEach((t=>{CS(t)}))}var OS={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void MS(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:s}=e,a=t.getDatasetMeta(r),l=o||e.data;if("y"===Jw([s,t.options.indexAxis]))return;if("line"!==a.type)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:d}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(r=F_(Qw(e,o.axis,s).lo,0,n-1)),i=c?F_(Qw(e,o.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,l);if(d<=(n.threshold||4*i))return void CS(e);let h;switch(Jb(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const s=[],a=(n-2)/(o-2);let l=0;const c=e+n-1;let u,d,h,f,p,g=e;for(s[l++]=t[g],u=0;u<o-2;u++){let i,r=0,o=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,v=m-c;for(i=c;i<m;i++)r+=t[i].x,o+=t[i].y;r/=v,o/=v;const y=Math.floor(u*a)+1+e,b=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:_,y:w}=t[g];for(h=f=-1,i=y;i<b;i++)f=.5*Math.abs((_-r)*(t[i].y-w)-(_-t[i].x)*(o-w)),f>h&&(h=f,d=t[i],p=i);s[l++]=d,g=p}return s[l++]=t[c],s}(l,u,d,i,n);break;case"min-max":h=function(t,e,n,i){let r,o,s,a,l,c,u,d,h,f,p=0,g=0;const m=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(r=e;r<e+n;++r){o=t[r],s=(o.x-y)/b*i,a=o.y;const e=0|s;if(e===l)a<h?(h=a,c=r):a>f&&(f=a,u=r),p=(g*p+o.x)/++g;else{const n=r-1;if(!Jb(c)&&!Jb(u)){const e=Math.min(c,u),i=Math.max(c,u);e!==d&&e!==n&&m.push({...t[e],x:p}),i!==d&&i!==n&&m.push({...t[i],x:p})}r>0&&n!==d&&m.push(t[n]),m.push(o),l=e,g=0,h=f=a,c=u=d=r}}return m}(l,u,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h}))},destroy(t){MS(t)}};function DS(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=e_(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(Zb(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Qb(r)&&Math.floor(r)===r?("-"!==i[0]&&"+"!==i[0]||(r=e+r),!(r===e||r<0||r>=n)&&r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}class TS{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:y_},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function LS(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=[],s=i.reverse?e.max:e.min,a=i.reverse?e.min:e.max;let l,c,u;if(u="start"===n?s:"end"===n?a:Zb(n)?n.value:e.getBaseValue(),i.grid.circular)return c=e.getPointPositionForValue(0,s),new TS({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(u)});for(l=0;l<r;++l)o.push(e.getPointPositionForValue(l,u));return o}(t):function(t){const{scale:e={},fill:n}=t;let i,r=null;return"start"===n?r=e.bottom:"end"===n?r=e.top:Zb(n)?r=e.getPixelForValue(n.value):e.getBasePixel&&(r=e.getBasePixel()),Qb(r)?(i=e.isHorizontal(),{x:i?r:null,y:i?null:r}):null}(t)}function AS(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ES(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:s,last:a,point:l}=IS(o,e,"x");if(!(!l||s&&a))if(s)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function IS(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,s=t.points;let a=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],i=s[e.start][n],c=s[e.end][n];if(r>=i&&r<=c){a=r===i,l=r===c;break}}return{first:a,last:l,point:i}}function PS(t){const{chart:e,fill:n,line:i}=t;if(Qb(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,s=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);a.push(BS({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)ES(r,s[t],a)}return new gS({points:r,options:{}})}(t);if("shape"===n)return!0;const r=LS(t);return r instanceof TS?r:BS(r,i)}function BS(t,e){let n=[],i=!1;return Xb(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=AS(t,e,r);const s=r[t],a=r[e];null!==i?(o.push({x:s.x,y:i}),o.push({x:a.x,y:i})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:a.y}))})),o}(t,e),n.length?new gS({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function zS(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Qb(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function FS(t,e,n){t.beginPath(),e.path(t),t.lineTo(e.last().x,n),t.lineTo(e.first().x,n),t.closePath(),t.clip()}function RS(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=B_(r),o=B_(o)),{property:t,start:r,end:o}}function NS(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function jS(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(t.beginPath(),t.rect(s,i,a-s,r-i),t.clip())}function qS(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}function HS(t,e){const{line:n,target:i,property:r,color:o,scale:s}=e,a=function(t,e,n){const i=t.segments,r=t.points,o=e.points,s=[];for(const t of i){let{start:i,end:a}=t;a=AS(i,a,r);const l=RS(n,r[i],r[a],t.loop);if(!e.segments){s.push({source:t,target:l,start:r[i],end:r[a]});continue}const c=Gx(e,l);for(const e of c){const i=RS(n,o[e.start],o[e.end],e.loop),a=Ux(t,r,i);for(const t of a)s.push({source:t,target:e,start:{[n]:NS(l,i,"start",Math.max)},end:{[n]:NS(l,i,"end",Math.min)}})}}return s}(n,i,r);for(const{source:e,target:l,start:c,end:u}of a){const{style:{backgroundColor:a=o}={}}=e,d=!0!==i;t.save(),t.fillStyle=a,jS(t,s,d&&RS(r,c,u)),t.beginPath();const h=!!n.pathSegment(t,e);let f;if(d){h?t.closePath():qS(t,i,u,r);const e=!!i.pathSegment(t,l,{move:h,reverse:!0});f=h&&e,f||qS(t,i,c,r)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function WS(t,e,n){const i=PS(e),{line:r,scale:o,axis:s}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(Pw(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:s,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==r&&(FS(t,i,s.top),HS(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),FS(t,i,s.bottom)),HS(t,{line:n,target:i,color:o,scale:a,property:l}),t.restore()}(t,{line:r,target:i,above:u,below:d,area:n,scale:o,axis:s}),Bw(t))}var VS={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,s,a,l;for(s=0;s<i;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof gS&&(l={visible:t.isDatasetVisible(s),index:s,fill:DS(a,s,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l);for(s=0;s<i;++s)l=r[s],l&&!1!==l.fill&&(l.fill=zS(r,s,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&WS(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&WS(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&WS(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const US=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class GS extends m${constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=i_(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Yw(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=US(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,r,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+s;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*s>o)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+s})),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const g=n+e/2+r.measureText(t.text).width;o>0&&h+i+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),a[o]={left:f,top:h,col:p,width:g,height:i},d=Math.max(d,g),h+=i+s})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=jx(r,this.left,this.width);if(this.isHorizontal()){let r=0,s=Gb(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,s=Gb(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+i}else{let r=0,s=Gb(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,s=Gb(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=s,a.left+=this.left+i,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Pw(t,this),this._draw(),Bw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,s=Ow.color,a=jx(t.rtl,this.left,this.width),l=Yw(o.font),{color:c,padding:u}=o,d=l.size,h=d/2;let f;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=US(o,d),v=this.isHorizontal(),y=this._computeTitleHeight();f=v?{x:Gb(r,this.left+u,this.right-n[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:Gb(r,this.top+y+u,this.bottom-e[0].height),line:0},qx(this.ctx,t.textDirection);const b=m+u;this.legendItems.forEach(((_,w)=>{i.strokeStyle=_.fontColor||c,i.fillStyle=_.fontColor||c;const x=i.measureText(_.text).width,k=a.textAlign(_.textAlign||(_.textAlign=o.textAlign)),$=p+h+x;let S=f.x,C=f.y;a.setWidth(this.width),v?w>0&&S+$+u>this.right&&(C=f.y+=b,f.line++,S=f.x=Gb(r,this.left+u,this.right-n[f.line])):w>0&&C+b>this.bottom&&(S=f.x=S+e[f.line].width+u,f.line++,C=f.y=Gb(r,this.top+y+u,this.bottom-e[f.line].height));!function(t,e,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const r=e_(n.lineWidth,1);if(i.fillStyle=e_(n.fillStyle,s),i.lineCap=e_(n.lineCap,"butt"),i.lineDashOffset=e_(n.lineDashOffset,0),i.lineJoin=e_(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=e_(n.strokeStyle,s),i.setLineDash(e_(n.lineDash,[])),o.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},s=a.xPlus(t,p/2);Ew(i,o,s,e+h)}else{const o=e+Math.max((d-g)/2,0),s=a.leftForLtr(t,p),l=Gw(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?jw(i,{x:s,y:o,w:p,h:g,radius:l}):i.rect(s,o,p,g),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(S),C,_),S=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(k,S+p+h,v?S+$:this.right,t.rtl),function(t,e,n){Rw(i,n.text,t,e+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),C,_),v?f.x+=$+u:f.y+=b})),Hx(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Yw(e.font),i=Kw(e.padding);if(!e.display)return;const r=jx(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=n.size/2,l=i.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=Gb(t.align,u,this.right-d);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+Gb(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=Gb(s,u,u+d);o.textAlign=r.textAlign(Ub(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Rw(o,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=Yw(t.font),n=Kw(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom)for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height)return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if("mousemove"===t&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&i_(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&i_(e.onHover,[t,n,this],this)}else n&&i_(e.onClick,[t,n,this],this)}}var KS={id:"legend",_element:GS,start(t,e,n){const i=t.legend=new GS({ctx:t.ctx,options:n,chart:t});t$.configure(t,i,n),t$.addBox(t,i)},stop(t){t$.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;t$.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const s=t.controller.getStyle(n?0:void 0),a=Kw(s.borderWidth);return{text:e[t.index].label,fillStyle:s.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:s.borderColor,pointStyle:i||s.pointStyle,rotation:s.rotation,textAlign:r||s.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class YS extends m${constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Xb(n.text)?n.text.length:1;this._padding=Kw(n.padding);const r=i*Yw(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=Gb(s,n,r),c=e+t,a=r-n):("left"===o.position?(l=n+t,c=Gb(s,i,e),u=-.5*v_):(l=r-t,c=Gb(s,e,i),u=.5*v_),a=i-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Yw(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(i);Rw(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:a,textAlign:Ub(e.align),textBaseline:"middle",translation:[r,o]})}}var JS={id:"title",_element:YS,start(t,e,n){!function(t,e){const n=new YS({ctx:t.ctx,options:e,chart:t});t$.configure(t,n,e),t$.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;t$.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;t$.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const XS=new WeakMap;var ZS={id:"subtitle",start(t,e,n){const i=new YS({ctx:t.ctx,options:n,chart:t});t$.configure(t,i,n),t$.addBox(t,i),XS.set(t,i)},stop(t){t$.removeBox(t,XS.get(t)),XS.delete(t)},beforeUpdate(t,e,n){const i=XS.get(t);t$.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const QS={average(t){if(!t.length)return!1;let e,n,i=0,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++o}}return{x:i/o,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=I_(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function tC(t,e){return e&&(Xb(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function eC(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function nC(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:t,label:s,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iC(t,e){const n=t._chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=Yw(e.bodyFont),c=Yw(e.titleFont),u=Yw(e.footerFont),d=o.length,h=r.length,f=i.length,p=Kw(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,r_(t.title,b),n.font=l.string,r_(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?s+2+e.boxPadding:0,r_(i,(t=>{r_(t.before,b),r_(t.lines,b),r_(t.after,b)})),y=0,n.font=u.string,r_(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function rC(t,e,n,i){const{x:r,width:o}=n,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),function(t,e,n,i){const{x:r,width:o}=i,s=n.caretSize+n.caretPadding;return"left"===t&&r+o+s>e.width||"right"===t&&r-o-s<0||void 0}(c,t,e,n)&&(c="center"),c}function oC(t,e,n){const i=e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:e.xAlign||rC(t,e,n,i),yAlign:i}}function sC(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,c=r+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Gw(s);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+o:"right"===a&&(p+=Math.max(d,f)+o),{x:F_(p,0,i.width-e.width),y:F_(g,0,i.height-e.height)}}function aC(t,e,n){const i=Kw(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function lC(t){return tC([],eC(t))}function cC(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class uC extends m${constructor(t){super(),this.opacity=0,this._active=[],this._chart=t._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this._chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new nk(this._chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this._chart.getContext(),e=this,n=this._tooltipItems,Xw(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),r=n.title.apply(this,[t]),o=n.afterTitle.apply(this,[t]);let s=[];return s=tC(s,eC(i)),s=tC(s,eC(r)),s=tC(s,eC(o)),s}getBeforeBody(t,e){return lC(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return r_(t,(t=>{const e={before:[],lines:[],after:[]},r=cC(n,t);tC(e.before,eC(r.beforeLabel.call(this,t))),tC(e.lines,r.label.call(this,t)),tC(e.after,eC(r.afterLabel.call(this,t))),i.push(e)})),i}getAfterBody(t,e){return lC(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),r=n.footer.apply(this,[t]),o=n.afterFooter.apply(this,[t]);let s=[];return s=tC(s,eC(i)),s=tC(s,eC(r)),s=tC(s,eC(o)),s}_createItems(t){const e=this._active,n=this._chart.data,i=[],r=[],o=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(nC(this._chart,e[s]));return t.filter&&(l=l.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),r_(l,(e=>{const n=cC(t.callbacks,e);i.push(n.labelColor.call(this,e)),r.push(n.labelPointStyle.call(this,e)),o.push(n.labelTextColor.call(this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=QS[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=iC(this,n),s=Object.assign({},t,e),a=oC(this._chart,n,s),l=sC(n,s,a,this._chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this._chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Gw(s),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,v,y,b,_;return"center"===r?(b=h+p/2,"left"===i?(g=d,m=g-o,y=b+o,_=b-o):(g=d+f,m=g+o,y=b-o,_=b+o),v=g):(m="left"===i?d+Math.max(a,c)+o:"right"===i?d+f-Math.max(l,u)-o:this.caretX,"top"===r?(y=h,b=y-o,g=m-o,v=m+o):(y=h+p,b=y+o,g=m+o,v=m-o),_=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:_}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,s,a;if(r){const l=jx(n.rtl,this.x,this.width);for(t.x=aC(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=Yw(n.titleFont),s=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===r&&(t.y+=n.titleMarginBottom-s)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l,boxPadding:c}=r,u=Yw(r.bodyFont),d=aC(this,"left",r),h=i.x(d),f=a<u.lineHeight?(u.lineHeight-a)/2:0,p=e.y+f;if(r.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=p+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ew(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ew(t,e,n,c)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(h,l-c),n=i.leftForLtr(i.xPlus(h,1),l-c-2),s=Gw(o.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,jw(t,{x:e,y:p,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),jw(t,{x:n,y:p+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,p,l,a),t.strokeRect(e,p,l,a),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Yw(n.bodyFont);let d=u.lineHeight,h=0;const f=jx(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+r},g=f.textAlign(o);let m,v,y,b,_,w,x;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=aC(this,g,n),e.fillStyle=n.bodyColor,r_(this.beforeBody,p),h=s&&"right"!==g?"center"===o?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(m=i[b],v=this.labelTextColors[b],e.fillStyle=v,r_(m.before,p),y=m.lines,s&&y.length&&(this._drawColorBox(e,t,b,f,n),d=Math.max(u.lineHeight,a)),_=0,x=y.length;_<x;++_)p(y[_]),d=u.lineHeight;r_(m.after,p)}h=0,d=u.lineHeight,r_(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,s;if(r){const a=jx(n.rtl,this.x,this.width);for(t.x=aC(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",o=Yw(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:s,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Gw(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(s+u,a),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(s+l-d,a),e.quadraticCurveTo(s+l,a,s+l,a+d),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(s+l,a+c-f),e.quadraticCurveTo(s+l,a+c,s+l-f,a+c),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(s+h,a+c),e.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(s,a+u),e.quadraticCurveTo(s,a,s+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this._chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=QS[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=iC(this,t),s=Object.assign({},n,this._size),a=oC(e,t,s),l=sC(t,s,a,e);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Kw(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),qx(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Hx(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this._chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!o_(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this.update(!0))}handleEvent(t,e){const n=this.options,i=this._active||[];let r=!1,o=[];"mouseout"!==t.type&&(o=this._chart.getElementsAtEventForMode(t,n.mode,n,e),n.reverse&&o.reverse());const s=this._positionChanged(o,t);return r=e||!o_(o,i)||s,r&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=QS[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}uC.positioners=QS;var dC={id:"tooltip",_element:uC,positioners:QS,afterInit(t,e,n){n&&(t.tooltip=new uC({_chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip,n={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",n)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n))},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Kb,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Kb,beforeBody:Kb,beforeLabel:Kb,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Jb(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Kb,afterBody:Kb,beforeFooter:Kb,footer:Kb,afterFooter:Kb}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hC=Object.freeze({__proto__:null,Decimation:OS,Filler:VS,Legend:KS,SubTitle:ZS,Title:JS,Tooltip:dC});function fC(t,e,n){const i=t.indexOf(e);if(-1===i)return((t,e,n)=>"string"==typeof e?t.push(e)-1:isNaN(e)?null:n)(t,e,n);return i!==t.lastIndexOf(e)?n:i}class pC extends M${constructor(t){super(t),this._startValue=void 0,this._valueRange=0}parse(t,e){if(Jb(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:F_(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:fC(n,t,e_(e,t)),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function gC(t,e){const n=[],{bounds:i,step:r,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=t,h=r||1,f=c-1,{min:p,max:g}=e,m=!Jb(o),v=!Jb(s),y=!Jb(l),b=(g-p)/(u+1);let _,w,x,k,$=M_((g-p)/f/h)*h;if($<1e-14&&!m&&!v)return[{value:p},{value:g}];k=Math.ceil(g/$)-Math.floor(p/$),k>f&&($=M_(k*$/f/h)*h),Jb(a)||(_=Math.pow(10,a),$=Math.ceil($*_)/_),"ticks"===i?(w=Math.floor(p/$)*$,x=Math.ceil(g/$)*$):(w=p,x=g),m&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((s-o)/r,$/1e3)?(k=Math.round(Math.min((s-o)/$,c)),$=(s-o)/k,w=o,x=s):y?(w=m?o:w,x=v?s:x,k=l-1,$=(x-w)/k):(k=(x-w)/$,k=D_(k,Math.round(k),$/1e3)?Math.round(k):Math.ceil(k));const S=Math.max(E_($),E_(w));_=Math.pow(10,Jb(a)?S:a),w=Math.round(w*_)/_,x=Math.round(x*_)/_;let C=0;for(m&&(d&&w!==o?(n.push({value:o}),w<o&&C++,D_(Math.round((w+C*$)*_)/_,o,mC(o,b,t))&&C++):w<o&&C++);C<k;++C)n.push({value:Math.round((w+C*$)*_)/_});return v&&d&&x!==s?n.length&&D_(n[n.length-1].value,s,mC(s,b,t))?n[n.length-1].value=s:n.push({value:s}):v&&x!==s||n.push({value:x}),n}function mC(t,e,{horizontal:n,minRotation:i}){const r=L_(i),o=(n?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}pC.id="category",pC.defaults={ticks:{callback:pC.prototype.getLabelForValue}};class vC extends M${constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Jb(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,s=t=>r=n?r:t;if(t){const t=C_(i),e=C_(r);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(i===r){let e=1;(r>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*r)),s(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=gC({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&T_(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Nx(t,this.chart.options.locale)}}class yC extends vC{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qb(t)?t:0,this.max=Qb(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=L_(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function bC(t){return 1===t/Math.pow(10,Math.floor(S_(t)))}yC.id="linear",yC.defaults={ticks:{callback:y$.formatters.numeric}};class _C extends M${constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=vC.prototype.parse.apply(this,[t,e]);if(0!==n)return Qb(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qb(t)?Math.max(0,t):null,this.max=Qb(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t,s=(t,e)=>Math.pow(10,Math.floor(S_(t))+e);n===i&&(n<=0?(r(1),o(10)):(r(s(n,-1)),o(s(i,1)))),n<=0&&r(s(i,-1)),i<=0&&o(s(n,1)),this._zero&&this.min!==this._suggestedMin&&n===s(this.min,0)&&r(s(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(S_(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let o=t_(t.min,Math.pow(10,Math.floor(S_(e.min)))),s=Math.floor(S_(o)),a=Math.floor(o/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{r.push({value:o,major:bC(o)}),++a,10===a&&(a=1,++s,l=s>=0?1:l),o=Math.round(a*Math.pow(10,s)*l)/l}while(s<n||s===n&&a<i);const c=t_(t.max,o);return r.push({value:c,major:bC(o)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&T_(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Nx(t,this.chart.options.locale)}configure(){const t=this.min;super.configure(),this._startValue=S_(t),this._valueRange=S_(this.max)-S_(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(S_(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function wC(t){const e=t.ticks;if(e.display&&t.display){const t=Kw(e.backdropPadding);return e_(e.font&&e.font.size,Ow.font.size)+t.height}return 0}function xC(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function kC(t){const e={l:0,r:t.width,t:0,b:t.height-t.paddingTop},n={},i=[],r=[],o=t.getLabels().length;for(let c=0;c<o;c++){const o=t.options.pointLabels.setContext(t.getPointLabelContext(c));r[c]=o.padding;const u=t.getPointPosition(c,t.drawingArea+r[c]),d=Yw(o.font),h=(s=t.ctx,a=d,l=Xb(l=t._pointLabels[c])?l:[l],{w:Tw(s,a.string,l),h:l.length*a.lineHeight});i[c]=h;const f=t.getIndexAngle(c),p=A_(f),g=xC(p,u.x,h.w,0,180),m=xC(p,u.y,h.h,90,270);g.start<e.l&&(e.l=g.start,n.l=f),g.end>e.r&&(e.r=g.end,n.r=f),m.start<e.t&&(e.t=m.start,n.t=f),m.end>e.b&&(e.b=m.end,n.b=f)}var s,a,l;t._setReductions(t.drawingArea,e,n),t._pointLabelItems=function(t,e,n){const i=[],r=t.getLabels().length,o=t.options,s=wC(o),a=t.getDistanceFromCenterForValue(o.ticks.reverse?t.min:t.max);for(let o=0;o<r;o++){const r=0===o?s/2:0,l=t.getPointPosition(o,a+r+n[o]),c=A_(t.getIndexAngle(o)),u=e[o],d=CC(l.y,u.h,c),h=$C(c),f=SC(l.x,u.w,h);i.push({x:l.x,y:d,textAlign:h,left:f,top:d,right:f+u.w,bottom:d+u.h})}return i}(t,i,r)}function $C(t){return 0===t||180===t?"center":t<180?"left":"right"}function SC(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function CC(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function MC(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,y_);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}function OC(t){return O_(t)?t:0}_C.id="logarithmic",_C.defaults={ticks:{callback:y$.formatters.logarithmic,major:{enabled:!0}}};class DC extends vC{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=wC(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Qb(t)&&!isNaN(t)?t:0,this.max=Qb(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wC(this.options))}generateTickLabels(t){vC.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=i_(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}))}fit(){const t=this.options;t.display&&t.pointLabels.display?kC(this):this.setCenterPoint(0,0,0,0)}_setReductions(t,e,n){let i=e.l/Math.sin(n.l),r=Math.max(e.r-this.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),s=-Math.max(e.b-(this.height-this.paddingTop),0)/Math.cos(n.b);i=OC(i),r=OC(r),o=OC(o),s=OC(s),this.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(i+r)/2),Math.floor(t-(o+s)/2))),this.setCenterPoint(i,r,o,s)}setCenterPoint(t,e,n,i){const r=this.width-e-this.drawingArea,o=t+this.drawingArea,s=n+this.drawingArea,a=this.height-this.paddingTop-i-this.drawingArea;this.xCenter=Math.floor((o+r)/2+this.left),this.yCenter=Math.floor((s+a)/2+this.top+this.paddingTop)}getIndexAngle(t){return B_(t*(y_/this.getLabels().length)+L_(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Jb(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Jb(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Xw(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){const n=this.getIndexAngle(t)-x_;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),MC(this,this.getDistanceFromCenterForValue(this._endValue),e,this.getLabels().length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i}=e,r=this.getLabels().length;let o,s,a;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),o=Yw(e.font),{x:s,y:a,textAlign:l,left:c,top:u,right:d,bottom:h}=t._pointLabelItems[r],{backdropColor:f}=e;if(!Jb(f)){const t=Kw(e.backdropPadding);n.fillStyle=f,n.fillRect(c-t.left,u-t.top,d-c+t.width,h-u+t.height)}Rw(n,t._pointLabels[r],s,a+o.lineHeight/2,o,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){s=this.getDistanceFromCenterForValue(t.value);!function(t,e,n,i){const r=t.ctx,o=e.circular,{color:s,lineWidth:a}=e;!o&&!i||!s||!a||n<0||(r.save(),r.strokeStyle=s,r.lineWidth=a,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),MC(t,n,o,i),r.closePath(),r.stroke(),r.restore())}(this,i.setContext(this.getContext(e-1)),s,r)}})),n.display){for(t.save(),o=this.getLabels().length-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:l}=i;l&&r&&(t.lineWidth=l,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),a=this.getPointPosition(o,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,s)=>{if(0===s&&!e.reverse)return;const a=n.setContext(this.getContext(s)),l=Yw(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,o=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=Kw(a.backdropPadding);t.fillRect(-o/2-e.left,-r-l.size/2-e.top,o+e.width,l.size+e.height)}Rw(t,i.label,0,-r,l,{color:a.color})})),t.restore()}drawTitle(){}}DC.id="radialLinear",DC.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:y$.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5}},DC.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},DC.descriptors={angleLines:{_fallback:"grid"}};const TC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},LC=Object.keys(TC);function AC(t,e){return t-e}function EC(t,e){if(Jb(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let s=e;return"function"==typeof i&&(s=i(s)),Qb(s)||(s="string"==typeof i?n.parse(s,i):n.parse(s)),null===s?null:(r&&(s="week"!==r||!O_(o)&&!0!==o?n.startOf(s,r):n.startOf(s,"isoWeek",o)),+s)}function IC(t,e,n,i){const r=LC.length;for(let o=LC.indexOf(t);o<r-1;++o){const t=TC[LC[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return LC[o]}return LC[r-1]}function PC(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Zw(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function BC(t,e,n){const i=[],r={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,i.push({value:a,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class zC extends M${constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new Ik._date(t.adapters.date);u_(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:EC(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(r=Math.max(r,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=Qb(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Qb(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?IC(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=LC.length-1;o>=LC.indexOf(n);o--){const n=LC[o];if(TC[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return LC[n?LC.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=LC.indexOf(t)+1,n=LC.length;e<n;++e)if(TC[LC[e]].common)return LC[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),BC(this,o,this._majorUnit)}initOffsets(t){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=F_(i,0,o),r=F_(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||IC(r.minUnit,e,n,this._getLabelCapacity(e)),s=e_(r.stepSize,1),a="week"===o&&r.isoWeekday,l=O_(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":o),t.diff(n,e,o)>1e5*s)throw new Error(e+" and "+n+" are too far apart with stepSize of "+s+" "+o);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,s,o),d++)PC(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==d||PC(c,u,f),Object.keys(c).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.time.displayFormats,s=this._unit,a=this._majorUnit,l=s&&o[s],c=a&&o[a],u=n[e],d=a&&c&&u&&u.major,h=this._adapter.format(t,i||(d?c:l)),f=r.ticks.callback;return f?i_(f,[h,e,n],this):h}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=L_(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*r+s*o,h:n*o+s*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,BC(this,[t],this._majorUnit),i),o=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(EC(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ix(t.sort(AC))}}function FC(t,e,n){let i,r,o,s,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Qw(t,"pos",e)),({pos:i,time:o}=t[a]),({pos:r,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Qw(t,"time",e)),({time:i,pos:o}=t[a]),({time:r,pos:s}=t[l]));const c=r-i;return c?o+(s-o)*(e-i)/c:o}zC.id="time",zC.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class RC extends zC{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=FC(e,this.min),this._tableRange=FC(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,s=i.length;o<s;++o)c=i[o+1],a=i[o-1],l=i[o],Math.round((c+a)/2)!==l&&r.push({time:l,pos:o/(s-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(FC(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return FC(this._table,n*this._tableRange+this._minPos,!0)}}RC.id="timeseries",RC.defaults=zC.defaults;const NC=[Lk,SS,hC,Object.freeze({__proto__:null,CategoryScale:pC,LinearScale:yC,LogarithmicScale:_C,RadialLinearScale:DC,TimeScale:zC,TimeSeriesScale:RC})];function jC(e){let i,r=[e[1]],o={};for(let t=0;t<r.length;t+=1)o=n(o,r[t]);return{c(){i=I("canvas"),H(i,o)},m(t,n){L(t,i,n),e[5](i)},p(t,[e]){H(i,o=Kt(r,[t[1]]))},i:t,o:t,d(t){t&&A(i),e[5](null)}}}function qC(t,e,i){Z$.register(...NC);let r,{data:o={labels:[],datasets:[{data:[]}],yMarkers:{},yRegions:[]}}=e,{type:s="line"}=e,{options:a={}}=e,l=null,c=function(t,e){let n=["children","$$scope","$$slots"].concat(e);const i={};for(const e of Object.keys(t))n.includes(e)||(i[e]=t[e]);return i}(e,["data","type","options"]);return ct((()=>{l=new Z$(r,{type:s,data:o,options:a})})),ut((()=>{l&&(l.data=o,l.type=s,l.options=a,l.update())})),dt((()=>{l=null})),t.$$set=t=>{i(7,e=n(n({},e),y(t))),"data"in t&&i(2,o=t.data),"type"in t&&i(3,s=t.type),"options"in t&&i(4,a=t.options)},e=y(e),[r,c,o,s,a,function(t){vt[t?"unshift":"push"]((()=>{r=t,i(0,r)}))}]}class HC extends ee{constructor(t){super(),te(this,t,qC,jC,a,{data:2,type:3,options:4})}}function WC(t){let e,i;const r=[t[0],{type:"line"}];let o={};for(let t=0;t<r.length;t+=1)o=n(o,r[t]);return e=new HC({props:o}),{c(){Xt(e.$$.fragment)},m(t,n){Zt(e,t,n),i=!0},p(t,[n]){const i=1&n?Kt(r,[Yt(t[0]),r[1]]):{};e.$set(i)},i(t){i||(zt(e.$$.fragment,t),i=!0)},o(t){Ft(e.$$.fragment,t),i=!1},d(t){Qt(e,t)}}}function VC(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),y(t)))},[e=y(e)]}class UC extends ee{constructor(t){super(),te(this,t,VC,WC,a,{})}}function GC(e){let n;return{c(){n=I("p"),n.textContent="Statistiken konnten nicht geladen werden :(",q(n,"class","error")},m(t,e){L(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}function KC(e){let n,i;return n=new UC({props:{data:e[1],options:{scales:{x:{ticks:{font:{size:18}}},y:{beginAtZero:!0,ticks:{font:{size:18}}}},plugins:{legend:{position:"bottom",labels:{font:{size:14}}}}}}}),{c(){Xt(n.$$.fragment)},m(t,e){Zt(n,t,e),i=!0},p:t,i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){Qt(n,t)}}}function YC(e){let n,i;return n=new op({props:{positionFixed:!1}}),{c(){Xt(n.$$.fragment)},m(t,e){Zt(n,t,e),i=!0},p:t,i(t){i||(zt(n.$$.fragment,t),i=!0)},o(t){Ft(n.$$.fragment,t),i=!1},d(t){Qt(n,t)}}}function JC(t){let e,n,i,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:YC,then:KC,catch:GC,value:1,error:2,blocks:[,,,]};return qt(t[0](),o),{c(){e=I("div"),n=I("div"),n.textContent="Statistiken",i=z(),o.block.c(),q(n,"class","statscontainerheader svelte-3chnvp"),q(e,"class","statscontainer svelte-3chnvp")},m(t,s){L(t,e,s),O(e,n),O(e,i),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[n]){Ht(o,t=e,n)},i(t){r||(zt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ft(o.blocks[t])}r=!1},d(t){t&&A(e),o.block.d(),o.token=null,o=null}}}function XC(t){const e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),1).getTime()}function ZC(t,e){const n=new Date(t);return n.setMonth(n.getMonth()+e),n.getTime()}function QC(t,e){var n;return n=12*(e.getFullYear()-t.getFullYear()),n-=t.getMonth(),(n+=e.getMonth())<=0?0:n}function tM(t){const e=async()=>{let t=function(){const t=JSON.parse(localStorage.getItem("stats"));return null!==t&&0===QC(new Date(t.timestamp),new Date)&&t.stats}();if(t)return t;let e=await vd.findCached({fields:["customer_id","rented_on","returned_on"],limit:1e6,selector:vd.selectorBuilder().withDocType("rental").withAny(vd.selectorBuilder().withField("returned_on").greaterThan(0).withField("rented_on").greaterThan(0).buildSelectors()).build()}).then((t=>t.docs.map((t=>({customer_id:t.customer_id,timestamp:t.returned_on?t.returned_on:t.rented_on}))))),n=await vd.findCached({fields:["registration_date"],limit:1e6,selector:vd.selectorBuilder().withDocType("customer").build()}).then((t=>t.docs)),i=await vd.findCached({fields:["added"],limit:1e6,selector:vd.selectorBuilder().withDocType("item").withField("status").isNotEqualTo("deleted").build()}).then((t=>t.docs));const r=(t,e,n)=>t<e&&t>=ZC(e,-1*n),o=(new Date).getTime(),s=[],a=[],l=[],c=[],u=[];for(let t=QC(new Date(2018,11),new Date)+1;t>=0;t--){const h=XC(ZC(o,-1*t)),f=e.filter((t=>r(t.timestamp,h,3))).map((t=>t.customer_id)).filter(((t,e,n)=>n.indexOf(t)===e)).length,p=e.filter((t=>r(t.timestamp,h,1))).length,g=n.filter((t=>r(t.registration_date,h,1))).length,m=i.filter((e=>e.added<=ZC(o,-1*t))).length;u.push((d=ZC(h,-1),new Date(d).toLocaleString("de-DE",{month:"short",year:"2-digit"}))),s.push(f),a.push(p),l.push(g),c.push(m)}var d;let h={labels:u,datasets:[{label:"Aktive Nutzer:innen (innerhalb der letzten 3 Monate)",fill:!0,lineTension:.3,backgroundColor:"rgba(184, 185, 210, .3)",borderColor:"rgb(35, 26, 136)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(35, 26, 136)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220, 1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:s},{label:"Anzahl Ausleihen",fill:!0,lineTension:.3,backgroundColor:"rgba(225, 204,230, .3)",borderColor:"rgb(205, 130, 158)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(205, 130, 158)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:a},{label:"Neue Nutzer:innen",fill:!0,lineTension:.3,backgroundColor:"rgba(71, 225, 167, 0.3)",borderColor:"rgb(71, 225, 167)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(71, 225, 167)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:l},{label:"Anzahl Gegenstände",fill:!0,lineTension:.3,backgroundColor:"rgba(189, 224, 254, 0.3)",borderColor:"rgb(189, 224, 254)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(189, 224, 254)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:c}]};return function(t){localStorage.setItem("stats",JSON.stringify({timestamp:(new Date).getTime(),stats:t}))}(h),h};return e(),[e]}class eM extends ee{constructor(t){super(),te(this,t,tM,JC,a,{})}}function nM(e){let n,i,r,o,s,a,l;return r=new Hb({}),a=new eM({}),{c(){n=I("div"),i=I("div"),Xt(r.$$.fragment),o=z(),s=I("div"),Xt(a.$$.fragment),q(i,"class","container svelte-1tr6ndy"),q(s,"class","container svelte-1tr6ndy"),q(n,"class","dashboardcontent svelte-1tr6ndy")},m(t,e){L(t,n,e),O(n,i),Zt(r,i,null),O(n,o),O(n,s),Zt(a,s,null),l=!0},p:t,i(t){l||(zt(r.$$.fragment,t),zt(a.$$.fragment,t),l=!0)},o(t){Ft(r.$$.fragment,t),Ft(a.$$.fragment,t),l=!1},d(t){t&&A(n),Qt(r),Qt(a)}}}class iM extends ee{constructor(t){super(),te(this,t,null,nM,a,{})}}function rM(e){let n,i,r,o,s,a,l,c,u;return n=new Dy({}),r=new De({}),a=new Vd({props:{tabs:xy.map(oM)}}),c=new _e({props:{routes:e[0]}}),{c(){Xt(n.$$.fragment),i=z(),Xt(r.$$.fragment),o=z(),s=I("div"),Xt(a.$$.fragment),l=z(),Xt(c.$$.fragment),q(s,"class","container svelte-zebrrh")},m(t,e){Zt(n,t,e),L(t,i,e),Zt(r,t,e),L(t,o,e),L(t,s,e),Zt(a,s,null),O(s,l),Zt(c,s,null),u=!0},p:t,i(t){u||(zt(n.$$.fragment,t),zt(r.$$.fragment,t),zt(a.$$.fragment,t),zt(c.$$.fragment,t),u=!0)},o(t){Ft(n.$$.fragment,t),Ft(r.$$.fragment,t),Ft(a.$$.fragment,t),Ft(c.$$.fragment,t),u=!1},d(t){Qt(n,t),t&&A(i),Qt(r,t),t&&A(o),t&&A(s),Qt(a),Qt(c)}}}const oM=t=>({title:t.title,route:t.route});function sM(t){const e=new Map;return xy.forEach((t=>e.set(t.route,ne({component:ng,props:{columns:t.columns,filters:t.filters,docType:t.docType,inputs:t.inputs,onData:t.onData}})))),e.set("/logs",Iy),e.set("/settings",ne({component:dg})),e.set("/start",ne({component:iM})),e.set("*",ne({component:{},conditions:[t=>(ge("/start"),!1)]})),vd.onConnected($y),vd.connect(),[e]}return"serviceWorker"in navigator&&!window.Cypress&&window.addEventListener("load",(function(){navigator.serviceWorker.register("service-worker.js").then((function(t){console.debug("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.error("ServiceWorker registration failed: ",t)}))})),new class extends ee{constructor(t){super(),te(this,t,sM,rM,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
